(function(){const ct=document.createElement("link").relList;if(ct&&ct.supports&&ct.supports("modulepreload"))return;for(const Rt of document.querySelectorAll('link[rel="modulepreload"]'))St(Rt);new MutationObserver(Rt=>{for(const gt of Rt)if(gt.type==="childList")for(const lt of gt.addedNodes)lt.tagName==="LINK"&&lt.rel==="modulepreload"&&St(lt)}).observe(document,{childList:!0,subtree:!0});function kt(Rt){const gt={};return Rt.integrity&&(gt.integrity=Rt.integrity),Rt.referrerPolicy&&(gt.referrerPolicy=Rt.referrerPolicy),Rt.crossOrigin==="use-credentials"?gt.credentials="include":Rt.crossOrigin==="anonymous"?gt.credentials="omit":gt.credentials="same-origin",gt}function St(Rt){if(Rt.ep)return;Rt.ep=!0;const gt=kt(Rt);fetch(Rt.href,gt)}})();var b_={410:(L,ct,kt)=>{var St,Rt,gt;/*!
* Backbone.Undo.js v0.2
* 
* Copyright (c)2013 Oliver Sartun
* Released under the MIT License
*
* Documentation and full license available at
* https://github.com/osartun/Backbone.Undo.js
*/(function(lt){Rt=[kt(50),kt(316)],St=lt,gt=typeof St=="function"?St.apply(ct,Rt):St,gt!==void 0&&(L.exports=gt)})(function(lt,K){var et=Array.prototype.slice;function m(O,N,I){return I.length<=4?O.call(N,I[0],I[1],I[2],I[3]):O.apply(N,I)}function k(O,N){return et.call(O,N)}function b(O,N){return O==null?!1:(lt.isArray(N)||(N=k(arguments,1)),lt.all(N,function(I){return I in O}))}var C=function(){var O=!1,N=-1;function I(){N++,O=!0,lt.defer(function(){O=!1})}return function(){return O||I(),N}}();function E(){this.registeredObjects=[],this.cidIndexes=[]}E.prototype={isRegistered:function(O){return O&&O.cid?this.registeredObjects[O.cid]:lt.contains(this.registeredObjects,O)},register:function(O){return this.isRegistered(O)?!1:(O&&O.cid?(this.registeredObjects[O.cid]=O,this.cidIndexes.push(O.cid)):this.registeredObjects.push(O),!0)},unregister:function(O){if(this.isRegistered(O)){if(O&&O.cid)delete this.registeredObjects[O.cid],this.cidIndexes.splice(lt.indexOf(this.cidIndexes,O.cid),1);else{var N=lt.indexOf(this.registeredObjects,O);this.registeredObjects.splice(N,1)}return!0}return!1},get:function(){return lt.map(this.cidIndexes,function(O){return this.registeredObjects[O]},this).concat(this.registeredObjects)}};function x(O,N,I,G){for(var ut=0,B=N.length,mt;ut<B;ut++)if(mt=N[ut],!!mt){if(O==="on"){if(!G.objectRegistry.register(mt))continue}else if(!G.objectRegistry.unregister(mt))continue;lt.isFunction(mt[O])&&mt[O]("all",I,G)}}function F(O,N){var I=N.type,G=N.undoTypes,ut=!G[I]||G[I][O];lt.isFunction(ut)&&ut(N.object,N.before,N.after,N.options)}function Q(O,N,I,G,ut){if(!(I.isCurrentlyUndoRedoing||O==="undo"&&I.pointer===-1||O==="redo"&&I.pointer===I.length-1)){I.isCurrentlyUndoRedoing=!0;var B,mt,A=O==="undo";for(ut?mt=A&&I.pointer===I.length-1||!A&&I.pointer===-1?lt.clone(I.models):et.apply(I.models,A?[0,I.pointer]:[I.pointer,I.length-1]):(B=I.at(A?I.pointer:I.pointer+1),mt=G?I.where({magicFusionIndex:B.get("magicFusionIndex")}):[B]),I.pointer+=(A?-1:1)*mt.length;B=A?mt.pop():mt.shift();)B[O]();I.isCurrentlyUndoRedoing=!1,N.trigger(O,N)}}function st(O,N){var I=O.condition,G=typeof I;return G==="function"?!!m(I,O,N):G==="boolean"?I:!0}function q(O,N,I,G){if(O.track&&!O.isCurrentlyUndoRedoing&&N in G&&st(G[N],I)){var ut=m(G[N].on,G[N],I),B;if(b(ut,"object","before","after")){if(ut.type=N,ut.magicFusionIndex=C(),ut.undoTypes=G,O.pointer<O.length-1)for(var B=O.length-O.pointer-1;B--;)O.pop();O.pointer=O.length,O.add(ut),O.length>O.maximumStackLength&&(O.shift(),O.pointer--)}}}var W={add:{undo:function(O,N,I,G){O.remove(I,G)},redo:function(O,N,I,G){G.index&&(G.at=G.index),O.add(I,G)},on:function(O,N,I){return{object:N,before:void 0,after:O,options:lt.clone(I)}}},remove:{undo:function(O,N,I,G){"index"in G&&(G.at=G.index),O.add(N,G)},redo:function(O,N,I,G){O.remove(N,G)},on:function(O,N,I){return{object:N,before:O,after:void 0,options:lt.clone(I)}}},change:{undo:function(O,N,I,G){lt.isEmpty(N)?lt.each(lt.keys(I),O.unset,O):(O.set(N),G&&G.unsetData&&G.unsetData.before&&G.unsetData.before.length&&lt.each(G.unsetData.before,O.unset,O))},redo:function(O,N,I,G){lt.isEmpty(I)?lt.each(lt.keys(N),O.unset,O):(O.set(I),G&&G.unsetData&&G.unsetData.after&&G.unsetData.after.length&&lt.each(G.unsetData.after,O.unset,O))},on:function(O,N){var I=O.changedAttributes(),G=lt.keys(I),ut=lt.pick(O.previousAttributes(),G),B=lt.keys(ut),mt=(N||(N={})).unsetData={after:[],before:[]};return G.length!=B.length&&(G.length>B.length?lt.each(G,function(A){A in ut||mt.before.push(A)},this):lt.each(B,function(A){A in I||mt.after.push(A)})),{object:O,before:ut,after:I,options:lt.clone(N)}}},reset:{undo:function(O,N,I){O.reset(N)},redo:function(O,N,I){O.reset(I)},on:function(O,N){return{object:O,before:N.previousModels,after:lt.clone(O.models)}}}};function T(){}T.prototype=W;function it(O,N,I,G){if(typeof N=="object")return lt.each(N,function(ut,B){O===2?it(O,ut,I,G):it(O,B,ut,I)});switch(O){case 0:b(I,"undo","redo","on")&&lt.all(lt.pick(I,"undo","redo","on"),lt.isFunction)&&(G[N]=I);break;case 1:G[N]&&lt.isObject(I)&&(G[N]=lt.extend({},G[N],I));break;case 2:delete G[N];break}return this}var U=K.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(O){F("undo",this.attributes)},redo:function(O){F("redo",this.attributes)}}),rt=K.Collection.extend({model:U,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(O){this.maximumStackLength=O}}),$=K.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(O){this.stack=new rt,this.objectRegistry=new E,this.undoTypes=new T,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(N,I){this.stack.setMaxLength(I)},this),O&&O.track&&this.startTracking(),O&&O.register&&(lt.isArray(O.register)||lt.isArguments(O.register)?m(this.register,this,O.register):this.register(O.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(O){q(this.stack,O,k(arguments,1),this.undoTypes)},register:function(){x("on",arguments,this._addToStack,this)},unregister:function(){x("off",arguments,this._addToStack,this)},unregisterAll:function(){m(this.unregister,this,this.objectRegistry.get())},undo:function(O){Q("undo",this,this.stack,O)},undoAll:function(){Q("undo",this,this.stack,!1,!0)},redo:function(O){Q("redo",this,this.stack,O)},redoAll:function(){Q("redo",this,this.stack,!1,!0)},isAvailable:function(O){var N=this.stack,I=N.length;switch(O){case"undo":return I>0&&N.pointer>-1;case"redo":return I>0&&N.pointer<I-1;default:return!1}},merge:function(O){for(var N=lt.isArray(O)?O:k(arguments),I;I=N.pop();)I instanceof $&&I.stack instanceof rt&&(I.stack=this.stack)},addUndoType:function(O,N){it(0,O,N,this.undoTypes)},changeUndoType:function(O,N){it(1,O,N,this.undoTypes)},removeUndoType:function(O){it(2,O,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return lt.extend($,{defaults:function(O){lt.extend($.prototype.defaults,O)},addUndoType:function(O,N){it(0,O,N,W)},changeUndoType:function(O,N){it(1,O,N,W)},removeUndoType:function(O){it(2,O,void 0,W)}}),K.UndoManager=$})},316:(L,ct,kt)=>{var St,Rt;(function(gt){var lt=typeof self=="object"&&self.self===self&&self||typeof kt.g=="object"&&kt.g.global===kt.g&&kt.g;St=[kt(50),kt(895),ct],Rt=(function(K,et,m){lt.Backbone=gt(lt,m,K,et)}).apply(ct,St),Rt!==void 0&&(L.exports=Rt)})(function(gt,lt,K,et){var m=gt.Backbone,k=Array.prototype.slice;lt.VERSION="1.4.1",lt.$=et,lt.noConflict=function(){return gt.Backbone=m,this},lt.emulateHTTP=!1,lt.emulateJSON=!1;var b=lt.Events={},C=/\s+/,E,x=function(R,at,yt,_,bt){var J=0,Y;if(yt&&typeof yt=="object")for(_!==void 0&&("context"in bt)&&bt.context===void 0&&(bt.context=_),Y=K.keys(yt);J<Y.length;J++)at=x(R,at,Y[J],yt[Y[J]],bt);else if(yt&&C.test(yt))for(Y=yt.split(C);J<Y.length;J++)at=R(at,Y[J],_,bt);else at=R(at,yt,_,bt);return at};b.on=function(R,at,yt){if(this._events=x(F,this._events||{},R,at,{context:yt,ctx:this,listening:E}),E){var _=this._listeners||(this._listeners={});_[E.id]=E,E.interop=!1}return this},b.listenTo=function(R,at,yt){if(!R)return this;var _=R._listenId||(R._listenId=K.uniqueId("l")),bt=this._listeningTo||(this._listeningTo={}),J=E=bt[_];J||(this._listenId||(this._listenId=K.uniqueId("l")),J=E=bt[_]=new it(this,R));var Y=Q(R,at,yt,this);if(E=void 0,Y)throw Y;return J.interop&&J.on(at,yt),this};var F=function(R,at,yt,_){if(yt){var bt=R[at]||(R[at]=[]),J=_.context,Y=_.ctx,H=_.listening;H&&H.count++,bt.push({callback:yt,context:J,ctx:J||Y,listening:H})}return R},Q=function(R,at,yt,_){try{R.on(at,yt,_)}catch(bt){return bt}};b.off=function(R,at,yt){return this._events?(this._events=x(st,this._events,R,at,{context:yt,listeners:this._listeners}),this):this},b.stopListening=function(R,at,yt){var _=this._listeningTo;if(!_)return this;for(var bt=R?[R._listenId]:K.keys(_),J=0;J<bt.length;J++){var Y=_[bt[J]];if(!Y)break;Y.obj.off(at,yt,this),Y.interop&&Y.off(at,yt)}return K.isEmpty(_)&&(this._listeningTo=void 0),this};var st=function(R,at,yt,_){if(R){var bt=_.context,J=_.listeners,Y=0,H;if(!at&&!bt&&!yt){for(H=K.keys(J);Y<H.length;Y++)J[H[Y]].cleanup();return}for(H=at?[at]:K.keys(R);Y<H.length;Y++){at=H[Y];var Tt=R[at];if(!Tt)break;for(var te=[],Qt=0;Qt<Tt.length;Qt++){var Ut=Tt[Qt];if(yt&&yt!==Ut.callback&&yt!==Ut.callback._callback||bt&&bt!==Ut.context)te.push(Ut);else{var se=Ut.listening;se&&se.off(at,yt)}}te.length?R[at]=te:delete R[at]}return R}};b.once=function(R,at,yt){var _=x(q,{},R,at,this.off.bind(this));return typeof R=="string"&&yt==null&&(at=void 0),this.on(_,at,yt)},b.listenToOnce=function(R,at,yt){var _=x(q,{},at,yt,this.stopListening.bind(this,R));return this.listenTo(R,_)};var q=function(R,at,yt,_){if(yt){var bt=R[at]=K.once(function(){_(at,bt),yt.apply(this,arguments)});bt._callback=yt}return R};b.trigger=function(R){if(!this._events)return this;for(var at=Math.max(0,arguments.length-1),yt=Array(at),_=0;_<at;_++)yt[_]=arguments[_+1];return x(W,this._events,R,void 0,yt),this};var W=function(R,at,yt,_){if(R){var bt=R[at],J=R.all;bt&&J&&(J=J.slice()),bt&&T(bt,_),J&&T(J,[at].concat(_))}return R},T=function(R,at){var yt,_=-1,bt=R.length,J=at[0],Y=at[1],H=at[2];switch(at.length){case 0:for(;++_<bt;)(yt=R[_]).callback.call(yt.ctx);return;case 1:for(;++_<bt;)(yt=R[_]).callback.call(yt.ctx,J);return;case 2:for(;++_<bt;)(yt=R[_]).callback.call(yt.ctx,J,Y);return;case 3:for(;++_<bt;)(yt=R[_]).callback.call(yt.ctx,J,Y,H);return;default:for(;++_<bt;)(yt=R[_]).callback.apply(yt.ctx,at);return}},it=function(R,at){this.id=R._listenId,this.listener=R,this.obj=at,this.interop=!0,this.count=0,this._events=void 0};it.prototype.on=b.on,it.prototype.off=function(R,at){var yt;this.interop?(this._events=x(st,this._events,R,at,{context:void 0,listeners:void 0}),yt=!this._events):(this.count--,yt=this.count===0),yt&&this.cleanup()},it.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},b.bind=b.on,b.unbind=b.off,K.extend(lt,b);var U=lt.Model=function(R,at){var yt=R||{};at||(at={}),this.preinitialize.apply(this,arguments),this.cid=K.uniqueId(this.cidPrefix),this.attributes={},at.collection&&(this.collection=at.collection),at.parse&&(yt=this.parse(yt,at)||{});var _=K.result(this,"defaults");yt=K.defaults(K.extend({},_,yt),_),this.set(yt,at),this.changed={},this.initialize.apply(this,arguments)};K.extend(U.prototype,b,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(R){return K.clone(this.attributes)},sync:function(){return lt.sync.apply(this,arguments)},get:function(R){return this.attributes[R]},escape:function(R){return K.escape(this.get(R))},has:function(R){return this.get(R)!=null},matches:function(R){return!!K.iteratee(R,this)(this.attributes)},set:function(R,at,yt){if(R==null)return this;var _;if(typeof R=="object"?(_=R,yt=at):(_={})[R]=at,yt||(yt={}),!this._validate(_,yt))return!1;var bt=yt.unset,J=yt.silent,Y=[],H=this._changing;this._changing=!0,H||(this._previousAttributes=K.clone(this.attributes),this.changed={});var Tt=this.attributes,te=this.changed,Qt=this._previousAttributes;for(var Ut in _)at=_[Ut],K.isEqual(Tt[Ut],at)||Y.push(Ut),K.isEqual(Qt[Ut],at)?delete te[Ut]:te[Ut]=at,bt?delete Tt[Ut]:Tt[Ut]=at;if(this.idAttribute in _){var se=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,se,yt)}if(!J){Y.length&&(this._pending=yt);for(var ee=0;ee<Y.length;ee++)this.trigger("change:"+Y[ee],this,Tt[Y[ee]],yt)}if(H)return this;if(!J)for(;this._pending;)yt=this._pending,this._pending=!1,this.trigger("change",this,yt);return this._pending=!1,this._changing=!1,this},unset:function(R,at){return this.set(R,void 0,K.extend({},at,{unset:!0}))},clear:function(R){var at={};for(var yt in this.attributes)at[yt]=void 0;return this.set(at,K.extend({},R,{unset:!0}))},hasChanged:function(R){return R==null?!K.isEmpty(this.changed):K.has(this.changed,R)},changedAttributes:function(R){if(!R)return this.hasChanged()?K.clone(this.changed):!1;var at=this._changing?this._previousAttributes:this.attributes,yt={},_;for(var bt in R){var J=R[bt];K.isEqual(at[bt],J)||(yt[bt]=J,_=!0)}return _?yt:!1},previous:function(R){return R==null||!this._previousAttributes?null:this._previousAttributes[R]},previousAttributes:function(){return K.clone(this._previousAttributes)},fetch:function(R){R=K.extend({parse:!0},R);var at=this,yt=R.success;return R.success=function(_){var bt=R.parse?at.parse(_,R):_;if(!at.set(bt,R))return!1;yt&&yt.call(R.context,at,_,R),at.trigger("sync",at,_,R)},ue(this,R),this.sync("read",this,R)},save:function(R,at,yt){var _;R==null||typeof R=="object"?(_=R,yt=at):(_={})[R]=at,yt=K.extend({validate:!0,parse:!0},yt);var bt=yt.wait;if(_&&!bt){if(!this.set(_,yt))return!1}else if(!this._validate(_,yt))return!1;var J=this,Y=yt.success,H=this.attributes;yt.success=function(Qt){J.attributes=H;var Ut=yt.parse?J.parse(Qt,yt):Qt;if(bt&&(Ut=K.extend({},_,Ut)),Ut&&!J.set(Ut,yt))return!1;Y&&Y.call(yt.context,J,Qt,yt),J.trigger("sync",J,Qt,yt)},ue(this,yt),_&&bt&&(this.attributes=K.extend({},H,_));var Tt=this.isNew()?"create":yt.patch?"patch":"update";Tt==="patch"&&!yt.attrs&&(yt.attrs=_);var te=this.sync(Tt,this,yt);return this.attributes=H,te},destroy:function(R){R=R?K.clone(R):{};var at=this,yt=R.success,_=R.wait,bt=function(){at.stopListening(),at.trigger("destroy",at,at.collection,R)};R.success=function(Y){_&&bt(),yt&&yt.call(R.context,at,Y,R),at.isNew()||at.trigger("sync",at,Y,R)};var J=!1;return this.isNew()?K.defer(R.success):(ue(this,R),J=this.sync("delete",this,R)),_||bt(),J},url:function(){var R=K.result(this,"urlRoot")||K.result(this.collection,"url")||Me();if(this.isNew())return R;var at=this.get(this.idAttribute);return R.replace(/[^\/]$/,"$&/")+encodeURIComponent(at)},parse:function(R,at){return R},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(R){return this._validate({},K.extend({},R,{validate:!0}))},_validate:function(R,at){if(!at.validate||!this.validate)return!0;R=K.extend({},this.attributes,R);var yt=this.validationError=this.validate(R,at)||null;return yt?(this.trigger("invalid",this,yt,K.extend(at,{validationError:yt})),!1):!0}});var rt=lt.Collection=function(R,at){at||(at={}),this.preinitialize.apply(this,arguments),at.model&&(this.model=at.model),at.comparator!==void 0&&(this.comparator=at.comparator),this._reset(),this.initialize.apply(this,arguments),R&&this.reset(R,K.extend({silent:!0},at))},$={add:!0,remove:!0,merge:!0},O={add:!0,remove:!1},N=function(R,at,yt){yt=Math.min(Math.max(yt,0),R.length);var _=Array(R.length-yt),bt=at.length,J;for(J=0;J<_.length;J++)_[J]=R[J+yt];for(J=0;J<bt;J++)R[J+yt]=at[J];for(J=0;J<_.length;J++)R[J+bt+yt]=_[J]};K.extend(rt.prototype,b,{model:U,preinitialize:function(){},initialize:function(){},toJSON:function(R){return this.map(function(at){return at.toJSON(R)})},sync:function(){return lt.sync.apply(this,arguments)},add:function(R,at){return this.set(R,K.extend({merge:!1},at,O))},remove:function(R,at){at=K.extend({},at);var yt=!K.isArray(R);R=yt?[R]:R.slice();var _=this._removeModels(R,at);return!at.silent&&_.length&&(at.changes={added:[],merged:[],removed:_},this.trigger("update",this,at)),yt?_[0]:_},set:function(R,at){if(R!=null){at=K.extend({},$,at),at.parse&&!this._isModel(R)&&(R=this.parse(R,at)||[]);var yt=!K.isArray(R);R=yt?[R]:R.slice();var _=at.at;_!=null&&(_=+_),_>this.length&&(_=this.length),_<0&&(_+=this.length+1);var bt=[],J=[],Y=[],H=[],Tt={},te=at.add,Qt=at.merge,Ut=at.remove,se=!1,ee=this.comparator&&_==null&&at.sort!==!1,ce=K.isString(this.comparator)?this.comparator:null,xe,Ae;for(Ae=0;Ae<R.length;Ae++){xe=R[Ae];var Ve=this.get(xe);if(Ve){if(Qt&&xe!==Ve){var Se=this._isModel(xe)?xe.attributes:xe;at.parse&&(Se=Ve.parse(Se,at)),Ve.set(Se,at),Y.push(Ve),ee&&!se&&(se=Ve.hasChanged(ce))}Tt[Ve.cid]||(Tt[Ve.cid]=!0,bt.push(Ve)),R[Ae]=Ve}else te&&(xe=R[Ae]=this._prepareModel(xe,at),xe&&(J.push(xe),this._addReference(xe,at),Tt[xe.cid]=!0,bt.push(xe)))}if(Ut){for(Ae=0;Ae<this.length;Ae++)xe=this.models[Ae],Tt[xe.cid]||H.push(xe);H.length&&this._removeModels(H,at)}var hr=!1,Le=!ee&&te&&Ut;if(bt.length&&Le?(hr=this.length!==bt.length||K.some(this.models,function(nr,ze){return nr!==bt[ze]}),this.models.length=0,N(this.models,bt,0),this.length=this.models.length):J.length&&(ee&&(se=!0),N(this.models,J,_??this.length),this.length=this.models.length),se&&this.sort({silent:!0}),!at.silent){for(Ae=0;Ae<J.length;Ae++)_!=null&&(at.index=_+Ae),xe=J[Ae],xe.trigger("add",xe,this,at);(se||hr)&&this.trigger("sort",this,at),(J.length||H.length||Y.length)&&(at.changes={added:J,removed:H,merged:Y},this.trigger("update",this,at))}return yt?R[0]:R}},reset:function(R,at){at=at?K.clone(at):{};for(var yt=0;yt<this.models.length;yt++)this._removeReference(this.models[yt],at);return at.previousModels=this.models,this._reset(),R=this.add(R,K.extend({silent:!0},at)),at.silent||this.trigger("reset",this,at),R},push:function(R,at){return this.add(R,K.extend({at:this.length},at))},pop:function(R){var at=this.at(this.length-1);return this.remove(at,R)},unshift:function(R,at){return this.add(R,K.extend({at:0},at))},shift:function(R){var at=this.at(0);return this.remove(at,R)},slice:function(){return k.apply(this.models,arguments)},get:function(R){if(R!=null)return this._byId[R]||this._byId[this.modelId(this._isModel(R)?R.attributes:R,R.idAttribute)]||R.cid&&this._byId[R.cid]},has:function(R){return this.get(R)!=null},at:function(R){return R<0&&(R+=this.length),this.models[R]},where:function(R,at){return this[at?"find":"filter"](R)},findWhere:function(R){return this.where(R,!0)},sort:function(R){var at=this.comparator;if(!at)throw new Error("Cannot sort a set without a comparator");R||(R={});var yt=at.length;return K.isFunction(at)&&(at=at.bind(this)),yt===1||K.isString(at)?this.models=this.sortBy(at):this.models.sort(at),R.silent||this.trigger("sort",this,R),this},pluck:function(R){return this.map(R+"")},fetch:function(R){R=K.extend({parse:!0},R);var at=R.success,yt=this;return R.success=function(_){var bt=R.reset?"reset":"set";yt[bt](_,R),at&&at.call(R.context,yt,_,R),yt.trigger("sync",yt,_,R)},ue(this,R),this.sync("read",this,R)},create:function(R,at){at=at?K.clone(at):{};var yt=at.wait;if(R=this._prepareModel(R,at),!R)return!1;yt||this.add(R,at);var _=this,bt=at.success;return at.success=function(J,Y,H){yt&&_.add(J,H),bt&&bt.call(H.context,J,Y,H)},R.save(null,at),R},parse:function(R,at){return R},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(R,at){return R[at||this.model.prototype.idAttribute||"id"]},values:function(){return new G(this,ut)},keys:function(){return new G(this,B)},entries:function(){return new G(this,mt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(R,at){if(this._isModel(R))return R.collection||(R.collection=this),R;at=at?K.clone(at):{},at.collection=this;var yt;return this.model.prototype?yt=new this.model(R,at):yt=this.model(R,at),yt.validationError?(this.trigger("invalid",this,yt.validationError,at),!1):yt},_removeModels:function(R,at){for(var yt=[],_=0;_<R.length;_++){var bt=this.get(R[_]);if(bt){var J=this.indexOf(bt);this.models.splice(J,1),this.length--,delete this._byId[bt.cid];var Y=this.modelId(bt.attributes,bt.idAttribute);Y!=null&&delete this._byId[Y],at.silent||(at.index=J,bt.trigger("remove",bt,this,at)),yt.push(bt),this._removeReference(bt,at)}}return yt},_isModel:function(R){return R instanceof U},_addReference:function(R,at){this._byId[R.cid]=R;var yt=this.modelId(R.attributes,R.idAttribute);yt!=null&&(this._byId[yt]=R),R.on("all",this._onModelEvent,this)},_removeReference:function(R,at){delete this._byId[R.cid];var yt=this.modelId(R.attributes,R.idAttribute);yt!=null&&delete this._byId[yt],this===R.collection&&delete R.collection,R.off("all",this._onModelEvent,this)},_onModelEvent:function(R,at,yt,_){if(at){if((R==="add"||R==="remove")&&yt!==this)return;if(R==="destroy"&&this.remove(at,_),R==="changeId"){var bt=this.modelId(at.previousAttributes(),at.idAttribute),J=this.modelId(at.attributes,at.idAttribute);bt!=null&&delete this._byId[bt],J!=null&&(this._byId[J]=at)}}this.trigger.apply(this,arguments)}});var I=typeof Symbol=="function"&&Symbol.iterator;I&&(rt.prototype[I]=rt.prototype.values);var G=function(R,at){this._collection=R,this._kind=at,this._index=0},ut=1,B=2,mt=3;I&&(G.prototype[I]=function(){return this}),G.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var R=this._collection.at(this._index);this._index++;var at;if(this._kind===ut)at=R;else{var yt=this._collection.modelId(R.attributes,R.idAttribute);this._kind===B?at=yt:at=[yt,R]}return{value:at,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var A=lt.View=function(R){this.cid=K.uniqueId("view"),this.preinitialize.apply(this,arguments),K.extend(this,K.pick(R,Dt)),this._ensureElement(),this.initialize.apply(this,arguments)},Mt=/^(\S+)\s*(.*)$/,Dt=["model","collection","el","id","attributes","className","tagName","events"];K.extend(A.prototype,b,{tagName:"div",$:function(R){return this.$el.find(R)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(R){return this.undelegateEvents(),this._setElement(R),this.delegateEvents(),this},_setElement:function(R){this.$el=R instanceof lt.$?R:lt.$(R),this.el=this.$el[0]},delegateEvents:function(R){if(R||(R=K.result(this,"events")),!R)return this;this.undelegateEvents();for(var at in R){var yt=R[at];if(K.isFunction(yt)||(yt=this[yt]),!!yt){var _=at.match(Mt);this.delegate(_[1],_[2],yt.bind(this))}}return this},delegate:function(R,at,yt){return this.$el.on(R+".delegateEvents"+this.cid,at,yt),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(R,at,yt){return this.$el.off(R+".delegateEvents"+this.cid,at,yt),this},_createElement:function(R){return document.createElement(R)},_ensureElement:function(){if(this.el)this.setElement(K.result(this,"el"));else{var R=K.extend({},K.result(this,"attributes"));this.id&&(R.id=K.result(this,"id")),this.className&&(R.class=K.result(this,"className")),this.setElement(this._createElement(K.result(this,"tagName"))),this._setAttributes(R)}},_setAttributes:function(R){this.$el.attr(R)}});var X=function(R,at,yt,_){switch(at){case 1:return function(){return R[yt](this[_])};case 2:return function(bt){return R[yt](this[_],bt)};case 3:return function(bt,J){return R[yt](this[_],V(bt,this),J)};case 4:return function(bt,J,Y){return R[yt](this[_],V(bt,this),J,Y)};default:return function(){var bt=k.call(arguments);return bt.unshift(this[_]),R[yt].apply(R,bt)}}},Et=function(R,at,yt,_){K.each(yt,function(bt,J){at[J]&&(R.prototype[J]=X(at,bt,J,_))})},V=function(R,at){return K.isFunction(R)?R:K.isObject(R)&&!at._isModel(R)?Nt(R):K.isString(R)?function(yt){return yt.get(R)}:R},Nt=function(R){var at=K.matches(R);return function(yt){return at(yt.attributes)}},jt={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Lt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};K.each([[rt,jt,"models"],[U,Lt,"attributes"]],function(R){var at=R[0],yt=R[1],_=R[2];at.mixin=function(bt){var J=K.reduce(K.functions(bt),function(Y,H){return Y[H]=0,Y},{});Et(at,bt,J,_)},Et(at,K,yt,_)}),lt.sync=function(R,at,yt){var _=qt[R];K.defaults(yt||(yt={}),{emulateHTTP:lt.emulateHTTP,emulateJSON:lt.emulateJSON});var bt={type:_,dataType:"json"};if(yt.url||(bt.url=K.result(at,"url")||Me()),yt.data==null&&at&&(R==="create"||R==="update"||R==="patch")&&(bt.contentType="application/json",bt.data=JSON.stringify(yt.attrs||at.toJSON(yt))),yt.emulateJSON&&(bt.contentType="application/x-www-form-urlencoded",bt.data=bt.data?{model:bt.data}:{}),yt.emulateHTTP&&(_==="PUT"||_==="DELETE"||_==="PATCH")){bt.type="POST",yt.emulateJSON&&(bt.data._method=_);var J=yt.beforeSend;yt.beforeSend=function(Tt){if(Tt.setRequestHeader("X-HTTP-Method-Override",_),J)return J.apply(this,arguments)}}bt.type!=="GET"&&!yt.emulateJSON&&(bt.processData=!1);var Y=yt.error;yt.error=function(Tt,te,Qt){yt.textStatus=te,yt.errorThrown=Qt,Y&&Y.call(yt.context,Tt,te,Qt)};var H=yt.xhr=lt.ajax(K.extend(bt,yt));return at.trigger("request",at,H,yt),H};var qt={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};lt.ajax=function(){return lt.$.ajax.apply(lt.$,arguments)};var Vt=lt.Router=function(R){R||(R={}),this.preinitialize.apply(this,arguments),R.routes&&(this.routes=R.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$t=/\((.*?)\)/g,Ct=/(\(\?)?:\w+/g,It=/\*\w+/g,ae=/[\-{}\[\]+?.,\\\^$|#\s]/g;K.extend(Vt.prototype,b,{preinitialize:function(){},initialize:function(){},route:function(R,at,yt){K.isRegExp(R)||(R=this._routeToRegExp(R)),K.isFunction(at)&&(yt=at,at=""),yt||(yt=this[at]);var _=this;return lt.history.route(R,function(bt){var J=_._extractParameters(R,bt);_.execute(yt,J,at)!==!1&&(_.trigger.apply(_,["route:"+at].concat(J)),_.trigger("route",at,J),lt.history.trigger("route",_,at,J))}),this},execute:function(R,at,yt){R&&R.apply(this,at)},navigate:function(R,at){return lt.history.navigate(R,at),this},_bindRoutes:function(){if(this.routes){this.routes=K.result(this,"routes");for(var R,at=K.keys(this.routes);(R=at.pop())!=null;)this.route(R,this.routes[R])}},_routeToRegExp:function(R){return R=R.replace(ae,"\\$&").replace($t,"(?:$1)?").replace(Ct,function(at,yt){return yt?at:"([^/?]+)"}).replace(It,"([^?]*?)"),new RegExp("^"+R+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(R,at){var yt=R.exec(at).slice(1);return K.map(yt,function(_,bt){return bt===yt.length-1?_||null:_?decodeURIComponent(_):null})}});var Yt=lt.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},Xt=/^[#\/]|\s+$/g,De=/^\/+|\/+$/g,Xe=/#.*$/;Yt.started=!1,K.extend(Yt.prototype,b,{interval:50,atRoot:function(){var R=this.location.pathname.replace(/[^\/]$/,"$&/");return R===this.root&&!this.getSearch()},matchRoot:function(){var R=this.decodeFragment(this.location.pathname),at=R.slice(0,this.root.length-1)+"/";return at===this.root},decodeFragment:function(R){return decodeURI(R.replace(/%25/g,"%2525"))},getSearch:function(){var R=this.location.href.replace(/#.*/,"").match(/\?.+/);return R?R[0]:""},getHash:function(R){var at=(R||this).location.href.match(/#(.*)$/);return at?at[1]:""},getPath:function(){var R=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return R.charAt(0)==="/"?R.slice(1):R},getFragment:function(R){return R==null&&(this._usePushState||!this._wantsHashChange?R=this.getPath():R=this.getHash()),R.replace(Xt,"")},start:function(R){if(Yt.started)throw new Error("Backbone.history has already been started");if(Yt.started=!0,this.options=K.extend({root:"/"},this.options,R),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(De,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var at=this.root.slice(0,-1)||"/";return this.location.replace(at+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var yt=document.body,_=yt.insertBefore(this.iframe,yt.firstChild).contentWindow;_.document.open(),_.document.close(),_.location.hash="#"+this.fragment}var bt=window.addEventListener||function(J,Y){return attachEvent("on"+J,Y)};if(this._usePushState?bt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?bt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var R=window.removeEventListener||function(at,yt){return detachEvent("on"+at,yt)};this._usePushState?R("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&R("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Yt.started=!1},route:function(R,at){this.handlers.unshift({route:R,callback:at})},checkUrl:function(R){var at=this.getFragment();if(at===this.fragment&&this.iframe&&(at=this.getHash(this.iframe.contentWindow)),at===this.fragment)return!1;this.iframe&&this.navigate(at),this.loadUrl()},loadUrl:function(R){return this.matchRoot()?(R=this.fragment=this.getFragment(R),K.some(this.handlers,function(at){if(at.route.test(R))return at.callback(R),!0})):!1},navigate:function(R,at){if(!Yt.started)return!1;(!at||at===!0)&&(at={trigger:!!at}),R=this.getFragment(R||"");var yt=this.root;(R===""||R.charAt(0)==="?")&&(yt=yt.slice(0,-1)||"/");var _=yt+R;R=R.replace(Xe,"");var bt=this.decodeFragment(R);if(this.fragment!==bt){if(this.fragment=bt,this._usePushState)this.history[at.replace?"replaceState":"pushState"]({},document.title,_);else if(this._wantsHashChange){if(this._updateHash(this.location,R,at.replace),this.iframe&&R!==this.getHash(this.iframe.contentWindow)){var J=this.iframe.contentWindow;at.replace||(J.document.open(),J.document.close()),this._updateHash(J.location,R,at.replace)}}else return this.location.assign(_);if(at.trigger)return this.loadUrl(R)}},_updateHash:function(R,at,yt){if(yt){var _=R.href.replace(/(javascript:|#).*$/,"");R.replace(_+"#"+at)}else R.hash="#"+at}}),lt.history=new Yt;var Ie=function(R,at){var yt=this,_;return R&&K.has(R,"constructor")?_=R.constructor:_=function(){return yt.apply(this,arguments)},K.extend(_,yt,at),_.prototype=K.create(yt.prototype,R),_.prototype.constructor=_,_.__super__=yt.prototype,_};U.extend=rt.extend=Vt.extend=A.extend=Yt.extend=Ie;var Me=function(){throw new Error('A "url" property or function must be specified')},ue=function(R,at){var yt=at.error;at.error=function(_){yt&&yt.call(at.context,R,_,at),R.trigger("error",R,_,at)}};return lt})},210:(L,ct,kt)=>{(function(St){St(kt(631))})(function(St){St.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(gt,lt){return/^[;{}]$/.test(lt)}}),St.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(gt,lt,K,et){return this.jsonMode?/^[\[,{]$/.test(lt)||/^}/.test(K):lt==";"&&et.lexical&&et.lexical.type==")"?!1:/^[;{}]$/.test(lt)&&!/^;/.test(K)}});var Rt=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;St.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(gt,lt,K,et){var m=!1;return this.configuration=="html"&&(m=et.context?Rt.test(et.context.tagName):!1),!m&&(gt=="tag"&&/>$/.test(lt)&&et.context||/^</.test(K))}}),St.defineExtension("commentRange",function(gt,lt,K){var et=this,m=St.innerMode(et.getMode(),et.getTokenAt(lt).state).mode;et.operation(function(){if(gt)et.replaceRange(m.commentEnd,K),et.replaceRange(m.commentStart,lt),lt.line==K.line&&lt.ch==K.ch&&et.setCursor(lt.line,lt.ch+m.commentStart.length);else{var k=et.getRange(lt,K),b=k.indexOf(m.commentStart),C=k.lastIndexOf(m.commentEnd);b>-1&&C>-1&&C>b&&(k=k.substr(0,b)+k.substring(b+m.commentStart.length,C)+k.substr(C+m.commentEnd.length)),et.replaceRange(k,lt,K)}})}),St.defineExtension("autoIndentRange",function(gt,lt){var K=this;this.operation(function(){for(var et=gt.line;et<=lt.line;et++)K.indentLine(et,"smart")})}),St.defineExtension("autoFormatRange",function(gt,lt){var K=this,et=K.getMode(),m=K.getRange(gt,lt).split(`
`),k=St.copyState(et,K.getTokenAt(gt).state),b=K.getOption("tabSize"),C="",E=0,x=gt.ch===0;function F(){C+=`
`,x=!0,++E}for(var Q=0;Q<m.length;++Q){for(var st=new St.StringStream(m[Q],b);!st.eol();){var q=St.innerMode(et,k),W=et.token(st,k),T=st.current();st.start=st.pos,(!x||/\S/.test(T))&&(C+=T,x=!1),!x&&q.mode.newlineAfterToken&&q.mode.newlineAfterToken(W,T,st.string.slice(st.pos)||m[Q+1]||"",q.state)&&F()}!st.pos&&et.blankLine&&et.blankLine(k),!x&&Q<m.length-1&&F()}K.operation(function(){K.replaceRange(C,gt,lt);for(var it=gt.line+1,U=gt.line+E;it<=U;++it)K.indentLine(it,"smart");K.setSelection(gt,K.getCursor(!1))})})})},631:function(L){(function(ct,kt){L.exports=kt()})(this,function(){var ct=navigator.userAgent,kt=navigator.platform,St=/gecko\/\d/i.test(ct),Rt=/MSIE \d/.test(ct),gt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ct),lt=/Edge\/(\d+)/.exec(ct),K=Rt||gt||lt,et=K&&(Rt?document.documentMode||6:+(lt||gt)[1]),m=!lt&&/WebKit\//.test(ct),k=m&&/Qt\/\d+\.\d+/.test(ct),b=!lt&&/Chrome\/(\d+)/.exec(ct),C=b&&+b[1],E=/Opera\//.test(ct),x=/Apple Computer/.test(navigator.vendor),F=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ct),Q=/PhantomJS/.test(ct),st=x&&(/Mobile\/\w+/.test(ct)||navigator.maxTouchPoints>2),q=/Android/.test(ct),W=st||q||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ct),T=st||/Mac/.test(kt),it=/\bCrOS\b/.test(ct),U=/win/i.test(kt),rt=E&&ct.match(/Version\/(\d*\.\d*)/);rt&&(rt=Number(rt[1])),rt&&rt>=15&&(E=!1,m=!0);var $=T&&(k||E&&(rt==null||rt<12.11)),O=St||K&&et>=9;function N(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}var I=function(o,s){var c=o.className,u=N(s).exec(c);if(u){var d=c.slice(u.index+u[0].length);o.className=c.slice(0,u.index)+(d?u[1]+d:"")}};function G(o){for(var s=o.childNodes.length;s>0;--s)o.removeChild(o.firstChild);return o}function ut(o,s){return G(o).appendChild(s)}function B(o,s,c,u){var d=document.createElement(o);if(c&&(d.className=c),u&&(d.style.cssText=u),typeof s=="string")d.appendChild(document.createTextNode(s));else if(s)for(var v=0;v<s.length;++v)d.appendChild(s[v]);return d}function mt(o,s,c,u){var d=B(o,s,c,u);return d.setAttribute("role","presentation"),d}var A;document.createRange?A=function(o,s,c,u){var d=document.createRange();return d.setEnd(u||o,c),d.setStart(o,s),d}:A=function(o,s,c){var u=document.body.createTextRange();try{u.moveToElementText(o.parentNode)}catch{return u}return u.collapse(!0),u.moveEnd("character",c),u.moveStart("character",s),u};function Mt(o,s){if(s.nodeType==3&&(s=s.parentNode),o.contains)return o.contains(s);do if(s.nodeType==11&&(s=s.host),s==o)return!0;while(s=s.parentNode)}function Dt(o){var s;try{s=o.activeElement}catch{s=o.body||null}for(;s&&s.shadowRoot&&s.shadowRoot.activeElement;)s=s.shadowRoot.activeElement;return s}function X(o,s){var c=o.className;N(s).test(c)||(o.className+=(c?" ":"")+s)}function Et(o,s){for(var c=o.split(" "),u=0;u<c.length;u++)c[u]&&!N(c[u]).test(s)&&(s+=" "+c[u]);return s}var V=function(o){o.select()};st?V=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:K&&(V=function(o){try{o.select()}catch{}});function Nt(o){return o.display.wrapper.ownerDocument}function jt(o){return Nt(o).defaultView}function Lt(o){var s=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,s)}}function qt(o,s,c){s||(s={});for(var u in o)o.hasOwnProperty(u)&&(c!==!1||!s.hasOwnProperty(u))&&(s[u]=o[u]);return s}function Vt(o,s,c,u,d){s==null&&(s=o.search(/[^\s\u00a0]/),s==-1&&(s=o.length));for(var v=u||0,y=d||0;;){var S=o.indexOf("	",v);if(S<0||S>=s)return y+(s-v);y+=S-v,y+=c-y%c,v=S+1}}var $t=function(){this.id=null,this.f=null,this.time=0,this.handler=Lt(this.onTimeout,this)};$t.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},$t.prototype.set=function(o,s){this.f=s;var c=+new Date+o;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=c)};function Ct(o,s){for(var c=0;c<o.length;++c)if(o[c]==s)return c;return-1}var It=50,ae={toString:function(){return"CodeMirror.Pass"}},Yt={scroll:!1},Xt={origin:"*mouse"},De={origin:"+move"};function Xe(o,s,c){for(var u=0,d=0;;){var v=o.indexOf("	",u);v==-1&&(v=o.length);var y=v-u;if(v==o.length||d+y>=s)return u+Math.min(y,s-d);if(d+=v-u,d+=c-d%c,u=v+1,d>=s)return u}}var Ie=[""];function Me(o){for(;Ie.length<=o;)Ie.push(ue(Ie)+" ");return Ie[o]}function ue(o){return o[o.length-1]}function R(o,s){for(var c=[],u=0;u<o.length;u++)c[u]=s(o[u],u);return c}function at(o,s,c){for(var u=0,d=c(s);u<o.length&&c(o[u])<=d;)u++;o.splice(u,0,s)}function yt(){}function _(o,s){var c;return Object.create?c=Object.create(o):(yt.prototype=o,c=new yt),s&&qt(s,c),c}var bt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(o){return/\w/.test(o)||o>""&&(o.toUpperCase()!=o.toLowerCase()||bt.test(o))}function Y(o,s){return s?s.source.indexOf("\\w")>-1&&J(o)?!0:s.test(o):J(o)}function H(o){for(var s in o)if(o.hasOwnProperty(s)&&o[s])return!1;return!0}var Tt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function te(o){return o.charCodeAt(0)>=768&&Tt.test(o)}function Qt(o,s,c){for(;(c<0?s>0:s<o.length)&&te(o.charAt(s));)s+=c;return s}function Ut(o,s,c){for(var u=s>c?-1:1;;){if(s==c)return s;var d=(s+c)/2,v=u<0?Math.ceil(d):Math.floor(d);if(v==s)return o(v)?s:c;o(v)?c=v:s=v+u}}function se(o,s,c,u){if(!o)return u(s,c,"ltr",0);for(var d=!1,v=0;v<o.length;++v){var y=o[v];(y.from<c&&y.to>s||s==c&&y.to==s)&&(u(Math.max(y.from,s),Math.min(y.to,c),y.level==1?"rtl":"ltr",v),d=!0)}d||u(s,c,"ltr")}var ee=null;function ce(o,s,c){var u;ee=null;for(var d=0;d<o.length;++d){var v=o[d];if(v.from<s&&v.to>s)return d;v.to==s&&(v.from!=v.to&&c=="before"?u=d:ee=d),v.from==s&&(v.from!=v.to&&c!="before"?u=d:ee=d)}return u??ee}var xe=function(){var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function c(z){return z<=247?o.charAt(z):1424<=z&&z<=1524?"R":1536<=z&&z<=1785?s.charAt(z-1536):1774<=z&&z<=2220?"r":8192<=z&&z<=8203?"w":z==8204?"b":"L"}var u=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,v=/[LRr]/,y=/[Lb1n]/,S=/[1n]/;function P(z,pt,xt){this.level=z,this.from=pt,this.to=xt}return function(z,pt){var xt=pt=="ltr"?"L":"R";if(z.length==0||pt=="ltr"&&!u.test(z))return!1;for(var zt=z.length,Ft=[],Jt=0;Jt<zt;++Jt)Ft.push(c(z.charCodeAt(Jt)));for(var oe=0,de=xt;oe<zt;++oe){var me=Ft[oe];me=="m"?Ft[oe]=de:de=me}for(var Oe=0,we=xt;Oe<zt;++Oe){var Te=Ft[Oe];Te=="1"&&we=="r"?Ft[Oe]="n":v.test(Te)&&(we=Te,Te=="r"&&(Ft[Oe]="R"))}for(var Ne=1,je=Ft[0];Ne<zt-1;++Ne){var tr=Ft[Ne];tr=="+"&&je=="1"&&Ft[Ne+1]=="1"?Ft[Ne]="1":tr==","&&je==Ft[Ne+1]&&(je=="1"||je=="n")&&(Ft[Ne]=je),je=tr}for(var gr=0;gr<zt;++gr){var Ur=Ft[gr];if(Ur==",")Ft[gr]="N";else if(Ur=="%"){var _r=void 0;for(_r=gr+1;_r<zt&&Ft[_r]=="%";++_r);for(var An=gr&&Ft[gr-1]=="!"||_r<zt&&Ft[_r]=="1"?"1":"N",pn=gr;pn<_r;++pn)Ft[pn]=An;gr=_r-1}}for(var Fr=0,xn=xt;Fr<zt;++Fr){var Xr=Ft[Fr];xn=="L"&&Xr=="1"?Ft[Fr]="L":v.test(Xr)&&(xn=Xr)}for(var Wr=0;Wr<zt;++Wr)if(d.test(Ft[Wr])){var Vr=void 0;for(Vr=Wr+1;Vr<zt&&d.test(Ft[Vr]);++Vr);for(var Pr=(Wr?Ft[Wr-1]:xt)=="L",$r=(Vr<zt?Ft[Vr]:xt)=="L",ji=Pr==$r?Pr?"L":"R":xt,go=Wr;go<Vr;++go)Ft[go]=ji;Wr=Vr-1}for(var Jr=[],wi,qr=0;qr<zt;)if(y.test(Ft[qr])){var cu=qr;for(++qr;qr<zt&&y.test(Ft[qr]);++qr);Jr.push(new P(0,cu,qr))}else{var Ri=qr,mo=Jr.length,Jo=pt=="rtl"?1:0;for(++qr;qr<zt&&Ft[qr]!="L";++qr);for(var hn=Ri;hn<qr;)if(S.test(Ft[hn])){Ri<hn&&(Jr.splice(mo,0,new P(1,Ri,hn)),mo+=Jo);var Qo=hn;for(++hn;hn<qr&&S.test(Ft[hn]);++hn);Jr.splice(mo,0,new P(2,Qo,hn)),mo+=Jo,Ri=hn}else++hn;Ri<qr&&Jr.splice(mo,0,new P(1,Ri,qr))}return pt=="ltr"&&(Jr[0].level==1&&(wi=z.match(/^\s+/))&&(Jr[0].from=wi[0].length,Jr.unshift(new P(0,0,wi[0].length))),ue(Jr).level==1&&(wi=z.match(/\s+$/))&&(ue(Jr).to-=wi[0].length,Jr.push(new P(0,zt-wi[0].length,zt)))),pt=="rtl"?Jr.reverse():Jr}}();function Ae(o,s){var c=o.order;return c==null&&(c=o.order=xe(o.text,s)),c}var Ve=[],Se=function(o,s,c){if(o.addEventListener)o.addEventListener(s,c,!1);else if(o.attachEvent)o.attachEvent("on"+s,c);else{var u=o._handlers||(o._handlers={});u[s]=(u[s]||Ve).concat(c)}};function hr(o,s){return o._handlers&&o._handlers[s]||Ve}function Le(o,s,c){if(o.removeEventListener)o.removeEventListener(s,c,!1);else if(o.detachEvent)o.detachEvent("on"+s,c);else{var u=o._handlers,d=u&&u[s];if(d){var v=Ct(d,c);v>-1&&(u[s]=d.slice(0,v).concat(d.slice(v+1)))}}}function nr(o,s){var c=hr(o,s);if(c.length)for(var u=Array.prototype.slice.call(arguments,2),d=0;d<c.length;++d)c[d].apply(null,u)}function ze(o,s,c){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),nr(o,c||s.type,o,s),Ht(s)||s.codemirrorIgnore}function xr(o){var s=o._handlers&&o._handlers.cursorActivity;if(s)for(var c=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),u=0;u<s.length;++u)Ct(c,s[u])==-1&&c.push(s[u])}function mr(o,s){return hr(o,s).length>0}function Sr(o){o.prototype.on=function(s,c){Se(this,s,c)},o.prototype.off=function(s,c){Le(this,s,c)}}function ot(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function Pt(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function Ht(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==!1}function ne(o){ot(o),Pt(o)}function _e(o){return o.target||o.srcElement}function Fe(o){var s=o.which;return s==null&&(o.button&1?s=1:o.button&2?s=3:o.button&4&&(s=2)),T&&o.ctrlKey&&s==1&&(s=3),s}var $e=function(){if(K&&et<9)return!1;var o=B("div");return"draggable"in o||"dragDrop"in o}(),en;function gn(o){if(en==null){var s=B("span","​");ut(o,B("span",[s,document.createTextNode("x")])),o.firstChild.offsetHeight!=0&&(en=s.offsetWidth<=1&&s.offsetHeight>2&&!(K&&et<8))}var c=en?B("span","​"):B("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}var lr;function Vi(o){if(lr!=null)return lr;var s=ut(o,document.createTextNode("AخA")),c=A(s,0,1).getBoundingClientRect(),u=A(s,1,2).getBoundingClientRect();return G(o),!c||c.left==c.right?!1:lr=u.right-c.right<3}var mn=`

b`.split(/\n/).length!=3?function(o){for(var s=0,c=[],u=o.length;s<=u;){var d=o.indexOf(`
`,s);d==-1&&(d=o.length);var v=o.slice(s,o.charAt(d-1)=="\r"?d-1:d),y=v.indexOf("\r");y!=-1?(c.push(v.slice(0,y)),s+=y+1):(c.push(v),s=d+1)}return c}:function(o){return o.split(/\r\n?|\n/)},Cn=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){var s;try{s=o.ownerDocument.selection.createRange()}catch{}return!s||s.parentElement()!=o?!1:s.compareEndPoints("StartToEnd",s)!=0},ii=function(){var o=B("div");return"oncopy"in o?!0:(o.setAttribute("oncopy","return;"),typeof o.oncopy=="function")}(),Mr=null;function cn(o){if(Mr!=null)return Mr;var s=ut(o,B("span","x")),c=s.getBoundingClientRect(),u=A(s,0,1).getBoundingClientRect();return Mr=Math.abs(c.left-u.left)>1}var fr={},pe={};function Zn(o,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),fr[o]=s}function Po(o,s){pe[o]=s}function Mn(o){if(typeof o=="string"&&pe.hasOwnProperty(o))o=pe[o];else if(o&&typeof o.name=="string"&&pe.hasOwnProperty(o.name)){var s=pe[o.name];typeof s=="string"&&(s={name:s}),o=_(s,o),o.name=s.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return Mn("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return Mn("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function $n(o,s){s=Mn(s);var c=fr[s.name];if(!c)return $n(o,"text/plain");var u=c(o,s);if(Br.hasOwnProperty(s.name)){var d=Br[s.name];for(var v in d)d.hasOwnProperty(v)&&(u.hasOwnProperty(v)&&(u["_"+v]=u[v]),u[v]=d[v])}if(u.name=s.name,s.helperType&&(u.helperType=s.helperType),s.modeProps)for(var y in s.modeProps)u[y]=s.modeProps[y];return u}var Br={};function oi(o,s){var c=Br.hasOwnProperty(o)?Br[o]:Br[o]={};qt(s,c)}function Sn(o,s){if(s===!0)return s;if(o.copyState)return o.copyState(s);var c={};for(var u in s){var d=s[u];d instanceof Array&&(d=d.concat([])),c[u]=d}return c}function On(o,s){for(var c;o.innerMode&&(c=o.innerMode(s),!(!c||c.mode==o));)s=c.state,o=c.mode;return c||{mode:o,state:s}}function bi(o,s,c){return o.startState?o.startState(s,c):!0}var ur=function(o,s,c){this.pos=this.start=0,this.string=o,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};ur.prototype.eol=function(){return this.pos>=this.string.length},ur.prototype.sol=function(){return this.pos==this.lineStart},ur.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ur.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ur.prototype.eat=function(o){var s=this.string.charAt(this.pos),c;if(typeof o=="string"?c=s==o:c=s&&(o.test?o.test(s):o(s)),c)return++this.pos,s},ur.prototype.eatWhile=function(o){for(var s=this.pos;this.eat(o););return this.pos>s},ur.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},ur.prototype.skipToEnd=function(){this.pos=this.string.length},ur.prototype.skipTo=function(o){var s=this.string.indexOf(o,this.pos);if(s>-1)return this.pos=s,!0},ur.prototype.backUp=function(o){this.pos-=o},ur.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Vt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Vt(this.string,this.lineStart,this.tabSize):0)},ur.prototype.indentation=function(){return Vt(this.string,null,this.tabSize)-(this.lineStart?Vt(this.string,this.lineStart,this.tabSize):0)},ur.prototype.match=function(o,s,c){if(typeof o=="string"){var u=function(y){return c?y.toLowerCase():y},d=this.string.substr(this.pos,o.length);if(u(d)==u(o))return s!==!1&&(this.pos+=o.length),!0}else{var v=this.string.slice(this.pos).match(o);return v&&v.index>0?null:(v&&s!==!1&&(this.pos+=v[0].length),v)}},ur.prototype.current=function(){return this.string.slice(this.start,this.pos)},ur.prototype.hideFirstChars=function(o,s){this.lineStart+=o;try{return s()}finally{this.lineStart-=o}},ur.prototype.lookAhead=function(o){var s=this.lineOracle;return s&&s.lookAhead(o)},ur.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};function Pe(o,s){if(s-=o.first,s<0||s>=o.size)throw new Error("There is no line "+(s+o.first)+" in the document.");for(var c=o;!c.lines;)for(var u=0;;++u){var d=c.children[u],v=d.chunkSize();if(s<v){c=d;break}s-=v}return c.lines[s]}function Tn(o,s,c){var u=[],d=s.line;return o.iter(s.line,c.line+1,function(v){var y=v.text;d==c.line&&(y=y.slice(0,c.ch)),d==s.line&&(y=y.slice(s.ch)),u.push(y),++d}),u}function Or(o,s,c){var u=[];return o.iter(s,c,function(d){u.push(d.text)}),u}function rn(o,s){var c=s-o.height;if(c)for(var u=o;u;u=u.parent)u.height+=c}function or(o){if(o.parent==null)return null;for(var s=o.parent,c=Ct(s.lines,o),u=s.parent;u;s=u,u=u.parent)for(var d=0;u.children[d]!=s;++d)c+=u.children[d].chunkSize();return c+s.first}function qn(o,s){var c=o.first;t:do{for(var u=0;u<o.children.length;++u){var d=o.children[u],v=d.height;if(s<v){o=d;continue t}s-=v,c+=d.chunkSize()}return c}while(!o.lines);for(var y=0;y<o.lines.length;++y){var S=o.lines[y],P=S.height;if(s<P)break;s-=P}return c+y}function hi(o,s){return s>=o.first&&s<o.first+o.size}function zr(o,s){return String(o.lineNumberFormatter(s+o.firstLineNumber))}function j(o,s,c){if(c===void 0&&(c=null),!(this instanceof j))return new j(o,s,c);this.line=o,this.ch=s,this.sticky=c}function ft(o,s){return o.line-s.line||o.ch-s.ch}function re(o,s){return o.sticky==s.sticky&&ft(o,s)==0}function fe(o){return j(o.line,o.ch)}function Ue(o,s){return ft(o,s)<0?s:o}function qe(o,s){return ft(o,s)<0?o:s}function sr(o,s){return Math.max(o.first,Math.min(s,o.first+o.size-1))}function ke(o,s){if(s.line<o.first)return j(o.first,0);var c=o.first+o.size-1;return s.line>c?j(c,Pe(o,c).text.length):En(s,Pe(o,s.line).text.length)}function En(o,s){var c=o.ch;return c==null||c>s?j(o.line,s):c<0?j(o.line,0):o}function ia(o,s){for(var c=[],u=0;u<s.length;u++)c[u]=ke(o,s[u]);return c}var oa=function(o,s){this.state=o,this.lookAhead=s},Yn=function(o,s,c,u){this.state=s,this.doc=o,this.line=c,this.maxLookAhead=u||0,this.baseTokens=null,this.baseTokenPos=1};Yn.prototype.lookAhead=function(o){var s=this.doc.getLine(this.line+o);return s!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),s},Yn.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},Yn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Yn.fromSaved=function(o,s,c){return s instanceof oa?new Yn(o,Sn(o.mode,s.state),c,s.lookAhead):new Yn(o,Sn(o.mode,s),c)},Yn.prototype.save=function(o){var s=o!==!1?Sn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new oa(s,this.maxLookAhead):s};function Hi(o,s,c,u){var d=[o.state.modeGen],v={};nn(o,s.text,o.doc.mode,c,function(z,pt){return d.push(z,pt)},v,u);for(var y=c.state,S=function(z){c.baseTokens=d;var pt=o.state.overlays[z],xt=1,zt=0;c.state=!0,nn(o,s.text,pt.mode,c,function(Ft,Jt){for(var oe=xt;zt<Ft;){var de=d[xt];de>Ft&&d.splice(xt,1,Ft,d[xt+1],de),xt+=2,zt=Math.min(Ft,de)}if(Jt)if(pt.opaque)d.splice(oe,xt-oe,Ft,"overlay "+Jt),xt=oe+2;else for(;oe<xt;oe+=2){var me=d[oe+1];d[oe+1]=(me?me+" ":"")+"overlay "+Jt}},v),c.state=y,c.baseTokens=null,c.baseTokenPos=1},P=0;P<o.state.overlays.length;++P)S(P);return{styles:d,classes:v.bgClass||v.textClass?v:null}}function Ia(o,s,c){if(!s.styles||s.styles[0]!=o.state.modeGen){var u=ko(o,or(s)),d=s.text.length>o.options.maxHighlightLength&&Sn(o.doc.mode,u.state),v=Hi(o,s,u);d&&(u.state=d),s.stateAfter=u.save(!d),s.styles=v.styles,v.classes?s.styleClasses=v.classes:s.styleClasses&&(s.styleClasses=null),c===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return s.styles}function ko(o,s,c){var u=o.doc,d=o.display;if(!u.mode.startState)return new Yn(u,!0,s);var v=xi(o,s,c),y=v>u.first&&Pe(u,v-1).stateAfter,S=y?Yn.fromSaved(u,y,v):new Yn(u,bi(u.mode),v);return u.iter(v,s,function(P){aa(o,P.text,S);var z=S.line;P.stateAfter=z==s-1||z%5==0||z>=d.viewFrom&&z<d.viewTo?S.save():null,S.nextLine()}),c&&(u.modeFrontier=S.line),S}function aa(o,s,c,u){var d=o.doc.mode,v=new ur(s,o.options.tabSize,c);for(v.start=v.pos=u||0,s==""&&ai(d,c.state);!v.eol();)sa(d,v,c.state),v.start=v.pos}function ai(o,s){if(o.blankLine)return o.blankLine(s);if(o.innerMode){var c=On(o,s);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function sa(o,s,c,u){for(var d=0;d<10;d++){u&&(u[0]=On(o,c).mode);var v=o.token(s,c);if(s.pos>s.start)return v}throw new Error("Mode "+o.name+" failed to advance stream.")}var la=function(o,s,c){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=s||null,this.state=c};function Bi(o,s,c,u){var d=o.doc,v=d.mode,y;s=ke(d,s);var S=Pe(d,s.line),P=ko(o,s.line,c),z=new ur(S.text,o.options.tabSize,P),pt;for(u&&(pt=[]);(u||z.pos<s.ch)&&!z.eol();)z.start=z.pos,y=sa(v,z,P.state),u&&pt.push(new la(z,y,Sn(d.mode,P.state)));return u?pt:new la(z,y,P.state)}function Ao(o,s){if(o)for(;;){var c=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;o=o.slice(0,c.index)+o.slice(c.index+c[0].length);var u=c[1]?"bgClass":"textClass";s[u]==null?s[u]=c[2]:new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(s[u])||(s[u]+=" "+c[2])}return o}function nn(o,s,c,u,d,v,y){var S=c.flattenSpans;S==null&&(S=o.options.flattenSpans);var P=0,z=null,pt=new ur(s,o.options.tabSize,u),xt,zt=o.options.addModeClass&&[null];for(s==""&&Ao(ai(c,u.state),v);!pt.eol();){if(pt.pos>o.options.maxHighlightLength?(S=!1,y&&aa(o,s,u,pt.pos),pt.pos=s.length,xt=null):xt=Ao(sa(c,pt,u.state,zt),v),zt){var Ft=zt[0].name;Ft&&(xt="m-"+(xt?Ft+" "+xt:Ft))}if(!S||z!=xt){for(;P<pt.start;)P=Math.min(pt.start,P+5e3),d(P,z);z=xt}pt.start=pt.pos}for(;P<pt.pos;){var Jt=Math.min(pt.pos,P+5e3);d(Jt,z),P=Jt}}function xi(o,s,c){for(var u,d,v=o.doc,y=c?-1:s-(o.doc.mode.innerMode?1e3:100),S=s;S>y;--S){if(S<=v.first)return v.first;var P=Pe(v,S-1),z=P.stateAfter;if(z&&(!c||S+(z instanceof oa?z.lookAhead:0)<=v.modeFrontier))return S;var pt=Vt(P.text,null,o.options.tabSize);(d==null||u>pt)&&(d=S-1,u=pt)}return d}function Ts(o,s){if(o.modeFrontier=Math.min(o.modeFrontier,s),!(o.highlightFrontier<s-10)){for(var c=o.first,u=s-1;u>c;u--){var d=Pe(o,u).stateAfter;if(d&&(!(d instanceof oa)||u+d.lookAhead<s)){c=u+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,c)}}var Dn=!1,In=!1;function ja(){Dn=!0}function Es(){In=!0}function zi(o,s,c){this.marker=o,this.from=s,this.to=c}function Ui(o,s){if(o)for(var c=0;c<o.length;++c){var u=o[c];if(u.marker==s)return u}}function Xn(o,s){for(var c,u=0;u<o.length;++u)o[u]!=s&&(c||(c=[])).push(o[u]);return c}function Ps(o,s,c){var u=c&&window.WeakSet&&(c.markedSpans||(c.markedSpans=new WeakSet));u&&o.markedSpans&&u.has(o.markedSpans)?o.markedSpans.push(s):(o.markedSpans=o.markedSpans?o.markedSpans.concat([s]):[s],u&&u.add(o.markedSpans)),s.marker.attachLine(o)}function ua(o,s,c){var u;if(o)for(var d=0;d<o.length;++d){var v=o[d],y=v.marker,S=v.from==null||(y.inclusiveLeft?v.from<=s:v.from<s);if(S||v.from==s&&y.type=="bookmark"&&(!c||!v.marker.insertLeft)){var P=v.to==null||(y.inclusiveRight?v.to>=s:v.to>s);(u||(u=[])).push(new zi(y,v.from,P?null:v.to))}}return u}function Ra(o,s,c){var u;if(o)for(var d=0;d<o.length;++d){var v=o[d],y=v.marker,S=v.to==null||(y.inclusiveRight?v.to>=s:v.to>s);if(S||v.from==s&&y.type=="bookmark"&&(!c||v.marker.insertLeft)){var P=v.from==null||(y.inclusiveLeft?v.from<=s:v.from<s);(u||(u=[])).push(new zi(y,P?null:v.from-s,v.to==null?null:v.to-s))}}return u}function Lo(o,s){if(s.full)return null;var c=hi(o,s.from.line)&&Pe(o,s.from.line).markedSpans,u=hi(o,s.to.line)&&Pe(o,s.to.line).markedSpans;if(!c&&!u)return null;var d=s.from.ch,v=s.to.ch,y=ft(s.from,s.to)==0,S=ua(c,d,y),P=Ra(u,v,y),z=s.text.length==1,pt=ue(s.text).length+(z?d:0);if(S)for(var xt=0;xt<S.length;++xt){var zt=S[xt];if(zt.to==null){var Ft=Ui(P,zt.marker);Ft?z&&(zt.to=Ft.to==null?null:Ft.to+pt):zt.to=d}}if(P)for(var Jt=0;Jt<P.length;++Jt){var oe=P[Jt];if(oe.to!=null&&(oe.to+=pt),oe.from==null){var de=Ui(S,oe.marker);de||(oe.from=pt,z&&(S||(S=[])).push(oe))}else oe.from+=pt,z&&(S||(S=[])).push(oe)}S&&(S=ca(S)),P&&P!=S&&(P=ca(P));var me=[S];if(!z){var Oe=s.text.length-2,we;if(Oe>0&&S)for(var Te=0;Te<S.length;++Te)S[Te].to==null&&(we||(we=[])).push(new zi(S[Te].marker,null,null));for(var Ne=0;Ne<Oe;++Ne)me.push(we);me.push(P)}return me}function ca(o){for(var s=0;s<o.length;++s){var c=o[s];c.from!=null&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&o.splice(s--,1)}return o.length?o:null}function jn(o,s,c){var u=null;if(o.iter(s.line,c.line+1,function(Ft){if(Ft.markedSpans)for(var Jt=0;Jt<Ft.markedSpans.length;++Jt){var oe=Ft.markedSpans[Jt].marker;oe.readOnly&&(!u||Ct(u,oe)==-1)&&(u||(u=[])).push(oe)}}),!u)return null;for(var d=[{from:s,to:c}],v=0;v<u.length;++v)for(var y=u[v],S=y.find(0),P=0;P<d.length;++P){var z=d[P];if(!(ft(z.to,S.from)<0||ft(z.from,S.to)>0)){var pt=[P,1],xt=ft(z.from,S.from),zt=ft(z.to,S.to);(xt<0||!y.inclusiveLeft&&!xt)&&pt.push({from:z.from,to:S.from}),(zt>0||!y.inclusiveRight&&!zt)&&pt.push({from:S.to,to:z.to}),d.splice.apply(d,pt),P+=pt.length-3}}return d}function Wi(o){var s=o.markedSpans;if(s){for(var c=0;c<s.length;++c)s[c].marker.detachLine(o);o.markedSpans=null}}function Gi(o,s){if(s){for(var c=0;c<s.length;++c)s[c].marker.attachLine(o);o.markedSpans=s}}function Rn(o){return o.inclusiveLeft?-1:0}function Ki(o){return o.inclusiveRight?1:0}function Mo(o,s){var c=o.lines.length-s.lines.length;if(c!=0)return c;var u=o.find(),d=s.find(),v=ft(u.from,d.from)||Rn(o)-Rn(s);if(v)return-v;var y=ft(u.to,d.to)||Ki(o)-Ki(s);return y||s.id-o.id}function Zi(o,s){var c=In&&o.markedSpans,u;if(c)for(var d=void 0,v=0;v<c.length;++v)d=c[v],d.marker.collapsed&&(s?d.from:d.to)==null&&(!u||Mo(u,d.marker)<0)&&(u=d.marker);return u}function $i(o){return Zi(o,!0)}function vi(o){return Zi(o,!1)}function yn(o,s){var c=In&&o.markedSpans,u;if(c)for(var d=0;d<c.length;++d){var v=c[d];v.marker.collapsed&&(v.from==null||v.from<s)&&(v.to==null||v.to>s)&&(!u||Mo(u,v.marker)<0)&&(u=v.marker)}return u}function Fn(o,s,c,u,d){var v=Pe(o,s),y=In&&v.markedSpans;if(y)for(var S=0;S<y.length;++S){var P=y[S];if(P.marker.collapsed){var z=P.marker.find(0),pt=ft(z.from,c)||Rn(P.marker)-Rn(d),xt=ft(z.to,u)||Ki(P.marker)-Ki(d);if(!(pt>=0&&xt<=0||pt<=0&&xt>=0)&&(pt<=0&&(P.marker.inclusiveRight&&d.inclusiveLeft?ft(z.to,c)>=0:ft(z.to,c)>0)||pt>=0&&(P.marker.inclusiveRight&&d.inclusiveLeft?ft(z.from,u)<=0:ft(z.from,u)<0)))return!0}}}function yr(o){for(var s;s=$i(o);)o=s.find(-1,!0).line;return o}function qi(o){for(var s;s=vi(o);)o=s.find(1,!0).line;return o}function Do(o){for(var s,c;s=vi(o);)o=s.find(1,!0).line,(c||(c=[])).push(o);return c}function Nn(o,s){var c=Pe(o,s),u=yr(c);return c==u?s:or(u)}function Jn(o,s){if(s>o.lastLine())return s;var c=Pe(o,s),u;if(!Vn(o,c))return s;for(;u=vi(c);)c=u.find(1,!0).line;return or(c)+1}function Vn(o,s){var c=In&&s.markedSpans;if(c){for(var u=void 0,d=0;d<c.length;++d)if(u=c[d],!!u.marker.collapsed){if(u.from==null)return!0;if(!u.marker.widgetNode&&u.from==0&&u.marker.inclusiveLeft&&si(o,s,u))return!0}}}function si(o,s,c){if(c.to==null){var u=c.marker.find(1,!0);return si(o,u.line,Ui(u.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==s.text.length)return!0;for(var d=void 0,v=0;v<s.markedSpans.length;++v)if(d=s.markedSpans[v],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(d.to==null||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&si(o,s,d))return!0}function Dr(o){o=yr(o);for(var s=0,c=o.parent,u=0;u<c.lines.length;++u){var d=c.lines[u];if(d==o)break;s+=d.height}for(var v=c.parent;v;c=v,v=c.parent)for(var y=0;y<v.children.length;++y){var S=v.children[y];if(S==c)break;s+=S.height}return s}function gi(o){if(o.height==0)return 0;for(var s=o.text.length,c,u=o;c=$i(u);){var d=c.find(0,!0);u=d.from.line,s+=d.from.ch-d.to.ch}for(u=o;c=vi(u);){var v=c.find(0,!0);s-=u.text.length-v.from.ch,u=v.to.line,s+=u.text.length-v.to.ch}return s}function Yi(o){var s=o.display,c=o.doc;s.maxLine=Pe(c,c.first),s.maxLineLength=gi(s.maxLine),s.maxLineChanged=!0,c.iter(function(u){var d=gi(u);d>s.maxLineLength&&(s.maxLineLength=d,s.maxLine=u)})}var Ci=function(o,s,c){this.text=o,Gi(this,s),this.height=c?c(this):1};Ci.prototype.lineNo=function(){return or(this)},Sr(Ci);function Fa(o,s,c,u){o.text=s,o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null),o.order!=null&&(o.order=null),Wi(o),Gi(o,c);var d=u?u(o):1;d!=o.height&&rn(o,d)}function ks(o){o.parent=null,Wi(o)}var As={},Na={};function Qe(o,s){if(!o||/^\s*$/.test(o))return null;var c=s.addModeClass?Na:As;return c[o]||(c[o]=o.replace(/\S+/g,"cm-$&"))}function Va(o,s){var c=mt("span",null,null,m?"padding-right: .1px":null),u={pre:mt("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")};s.measure={};for(var d=0;d<=(s.rest?s.rest.length:0);d++){var v=d?s.rest[d-1]:s.line,y=void 0;u.pos=0,u.addToken=Io,Vi(o.display.measure)&&(y=Ae(v,o.doc.direction))&&(u.addToken=Si(u.addToken,y)),u.map=[];var S=s!=o.display.externalMeasured&&or(v);Pn(v,u,Ia(o,v,S)),v.styleClasses&&(v.styleClasses.bgClass&&(u.bgClass=Et(v.styleClasses.bgClass,u.bgClass||"")),v.styleClasses.textClass&&(u.textClass=Et(v.styleClasses.textClass,u.textClass||""))),u.map.length==0&&u.map.push(0,0,u.content.appendChild(gn(o.display.measure))),d==0?(s.measure.map=u.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(u.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(m){var P=u.content.lastChild;(/\bcm-tab\b/.test(P.className)||P.querySelector&&P.querySelector(".cm-tab"))&&(u.content.className="cm-tab-wrap-hack")}return nr(o,"renderLine",o,s.line,u.pre),u.pre.className&&(u.textClass=Et(u.pre.className,u.textClass||"")),u}function fn(o){var s=B("span","•","cm-invalidchar");return s.title="\\u"+o.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function Io(o,s,c,u,d,v,y){if(s){var S=o.splitSpaces?Xi(s,o.trailingSpace):s,P=o.cm.state.specialChars,z=!1,pt;if(!P.test(s))o.col+=s.length,pt=document.createTextNode(S),o.map.push(o.pos,o.pos+s.length,pt),K&&et<9&&(z=!0),o.pos+=s.length;else{pt=document.createDocumentFragment();for(var xt=0;;){P.lastIndex=xt;var zt=P.exec(s),Ft=zt?zt.index-xt:s.length-xt;if(Ft){var Jt=document.createTextNode(S.slice(xt,xt+Ft));K&&et<9?pt.appendChild(B("span",[Jt])):pt.appendChild(Jt),o.map.push(o.pos,o.pos+Ft,Jt),o.col+=Ft,o.pos+=Ft}if(!zt)break;xt+=Ft+1;var oe=void 0;if(zt[0]=="	"){var de=o.cm.options.tabSize,me=de-o.col%de;oe=pt.appendChild(B("span",Me(me),"cm-tab")),oe.setAttribute("role","presentation"),oe.setAttribute("cm-text","	"),o.col+=me}else zt[0]=="\r"||zt[0]==`
`?(oe=pt.appendChild(B("span",zt[0]=="\r"?"␍":"␤","cm-invalidchar")),oe.setAttribute("cm-text",zt[0]),o.col+=1):(oe=o.cm.options.specialCharPlaceholder(zt[0]),oe.setAttribute("cm-text",zt[0]),K&&et<9?pt.appendChild(B("span",[oe])):pt.appendChild(oe),o.col+=1);o.map.push(o.pos,o.pos+1,oe),o.pos++}}if(o.trailingSpace=S.charCodeAt(s.length-1)==32,c||u||d||z||v||y){var Oe=c||"";u&&(Oe+=u),d&&(Oe+=d);var we=B("span",[pt],Oe,v);if(y)for(var Te in y)y.hasOwnProperty(Te)&&Te!="style"&&Te!="class"&&we.setAttribute(Te,y[Te]);return o.content.appendChild(we)}o.content.appendChild(pt)}}function Xi(o,s){if(o.length>1&&!/  /.test(o))return o;for(var c=s,u="",d=0;d<o.length;d++){var v=o.charAt(d);v==" "&&c&&(d==o.length-1||o.charCodeAt(d+1)==32)&&(v=" "),u+=v,c=v==" "}return u}function Si(o,s){return function(c,u,d,v,y,S,P){d=d?d+" cm-force-border":"cm-force-border";for(var z=c.pos,pt=z+u.length;;){for(var xt=void 0,zt=0;zt<s.length&&(xt=s[zt],!(xt.to>z&&xt.from<=z));zt++);if(xt.to>=pt)return o(c,u,d,v,y,S,P);o(c,u.slice(0,xt.to-z),d,v,null,S,P),v=null,u=u.slice(xt.to-z),z=xt.to}}}function on(o,s,c,u){var d=!u&&c.widgetNode;d&&o.map.push(o.pos,o.pos+s,d),!u&&o.cm.display.input.needsContentAttribute&&(d||(d=o.content.appendChild(document.createElement("span"))),d.setAttribute("cm-marker",c.id)),d&&(o.cm.display.input.setUneditable(d),o.content.appendChild(d)),o.pos+=s,o.trailingSpace=!1}function Pn(o,s,c){var u=o.markedSpans,d=o.text,v=0;if(!u){for(var y=1;y<c.length;y+=2)s.addToken(s,d.slice(v,v=c[y]),Qe(c[y+1],s.cm.options));return}for(var S=d.length,P=0,z=1,pt="",xt,zt,Ft=0,Jt,oe,de,me,Oe;;){if(Ft==P){Jt=oe=de=zt="",Oe=null,me=null,Ft=1/0;for(var we=[],Te=void 0,Ne=0;Ne<u.length;++Ne){var je=u[Ne],tr=je.marker;if(tr.type=="bookmark"&&je.from==P&&tr.widgetNode)we.push(tr);else if(je.from<=P&&(je.to==null||je.to>P||tr.collapsed&&je.to==P&&je.from==P)){if(je.to!=null&&je.to!=P&&Ft>je.to&&(Ft=je.to,oe=""),tr.className&&(Jt+=" "+tr.className),tr.css&&(zt=(zt?zt+";":"")+tr.css),tr.startStyle&&je.from==P&&(de+=" "+tr.startStyle),tr.endStyle&&je.to==Ft&&(Te||(Te=[])).push(tr.endStyle,je.to),tr.title&&((Oe||(Oe={})).title=tr.title),tr.attributes)for(var gr in tr.attributes)(Oe||(Oe={}))[gr]=tr.attributes[gr];tr.collapsed&&(!me||Mo(me.marker,tr)<0)&&(me=je)}else je.from>P&&Ft>je.from&&(Ft=je.from)}if(Te)for(var Ur=0;Ur<Te.length;Ur+=2)Te[Ur+1]==Ft&&(oe+=" "+Te[Ur]);if(!me||me.from==P)for(var _r=0;_r<we.length;++_r)on(s,0,we[_r]);if(me&&(me.from||0)==P){if(on(s,(me.to==null?S+1:me.to)-P,me.marker,me.from==null),me.to==null)return;me.to==P&&(me=!1)}}if(P>=S)break;for(var An=Math.min(S,Ft);;){if(pt){var pn=P+pt.length;if(!me){var Fr=pn>An?pt.slice(0,An-P):pt;s.addToken(s,Fr,xt?xt+Jt:Jt,de,P+Fr.length==Ft?oe:"",zt,Oe)}if(pn>=An){pt=pt.slice(An-P),P=An;break}P=pn,de=""}pt=d.slice(v,v=c[z++]),xt=Qe(c[z++],s.cm.options)}}}function jo(o,s,c){this.line=s,this.rest=Do(s),this.size=this.rest?or(ue(this.rest))-c+1:1,this.node=this.text=null,this.hidden=Vn(o,s)}function Oi(o,s,c){for(var u=[],d,v=s;v<c;v=d){var y=new jo(o.doc,Pe(o.doc,v),v);d=v+y.size,u.push(y)}return u}var Qn=null;function Ls(o){Qn?Qn.ops.push(o):o.ownsGroup=Qn={ops:[o],delayedCallbacks:[]}}function Kr(o){var s=o.delayedCallbacks,c=0;do{for(;c<s.length;c++)s[c].call(null);for(var u=0;u<o.ops.length;u++){var d=o.ops[u];if(d.cursorActivityHandlers)for(;d.cursorActivityCalled<d.cursorActivityHandlers.length;)d.cursorActivityHandlers[d.cursorActivityCalled++].call(null,d.cm)}}while(c<s.length)}function Ji(o,s){var c=o.ownsGroup;if(c)try{Kr(c)}finally{Qn=null,s(c)}}var dn=null;function Ir(o,s){var c=hr(o,s);if(c.length){var u=Array.prototype.slice.call(arguments,2),d;Qn?d=Qn.delayedCallbacks:dn?d=dn:(d=dn=[],setTimeout(Ha,0));for(var v=function(S){d.push(function(){return c[S].apply(null,u)})},y=0;y<c.length;++y)v(y)}}function Ha(){var o=dn;dn=null;for(var s=0;s<o.length;++s)o[s]()}function Ba(o,s,c,u){for(var d=0;d<s.changes.length;d++){var v=s.changes[d];v=="text"?Ds(o,s):v=="gutter"?mi(o,s,c,u):v=="class"?Ti(o,s):v=="widget"&&Is(o,s,u)}s.changes=null}function li(o){return o.node==o.text&&(o.node=B("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),K&&et<8&&(o.node.style.zIndex=2)),o.node}function Ms(o,s){var c=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),s.background)c?s.background.className=c:(s.background.parentNode.removeChild(s.background),s.background=null);else if(c){var u=li(s);s.background=u.insertBefore(B("div",null,c),u.firstChild),o.display.input.setUneditable(s.background)}}function Qi(o,s){var c=o.display.externalMeasured;return c&&c.line==s.line?(o.display.externalMeasured=null,s.measure=c.measure,c.built):Va(o,s)}function Ds(o,s){var c=s.text.className,u=Qi(o,s);s.text==s.node&&(s.node=u.pre),s.text.parentNode.replaceChild(u.pre,s.text),s.text=u.pre,u.bgClass!=s.bgClass||u.textClass!=s.textClass?(s.bgClass=u.bgClass,s.textClass=u.textClass,Ti(o,s)):c&&(s.text.className=c)}function Ti(o,s){Ms(o,s),s.line.wrapClass?li(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var c=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=c||""}function mi(o,s,c,u){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var d=li(s);s.gutterBackground=B("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(o.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px; width: "+u.gutterTotalWidth+"px"),o.display.input.setUneditable(s.gutterBackground),d.insertBefore(s.gutterBackground,s.text)}var v=s.line.gutterMarkers;if(o.options.lineNumbers||v){var y=li(s),S=s.gutter=B("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px");if(S.setAttribute("aria-hidden","true"),o.display.input.setUneditable(S),y.insertBefore(S,s.text),s.line.gutterClass&&(S.className+=" "+s.line.gutterClass),o.options.lineNumbers&&(!v||!v["CodeMirror-linenumbers"])&&(s.lineNumber=S.appendChild(B("div",zr(o.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+u.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),v)for(var P=0;P<o.display.gutterSpecs.length;++P){var z=o.display.gutterSpecs[P].className,pt=v.hasOwnProperty(z)&&v[z];pt&&S.appendChild(B("div",[pt],"CodeMirror-gutter-elt","left: "+u.gutterLeft[z]+"px; width: "+u.gutterWidth[z]+"px"))}}}function Is(o,s,c){s.alignable&&(s.alignable=null);for(var u=N("CodeMirror-linewidget"),d=s.node.firstChild,v=void 0;d;d=v)v=d.nextSibling,u.test(d.className)&&s.node.removeChild(d);za(o,s,c)}function js(o,s,c,u){var d=Qi(o,s);return s.text=s.node=d.pre,d.bgClass&&(s.bgClass=d.bgClass),d.textClass&&(s.textClass=d.textClass),Ti(o,s),mi(o,s,c,u),za(o,s,u),s.node}function za(o,s,c){if(to(o,s.line,s,c,!0),s.rest)for(var u=0;u<s.rest.length;u++)to(o,s.rest[u],s,c,!1)}function to(o,s,c,u,d){if(s.widgets)for(var v=li(c),y=0,S=s.widgets;y<S.length;++y){var P=S[y],z=B("div",[P.node],"CodeMirror-linewidget"+(P.className?" "+P.className:""));P.handleMouseEvents||z.setAttribute("cm-ignore-events","true"),fa(P,z,c,u),o.display.input.setUneditable(z),d&&P.above?v.insertBefore(z,c.gutter||c.text):v.appendChild(z),Ir(P,"redraw")}}function fa(o,s,c,u){if(o.noHScroll){(c.alignable||(c.alignable=[])).push(s);var d=u.wrapperWidth;s.style.left=u.fixedPos+"px",o.coverGutter||(d-=u.gutterTotalWidth,s.style.paddingLeft=u.gutterTotalWidth+"px"),s.style.width=d+"px"}o.coverGutter&&(s.style.zIndex=5,s.style.position="relative",o.noHScroll||(s.style.marginLeft=-u.gutterTotalWidth+"px"))}function Ei(o){if(o.height!=null)return o.height;var s=o.doc.cm;if(!s)return 0;if(!Mt(document.body,o.node)){var c="position: relative;";o.coverGutter&&(c+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),o.noHScroll&&(c+="width: "+s.display.wrapper.clientWidth+"px;"),ut(s.display.measure,B("div",[o.node],null,c))}return o.height=o.node.parentNode.offsetHeight}function Hn(o,s){for(var c=_e(s);c!=o.wrapper;c=c.parentNode)if(!c||c.nodeType==1&&c.getAttribute("cm-ignore-events")=="true"||c.parentNode==o.sizer&&c!=o.mover)return!0}function eo(o){return o.lineSpace.offsetTop}function ro(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function D(o){if(o.cachedPaddingH)return o.cachedPaddingH;var s=ut(o.measure,B("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,u={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return!isNaN(u.left)&&!isNaN(u.right)&&(o.cachedPaddingH=u),u}function tt(o){return It-o.display.nativeBarWidth}function wt(o){return o.display.scroller.clientWidth-tt(o)-o.display.barWidth}function Ot(o){return o.display.scroller.clientHeight-tt(o)-o.display.barHeight}function Gt(o,s,c){var u=o.options.lineWrapping,d=u&&wt(o);if(!s.measure.heights||u&&s.measure.width!=d){var v=s.measure.heights=[];if(u){s.measure.width=d;for(var y=s.text.firstChild.getClientRects(),S=0;S<y.length-1;S++){var P=y[S],z=y[S+1];Math.abs(P.bottom-z.bottom)>2&&v.push((P.bottom+z.top)/2-c.top)}}v.push(c.bottom-c.top)}}function Bt(o,s,c){if(o.line==s)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var u=0;u<o.rest.length;u++)if(o.rest[u]==s)return{map:o.measure.maps[u],cache:o.measure.caches[u]};for(var d=0;d<o.rest.length;d++)if(or(o.rest[d])>c)return{map:o.measure.maps[d],cache:o.measure.caches[d],before:!0}}}function ie(o,s){s=yr(s);var c=or(s),u=o.display.externalMeasured=new jo(o.doc,s,c);u.lineN=c;var d=u.built=Va(o,u);return u.text=d.pre,ut(o.display.lineMeasure,d.pre),u}function be(o,s,c,u){return vr(o,He(o,s),c,u)}function Ge(o,s){if(s>=o.display.viewFrom&&s<o.display.viewTo)return o.display.view[Ho(o,s)];var c=o.display.externalMeasured;if(c&&s>=c.lineN&&s<c.lineN+c.size)return c}function He(o,s){var c=or(s),u=Ge(o,c);u&&!u.text?u=null:u&&u.changes&&(Ba(o,u,c,kl(o)),o.curOp.forceUpdate=!0),u||(u=ie(o,s));var d=Bt(u,s,c);return{line:s,view:u,rect:null,map:d.map,cache:d.cache,before:d.before,hasHeights:!1}}function vr(o,s,c,u,d){s.before&&(c=-1);var v=c+(u||""),y;return s.cache.hasOwnProperty(v)?y=s.cache[v]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(Gt(o,s.view,s.rect),s.hasHeights=!0),y=bf(o,s,c,u),y.bogus||(s.cache[v]=y)),{left:y.left,right:y.right,top:d?y.rtop:y.top,bottom:d?y.rbottom:y.bottom}}var Yr={left:0,right:0,top:0,bottom:0};function Ua(o,s,c){for(var u,d,v,y,S,P,z=0;z<o.length;z+=3)if(S=o[z],P=o[z+1],s<S?(d=0,v=1,y="left"):s<P?(d=s-S,v=d+1):(z==o.length-3||s==P&&o[z+3]>s)&&(v=P-S,d=v-1,s>=P&&(y="right")),d!=null){if(u=o[z+2],S==P&&c==(u.insertLeft?"left":"right")&&(y=c),c=="left"&&d==0)for(;z&&o[z-2]==o[z-3]&&o[z-1].insertLeft;)u=o[(z-=3)+2],y="left";if(c=="right"&&d==P-S)for(;z<o.length-3&&o[z+3]==o[z+4]&&!o[z+5].insertLeft;)u=o[(z+=3)+2],y="right";break}return{node:u,start:d,end:v,collapse:y,coverStart:S,coverEnd:P}}function Ro(o,s){var c=Yr;if(s=="left")for(var u=0;u<o.length&&(c=o[u]).left==c.right;u++);else for(var d=o.length-1;d>=0&&(c=o[d]).left==c.right;d--);return c}function bf(o,s,c,u){var d=Ua(s.map,c,u),v=d.node,y=d.start,S=d.end,P=d.collapse,z;if(v.nodeType==3){for(var pt=0;pt<4;pt++){for(;y&&te(s.line.text.charAt(d.coverStart+y));)--y;for(;d.coverStart+S<d.coverEnd&&te(s.line.text.charAt(d.coverStart+S));)++S;if(K&&et<9&&y==0&&S==d.coverEnd-d.coverStart?z=v.parentNode.getBoundingClientRect():z=Ro(A(v,y,S).getClientRects(),u),z.left||z.right||y==0)break;S=y,y=y-1,P="right"}K&&et<11&&(z=xf(o.display.measure,z))}else{y>0&&(P=u="right");var xt;o.options.lineWrapping&&(xt=v.getClientRects()).length>1?z=xt[u=="right"?xt.length-1:0]:z=v.getBoundingClientRect()}if(K&&et<9&&!y&&(!z||!z.left&&!z.right)){var zt=v.parentNode.getClientRects()[0];zt?z={left:zt.left,right:zt.left+io(o.display),top:zt.top,bottom:zt.bottom}:z=Yr}for(var Ft=z.top-s.rect.top,Jt=z.bottom-s.rect.top,oe=(Ft+Jt)/2,de=s.view.measure.heights,me=0;me<de.length-1&&!(oe<de[me]);me++);var Oe=me?de[me-1]:0,we=de[me],Te={left:(P=="right"?z.right:z.left)-s.rect.left,right:(P=="left"?z.left:z.right)-s.rect.left,top:Oe,bottom:we};return!z.left&&!z.right&&(Te.bogus=!0),o.options.singleCursorHeightPerLine||(Te.rtop=Ft,Te.rbottom=Jt),Te}function xf(o,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!cn(o))return s;var c=screen.logicalXDPI/screen.deviceXDPI,u=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*c,right:s.right*c,top:s.top*u,bottom:s.bottom*u}}function Au(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var s=0;s<o.rest.length;s++)o.measure.caches[s]={}}function Wa(o){o.display.externalMeasure=null,G(o.display.lineMeasure);for(var s=0;s<o.display.view.length;s++)Au(o.display.view[s])}function no(o){Wa(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function Lu(o){return b&&q?-(o.body.getBoundingClientRect().left-parseInt(getComputedStyle(o.body).marginLeft)):o.defaultView.pageXOffset||(o.documentElement||o.body).scrollLeft}function Mu(o){return b&&q?-(o.body.getBoundingClientRect().top-parseInt(getComputedStyle(o.body).marginTop)):o.defaultView.pageYOffset||(o.documentElement||o.body).scrollTop}function Tl(o){var s=yr(o),c=s.widgets,u=0;if(c)for(var d=0;d<c.length;++d)c[d].above&&(u+=Ei(c[d]));return u}function Fo(o,s,c,u,d){if(!d){var v=Tl(s);c.top+=v,c.bottom+=v}if(u=="line")return c;u||(u="local");var y=Dr(s);if(u=="local"?y+=eo(o.display):y-=o.display.viewOffset,u=="page"||u=="window"){var S=o.display.lineSpace.getBoundingClientRect();y+=S.top+(u=="window"?0:Mu(Nt(o)));var P=S.left+(u=="window"?0:Lu(Nt(o)));c.left+=P,c.right+=P}return c.top+=y,c.bottom+=y,c}function Rs(o,s,c){if(c=="div")return s;var u=s.left,d=s.top;if(c=="page")u-=Lu(Nt(o)),d-=Mu(Nt(o));else if(c=="local"||!c){var v=o.display.sizer.getBoundingClientRect();u+=v.left,d+=v.top}var y=o.display.lineSpace.getBoundingClientRect();return{left:u-y.left,top:d-y.top}}function Fs(o,s,c,u,d){return u||(u=Pe(o.doc,s.line)),Fo(o,u,be(o,u,s.ch,d),c)}function ti(o,s,c,u,d,v){u=u||Pe(o.doc,s.line),d||(d=He(o,u));function y(Jt,oe){var de=vr(o,d,Jt,oe?"right":"left",v);return oe?de.left=de.right:de.right=de.left,Fo(o,u,de,c)}var S=Ae(u,o.doc.direction),P=s.ch,z=s.sticky;if(P>=u.text.length?(P=u.text.length,z="before"):P<=0&&(P=0,z="after"),!S)return y(z=="before"?P-1:P,z=="before");function pt(Jt,oe,de){var me=S[oe],Oe=me.level==1;return y(de?Jt-1:Jt,Oe!=de)}var xt=ce(S,P,z),zt=ee,Ft=pt(P,xt,z=="before");return zt!=null&&(Ft.other=pt(P,zt,z!="before")),Ft}function Du(o,s){var c=0;s=ke(o.doc,s),o.options.lineWrapping||(c=io(o.display)*s.ch);var u=Pe(o.doc,s.line),d=Dr(u)+eo(o.display);return{left:c,right:c,top:d,bottom:d+u.height}}function da(o,s,c,u,d){var v=j(o,s,c);return v.xRel=d,u&&(v.outside=u),v}function El(o,s,c){var u=o.doc;if(c+=o.display.viewOffset,c<0)return da(u.first,0,null,-1,-1);var d=qn(u,c),v=u.first+u.size-1;if(d>v)return da(u.first+u.size-1,Pe(u,v).text.length,null,1,1);s<0&&(s=0);for(var y=Pe(u,d);;){var S=Pl(o,y,d,s,c),P=yn(y,S.ch+(S.xRel>0||S.outside>0?1:0));if(!P)return S;var z=P.find(1);if(z.line==d)return z;y=Pe(u,d=z.line)}}function Iu(o,s,c,u){u-=Tl(s);var d=s.text.length,v=Ut(function(y){return vr(o,c,y-1).bottom<=u},d,0);return d=Ut(function(y){return vr(o,c,y).top>u},v,d),{begin:v,end:d}}function ju(o,s,c,u){c||(c=He(o,s));var d=Fo(o,s,vr(o,c,u),"line").top;return Iu(o,s,c,d)}function pa(o,s,c,u){return o.bottom<=c?!1:o.top>c?!0:(u?o.left:o.right)>s}function Pl(o,s,c,u,d){d-=Dr(s);var v=He(o,s),y=Tl(s),S=0,P=s.text.length,z=!0,pt=Ae(s,o.doc.direction);if(pt){var xt=(o.options.lineWrapping?Sf:Cf)(o,s,c,v,pt,u,d);z=xt.level!=1,S=z?xt.from:xt.to-1,P=z?xt.to:xt.from-1}var zt=null,Ft=null,Jt=Ut(function(Ne){var je=vr(o,v,Ne);return je.top+=y,je.bottom+=y,pa(je,u,d,!1)?(je.top<=d&&je.left<=u&&(zt=Ne,Ft=je),!0):!1},S,P),oe,de,me=!1;if(Ft){var Oe=u-Ft.left<Ft.right-u,we=Oe==z;Jt=zt+(we?0:1),de=we?"after":"before",oe=Oe?Ft.left:Ft.right}else{!z&&(Jt==P||Jt==S)&&Jt++,de=Jt==0?"after":Jt==s.text.length?"before":vr(o,v,Jt-(z?1:0)).bottom+y<=d==z?"after":"before";var Te=ti(o,j(c,Jt,de),"line",s,v);oe=Te.left,me=d<Te.top?-1:d>=Te.bottom?1:0}return Jt=Qt(s.text,Jt,1),da(c,Jt,de,me,u-oe)}function Cf(o,s,c,u,d,v,y){var S=Ut(function(xt){var zt=d[xt],Ft=zt.level!=1;return pa(ti(o,j(c,Ft?zt.to:zt.from,Ft?"before":"after"),"line",s,u),v,y,!0)},0,d.length-1),P=d[S];if(S>0){var z=P.level!=1,pt=ti(o,j(c,z?P.from:P.to,z?"after":"before"),"line",s,u);pa(pt,v,y,!0)&&pt.top>y&&(P=d[S-1])}return P}function Sf(o,s,c,u,d,v,y){var S=Iu(o,s,u,y),P=S.begin,z=S.end;/\s/.test(s.text.charAt(z-1))&&z--;for(var pt=null,xt=null,zt=0;zt<d.length;zt++){var Ft=d[zt];if(!(Ft.from>=z||Ft.to<=P)){var Jt=Ft.level!=1,oe=vr(o,u,Jt?Math.min(z,Ft.to)-1:Math.max(P,Ft.from)).right,de=oe<v?v-oe+1e9:oe-v;(!pt||xt>de)&&(pt=Ft,xt=de)}}return pt||(pt=d[d.length-1]),pt.from<P&&(pt={from:P,to:pt.to,level:pt.level}),pt.to>z&&(pt={from:pt.from,to:z,level:pt.level}),pt}var No;function Pi(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(No==null){No=B("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)No.appendChild(document.createTextNode("x")),No.appendChild(B("br"));No.appendChild(document.createTextNode("x"))}ut(o.measure,No);var c=No.offsetHeight/50;return c>3&&(o.cachedTextHeight=c),G(o.measure),c||1}function io(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var s=B("span","xxxxxxxxxx"),c=B("pre",[s],"CodeMirror-line-like");ut(o.measure,c);var u=s.getBoundingClientRect(),d=(u.right-u.left)/10;return d>2&&(o.cachedCharWidth=d),d||10}function kl(o){for(var s=o.display,c={},u={},d=s.gutters.clientLeft,v=s.gutters.firstChild,y=0;v;v=v.nextSibling,++y){var S=o.display.gutterSpecs[y].className;c[S]=v.offsetLeft+v.clientLeft+d,u[S]=v.clientWidth}return{fixedPos:Ga(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:c,gutterWidth:u,wrapperWidth:s.wrapper.clientWidth}}function Ga(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function Ru(o){var s=Pi(o.display),c=o.options.lineWrapping,u=c&&Math.max(5,o.display.scroller.clientWidth/io(o.display)-3);return function(d){if(Vn(o.doc,d))return 0;var v=0;if(d.widgets)for(var y=0;y<d.widgets.length;y++)d.widgets[y].height&&(v+=d.widgets[y].height);return c?v+(Math.ceil(d.text.length/u)||1)*s:v+s}}function ha(o){var s=o.doc,c=Ru(o);s.iter(function(u){var d=c(u);d!=u.height&&rn(u,d)})}function Vo(o,s,c,u){var d=o.display;if(!c&&_e(s).getAttribute("cm-not-content")=="true")return null;var v,y,S=d.lineSpace.getBoundingClientRect();try{v=s.clientX-S.left,y=s.clientY-S.top}catch{return null}var P=El(o,v,y),z;if(u&&P.xRel>0&&(z=Pe(o.doc,P.line).text).length==P.ch){var pt=Vt(z,z.length,o.options.tabSize)-z.length;P=j(P.line,Math.max(0,Math.round((v-D(o.display).left)/io(o.display))-pt))}return P}function Ho(o,s){if(s>=o.display.viewTo||(s-=o.display.viewFrom,s<0))return null;for(var c=o.display.view,u=0;u<c.length;u++)if(s-=c[u].size,s<0)return u}function _n(o,s,c,u){s==null&&(s=o.doc.first),c==null&&(c=o.doc.first+o.doc.size),u||(u=0);var d=o.display;if(u&&c<d.viewTo&&(d.updateLineNumbers==null||d.updateLineNumbers>s)&&(d.updateLineNumbers=s),o.curOp.viewChanged=!0,s>=d.viewTo)In&&Nn(o.doc,s)<d.viewTo&&yi(o);else if(c<=d.viewFrom)In&&Jn(o.doc,c+u)>d.viewFrom?yi(o):(d.viewFrom+=u,d.viewTo+=u);else if(s<=d.viewFrom&&c>=d.viewTo)yi(o);else if(s<=d.viewFrom){var v=Ns(o,c,c+u,1);v?(d.view=d.view.slice(v.index),d.viewFrom=v.lineN,d.viewTo+=u):yi(o)}else if(c>=d.viewTo){var y=Ns(o,s,s,-1);y?(d.view=d.view.slice(0,y.index),d.viewTo=y.lineN):yi(o)}else{var S=Ns(o,s,s,-1),P=Ns(o,c,c+u,1);S&&P?(d.view=d.view.slice(0,S.index).concat(Oi(o,S.lineN,P.lineN)).concat(d.view.slice(P.index)),d.viewTo+=u):yi(o)}var z=d.externalMeasured;z&&(c<z.lineN?z.lineN+=u:s<z.lineN+z.size&&(d.externalMeasured=null))}function ui(o,s,c){o.curOp.viewChanged=!0;var u=o.display,d=o.display.externalMeasured;if(d&&s>=d.lineN&&s<d.lineN+d.size&&(u.externalMeasured=null),!(s<u.viewFrom||s>=u.viewTo)){var v=u.view[Ho(o,s)];if(v.node!=null){var y=v.changes||(v.changes=[]);Ct(y,c)==-1&&y.push(c)}}}function yi(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function Ns(o,s,c,u){var d=Ho(o,s),v,y=o.display.view;if(!In||c==o.doc.first+o.doc.size)return{index:d,lineN:c};for(var S=o.display.viewFrom,P=0;P<d;P++)S+=y[P].size;if(S!=s){if(u>0){if(d==y.length-1)return null;v=S+y[d].size-s,d++}else v=S-s;s+=v,c+=v}for(;Nn(o.doc,c)!=c;){if(d==(u<0?0:y.length-1))return null;c+=u*y[d-(u<0?1:0)].size,d+=u}return{index:d,lineN:c}}function Of(o,s,c){var u=o.display,d=u.view;d.length==0||s>=u.viewTo||c<=u.viewFrom?(u.view=Oi(o,s,c),u.viewFrom=s):(u.viewFrom>s?u.view=Oi(o,s,u.viewFrom).concat(u.view):u.viewFrom<s&&(u.view=u.view.slice(Ho(o,s))),u.viewFrom=s,u.viewTo<c?u.view=u.view.concat(Oi(o,u.viewTo,c)):u.viewTo>c&&(u.view=u.view.slice(0,Ho(o,c)))),u.viewTo=c}function Fu(o){for(var s=o.display.view,c=0,u=0;u<s.length;u++){var d=s[u];!d.hidden&&(!d.node||d.changes)&&++c}return c}function oo(o){o.display.input.showSelection(o.display.input.prepareSelection())}function Vs(o,s){s===void 0&&(s=!0);var c=o.doc,u={},d=u.cursors=document.createDocumentFragment(),v=u.selection=document.createDocumentFragment(),y=o.options.$customCursor;y&&(s=!0);for(var S=0;S<c.sel.ranges.length;S++)if(!(!s&&S==c.sel.primIndex)){var P=c.sel.ranges[S];if(!(P.from().line>=o.display.viewTo||P.to().line<o.display.viewFrom)){var z=P.empty();if(y){var pt=y(o,P);pt&&Al(o,pt,d)}else(z||o.options.showCursorWhenSelecting)&&Al(o,P.head,d);z||Tf(o,P,v)}}return u}function Al(o,s,c){var u=ti(o,s,"div",null,null,!o.options.singleCursorHeightPerLine),d=c.appendChild(B("div"," ","CodeMirror-cursor"));if(d.style.left=u.left+"px",d.style.top=u.top+"px",d.style.height=Math.max(0,u.bottom-u.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)){var v=Fs(o,s,"div",null,null),y=v.right-v.left;d.style.width=(y>0?y:o.defaultCharWidth())+"px"}if(u.other){var S=c.appendChild(B("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));S.style.display="",S.style.left=u.other.left+"px",S.style.top=u.other.top+"px",S.style.height=(u.other.bottom-u.other.top)*.85+"px"}}function Hs(o,s){return o.top-s.top||o.left-s.left}function Tf(o,s,c){var u=o.display,d=o.doc,v=document.createDocumentFragment(),y=D(o.display),S=y.left,P=Math.max(u.sizerWidth,wt(o)-u.sizer.offsetLeft)-y.right,z=d.direction=="ltr";function pt(we,Te,Ne,je){Te<0&&(Te=0),Te=Math.round(Te),je=Math.round(je),v.appendChild(B("div",null,"CodeMirror-selected","position: absolute; left: "+we+`px;
                             top: `+Te+"px; width: "+(Ne??P-we)+`px;
                             height: `+(je-Te)+"px"))}function xt(we,Te,Ne){var je=Pe(d,we),tr=je.text.length,gr,Ur;function _r(Fr,xn){return Fs(o,j(we,Fr),"div",je,xn)}function An(Fr,xn,Xr){var Wr=ju(o,je,null,Fr),Vr=xn=="ltr"==(Xr=="after")?"left":"right",Pr=Xr=="after"?Wr.begin:Wr.end-(/\s/.test(je.text.charAt(Wr.end-1))?2:1);return _r(Pr,Vr)[Vr]}var pn=Ae(je,d.direction);return se(pn,Te||0,Ne??tr,function(Fr,xn,Xr,Wr){var Vr=Xr=="ltr",Pr=_r(Fr,Vr?"left":"right"),$r=_r(xn-1,Vr?"right":"left"),ji=Te==null&&Fr==0,go=Ne==null&&xn==tr,Jr=Wr==0,wi=!pn||Wr==pn.length-1;if($r.top-Pr.top<=3){var qr=(z?ji:go)&&Jr,cu=(z?go:ji)&&wi,Ri=qr?S:(Vr?Pr:$r).left,mo=cu?P:(Vr?$r:Pr).right;pt(Ri,Pr.top,mo-Ri,Pr.bottom)}else{var Jo,hn,Qo,fu;Vr?(Jo=z&&ji&&Jr?S:Pr.left,hn=z?P:An(Fr,Xr,"before"),Qo=z?S:An(xn,Xr,"after"),fu=z&&go&&wi?P:$r.right):(Jo=z?An(Fr,Xr,"before"):S,hn=!z&&ji&&Jr?P:Pr.right,Qo=!z&&go&&wi?S:$r.left,fu=z?An(xn,Xr,"after"):P),pt(Jo,Pr.top,hn-Jo,Pr.bottom),Pr.bottom<$r.top&&pt(S,Pr.bottom,null,$r.top),pt(Qo,$r.top,fu-Qo,$r.bottom)}(!gr||Hs(Pr,gr)<0)&&(gr=Pr),Hs($r,gr)<0&&(gr=$r),(!Ur||Hs(Pr,Ur)<0)&&(Ur=Pr),Hs($r,Ur)<0&&(Ur=$r)}),{start:gr,end:Ur}}var zt=s.from(),Ft=s.to();if(zt.line==Ft.line)xt(zt.line,zt.ch,Ft.ch);else{var Jt=Pe(d,zt.line),oe=Pe(d,Ft.line),de=yr(Jt)==yr(oe),me=xt(zt.line,zt.ch,de?Jt.text.length+1:null).end,Oe=xt(Ft.line,de?0:null,Ft.ch).start;de&&(me.top<Oe.top-2?(pt(me.right,me.top,null,me.bottom),pt(S,Oe.top,Oe.left,Oe.bottom)):pt(me.right,me.top,Oe.left-me.right,me.bottom)),me.bottom<Oe.top&&pt(S,me.bottom,null,Oe.top)}c.appendChild(v)}function va(o){if(o.state.focused){var s=o.display;clearInterval(s.blinker);var c=!0;s.cursorDiv.style.visibility="",o.options.cursorBlinkRate>0?s.blinker=setInterval(function(){o.hasFocus()||ga(o),s.cursorDiv.style.visibility=(c=!c)?"":"hidden"},o.options.cursorBlinkRate):o.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function Ll(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||Dl(o))}function Ml(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&ga(o))},100)}function Dl(o,s){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||(nr(o,"focus",o,s),o.state.focused=!0,X(o.display.wrapper,"CodeMirror-focused"),!o.curOp&&o.display.selForContextMenu!=o.doc.sel&&(o.display.input.reset(),m&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),va(o))}function ga(o,s){o.state.delayingBlurEvent||(o.state.focused&&(nr(o,"blur",o,s),o.state.focused=!1,I(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function Bo(o){for(var s=o.display,c=s.lineDiv.offsetTop,u=Math.max(0,s.scroller.getBoundingClientRect().top),d=s.lineDiv.getBoundingClientRect().top,v=0,y=0;y<s.view.length;y++){var S=s.view[y],P=o.options.lineWrapping,z=void 0,pt=0;if(!S.hidden){if(d+=S.line.height,K&&et<8){var xt=S.node.offsetTop+S.node.offsetHeight;z=xt-c,c=xt}else{var zt=S.node.getBoundingClientRect();z=zt.bottom-zt.top,!P&&S.text.firstChild&&(pt=S.text.firstChild.getBoundingClientRect().right-zt.left-1)}var Ft=S.line.height-z;if((Ft>.005||Ft<-.005)&&(d<u&&(v-=Ft),rn(S.line,z),Bs(S.line),S.rest))for(var Jt=0;Jt<S.rest.length;Jt++)Bs(S.rest[Jt]);if(pt>o.display.sizerWidth){var oe=Math.ceil(pt/io(o.display));oe>o.display.maxLineLength&&(o.display.maxLineLength=oe,o.display.maxLine=S.line,o.display.maxLineChanged=!0)}}}Math.abs(v)>2&&(s.scroller.scrollTop+=v)}function Bs(o){if(o.widgets)for(var s=0;s<o.widgets.length;++s){var c=o.widgets[s],u=c.node.parentNode;u&&(c.height=u.offsetHeight)}}function ki(o,s,c){var u=c&&c.top!=null?Math.max(0,c.top):o.scroller.scrollTop;u=Math.floor(u-eo(o));var d=c&&c.bottom!=null?c.bottom:u+o.wrapper.clientHeight,v=qn(s,u),y=qn(s,d);if(c&&c.ensure){var S=c.ensure.from.line,P=c.ensure.to.line;S<v?(v=S,y=qn(s,Dr(Pe(s,S))+o.wrapper.clientHeight)):Math.min(P,s.lastLine())>=y&&(v=qn(s,Dr(Pe(s,P))-o.wrapper.clientHeight),y=P)}return{from:v,to:Math.max(y,v+1)}}function ma(o,s){if(!ze(o,"scrollCursorIntoView")){var c=o.display,u=c.sizer.getBoundingClientRect(),d=null,v=c.wrapper.ownerDocument;if(s.top+u.top<0?d=!0:s.bottom+u.top>(v.defaultView.innerHeight||v.documentElement.clientHeight)&&(d=!1),d!=null&&!Q){var y=B("div","​",null,`position: absolute;
                         top: `+(s.top-c.viewOffset-eo(o.display))+`px;
                         height: `+(s.bottom-s.top+tt(o)+c.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");o.display.lineSpace.appendChild(y),y.scrollIntoView(d),o.display.lineSpace.removeChild(y)}}}function ya(o,s,c,u){u==null&&(u=0);var d;!o.options.lineWrapping&&s==c&&(c=s.sticky=="before"?j(s.line,s.ch+1,"before"):s,s=s.ch?j(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var v=0;v<5;v++){var y=!1,S=ti(o,s),P=!c||c==s?S:ti(o,c);d={left:Math.min(S.left,P.left),top:Math.min(S.top,P.top)-u,right:Math.max(S.left,P.left),bottom:Math.max(S.bottom,P.bottom)+u};var z=Ka(o,d),pt=o.doc.scrollTop,xt=o.doc.scrollLeft;if(z.scrollTop!=null&&($a(o,z.scrollTop),Math.abs(o.doc.scrollTop-pt)>1&&(y=!0)),z.scrollLeft!=null&&(ao(o,z.scrollLeft),Math.abs(o.doc.scrollLeft-xt)>1&&(y=!0)),!y)break}return d}function Nu(o,s){var c=Ka(o,s);c.scrollTop!=null&&$a(o,c.scrollTop),c.scrollLeft!=null&&ao(o,c.scrollLeft)}function Ka(o,s){var c=o.display,u=Pi(o.display);s.top<0&&(s.top=0);var d=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:c.scroller.scrollTop,v=Ot(o),y={};s.bottom-s.top>v&&(s.bottom=s.top+v);var S=o.doc.height+ro(c),P=s.top<u,z=s.bottom>S-u;if(s.top<d)y.scrollTop=P?0:s.top;else if(s.bottom>d+v){var pt=Math.min(s.top,(z?S:s.bottom)-v);pt!=d&&(y.scrollTop=pt)}var xt=o.options.fixedGutter?0:c.gutters.offsetWidth,zt=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:c.scroller.scrollLeft-xt,Ft=wt(o)-c.gutters.offsetWidth,Jt=s.right-s.left>Ft;return Jt&&(s.right=s.left+Ft),s.left<10?y.scrollLeft=0:s.left<zt?y.scrollLeft=Math.max(0,s.left+xt-(Jt?0:10)):s.right>Ft+zt-3&&(y.scrollLeft=s.right+(Jt?0:10)-Ft),y}function Il(o,s){s!=null&&(Us(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+s)}function _a(o){Us(o);var s=o.getCursor();o.curOp.scrollToPos={from:s,to:s,margin:o.options.cursorScrollMargin}}function Za(o,s,c){(s!=null||c!=null)&&Us(o),s!=null&&(o.curOp.scrollLeft=s),c!=null&&(o.curOp.scrollTop=c)}function zs(o,s){Us(o),o.curOp.scrollToPos=s}function Us(o){var s=o.curOp.scrollToPos;if(s){o.curOp.scrollToPos=null;var c=Du(o,s.from),u=Du(o,s.to);Vu(o,c,u,s.margin)}}function Vu(o,s,c,u){var d=Ka(o,{left:Math.min(s.left,c.left),top:Math.min(s.top,c.top)-u,right:Math.max(s.right,c.right),bottom:Math.max(s.bottom,c.bottom)+u});Za(o,d.scrollLeft,d.scrollTop)}function $a(o,s){Math.abs(o.doc.scrollTop-s)<2||(St||Fl(o,{top:s}),Hu(o,s,!0),St&&Fl(o),Xa(o,100))}function Hu(o,s,c){s=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,s)),!(o.display.scroller.scrollTop==s&&!c)&&(o.doc.scrollTop=s,o.display.scrollbars.setScrollTop(s),o.display.scroller.scrollTop!=s&&(o.display.scroller.scrollTop=s))}function ao(o,s,c,u){s=Math.max(0,Math.min(s,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),!((c?s==o.doc.scrollLeft:Math.abs(o.doc.scrollLeft-s)<2)&&!u)&&(o.doc.scrollLeft=s,Ku(o),o.display.scroller.scrollLeft!=s&&(o.display.scroller.scrollLeft=s),o.display.scrollbars.setScrollLeft(s))}function qa(o){var s=o.display,c=s.gutters.offsetWidth,u=Math.round(o.doc.height+ro(o.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:o.options.fixedGutter?c:0,docHeight:u,scrollHeight:u+tt(o)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:c}}var wn=function(o,s,c){this.cm=c;var u=this.vert=B("div",[B("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),d=this.horiz=B("div",[B("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");u.tabIndex=d.tabIndex=-1,o(u),o(d),Se(u,"scroll",function(){u.clientHeight&&s(u.scrollTop,"vertical")}),Se(d,"scroll",function(){d.clientWidth&&s(d.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,K&&et<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};wn.prototype.update=function(o){var s=o.scrollWidth>o.clientWidth+1,c=o.scrollHeight>o.clientHeight+1,u=o.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=s?u+"px":"0";var d=o.viewHeight-(s?u:0);this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+d)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=c?u+"px":"0",this.horiz.style.left=o.barLeft+"px";var v=o.viewWidth-o.barLeft-(c?u:0);this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+v)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&o.clientHeight>0&&(u==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?u:0,bottom:s?u:0}},wn.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},wn.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},wn.prototype.zeroWidthHack=function(){var o=T&&!F?"12px":"18px";this.horiz.style.height=this.vert.style.width=o,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new $t,this.disableVert=new $t},wn.prototype.enableZeroWidthBar=function(o,s,c){o.style.visibility="";function u(){var d=o.getBoundingClientRect(),v=c=="vert"?document.elementFromPoint(d.right-1,(d.top+d.bottom)/2):document.elementFromPoint((d.right+d.left)/2,d.bottom-1);v!=o?o.style.visibility="hidden":s.set(1e3,u)}s.set(1e3,u)},wn.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var Ya=function(){};Ya.prototype.update=function(){return{bottom:0,right:0}},Ya.prototype.setScrollLeft=function(){},Ya.prototype.setScrollTop=function(){},Ya.prototype.clear=function(){};function Tr(o,s){s||(s=qa(o));var c=o.display.barWidth,u=o.display.barHeight;Bu(o,s);for(var d=0;d<4&&c!=o.display.barWidth||u!=o.display.barHeight;d++)c!=o.display.barWidth&&o.options.lineWrapping&&Bo(o),Bu(o,qa(o)),c=o.display.barWidth,u=o.display.barHeight}function Bu(o,s){var c=o.display,u=c.scrollbars.update(s);c.sizer.style.paddingRight=(c.barWidth=u.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=u.bottom)+"px",c.heightForcer.style.borderBottom=u.bottom+"px solid transparent",u.right&&u.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=u.bottom+"px",c.scrollbarFiller.style.width=u.right+"px"):c.scrollbarFiller.style.display="",u.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=u.bottom+"px",c.gutterFiller.style.width=s.gutterWidth+"px"):c.gutterFiller.style.display=""}var zu={native:wn,null:Ya};function jl(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&I(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new zu[o.options.scrollbarStyle](function(s){o.display.wrapper.insertBefore(s,o.display.scrollbarFiller),Se(s,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,c){c=="horizontal"?ao(o,s):$a(o,s)},o),o.display.scrollbars.addClass&&X(o.display.wrapper,o.display.scrollbars.addClass)}var Ef=0;function zo(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ef,markArrays:null},Ls(o.curOp)}function Uo(o){var s=o.curOp;s&&Ji(s,function(c){for(var u=0;u<c.ops.length;u++)c.ops[u].cm.curOp=null;Pf(c)})}function Pf(o){for(var s=o.ops,c=0;c<s.length;c++)kf(s[c]);for(var u=0;u<s.length;u++)Af(s[u]);for(var d=0;d<s.length;d++)Lf(s[d]);for(var v=0;v<s.length;v++)Mf(s[v]);for(var y=0;y<s.length;y++)Ws(s[y])}function kf(o){var s=o.cm,c=s.display;Df(s),o.updateMaxLine&&Yi(s),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<c.viewFrom||o.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&s.options.lineWrapping,o.update=o.mustUpdate&&new Gs(s,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}function Af(o){o.updatedDisplay=o.mustUpdate&&Rl(o.cm,o.update)}function Lf(o){var s=o.cm,c=s.display;o.updatedDisplay&&Bo(s),o.barMeasure=qa(s),c.maxLineChanged&&!s.options.lineWrapping&&(o.adjustWidthTo=be(s,c.maxLine,c.maxLine.text.length).left+3,s.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+o.adjustWidthTo+tt(s)+s.display.barWidth),o.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+o.adjustWidthTo-wt(s))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=c.input.prepareSelection())}function Mf(o){var s=o.cm;o.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<s.doc.scrollLeft&&ao(s,Math.min(s.display.scroller.scrollLeft,o.maxScrollLeft),!0),s.display.maxLineChanged=!1);var c=o.focus&&o.focus==Dt(Nt(s));o.preparedSelection&&s.display.input.showSelection(o.preparedSelection,c),(o.updatedDisplay||o.startHeight!=s.doc.height)&&Tr(s,o.barMeasure),o.updatedDisplay&&Vl(s,o.barMeasure),o.selectionChanged&&va(s),s.state.focused&&o.updateInput&&s.display.input.reset(o.typing),c&&Ll(o.cm)}function Ws(o){var s=o.cm,c=s.display,u=s.doc;if(o.updatedDisplay&&Gu(s,o.update),c.wheelStartX!=null&&(o.scrollTop!=null||o.scrollLeft!=null||o.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),o.scrollTop!=null&&Hu(s,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&ao(s,o.scrollLeft,!0,!0),o.scrollToPos){var d=ya(s,ke(u,o.scrollToPos.from),ke(u,o.scrollToPos.to),o.scrollToPos.margin);ma(s,d)}var v=o.maybeHiddenMarkers,y=o.maybeUnhiddenMarkers;if(v)for(var S=0;S<v.length;++S)v[S].lines.length||nr(v[S],"hide");if(y)for(var P=0;P<y.length;++P)y[P].lines.length&&nr(y[P],"unhide");c.wrapper.offsetHeight&&(u.scrollTop=s.display.scroller.scrollTop),o.changeObjs&&nr(s,"changes",s,o.changeObjs),o.update&&o.update.finish()}function kn(o,s){if(o.curOp)return s();zo(o);try{return s()}finally{Uo(o)}}function Er(o,s){return function(){if(o.curOp)return s.apply(o,arguments);zo(o);try{return s.apply(o,arguments)}finally{Uo(o)}}}function Zr(o){return function(){if(this.curOp)return o.apply(this,arguments);zo(this);try{return o.apply(this,arguments)}finally{Uo(this)}}}function jr(o){return function(){var s=this.cm;if(!s||s.curOp)return o.apply(this,arguments);zo(s);try{return o.apply(this,arguments)}finally{Uo(s)}}}function Xa(o,s){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(s,Lt(Uu,o))}function Uu(o){var s=o.doc;if(!(s.highlightFrontier>=o.display.viewTo)){var c=+new Date+o.options.workTime,u=ko(o,s.highlightFrontier),d=[];s.iter(u.line,Math.min(s.first+s.size,o.display.viewTo+500),function(v){if(u.line>=o.display.viewFrom){var y=v.styles,S=v.text.length>o.options.maxHighlightLength?Sn(s.mode,u.state):null,P=Hi(o,v,u,!0);S&&(u.state=S),v.styles=P.styles;var z=v.styleClasses,pt=P.classes;pt?v.styleClasses=pt:z&&(v.styleClasses=null);for(var xt=!y||y.length!=v.styles.length||z!=pt&&(!z||!pt||z.bgClass!=pt.bgClass||z.textClass!=pt.textClass),zt=0;!xt&&zt<y.length;++zt)xt=y[zt]!=v.styles[zt];xt&&d.push(u.line),v.stateAfter=u.save(),u.nextLine()}else v.text.length<=o.options.maxHighlightLength&&aa(o,v.text,u),v.stateAfter=u.line%5==0?u.save():null,u.nextLine();if(+new Date>c)return Xa(o,o.options.workDelay),!0}),s.highlightFrontier=u.line,s.modeFrontier=Math.max(s.modeFrontier,u.line),d.length&&kn(o,function(){for(var v=0;v<d.length;v++)ui(o,d[v],"text")})}}var Gs=function(o,s,c){var u=o.display;this.viewport=s,this.visible=ki(u,o.doc,s),this.editorIsHidden=!u.wrapper.offsetWidth,this.wrapperHeight=u.wrapper.clientHeight,this.wrapperWidth=u.wrapper.clientWidth,this.oldDisplayWidth=wt(o),this.force=c,this.dims=kl(o),this.events=[]};Gs.prototype.signal=function(o,s){mr(o,s)&&this.events.push(arguments)},Gs.prototype.finish=function(){for(var o=0;o<this.events.length;o++)nr.apply(null,this.events[o])};function Df(o){var s=o.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=tt(o)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=tt(o)+"px",s.scrollbarsClipped=!0)}function Wu(o){if(o.hasFocus())return null;var s=Dt(Nt(o));if(!s||!Mt(o.display.lineDiv,s))return null;var c={activeElt:s};if(window.getSelection){var u=jt(o).getSelection();u.anchorNode&&u.extend&&Mt(o.display.lineDiv,u.anchorNode)&&(c.anchorNode=u.anchorNode,c.anchorOffset=u.anchorOffset,c.focusNode=u.focusNode,c.focusOffset=u.focusOffset)}return c}function If(o){if(!(!o||!o.activeElt||o.activeElt==Dt(o.activeElt.ownerDocument))&&(o.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(o.activeElt.nodeName)&&o.anchorNode&&Mt(document.body,o.anchorNode)&&Mt(document.body,o.focusNode))){var s=o.activeElt.ownerDocument,c=s.defaultView.getSelection(),u=s.createRange();u.setEnd(o.anchorNode,o.anchorOffset),u.collapse(!1),c.removeAllRanges(),c.addRange(u),c.extend(o.focusNode,o.focusOffset)}}function Rl(o,s){var c=o.display,u=o.doc;if(s.editorIsHidden)return yi(o),!1;if(!s.force&&s.visible.from>=c.viewFrom&&s.visible.to<=c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&Fu(o)==0)return!1;Zu(o)&&(yi(o),s.dims=kl(o));var d=u.first+u.size,v=Math.max(s.visible.from-o.options.viewportMargin,u.first),y=Math.min(d,s.visible.to+o.options.viewportMargin);c.viewFrom<v&&v-c.viewFrom<20&&(v=Math.max(u.first,c.viewFrom)),c.viewTo>y&&c.viewTo-y<20&&(y=Math.min(d,c.viewTo)),In&&(v=Nn(o.doc,v),y=Jn(o.doc,y));var S=v!=c.viewFrom||y!=c.viewTo||c.lastWrapHeight!=s.wrapperHeight||c.lastWrapWidth!=s.wrapperWidth;Of(o,v,y),c.viewOffset=Dr(Pe(o.doc,c.viewFrom)),o.display.mover.style.top=c.viewOffset+"px";var P=Fu(o);if(!S&&P==0&&!s.force&&c.renderedView==c.view&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo))return!1;var z=Wu(o);return P>4&&(c.lineDiv.style.display="none"),jf(o,c.updateLineNumbers,s.dims),P>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,If(z),G(c.cursorDiv),G(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,S&&(c.lastWrapHeight=s.wrapperHeight,c.lastWrapWidth=s.wrapperWidth,Xa(o,400)),c.updateLineNumbers=null,!0}function Gu(o,s){for(var c=s.viewport,u=!0;;u=!1){if(!u||!o.options.lineWrapping||s.oldDisplayWidth==wt(o)){if(c&&c.top!=null&&(c={top:Math.min(o.doc.height+ro(o.display)-Ot(o),c.top)}),s.visible=ki(o.display,o.doc,c),s.visible.from>=o.display.viewFrom&&s.visible.to<=o.display.viewTo)break}else u&&(s.visible=ki(o.display,o.doc,c));if(!Rl(o,s))break;Bo(o);var d=qa(o);oo(o),Tr(o,d),Vl(o,d),s.force=!1}s.signal(o,"update",o),(o.display.viewFrom!=o.display.reportedViewFrom||o.display.viewTo!=o.display.reportedViewTo)&&(s.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function Fl(o,s){var c=new Gs(o,s);if(Rl(o,c)){Bo(o),Gu(o,c);var u=qa(o);oo(o),Tr(o,u),Vl(o,u),c.finish()}}function jf(o,s,c){var u=o.display,d=o.options.lineNumbers,v=u.lineDiv,y=v.firstChild;function S(Jt){var oe=Jt.nextSibling;return m&&T&&o.display.currentWheelTarget==Jt?Jt.style.display="none":Jt.parentNode.removeChild(Jt),oe}for(var P=u.view,z=u.viewFrom,pt=0;pt<P.length;pt++){var xt=P[pt];if(!xt.hidden)if(!xt.node||xt.node.parentNode!=v){var zt=js(o,xt,z,c);v.insertBefore(zt,y)}else{for(;y!=xt.node;)y=S(y);var Ft=d&&s!=null&&s<=z&&xt.lineNumber;xt.changes&&(Ct(xt.changes,"gutter")>-1&&(Ft=!1),Ba(o,xt,z,c)),Ft&&(G(xt.lineNumber),xt.lineNumber.appendChild(document.createTextNode(zr(o.options,z)))),y=xt.node.nextSibling}z+=xt.size}for(;y;)y=S(y)}function Nl(o){var s=o.gutters.offsetWidth;o.sizer.style.marginLeft=s+"px",Ir(o,"gutterChanged",o)}function Vl(o,s){o.display.sizer.style.minHeight=s.docHeight+"px",o.display.heightForcer.style.top=s.docHeight+"px",o.display.gutters.style.height=s.docHeight+o.display.barHeight+tt(o)+"px"}function Ku(o){var s=o.display,c=s.view;if(!(!s.alignWidgets&&(!s.gutters.firstChild||!o.options.fixedGutter))){for(var u=Ga(s)-s.scroller.scrollLeft+o.doc.scrollLeft,d=s.gutters.offsetWidth,v=u+"px",y=0;y<c.length;y++)if(!c[y].hidden){o.options.fixedGutter&&(c[y].gutter&&(c[y].gutter.style.left=v),c[y].gutterBackground&&(c[y].gutterBackground.style.left=v));var S=c[y].alignable;if(S)for(var P=0;P<S.length;P++)S[P].style.left=v}o.options.fixedGutter&&(s.gutters.style.left=u+d+"px")}}function Zu(o){if(!o.options.lineNumbers)return!1;var s=o.doc,c=zr(o.options,s.first+s.size-1),u=o.display;if(c.length!=u.lineNumChars){var d=u.measure.appendChild(B("div",[B("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),v=d.firstChild.offsetWidth,y=d.offsetWidth-v;return u.lineGutter.style.width="",u.lineNumInnerWidth=Math.max(v,u.lineGutter.offsetWidth-y)+1,u.lineNumWidth=u.lineNumInnerWidth+y,u.lineNumChars=u.lineNumInnerWidth?c.length:-1,u.lineGutter.style.width=u.lineNumWidth+"px",Nl(o.display),!0}return!1}function Hl(o,s){for(var c=[],u=!1,d=0;d<o.length;d++){var v=o[d],y=null;if(typeof v!="string"&&(y=v.style,v=v.className),v=="CodeMirror-linenumbers")if(s)u=!0;else continue;c.push({className:v,style:y})}return s&&!u&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function $u(o){var s=o.gutters,c=o.gutterSpecs;G(s),o.lineGutter=null;for(var u=0;u<c.length;++u){var d=c[u],v=d.className,y=d.style,S=s.appendChild(B("div",null,"CodeMirror-gutter "+v));y&&(S.style.cssText=y),v=="CodeMirror-linenumbers"&&(o.lineGutter=S,S.style.width=(o.lineNumWidth||1)+"px")}s.style.display=c.length?"":"none",Nl(o)}function wa(o){$u(o.display),_n(o),Ku(o)}function Rf(o,s,c,u){var d=this;this.input=c,d.scrollbarFiller=B("div",null,"CodeMirror-scrollbar-filler"),d.scrollbarFiller.setAttribute("cm-not-content","true"),d.gutterFiller=B("div",null,"CodeMirror-gutter-filler"),d.gutterFiller.setAttribute("cm-not-content","true"),d.lineDiv=mt("div",null,"CodeMirror-code"),d.selectionDiv=B("div",null,null,"position: relative; z-index: 1"),d.cursorDiv=B("div",null,"CodeMirror-cursors"),d.measure=B("div",null,"CodeMirror-measure"),d.lineMeasure=B("div",null,"CodeMirror-measure"),d.lineSpace=mt("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");var v=mt("div",[d.lineSpace],"CodeMirror-lines");d.mover=B("div",[v],null,"position: relative"),d.sizer=B("div",[d.mover],"CodeMirror-sizer"),d.sizerWidth=null,d.heightForcer=B("div",null,null,"position: absolute; height: "+It+"px; width: 1px;"),d.gutters=B("div",null,"CodeMirror-gutters"),d.lineGutter=null,d.scroller=B("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll"),d.scroller.setAttribute("tabIndex","-1"),d.wrapper=B("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror"),b&&C>=105&&(d.wrapper.style.clipPath="inset(0px)"),d.wrapper.setAttribute("translate","no"),K&&et<8&&(d.gutters.style.zIndex=-1,d.scroller.style.paddingRight=0),!m&&!(St&&W)&&(d.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(d.wrapper):o(d.wrapper)),d.viewFrom=d.viewTo=s.first,d.reportedViewFrom=d.reportedViewTo=s.first,d.view=[],d.renderedView=null,d.externalMeasured=null,d.viewOffset=0,d.lastWrapHeight=d.lastWrapWidth=0,d.updateLineNumbers=null,d.nativeBarWidth=d.barHeight=d.barWidth=0,d.scrollbarsClipped=!1,d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null,d.alignWidgets=!1,d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.maxLine=null,d.maxLineLength=0,d.maxLineChanged=!1,d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null,d.shift=!1,d.selForContextMenu=null,d.activeTouch=null,d.gutterSpecs=Hl(u.gutters,u.lineNumbers),$u(d),c.init(d)}var Ks=0,Ai=null;K?Ai=-.53:St?Ai=15:b?Ai=-.7:x&&(Ai=-1/3);function qu(o){var s=o.wheelDeltaX,c=o.wheelDeltaY;return s==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(s=o.detail),c==null&&o.detail&&o.axis==o.VERTICAL_AXIS?c=o.detail:c==null&&(c=o.wheelDelta),{x:s,y:c}}function Ff(o){var s=qu(o);return s.x*=Ai,s.y*=Ai,s}function Yu(o,s){b&&C==102&&(o.display.chromeScrollHack==null?o.display.sizer.style.pointerEvents="none":clearTimeout(o.display.chromeScrollHack),o.display.chromeScrollHack=setTimeout(function(){o.display.chromeScrollHack=null,o.display.sizer.style.pointerEvents=""},100));var c=qu(s),u=c.x,d=c.y,v=Ai;s.deltaMode===0&&(u=s.deltaX,d=s.deltaY,v=1);var y=o.display,S=y.scroller,P=S.scrollWidth>S.clientWidth,z=S.scrollHeight>S.clientHeight;if(u&&P||d&&z){if(d&&T&&m){t:for(var pt=s.target,xt=y.view;pt!=S;pt=pt.parentNode)for(var zt=0;zt<xt.length;zt++)if(xt[zt].node==pt){o.display.currentWheelTarget=pt;break t}}if(u&&!St&&!E&&v!=null){d&&z&&$a(o,Math.max(0,S.scrollTop+d*v)),ao(o,Math.max(0,S.scrollLeft+u*v)),(!d||d&&z)&&ot(s),y.wheelStartX=null;return}if(d&&v!=null){var Ft=d*v,Jt=o.doc.scrollTop,oe=Jt+y.wrapper.clientHeight;Ft<0?Jt=Math.max(0,Jt+Ft-50):oe=Math.min(o.doc.height,oe+Ft+50),Fl(o,{top:Jt,bottom:oe})}Ks<20&&s.deltaMode!==0&&(y.wheelStartX==null?(y.wheelStartX=S.scrollLeft,y.wheelStartY=S.scrollTop,y.wheelDX=u,y.wheelDY=d,setTimeout(function(){if(y.wheelStartX!=null){var de=S.scrollLeft-y.wheelStartX,me=S.scrollTop-y.wheelStartY,Oe=me&&y.wheelDY&&me/y.wheelDY||de&&y.wheelDX&&de/y.wheelDX;y.wheelStartX=y.wheelStartY=null,Oe&&(Ai=(Ai*Ks+Oe)/(Ks+1),++Ks)}},200)):(y.wheelDX+=u,y.wheelDY+=d))}}var Bn=function(o,s){this.ranges=o,this.primIndex=s};Bn.prototype.primary=function(){return this.ranges[this.primIndex]},Bn.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var c=this.ranges[s],u=o.ranges[s];if(!re(c.anchor,u.anchor)||!re(c.head,u.head))return!1}return!0},Bn.prototype.deepCopy=function(){for(var o=[],s=0;s<this.ranges.length;s++)o[s]=new cr(fe(this.ranges[s].anchor),fe(this.ranges[s].head));return new Bn(o,this.primIndex)},Bn.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},Bn.prototype.contains=function(o,s){s||(s=o);for(var c=0;c<this.ranges.length;c++){var u=this.ranges[c];if(ft(s,u.from())>=0&&ft(o,u.to())<=0)return c}return-1};var cr=function(o,s){this.anchor=o,this.head=s};cr.prototype.from=function(){return qe(this.anchor,this.head)},cr.prototype.to=function(){return Ue(this.anchor,this.head)},cr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ci(o,s,c){var u=o&&o.options.selectionsMayTouch,d=s[c];s.sort(function(zt,Ft){return ft(zt.from(),Ft.from())}),c=Ct(s,d);for(var v=1;v<s.length;v++){var y=s[v],S=s[v-1],P=ft(S.to(),y.from());if(u&&!y.empty()?P>0:P>=0){var z=qe(S.from(),y.from()),pt=Ue(S.to(),y.to()),xt=S.empty()?y.from()==y.head:S.from()==S.head;v<=c&&--c,s.splice(--v,2,new cr(xt?pt:z,xt?z:pt))}}return new Bn(s,c)}function so(o,s){return new Bn([new cr(o,s||o)],0)}function lo(o){return o.text?j(o.from.line+o.text.length-1,ue(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function Xu(o,s){if(ft(o,s.from)<0)return o;if(ft(o,s.to)<=0)return lo(s);var c=o.line+s.text.length-(s.to.line-s.from.line)-1,u=o.ch;return o.line==s.to.line&&(u+=lo(s).ch-s.to.ch),j(c,u)}function Bl(o,s){for(var c=[],u=0;u<o.sel.ranges.length;u++){var d=o.sel.ranges[u];c.push(new cr(Xu(d.anchor,s),Xu(d.head,s)))}return ci(o.cm,c,o.sel.primIndex)}function Ju(o,s,c){return o.line==s.line?j(c.line,o.ch-s.ch+c.ch):j(c.line+(o.line-s.line),o.ch)}function Nf(o,s,c){for(var u=[],d=j(o.first,0),v=d,y=0;y<s.length;y++){var S=s[y],P=Ju(S.from,d,v),z=Ju(lo(S),d,v);if(d=S.to,v=z,c=="around"){var pt=o.sel.ranges[y],xt=ft(pt.head,pt.anchor)<0;u[y]=new cr(xt?z:P,xt?P:z)}else u[y]=new cr(P,P)}return new Bn(u,o.sel.primIndex)}function zl(o){o.doc.mode=$n(o.options,o.doc.modeOption),Ja(o)}function Ja(o){o.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,Xa(o,100),o.state.modeGen++,o.curOp&&_n(o)}function Qu(o,s){return s.from.ch==0&&s.to.ch==0&&ue(s.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function Ul(o,s,c,u){function d(Oe){return c?c[Oe]:null}function v(Oe,we,Te){Fa(Oe,we,Te,u),Ir(Oe,"change",Oe,s)}function y(Oe,we){for(var Te=[],Ne=Oe;Ne<we;++Ne)Te.push(new Ci(z[Ne],d(Ne),u));return Te}var S=s.from,P=s.to,z=s.text,pt=Pe(o,S.line),xt=Pe(o,P.line),zt=ue(z),Ft=d(z.length-1),Jt=P.line-S.line;if(s.full)o.insert(0,y(0,z.length)),o.remove(z.length,o.size-z.length);else if(Qu(o,s)){var oe=y(0,z.length-1);v(xt,xt.text,Ft),Jt&&o.remove(S.line,Jt),oe.length&&o.insert(S.line,oe)}else if(pt==xt)if(z.length==1)v(pt,pt.text.slice(0,S.ch)+zt+pt.text.slice(P.ch),Ft);else{var de=y(1,z.length-1);de.push(new Ci(zt+pt.text.slice(P.ch),Ft,u)),v(pt,pt.text.slice(0,S.ch)+z[0],d(0)),o.insert(S.line+1,de)}else if(z.length==1)v(pt,pt.text.slice(0,S.ch)+z[0]+xt.text.slice(P.ch),d(0)),o.remove(S.line+1,Jt);else{v(pt,pt.text.slice(0,S.ch)+z[0],d(0)),v(xt,zt+xt.text.slice(P.ch),Ft);var me=y(1,z.length-1);Jt>1&&o.remove(S.line+1,Jt-1),o.insert(S.line+1,me)}Ir(o,"change",o,s)}function uo(o,s,c){function u(d,v,y){if(d.linked)for(var S=0;S<d.linked.length;++S){var P=d.linked[S];if(P.doc!=v){var z=y&&P.sharedHist;c&&!z||(s(P.doc,z),u(P.doc,d,z))}}}u(o,null,!0)}function tc(o,s){if(s.cm)throw new Error("This document is already in use.");o.doc=s,s.cm=o,ha(o),zl(o),ec(o),o.options.direction=s.direction,o.options.lineWrapping||Yi(o),o.options.mode=s.modeOption,_n(o)}function ec(o){(o.doc.direction=="rtl"?X:I)(o.display.lineDiv,"CodeMirror-rtl")}function Vf(o){kn(o,function(){ec(o),_n(o)})}function an(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function Wl(o,s){var c={from:fe(s.from),to:lo(s),text:Tn(o,s.from,s.to)};return nc(o,c,s.from.line,s.to.line+1),uo(o,function(u){return nc(u,c,s.from.line,s.to.line+1)},!0),c}function ba(o){for(;o.length;){var s=ue(o);if(s.ranges)o.pop();else break}}function Hf(o,s){if(s)return ba(o.done),ue(o.done);if(o.done.length&&!ue(o.done).ranges)return ue(o.done);if(o.done.length>1&&!o.done[o.done.length-2].ranges)return o.done.pop(),ue(o.done)}function rc(o,s,c,u){var d=o.history;d.undone.length=0;var v=+new Date,y,S;if((d.lastOp==u||d.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&d.lastModTime>v-(o.cm?o.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(y=Hf(d,d.lastOp==u)))S=ue(y.changes),ft(s.from,s.to)==0&&ft(s.from,S.to)==0?S.to=lo(s):y.changes.push(Wl(o,s));else{var P=ue(d.done);for((!P||!P.ranges)&&Zs(o.sel,d.done),y={changes:[Wl(o,s)],generation:d.generation},d.done.push(y);d.done.length>d.undoDepth;)d.done.shift(),d.done[0].ranges||d.done.shift()}d.done.push(c),d.generation=++d.maxGeneration,d.lastModTime=d.lastSelTime=v,d.lastOp=d.lastSelOp=u,d.lastOrigin=d.lastSelOrigin=s.origin,S||nr(o,"historyAdded")}function Bf(o,s,c,u){var d=s.charAt(0);return d=="*"||d=="+"&&c.ranges.length==u.ranges.length&&c.somethingSelected()==u.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}function zf(o,s,c,u){var d=o.history,v=u&&u.origin;c==d.lastSelOp||v&&d.lastSelOrigin==v&&(d.lastModTime==d.lastSelTime&&d.lastOrigin==v||Bf(o,v,ue(d.done),s))?d.done[d.done.length-1]=s:Zs(s,d.done),d.lastSelTime=+new Date,d.lastSelOrigin=v,d.lastSelOp=c,u&&u.clearRedo!==!1&&ba(d.undone)}function Zs(o,s){var c=ue(s);c&&c.ranges&&c.equals(o)||s.push(o)}function nc(o,s,c,u){var d=s["spans_"+o.id],v=0;o.iter(Math.max(o.first,c),Math.min(o.first+o.size,u),function(y){y.markedSpans&&((d||(d=s["spans_"+o.id]={}))[v]=y.markedSpans),++v})}function Uf(o){if(!o)return null;for(var s,c=0;c<o.length;++c)o[c].marker.explicitlyCleared?s||(s=o.slice(0,c)):s&&s.push(o[c]);return s?s.length?s:null:o}function Wf(o,s){var c=s["spans_"+o.id];if(!c)return null;for(var u=[],d=0;d<s.text.length;++d)u.push(Uf(c[d]));return u}function ic(o,s){var c=Wf(o,s),u=Lo(o,s);if(!c)return u;if(!u)return c;for(var d=0;d<c.length;++d){var v=c[d],y=u[d];if(v&&y)t:for(var S=0;S<y.length;++S){for(var P=y[S],z=0;z<v.length;++z)if(v[z].marker==P.marker)continue t;v.push(P)}else y&&(c[d]=y)}return c}function xa(o,s,c){for(var u=[],d=0;d<o.length;++d){var v=o[d];if(v.ranges){u.push(c?Bn.prototype.deepCopy.call(v):v);continue}var y=v.changes,S=[];u.push({changes:S});for(var P=0;P<y.length;++P){var z=y[P],pt=void 0;if(S.push({from:z.from,to:z.to,text:z.text}),s)for(var xt in z)(pt=xt.match(/^spans_(\d+)$/))&&Ct(s,Number(pt[1]))>-1&&(ue(S)[xt]=z[xt],delete z[xt])}}return u}function Wo(o,s,c,u){if(u){var d=o.anchor;if(c){var v=ft(s,d)<0;v!=ft(c,d)<0?(d=s,s=c):v!=ft(s,c)<0&&(s=c)}return new cr(d,s)}else return new cr(c||s,s)}function $s(o,s,c,u,d){d==null&&(d=o.cm&&(o.cm.display.shift||o.extend)),sn(o,new Bn([Wo(o.sel.primary(),s,c,d)],0),u)}function qs(o,s,c){for(var u=[],d=o.cm&&(o.cm.display.shift||o.extend),v=0;v<o.sel.ranges.length;v++)u[v]=Wo(o.sel.ranges[v],s[v],null,d);var y=ci(o.cm,u,o.sel.primIndex);sn(o,y,c)}function Gl(o,s,c,u){var d=o.sel.ranges.slice(0);d[s]=c,sn(o,ci(o.cm,d,o.sel.primIndex),u)}function Kl(o,s,c,u){sn(o,so(s,c),u)}function Gf(o,s,c){var u={ranges:s.ranges,update:function(d){this.ranges=[];for(var v=0;v<d.length;v++)this.ranges[v]=new cr(ke(o,d[v].anchor),ke(o,d[v].head))},origin:c&&c.origin};return nr(o,"beforeSelectionChange",o,u),o.cm&&nr(o.cm,"beforeSelectionChange",o.cm,u),u.ranges!=s.ranges?ci(o.cm,u.ranges,u.ranges.length-1):s}function Zl(o,s,c){var u=o.history.done,d=ue(u);d&&d.ranges?(u[u.length-1]=s,Ys(o,s,c)):sn(o,s,c)}function sn(o,s,c){Ys(o,s,c),zf(o,o.sel,o.cm?o.cm.curOp.id:NaN,c)}function Ys(o,s,c){(mr(o,"beforeSelectionChange")||o.cm&&mr(o.cm,"beforeSelectionChange"))&&(s=Gf(o,s,c));var u=c&&c.bias||(ft(s.primary().head,o.sel.primary().head)<0?-1:1);co(o,ac(o,s,u,!0)),!(c&&c.scroll===!1)&&o.cm&&o.cm.getOption("readOnly")!="nocursor"&&_a(o.cm)}function co(o,s){s.equals(o.sel)||(o.sel=s,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,xr(o.cm)),Ir(o,"cursorActivity",o))}function oc(o){co(o,ac(o,o.sel,null,!1))}function ac(o,s,c,u){for(var d,v=0;v<s.ranges.length;v++){var y=s.ranges[v],S=s.ranges.length==o.sel.ranges.length&&o.sel.ranges[v],P=Xs(o,y.anchor,S&&S.anchor,c,u),z=y.head==y.anchor?P:Xs(o,y.head,S&&S.head,c,u);(d||P!=y.anchor||z!=y.head)&&(d||(d=s.ranges.slice(0,v)),d[v]=new cr(P,z))}return d?ci(o.cm,d,s.primIndex):s}function Ca(o,s,c,u,d){var v=Pe(o,s.line);if(v.markedSpans)for(var y=0;y<v.markedSpans.length;++y){var S=v.markedSpans[y],P=S.marker,z="selectLeft"in P?!P.selectLeft:P.inclusiveLeft,pt="selectRight"in P?!P.selectRight:P.inclusiveRight;if((S.from==null||(z?S.from<=s.ch:S.from<s.ch))&&(S.to==null||(pt?S.to>=s.ch:S.to>s.ch))){if(d&&(nr(P,"beforeCursorEnter"),P.explicitlyCleared))if(v.markedSpans){--y;continue}else break;if(!P.atomic)continue;if(c){var xt=P.find(u<0?1:-1),zt=void 0;if((u<0?pt:z)&&(xt=sc(o,xt,-u,xt&&xt.line==s.line?v:null)),xt&&xt.line==s.line&&(zt=ft(xt,c))&&(u<0?zt<0:zt>0))return Ca(o,xt,s,u,d)}var Ft=P.find(u<0?-1:1);return(u<0?z:pt)&&(Ft=sc(o,Ft,u,Ft.line==s.line?v:null)),Ft?Ca(o,Ft,s,u,d):null}}return s}function Xs(o,s,c,u,d){var v=u||1,y=Ca(o,s,c,v,d)||!d&&Ca(o,s,c,v,!0)||Ca(o,s,c,-v,d)||!d&&Ca(o,s,c,-v,!0);return y||(o.cantEdit=!0,j(o.first,0))}function sc(o,s,c,u){return c<0&&s.ch==0?s.line>o.first?ke(o,j(s.line-1)):null:c>0&&s.ch==(u||Pe(o,s.line)).text.length?s.line<o.first+o.size-1?j(s.line+1,0):null:new j(s.line,s.ch+c)}function lc(o){o.setSelection(j(o.firstLine(),0),j(o.lastLine()),Yt)}function uc(o,s,c){var u={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return u.canceled=!0}};return c&&(u.update=function(d,v,y,S){d&&(u.from=ke(o,d)),v&&(u.to=ke(o,v)),y&&(u.text=y),S!==void 0&&(u.origin=S)}),nr(o,"beforeChange",o,u),o.cm&&nr(o.cm,"beforeChange",o.cm,u),u.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:u.from,to:u.to,text:u.text,origin:u.origin}}function Go(o,s,c){if(o.cm){if(!o.cm.curOp)return Er(o.cm,Go)(o,s,c);if(o.cm.state.suppressEdits)return}if(!((mr(o,"beforeChange")||o.cm&&mr(o.cm,"beforeChange"))&&(s=uc(o,s,!0),!s))){var u=Dn&&!c&&jn(o,s.from,s.to);if(u)for(var d=u.length-1;d>=0;--d)cc(o,{from:u[d].from,to:u[d].to,text:d?[""]:s.text,origin:s.origin});else cc(o,s)}}function cc(o,s){if(!(s.text.length==1&&s.text[0]==""&&ft(s.from,s.to)==0)){var c=Bl(o,s);rc(o,s,c,o.cm?o.cm.curOp.id:NaN),es(o,s,c,Lo(o,s));var u=[];uo(o,function(d,v){!v&&Ct(u,d.history)==-1&&(ql(d.history,s),u.push(d.history)),es(d,s,null,Lo(d,s))})}}function Qa(o,s,c){var u=o.cm&&o.cm.state.suppressEdits;if(!(u&&!c)){for(var d=o.history,v,y=o.sel,S=s=="undo"?d.done:d.undone,P=s=="undo"?d.undone:d.done,z=0;z<S.length&&(v=S[z],!(c?v.ranges&&!v.equals(o.sel):!v.ranges));z++);if(z!=S.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(v=S.pop(),v.ranges){if(Zs(v,P),c&&!v.equals(o.sel)){sn(o,v,{clearRedo:!1});return}y=v}else if(u){S.push(v);return}else break;var pt=[];Zs(y,P),P.push({changes:pt,generation:d.generation}),d.generation=v.generation||++d.maxGeneration;for(var xt=mr(o,"beforeChange")||o.cm&&mr(o.cm,"beforeChange"),zt=function(oe){var de=v.changes[oe];if(de.origin=s,xt&&!uc(o,de,!1))return S.length=0,{};pt.push(Wl(o,de));var me=oe?Bl(o,de):ue(S);es(o,de,me,ic(o,de)),!oe&&o.cm&&o.cm.scrollIntoView({from:de.from,to:lo(de)});var Oe=[];uo(o,function(we,Te){!Te&&Ct(Oe,we.history)==-1&&(ql(we.history,de),Oe.push(we.history)),es(we,de,null,ic(we,de))})},Ft=v.changes.length-1;Ft>=0;--Ft){var Jt=zt(Ft);if(Jt)return Jt.v}}}}function ts(o,s){if(s!=0&&(o.first+=s,o.sel=new Bn(R(o.sel.ranges,function(d){return new cr(j(d.anchor.line+s,d.anchor.ch),j(d.head.line+s,d.head.ch))}),o.sel.primIndex),o.cm)){_n(o.cm,o.first,o.first-s,s);for(var c=o.cm.display,u=c.viewFrom;u<c.viewTo;u++)ui(o.cm,u,"gutter")}}function es(o,s,c,u){if(o.cm&&!o.cm.curOp)return Er(o.cm,es)(o,s,c,u);if(s.to.line<o.first){ts(o,s.text.length-1-(s.to.line-s.from.line));return}if(!(s.from.line>o.lastLine())){if(s.from.line<o.first){var d=s.text.length-1-(o.first-s.from.line);ts(o,d),s={from:j(o.first,0),to:j(s.to.line+d,s.to.ch),text:[ue(s.text)],origin:s.origin}}var v=o.lastLine();s.to.line>v&&(s={from:s.from,to:j(v,Pe(o,v).text.length),text:[s.text[0]],origin:s.origin}),s.removed=Tn(o,s.from,s.to),c||(c=Bl(o,s)),o.cm?Kf(o.cm,s,u):Ul(o,s,u),Ys(o,c,Yt),o.cantEdit&&Xs(o,j(o.firstLine(),0))&&(o.cantEdit=!1)}}function Kf(o,s,c){var u=o.doc,d=o.display,v=s.from,y=s.to,S=!1,P=v.line;o.options.lineWrapping||(P=or(yr(Pe(u,v.line))),u.iter(P,y.line+1,function(Ft){if(Ft==d.maxLine)return S=!0,!0})),u.sel.contains(s.from,s.to)>-1&&xr(o),Ul(u,s,c,Ru(o)),o.options.lineWrapping||(u.iter(P,v.line+s.text.length,function(Ft){var Jt=gi(Ft);Jt>d.maxLineLength&&(d.maxLine=Ft,d.maxLineLength=Jt,d.maxLineChanged=!0,S=!1)}),S&&(o.curOp.updateMaxLine=!0)),Ts(u,v.line),Xa(o,400);var z=s.text.length-(y.line-v.line)-1;s.full?_n(o):v.line==y.line&&s.text.length==1&&!Qu(o.doc,s)?ui(o,v.line,"text"):_n(o,v.line,y.line+1,z);var pt=mr(o,"changes"),xt=mr(o,"change");if(xt||pt){var zt={from:v,to:y,text:s.text,removed:s.removed,origin:s.origin};xt&&Ir(o,"change",o,zt),pt&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(zt)}o.display.selForContextMenu=null}function Ko(o,s,c,u,d){var v;u||(u=c),ft(u,c)<0&&(v=[u,c],c=v[0],u=v[1]),typeof s=="string"&&(s=o.splitLines(s)),Go(o,{from:c,to:u,text:s,origin:d})}function fc(o,s,c,u){c<o.line?o.line+=u:s<o.line&&(o.line=s,o.ch=0)}function $l(o,s,c,u){for(var d=0;d<o.length;++d){var v=o[d],y=!0;if(v.ranges){v.copied||(v=o[d]=v.deepCopy(),v.copied=!0);for(var S=0;S<v.ranges.length;S++)fc(v.ranges[S].anchor,s,c,u),fc(v.ranges[S].head,s,c,u);continue}for(var P=0;P<v.changes.length;++P){var z=v.changes[P];if(c<z.from.line)z.from=j(z.from.line+u,z.from.ch),z.to=j(z.to.line+u,z.to.ch);else if(s<=z.to.line){y=!1;break}}y||(o.splice(0,d+1),d=0)}}function ql(o,s){var c=s.from.line,u=s.to.line,d=s.text.length-(u-c)-1;$l(o.done,c,u,d),$l(o.undone,c,u,d)}function fo(o,s,c,u){var d=s,v=s;return typeof s=="number"?v=Pe(o,sr(o,s)):d=or(s),d==null?null:(u(v,d)&&o.cm&&ui(o.cm,d,c),v)}function rs(o){this.lines=o,this.parent=null;for(var s=0,c=0;c<o.length;++c)o[c].parent=this,s+=o[c].height;this.height=s}rs.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,s){for(var c=o,u=o+s;c<u;++c){var d=this.lines[c];this.height-=d.height,ks(d),Ir(d,"delete")}this.lines.splice(o,s)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,s,c){this.height+=c,this.lines=this.lines.slice(0,o).concat(s).concat(this.lines.slice(o));for(var u=0;u<s.length;++u)s[u].parent=this},iterN:function(o,s,c){for(var u=o+s;o<u;++o)if(c(this.lines[o]))return!0}};function ns(o){this.children=o;for(var s=0,c=0,u=0;u<o.length;++u){var d=o[u];s+=d.chunkSize(),c+=d.height,d.parent=this}this.size=s,this.height=c,this.parent=null}ns.prototype={chunkSize:function(){return this.size},removeInner:function(o,s){this.size-=s;for(var c=0;c<this.children.length;++c){var u=this.children[c],d=u.chunkSize();if(o<d){var v=Math.min(s,d-o),y=u.height;if(u.removeInner(o,v),this.height-=y-u.height,d==v&&(this.children.splice(c--,1),u.parent=null),(s-=v)==0)break;o=0}else o-=d}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof rs))){var S=[];this.collapse(S),this.children=[new rs(S)],this.children[0].parent=this}},collapse:function(o){for(var s=0;s<this.children.length;++s)this.children[s].collapse(o)},insertInner:function(o,s,c){this.size+=s.length,this.height+=c;for(var u=0;u<this.children.length;++u){var d=this.children[u],v=d.chunkSize();if(o<=v){if(d.insertInner(o,s,c),d.lines&&d.lines.length>50){for(var y=d.lines.length%25+25,S=y;S<d.lines.length;){var P=new rs(d.lines.slice(S,S+=25));d.height-=P.height,this.children.splice(++u,0,P),P.parent=this}d.lines=d.lines.slice(0,y),this.maybeSpill()}break}o-=v}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var s=o.children.splice(o.children.length-5,5),c=new ns(s);if(o.parent){o.size-=c.size,o.height-=c.height;var d=Ct(o.parent.children,o);o.parent.children.splice(d+1,0,c)}else{var u=new ns(o.children);u.parent=o,o.children=[u,c],o=u}c.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,s,c){for(var u=0;u<this.children.length;++u){var d=this.children[u],v=d.chunkSize();if(o<v){var y=Math.min(s,v-o);if(d.iterN(o,y,c))return!0;if((s-=y)==0)break;o=0}else o-=v}}};var is=function(o,s,c){if(c)for(var u in c)c.hasOwnProperty(u)&&(this[u]=c[u]);this.doc=o,this.node=s};is.prototype.clear=function(){var o=this.doc.cm,s=this.line.widgets,c=this.line,u=or(c);if(!(u==null||!s)){for(var d=0;d<s.length;++d)s[d]==this&&s.splice(d--,1);s.length||(c.widgets=null);var v=Ei(this);rn(c,Math.max(0,c.height-v)),o&&(kn(o,function(){dc(o,c,-v),ui(o,u,"widget")}),Ir(o,"lineWidgetCleared",o,this,u))}},is.prototype.changed=function(){var o=this,s=this.height,c=this.doc.cm,u=this.line;this.height=null;var d=Ei(this)-s;d&&(Vn(this.doc,u)||rn(u,u.height+d),c&&kn(c,function(){c.curOp.forceUpdate=!0,dc(c,u,d),Ir(c,"lineWidgetChanged",c,o,or(u))}))},Sr(is);function dc(o,s,c){Dr(s)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&Il(o,c)}function Zf(o,s,c,u){var d=new is(o,c,u),v=o.cm;return v&&d.noHScroll&&(v.display.alignWidgets=!0),fo(o,s,"widget",function(y){var S=y.widgets||(y.widgets=[]);if(d.insertAt==null?S.push(d):S.splice(Math.min(S.length,Math.max(0,d.insertAt)),0,d),d.line=y,v&&!Vn(o,y)){var P=Dr(y)<o.scrollTop;rn(y,y.height+Ei(d)),P&&Il(v,d.height),v.curOp.forceUpdate=!0}return!0}),v&&Ir(v,"lineWidgetAdded",v,d,typeof s=="number"?s:or(s)),d}var pc=0,po=function(o,s){this.lines=[],this.type=s,this.doc=o,this.id=++pc};po.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,s=o&&!o.curOp;if(s&&zo(o),mr(this,"clear")){var c=this.find();c&&Ir(this,"clear",c.from,c.to)}for(var u=null,d=null,v=0;v<this.lines.length;++v){var y=this.lines[v],S=Ui(y.markedSpans,this);o&&!this.collapsed?ui(o,or(y),"text"):o&&(S.to!=null&&(d=or(y)),S.from!=null&&(u=or(y))),y.markedSpans=Xn(y.markedSpans,S),S.from==null&&this.collapsed&&!Vn(this.doc,y)&&o&&rn(y,Pi(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(var P=0;P<this.lines.length;++P){var z=yr(this.lines[P]),pt=gi(z);pt>o.display.maxLineLength&&(o.display.maxLine=z,o.display.maxLineLength=pt,o.display.maxLineChanged=!0)}u!=null&&o&&this.collapsed&&_n(o,u,d+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&oc(o.doc)),o&&Ir(o,"markerCleared",o,this,u,d),s&&Uo(o),this.parent&&this.parent.clear()}},po.prototype.find=function(o,s){o==null&&this.type=="bookmark"&&(o=1);for(var c,u,d=0;d<this.lines.length;++d){var v=this.lines[d],y=Ui(v.markedSpans,this);if(y.from!=null&&(c=j(s?v:or(v),y.from),o==-1))return c;if(y.to!=null&&(u=j(s?v:or(v),y.to),o==1))return u}return c&&{from:c,to:u}},po.prototype.changed=function(){var o=this,s=this.find(-1,!0),c=this,u=this.doc.cm;!s||!u||kn(u,function(){var d=s.line,v=or(s.line),y=Ge(u,v);if(y&&(Au(y),u.curOp.selectionChanged=u.curOp.forceUpdate=!0),u.curOp.updateMaxLine=!0,!Vn(c.doc,d)&&c.height!=null){var S=c.height;c.height=null;var P=Ei(c)-S;P&&rn(d,d.height+P)}Ir(u,"markerChanged",u,o)})},po.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(!s.maybeHiddenMarkers||Ct(s.maybeHiddenMarkers,this)==-1)&&(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},po.prototype.detachLine=function(o){if(this.lines.splice(Ct(this.lines,o),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Sr(po);function Zo(o,s,c,u,d){if(u&&u.shared)return Js(o,s,c,u,d);if(o.cm&&!o.cm.curOp)return Er(o.cm,Zo)(o,s,c,u,d);var v=new po(o,d),y=ft(s,c);if(u&&qt(u,v,!1),y>0||y==0&&v.clearWhenEmpty!==!1)return v;if(v.replacedWith&&(v.collapsed=!0,v.widgetNode=mt("span",[v.replacedWith],"CodeMirror-widget"),u.handleMouseEvents||v.widgetNode.setAttribute("cm-ignore-events","true"),u.insertLeft&&(v.widgetNode.insertLeft=!0)),v.collapsed){if(Fn(o,s.line,s,c,v)||s.line!=c.line&&Fn(o,c.line,s,c,v))throw new Error("Inserting collapsed marker partially overlapping an existing one");Es()}v.addToHistory&&rc(o,{from:s,to:c,origin:"markText"},o.sel,NaN);var S=s.line,P=o.cm,z;if(o.iter(S,c.line+1,function(xt){P&&v.collapsed&&!P.options.lineWrapping&&yr(xt)==P.display.maxLine&&(z=!0),v.collapsed&&S!=s.line&&rn(xt,0),Ps(xt,new zi(v,S==s.line?s.ch:null,S==c.line?c.ch:null),o.cm&&o.cm.curOp),++S}),v.collapsed&&o.iter(s.line,c.line+1,function(xt){Vn(o,xt)&&rn(xt,0)}),v.clearOnEnter&&Se(v,"beforeCursorEnter",function(){return v.clear()}),v.readOnly&&(ja(),(o.history.done.length||o.history.undone.length)&&o.clearHistory()),v.collapsed&&(v.id=++pc,v.atomic=!0),P){if(z&&(P.curOp.updateMaxLine=!0),v.collapsed)_n(P,s.line,c.line+1);else if(v.className||v.startStyle||v.endStyle||v.css||v.attributes||v.title)for(var pt=s.line;pt<=c.line;pt++)ui(P,pt,"text");v.atomic&&oc(P.doc),Ir(P,"markerAdded",P,v)}return v}var os=function(o,s){this.markers=o,this.primary=s;for(var c=0;c<o.length;++c)o[c].parent=this};os.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();Ir(this,"clear")}},os.prototype.find=function(o,s){return this.primary.find(o,s)},Sr(os);function Js(o,s,c,u,d){u=qt(u),u.shared=!1;var v=[Zo(o,s,c,u,d)],y=v[0],S=u.widgetNode;return uo(o,function(P){S&&(u.widgetNode=S.cloneNode(!0)),v.push(Zo(P,ke(P,s),ke(P,c),u,d));for(var z=0;z<P.linked.length;++z)if(P.linked[z].isParent)return;y=ue(v)}),new os(v,y)}function hc(o){return o.findMarks(j(o.first,0),o.clipPos(j(o.lastLine())),function(s){return s.parent})}function vc(o,s){for(var c=0;c<s.length;c++){var u=s[c],d=u.find(),v=o.clipPos(d.from),y=o.clipPos(d.to);if(ft(v,y)){var S=Zo(o,v,y,u.primary,u.primary.type);u.markers.push(S),S.parent=u}}}function $f(o){for(var s=function(u){var d=o[u],v=[d.primary.doc];uo(d.primary.doc,function(P){return v.push(P)});for(var y=0;y<d.markers.length;y++){var S=d.markers[y];Ct(v,S.doc)==-1&&(S.parent=null,d.markers.splice(y--,1))}},c=0;c<o.length;c++)s(c)}var ho=0,bn=function(o,s,c,u,d){if(!(this instanceof bn))return new bn(o,s,c,u,d);c==null&&(c=0),ns.call(this,[new rs([new Ci("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var v=j(c,0);this.sel=so(v),this.history=new an(null),this.id=++ho,this.modeOption=s,this.lineSep=u,this.direction=d=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),Ul(this,{from:v,to:v,text:o}),sn(this,so(v),Yt)};bn.prototype=_(ns.prototype,{constructor:bn,iter:function(o,s,c){c?this.iterN(o-this.first,s-o,c):this.iterN(this.first,this.first+this.size,o)},insert:function(o,s){for(var c=0,u=0;u<s.length;++u)c+=s[u].height;this.insertInner(o-this.first,s,c)},remove:function(o,s){this.removeInner(o-this.first,s)},getValue:function(o){var s=Or(this,this.first,this.first+this.size);return o===!1?s:s.join(o||this.lineSeparator())},setValue:jr(function(o){var s=j(this.first,0),c=this.first+this.size-1;Go(this,{from:s,to:j(c,Pe(this,c).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&Za(this.cm,0,0),sn(this,so(s),Yt)}),replaceRange:function(o,s,c,u){s=ke(this,s),c=c?ke(this,c):s,Ko(this,o,s,c,u)},getRange:function(o,s,c){var u=Tn(this,ke(this,o),ke(this,s));return c===!1?u:c===""?u.join(""):u.join(c||this.lineSeparator())},getLine:function(o){var s=this.getLineHandle(o);return s&&s.text},getLineHandle:function(o){if(hi(this,o))return Pe(this,o)},getLineNumber:function(o){return or(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=Pe(this,o)),yr(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return ke(this,o)},getCursor:function(o){var s=this.sel.primary(),c;return o==null||o=="head"?c=s.head:o=="anchor"?c=s.anchor:o=="end"||o=="to"||o===!1?c=s.to():c=s.from(),c},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:jr(function(o,s,c){Kl(this,ke(this,typeof o=="number"?j(o,s||0):o),null,c)}),setSelection:jr(function(o,s,c){Kl(this,ke(this,o),ke(this,s||o),c)}),extendSelection:jr(function(o,s,c){$s(this,ke(this,o),s&&ke(this,s),c)}),extendSelections:jr(function(o,s){qs(this,ia(this,o),s)}),extendSelectionsBy:jr(function(o,s){var c=R(this.sel.ranges,o);qs(this,ia(this,c),s)}),setSelections:jr(function(o,s,c){if(o.length){for(var u=[],d=0;d<o.length;d++)u[d]=new cr(ke(this,o[d].anchor),ke(this,o[d].head||o[d].anchor));s==null&&(s=Math.min(o.length-1,this.sel.primIndex)),sn(this,ci(this.cm,u,s),c)}}),addSelection:jr(function(o,s,c){var u=this.sel.ranges.slice(0);u.push(new cr(ke(this,o),ke(this,s||o))),sn(this,ci(this.cm,u,u.length-1),c)}),getSelection:function(o){for(var s=this.sel.ranges,c,u=0;u<s.length;u++){var d=Tn(this,s[u].from(),s[u].to());c=c?c.concat(d):d}return o===!1?c:c.join(o||this.lineSeparator())},getSelections:function(o){for(var s=[],c=this.sel.ranges,u=0;u<c.length;u++){var d=Tn(this,c[u].from(),c[u].to());o!==!1&&(d=d.join(o||this.lineSeparator())),s[u]=d}return s},replaceSelection:function(o,s,c){for(var u=[],d=0;d<this.sel.ranges.length;d++)u[d]=o;this.replaceSelections(u,s,c||"+input")},replaceSelections:jr(function(o,s,c){for(var u=[],d=this.sel,v=0;v<d.ranges.length;v++){var y=d.ranges[v];u[v]={from:y.from(),to:y.to(),text:this.splitLines(o[v]),origin:c}}for(var S=s&&s!="end"&&Nf(this,u,s),P=u.length-1;P>=0;P--)Go(this,u[P]);S?Zl(this,S):this.cm&&_a(this.cm)}),undo:jr(function(){Qa(this,"undo")}),redo:jr(function(){Qa(this,"redo")}),undoSelection:jr(function(){Qa(this,"undo",!0)}),redoSelection:jr(function(){Qa(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,s=0,c=0,u=0;u<o.done.length;u++)o.done[u].ranges||++s;for(var d=0;d<o.undone.length;d++)o.undone[d].ranges||++c;return{undo:s,redo:c}},clearHistory:function(){var o=this;this.history=new an(this.history),uo(this,function(s){return s.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:xa(this.history.done),undone:xa(this.history.undone)}},setHistory:function(o){var s=this.history=new an(this.history);s.done=xa(o.done.slice(0),null,!0),s.undone=xa(o.undone.slice(0),null,!0)},setGutterMarker:jr(function(o,s,c){return fo(this,o,"gutter",function(u){var d=u.gutterMarkers||(u.gutterMarkers={});return d[s]=c,!c&&H(d)&&(u.gutterMarkers=null),!0})}),clearGutter:jr(function(o){var s=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[o]&&fo(s,c,"gutter",function(){return c.gutterMarkers[o]=null,H(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(o){var s;if(typeof o=="number"){if(!hi(this,o)||(s=o,o=Pe(this,o),!o))return null}else if(s=or(o),s==null)return null;return{line:s,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:jr(function(o,s,c){return fo(this,o,s=="gutter"?"gutter":"class",function(u){var d=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(!u[d])u[d]=c;else{if(N(c).test(u[d]))return!1;u[d]+=" "+c}return!0})}),removeLineClass:jr(function(o,s,c){return fo(this,o,s=="gutter"?"gutter":"class",function(u){var d=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",v=u[d];if(v)if(c==null)u[d]=null;else{var y=v.match(N(c));if(!y)return!1;var S=y.index+y[0].length;u[d]=v.slice(0,y.index)+(!y.index||S==v.length?"":" ")+v.slice(S)||null}else return!1;return!0})}),addLineWidget:jr(function(o,s,c){return Zf(this,o,s,c)}),removeLineWidget:function(o){o.clear()},markText:function(o,s,c){return Zo(this,ke(this,o),ke(this,s),c,c&&c.type||"range")},setBookmark:function(o,s){var c={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return o=ke(this,o),Zo(this,o,o,c,"bookmark")},findMarksAt:function(o){o=ke(this,o);var s=[],c=Pe(this,o.line).markedSpans;if(c)for(var u=0;u<c.length;++u){var d=c[u];(d.from==null||d.from<=o.ch)&&(d.to==null||d.to>=o.ch)&&s.push(d.marker.parent||d.marker)}return s},findMarks:function(o,s,c){o=ke(this,o),s=ke(this,s);var u=[],d=o.line;return this.iter(o.line,s.line+1,function(v){var y=v.markedSpans;if(y)for(var S=0;S<y.length;S++){var P=y[S];!(P.to!=null&&d==o.line&&o.ch>=P.to||P.from==null&&d!=o.line||P.from!=null&&d==s.line&&P.from>=s.ch)&&(!c||c(P.marker))&&u.push(P.marker.parent||P.marker)}++d}),u},getAllMarks:function(){var o=[];return this.iter(function(s){var c=s.markedSpans;if(c)for(var u=0;u<c.length;++u)c[u].from!=null&&o.push(c[u].marker)}),o},posFromIndex:function(o){var s,c=this.first,u=this.lineSeparator().length;return this.iter(function(d){var v=d.text.length+u;if(v>o)return s=o,!0;o-=v,++c}),ke(this,j(c,s))},indexFromPos:function(o){o=ke(this,o);var s=o.ch;if(o.line<this.first||o.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,o.line,function(u){s+=u.text.length+c}),s},copy:function(o){var s=new bn(Or(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,o&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(o){o||(o={});var s=this.first,c=this.first+this.size;o.from!=null&&o.from>s&&(s=o.from),o.to!=null&&o.to<c&&(c=o.to);var u=new bn(Or(this,s,c),o.mode||this.modeOption,s,this.lineSep,this.direction);return o.sharedHist&&(u.history=this.history),(this.linked||(this.linked=[])).push({doc:u,sharedHist:o.sharedHist}),u.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],vc(u,hc(this)),u},unlinkDoc:function(o){if(o instanceof br&&(o=o.doc),this.linked)for(var s=0;s<this.linked.length;++s){var c=this.linked[s];if(c.doc==o){this.linked.splice(s,1),o.unlinkDoc(this),$f(hc(this));break}}if(o.history==this.history){var u=[o.id];uo(o,function(d){return u.push(d.id)},!0),o.history=new an(null),o.history.done=xa(this.history.done,u),o.history.undone=xa(this.history.undone,u)}},iterLinkedDocs:function(o){uo(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):mn(o)},lineSeparator:function(){return this.lineSep||`
`},setDirection:jr(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(s){return s.order=null}),this.cm&&Vf(this.cm))})}),bn.prototype.eachLine=bn.prototype.iter;var gc=0;function qf(o){var s=this;if(Yl(s),!(ze(s,o)||Hn(s.display,o))){ot(o),K&&(gc=+new Date);var c=Vo(s,o,!0),u=o.dataTransfer.files;if(!(!c||s.isReadOnly()))if(u&&u.length&&window.FileReader&&window.File)for(var d=u.length,v=Array(d),y=0,S=function(){++y==d&&Er(s,function(){c=ke(s.doc,c);var Ft={from:c,to:c,text:s.doc.splitLines(v.filter(function(Jt){return Jt!=null}).join(s.doc.lineSeparator())),origin:"paste"};Go(s.doc,Ft),Zl(s.doc,so(ke(s.doc,c),ke(s.doc,lo(Ft))))})()},P=function(Ft,Jt){if(s.options.allowDropFileTypes&&Ct(s.options.allowDropFileTypes,Ft.type)==-1){S();return}var oe=new FileReader;oe.onerror=function(){return S()},oe.onload=function(){var de=oe.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(de)){S();return}v[Jt]=de,S()},oe.readAsText(Ft)},z=0;z<u.length;z++)P(u[z],z);else{if(s.state.draggingText&&s.doc.sel.contains(c)>-1){s.state.draggingText(o),setTimeout(function(){return s.display.input.focus()},20);return}try{var pt=o.dataTransfer.getData("Text");if(pt){var xt;if(s.state.draggingText&&!s.state.draggingText.copy&&(xt=s.listSelections()),Ys(s.doc,so(c,c)),xt)for(var zt=0;zt<xt.length;++zt)Ko(s.doc,"",xt[zt].anchor,xt[zt].head,"drag");s.replaceSelection(pt,"around","paste"),s.display.input.focus()}}catch{}}}}function Yf(o,s){if(K&&(!o.state.draggingText||+new Date-gc<100)){ne(s);return}if(!(ze(o,s)||Hn(o.display,s))&&(s.dataTransfer.setData("Text",o.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!x)){var c=B("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",E&&(c.width=c.height=1,o.display.wrapper.appendChild(c),c._top=c.offsetTop),s.dataTransfer.setDragImage(c,0,0),E&&c.parentNode.removeChild(c)}}function Xf(o,s){var c=Vo(o,s);if(c){var u=document.createDocumentFragment();Al(o,c,u),o.display.dragCursor||(o.display.dragCursor=B("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),ut(o.display.dragCursor,u)}}function Yl(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function Qs(o){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),c=[],u=0;u<s.length;u++){var d=s[u].CodeMirror;d&&c.push(d)}c.length&&c[0].operation(function(){for(var v=0;v<c.length;v++)o(c[v])})}}var mc=!1;function Jf(){mc||(yc(),mc=!0)}function yc(){var o;Se(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,Qs(Qf)},100))}),Se(window,"blur",function(){return Qs(ga)})}function Qf(o){var s=o.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,o.setSize()}for(var vo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Sa=0;Sa<10;Sa++)vo[Sa+48]=vo[Sa+96]=String(Sa);for(var tl=65;tl<=90;tl++)vo[tl]=String.fromCharCode(tl);for(var Li=1;Li<=12;Li++)vo[Li+111]=vo[Li+63235]="F"+Li;var Mi={};Mi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Mi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Mi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Mi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Mi.default=T?Mi.macDefault:Mi.pcDefault;function td(o){var s=o.split(/-(?!$)/);o=s[s.length-1];for(var c,u,d,v,y=0;y<s.length-1;y++){var S=s[y];if(/^(cmd|meta|m)$/i.test(S))v=!0;else if(/^a(lt)?$/i.test(S))c=!0;else if(/^(c|ctrl|control)$/i.test(S))u=!0;else if(/^s(hift)?$/i.test(S))d=!0;else throw new Error("Unrecognized modifier name: "+S)}return c&&(o="Alt-"+o),u&&(o="Ctrl-"+o),v&&(o="Cmd-"+o),d&&(o="Shift-"+o),o}function _c(o){var s={};for(var c in o)if(o.hasOwnProperty(c)){var u=o[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if(u=="..."){delete o[c];continue}for(var d=R(c.split(" "),td),v=0;v<d.length;v++){var y=void 0,S=void 0;v==d.length-1?(S=d.join(" "),y=u):(S=d.slice(0,v+1).join(" "),y="...");var P=s[S];if(!P)s[S]=y;else if(P!=y)throw new Error("Inconsistent bindings for "+S)}delete o[c]}for(var z in s)o[z]=s[z];return o}function $o(o,s,c,u){s=el(s);var d=s.call?s.call(o,u):s[o];if(d===!1)return"nothing";if(d==="...")return"multi";if(d!=null&&c(d))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return $o(o,s.fallthrough,c,u);for(var v=0;v<s.fallthrough.length;v++){var y=$o(o,s.fallthrough[v],c,u);if(y)return y}}}function Xl(o){var s=typeof o=="string"?o:vo[o.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function Jl(o,s,c){var u=o;return s.altKey&&u!="Alt"&&(o="Alt-"+o),($?s.metaKey:s.ctrlKey)&&u!="Ctrl"&&(o="Ctrl-"+o),($?s.ctrlKey:s.metaKey)&&u!="Mod"&&(o="Cmd-"+o),!c&&s.shiftKey&&u!="Shift"&&(o="Shift-"+o),o}function Ql(o,s){if(E&&o.keyCode==34&&o.char)return!1;var c=vo[o.keyCode];return c==null||o.altGraphKey?!1:(o.keyCode==3&&o.code&&(c=o.code),Jl(c,o,s))}function el(o){return typeof o=="string"?Mi[o]:o}function _i(o,s){for(var c=o.doc.sel.ranges,u=[],d=0;d<c.length;d++){for(var v=s(c[d]);u.length&&ft(v.from,ue(u).to)<=0;){var y=u.pop();if(ft(y.from,v.from)<0){v.from=y.from;break}}u.push(v)}kn(o,function(){for(var S=u.length-1;S>=0;S--)Ko(o.doc,"",u[S].from,u[S].to,"+delete");_a(o)})}function as(o,s,c){var u=Qt(o.text,s+c,c);return u<0||u>o.text.length?null:u}function rl(o,s,c){var u=as(o,s.ch,c);return u==null?null:new j(s.line,u,c<0?"after":"before")}function nl(o,s,c,u,d){if(o){s.doc.direction=="rtl"&&(d=-d);var v=Ae(c,s.doc.direction);if(v){var y=d<0?ue(v):v[0],S=d<0==(y.level==1),P=S?"after":"before",z;if(y.level>0||s.doc.direction=="rtl"){var pt=He(s,c);z=d<0?c.text.length-1:0;var xt=vr(s,pt,z).top;z=Ut(function(zt){return vr(s,pt,zt).top==xt},d<0==(y.level==1)?y.from:y.to-1,z),P=="before"&&(z=as(c,z,1))}else z=d<0?y.to:y.from;return new j(u,z,P)}}return new j(u,d<0?c.text.length:0,d<0?"before":"after")}function wc(o,s,c,u){var d=Ae(s,o.doc.direction);if(!d)return rl(s,c,u);c.ch>=s.text.length?(c.ch=s.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var v=ce(d,c.ch,c.sticky),y=d[v];if(o.doc.direction=="ltr"&&y.level%2==0&&(u>0?y.to>c.ch:y.from<c.ch))return rl(s,c,u);var S=function(me,Oe){return as(s,me instanceof j?me.ch:me,Oe)},P,z=function(me){return o.options.lineWrapping?(P=P||He(o,s),ju(o,s,P,me)):{begin:0,end:s.text.length}},pt=z(c.sticky=="before"?S(c,-1):c.ch);if(o.doc.direction=="rtl"||y.level==1){var xt=y.level==1==u<0,zt=S(c,xt?1:-1);if(zt!=null&&(xt?zt<=y.to&&zt<=pt.end:zt>=y.from&&zt>=pt.begin)){var Ft=xt?"before":"after";return new j(c.line,zt,Ft)}}var Jt=function(me,Oe,we){for(var Te=function(gr,Ur){return Ur?new j(c.line,S(gr,1),"before"):new j(c.line,gr,"after")};me>=0&&me<d.length;me+=Oe){var Ne=d[me],je=Oe>0==(Ne.level!=1),tr=je?we.begin:S(we.end,-1);if(Ne.from<=tr&&tr<Ne.to||(tr=je?Ne.from:S(Ne.to,-1),we.begin<=tr&&tr<we.end))return Te(tr,je)}},oe=Jt(v+u,u,pt);if(oe)return oe;var de=u>0?pt.end:S(pt.begin,-1);return de!=null&&!(u>0&&de==s.text.length)&&(oe=Jt(u>0?0:d.length-1,u,z(de)),oe)?oe:null}var Di={selectAll:lc,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),Yt)},killLine:function(o){return _i(o,function(s){if(s.empty()){var c=Pe(o.doc,s.head.line).text.length;return s.head.ch==c&&s.head.line<o.lastLine()?{from:s.head,to:j(s.head.line+1,0)}:{from:s.head,to:j(s.head.line,c)}}else return{from:s.from(),to:s.to()}})},deleteLine:function(o){return _i(o,function(s){return{from:j(s.from().line,0),to:ke(o.doc,j(s.to().line+1,0))}})},delLineLeft:function(o){return _i(o,function(s){return{from:j(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(o){return _i(o,function(s){var c=o.charCoords(s.head,"div").top+5,u=o.coordsChar({left:0,top:c},"div");return{from:u,to:s.from()}})},delWrappedLineRight:function(o){return _i(o,function(s){var c=o.charCoords(s.head,"div").top+5,u=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:c},"div");return{from:s.from(),to:u}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection(j(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection(j(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(s){return bc(o,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(s){return tu(o,s.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(s){return ed(o,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(s){var c=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:c},"div")},De)},goLineLeft:function(o){return o.extendSelectionsBy(function(s){var c=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:0,top:c},"div")},De)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(s){var c=o.cursorCoords(s.head,"div").top+5,u=o.coordsChar({left:0,top:c},"div");return u.ch<o.getLine(u.line).search(/\S/)?tu(o,s.head):u},De)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var s=[],c=o.listSelections(),u=o.options.tabSize,d=0;d<c.length;d++){var v=c[d].from(),y=Vt(o.getLine(v.line),v.ch,u);s.push(Me(u-y%u))}o.replaceSelections(s)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return kn(o,function(){for(var s=o.listSelections(),c=[],u=0;u<s.length;u++)if(s[u].empty()){var d=s[u].head,v=Pe(o.doc,d.line).text;if(v){if(d.ch==v.length&&(d=new j(d.line,d.ch-1)),d.ch>0)d=new j(d.line,d.ch+1),o.replaceRange(v.charAt(d.ch-1)+v.charAt(d.ch-2),j(d.line,d.ch-2),d,"+transpose");else if(d.line>o.doc.first){var y=Pe(o.doc,d.line-1).text;y&&(d=new j(d.line,1),o.replaceRange(v.charAt(0)+o.doc.lineSeparator()+y.charAt(y.length-1),j(d.line-1,y.length-1),d,"+transpose"))}}c.push(new cr(d,d))}o.setSelections(c)})},newlineAndIndent:function(o){return kn(o,function(){for(var s=o.listSelections(),c=s.length-1;c>=0;c--)o.replaceRange(o.doc.lineSeparator(),s[c].anchor,s[c].head,"+input");s=o.listSelections();for(var u=0;u<s.length;u++)o.indentLine(s[u].from().line,null,!0);_a(o)})},openLine:function(o){return o.replaceSelection(`
`,"start")},toggleOverwrite:function(o){return o.toggleOverwrite()}};function bc(o,s){var c=Pe(o.doc,s),u=yr(c);return u!=c&&(s=or(u)),nl(!0,o,u,s,1)}function ed(o,s){var c=Pe(o.doc,s),u=qi(c);return u!=c&&(s=or(u)),nl(!0,o,c,s,-1)}function tu(o,s){var c=bc(o,s.line),u=Pe(o.doc,c.line),d=Ae(u,o.doc.direction);if(!d||d[0].level==0){var v=Math.max(c.ch,u.text.search(/\S/)),y=s.line==c.line&&s.ch<=v&&s.ch;return j(c.line,y?0:v,c.sticky)}return c}function il(o,s,c){if(typeof s=="string"&&(s=Di[s],!s))return!1;o.display.input.ensurePolled();var u=o.display.shift,d=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),c&&(o.display.shift=!1),d=s(o)!=ae}finally{o.display.shift=u,o.state.suppressEdits=!1}return d}function rd(o,s,c){for(var u=0;u<o.state.keyMaps.length;u++){var d=$o(s,o.state.keyMaps[u],c,o);if(d)return d}return o.options.extraKeys&&$o(s,o.options.extraKeys,c,o)||$o(s,o.options.keyMap,c,o)}var xc=new $t;function ss(o,s,c,u){var d=o.state.keySeq;if(d){if(Xl(s))return"handled";if(/\'$/.test(s)?o.state.keySeq=null:xc.set(50,function(){o.state.keySeq==d&&(o.state.keySeq=null,o.display.input.reset())}),Cc(o,d+" "+s,c,u))return!0}return Cc(o,s,c,u)}function Cc(o,s,c,u){var d=rd(o,s,u);return d=="multi"&&(o.state.keySeq=s),d=="handled"&&Ir(o,"keyHandled",o,s,c),(d=="handled"||d=="multi")&&(ot(c),va(o)),!!d}function Sc(o,s){var c=Ql(s,!0);return c?s.shiftKey&&!o.state.keySeq?ss(o,"Shift-"+c,s,function(u){return il(o,u,!0)})||ss(o,c,s,function(u){if(typeof u=="string"?/^go[A-Z]/.test(u):u.motion)return il(o,u)}):ss(o,c,s,function(u){return il(o,u)}):!1}function nd(o,s,c){return ss(o,"'"+c+"'",s,function(u){return il(o,u,!0)})}var eu=null;function ei(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField())&&(s.curOp.focus=Dt(Nt(s)),!ze(s,o))){K&&et<11&&o.keyCode==27&&(o.returnValue=!1);var c=o.keyCode;s.display.shift=c==16||o.shiftKey;var u=Sc(s,o);E&&(eu=u?c:null,!u&&c==88&&!ii&&(T?o.metaKey:o.ctrlKey)&&s.replaceSelection("",null,"cut")),St&&!T&&!u&&c==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),c==18&&!/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)&&zn(s)}}function zn(o){var s=o.display.lineDiv;X(s,"CodeMirror-crosshair");function c(u){(u.keyCode==18||!u.altKey)&&(I(s,"CodeMirror-crosshair"),Le(document,"keyup",c),Le(document,"mouseover",c))}Se(document,"keyup",c),Se(document,"mouseover",c)}function qo(o){o.keyCode==16&&(this.doc.sel.shift=!1),ze(this,o)}function ru(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField())&&!(Hn(s.display,o)||ze(s,o)||o.ctrlKey&&!o.altKey||T&&o.metaKey)){var c=o.keyCode,u=o.charCode;if(E&&c==eu){eu=null,ot(o);return}if(!(E&&(!o.which||o.which<10)&&Sc(s,o))){var d=String.fromCharCode(u??c);d!="\b"&&(nd(s,o,d)||s.display.input.onKeyPress(o))}}}var nu=400,iu=function(o,s,c){this.time=o,this.pos=s,this.button=c};iu.prototype.compare=function(o,s,c){return this.time+nu>o&&ft(s,this.pos)==0&&c==this.button};var ls,Oa;function id(o,s){var c=+new Date;return Oa&&Oa.compare(c,o,s)?(ls=Oa=null,"triple"):ls&&ls.compare(c,o,s)?(Oa=new iu(c,o,s),ls=null,"double"):(ls=new iu(c,o,s),Oa=null,"single")}function ou(o){var s=this,c=s.display;if(!(ze(s,o)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=o.shiftKey,Hn(c,o)){m||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100));return}if(!su(s,o)){var u=Vo(s,o),d=Fe(o),v=u?id(u,d):"single";jt(s).focus(),d==1&&s.state.selectingText&&s.state.selectingText(o),!(u&&au(s,d,u,v,o))&&(d==1?u?Tc(s,u,v,o):_e(o)==c.scroller&&ot(o):d==2?(u&&$s(s.doc,u),setTimeout(function(){return c.input.focus()},20)):d==3&&(O?s.display.input.onContextMenu(o):Ml(s)))}}}function au(o,s,c,u,d){var v="Click";return u=="double"?v="Double"+v:u=="triple"&&(v="Triple"+v),v=(s==1?"Left":s==2?"Middle":"Right")+v,ss(o,Jl(v,d),d,function(y){if(typeof y=="string"&&(y=Di[y]),!y)return!1;var S=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),S=y(o,c)!=ae}finally{o.state.suppressEdits=!1}return S})}function Oc(o,s,c){var u=o.getOption("configureMouse"),d=u?u(o,s,c):{};if(d.unit==null){var v=it?c.shiftKey&&c.metaKey:c.altKey;d.unit=v?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(d.extend==null||o.doc.extend)&&(d.extend=o.doc.extend||c.shiftKey),d.addNew==null&&(d.addNew=T?c.metaKey:c.ctrlKey),d.moveOnDrag==null&&(d.moveOnDrag=!(T?c.altKey:c.ctrlKey)),d}function Tc(o,s,c,u){K?setTimeout(Lt(Ll,o),0):o.curOp.focus=Dt(Nt(o));var d=Oc(o,c,u),v=o.doc.sel,y;o.options.dragDrop&&$e&&!o.isReadOnly()&&c=="single"&&(y=v.contains(s))>-1&&(ft((y=v.ranges[y]).from(),s)<0||s.xRel>0)&&(ft(y.to(),s)>0||s.xRel<0)?od(o,u,s,d):ad(o,u,s,d)}function od(o,s,c,u){var d=o.display,v=!1,y=Er(o,function(z){m&&(d.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:Ml(o)),Le(d.wrapper.ownerDocument,"mouseup",y),Le(d.wrapper.ownerDocument,"mousemove",S),Le(d.scroller,"dragstart",P),Le(d.scroller,"drop",y),v||(ot(z),u.addNew||$s(o.doc,c,null,null,u.extend),m&&!x||K&&et==9?setTimeout(function(){d.wrapper.ownerDocument.body.focus({preventScroll:!0}),d.input.focus()},20):d.input.focus())}),S=function(z){v=v||Math.abs(s.clientX-z.clientX)+Math.abs(s.clientY-z.clientY)>=10},P=function(){return v=!0};m&&(d.scroller.draggable=!0),o.state.draggingText=y,y.copy=!u.moveOnDrag,Se(d.wrapper.ownerDocument,"mouseup",y),Se(d.wrapper.ownerDocument,"mousemove",S),Se(d.scroller,"dragstart",P),Se(d.scroller,"drop",y),o.state.delayingBlurEvent=!0,setTimeout(function(){return d.input.focus()},20),d.scroller.dragDrop&&d.scroller.dragDrop()}function Ec(o,s,c){if(c=="char")return new cr(s,s);if(c=="word")return o.findWordAt(s);if(c=="line")return new cr(j(s.line,0),ke(o.doc,j(s.line+1,0)));var u=c(o,s);return new cr(u.from,u.to)}function ad(o,s,c,u){K&&Ml(o);var d=o.display,v=o.doc;ot(s);var y,S,P=v.sel,z=P.ranges;if(u.addNew&&!u.extend?(S=v.sel.contains(c),S>-1?y=z[S]:y=new cr(c,c)):(y=v.sel.primary(),S=v.sel.primIndex),u.unit=="rectangle")u.addNew||(y=new cr(c,c)),c=Vo(o,s,!0,!0),S=-1;else{var pt=Ec(o,c,u.unit);u.extend?y=Wo(y,pt.anchor,pt.head,u.extend):y=pt}u.addNew?S==-1?(S=z.length,sn(v,ci(o,z.concat([y]),S),{scroll:!1,origin:"*mouse"})):z.length>1&&z[S].empty()&&u.unit=="char"&&!u.extend?(sn(v,ci(o,z.slice(0,S).concat(z.slice(S+1)),0),{scroll:!1,origin:"*mouse"}),P=v.sel):Gl(v,S,y,Xt):(S=0,sn(v,new Bn([y],0),Xt),P=v.sel);var xt=c;function zt(we){if(ft(xt,we)!=0)if(xt=we,u.unit=="rectangle"){for(var Te=[],Ne=o.options.tabSize,je=Vt(Pe(v,c.line).text,c.ch,Ne),tr=Vt(Pe(v,we.line).text,we.ch,Ne),gr=Math.min(je,tr),Ur=Math.max(je,tr),_r=Math.min(c.line,we.line),An=Math.min(o.lastLine(),Math.max(c.line,we.line));_r<=An;_r++){var pn=Pe(v,_r).text,Fr=Xe(pn,gr,Ne);gr==Ur?Te.push(new cr(j(_r,Fr),j(_r,Fr))):pn.length>Fr&&Te.push(new cr(j(_r,Fr),j(_r,Xe(pn,Ur,Ne))))}Te.length||Te.push(new cr(c,c)),sn(v,ci(o,P.ranges.slice(0,S).concat(Te),S),{origin:"*mouse",scroll:!1}),o.scrollIntoView(we)}else{var xn=y,Xr=Ec(o,we,u.unit),Wr=xn.anchor,Vr;ft(Xr.anchor,Wr)>0?(Vr=Xr.head,Wr=qe(xn.from(),Xr.anchor)):(Vr=Xr.anchor,Wr=Ue(xn.to(),Xr.head));var Pr=P.ranges.slice(0);Pr[S]=sd(o,new cr(ke(v,Wr),Vr)),sn(v,ci(o,Pr,S),Xt)}}var Ft=d.wrapper.getBoundingClientRect(),Jt=0;function oe(we){var Te=++Jt,Ne=Vo(o,we,!0,u.unit=="rectangle");if(Ne)if(ft(Ne,xt)!=0){o.curOp.focus=Dt(Nt(o)),zt(Ne);var je=ki(d,v);(Ne.line>=je.to||Ne.line<je.from)&&setTimeout(Er(o,function(){Jt==Te&&oe(we)}),150)}else{var tr=we.clientY<Ft.top?-20:we.clientY>Ft.bottom?20:0;tr&&setTimeout(Er(o,function(){Jt==Te&&(d.scroller.scrollTop+=tr,oe(we))}),50)}}function de(we){o.state.selectingText=!1,Jt=1/0,we&&(ot(we),d.input.focus()),Le(d.wrapper.ownerDocument,"mousemove",me),Le(d.wrapper.ownerDocument,"mouseup",Oe),v.history.lastSelOrigin=null}var me=Er(o,function(we){we.buttons===0||!Fe(we)?de(we):oe(we)}),Oe=Er(o,de);o.state.selectingText=Oe,Se(d.wrapper.ownerDocument,"mousemove",me),Se(d.wrapper.ownerDocument,"mouseup",Oe)}function sd(o,s){var c=s.anchor,u=s.head,d=Pe(o.doc,c.line);if(ft(c,u)==0&&c.sticky==u.sticky)return s;var v=Ae(d);if(!v)return s;var y=ce(v,c.ch,c.sticky),S=v[y];if(S.from!=c.ch&&S.to!=c.ch)return s;var P=y+(S.from==c.ch==(S.level!=1)?0:1);if(P==0||P==v.length)return s;var z;if(u.line!=c.line)z=(u.line-c.line)*(o.doc.direction=="ltr"?1:-1)>0;else{var pt=ce(v,u.ch,u.sticky),xt=pt-y||(u.ch-c.ch)*(S.level==1?-1:1);pt==P-1||pt==P?z=xt<0:z=xt>0}var zt=v[P+(z?-1:0)],Ft=z==(zt.level==1),Jt=Ft?zt.from:zt.to,oe=Ft?"after":"before";return c.ch==Jt&&c.sticky==oe?s:new cr(new j(c.line,Jt,oe),u)}function Pc(o,s,c,u){var d,v;if(s.touches)d=s.touches[0].clientX,v=s.touches[0].clientY;else try{d=s.clientX,v=s.clientY}catch{return!1}if(d>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;u&&ot(s);var y=o.display,S=y.lineDiv.getBoundingClientRect();if(v>S.bottom||!mr(o,c))return Ht(s);v-=S.top-y.viewOffset;for(var P=0;P<o.display.gutterSpecs.length;++P){var z=y.gutters.childNodes[P];if(z&&z.getBoundingClientRect().right>=d){var pt=qn(o.doc,v),xt=o.display.gutterSpecs[P];return nr(o,c,o,pt,xt.className,s),Ht(s)}}}function su(o,s){return Pc(o,s,"gutterClick",!0)}function kc(o,s){Hn(o.display,s)||ld(o,s)||ze(o,s,"contextmenu")||O||o.display.input.onContextMenu(s)}function ld(o,s){return mr(o,"gutterContextMenu")?Pc(o,s,"gutterContextMenu",!1):!1}function lu(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),no(o)}var Yo={toString:function(){return"CodeMirror.Init"}},Ac={},ol={};function Xo(o){var s=o.optionHandlers;function c(u,d,v,y){o.defaults[u]=d,v&&(s[u]=y?function(S,P,z){z!=Yo&&v(S,P,z)}:v)}o.defineOption=c,o.Init=Yo,c("value","",function(u,d){return u.setValue(d)},!0),c("mode",null,function(u,d){u.doc.modeOption=d,zl(u)},!0),c("indentUnit",2,zl,!0),c("indentWithTabs",!1),c("smartIndent",!0),c("tabSize",4,function(u){Ja(u),no(u),_n(u)},!0),c("lineSeparator",null,function(u,d){if(u.doc.lineSep=d,!!d){var v=[],y=u.doc.first;u.doc.iter(function(P){for(var z=0;;){var pt=P.text.indexOf(d,z);if(pt==-1)break;z=pt+d.length,v.push(j(y,pt))}y++});for(var S=v.length-1;S>=0;S--)Ko(u.doc,d,v[S],j(v[S].line,v[S].ch+d.length))}}),c("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(u,d,v){u.state.specialChars=new RegExp(d.source+(d.test("	")?"":"|	"),"g"),v!=Yo&&u.refresh()}),c("specialCharPlaceholder",fn,function(u){return u.refresh()},!0),c("electricChars",!0),c("inputStyle",W?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),c("spellcheck",!1,function(u,d){return u.getInputField().spellcheck=d},!0),c("autocorrect",!1,function(u,d){return u.getInputField().autocorrect=d},!0),c("autocapitalize",!1,function(u,d){return u.getInputField().autocapitalize=d},!0),c("rtlMoveVisually",!U),c("wholeLineUpdateBefore",!0),c("theme","default",function(u){lu(u),wa(u)},!0),c("keyMap","default",function(u,d,v){var y=el(d),S=v!=Yo&&el(v);S&&S.detach&&S.detach(u,y),y.attach&&y.attach(u,S||null)}),c("extraKeys",null),c("configureMouse",null),c("lineWrapping",!1,cd,!0),c("gutters",[],function(u,d){u.display.gutterSpecs=Hl(d,u.options.lineNumbers),wa(u)},!0),c("fixedGutter",!0,function(u,d){u.display.gutters.style.left=d?Ga(u.display)+"px":"0",u.refresh()},!0),c("coverGutterNextToScrollbar",!1,function(u){return Tr(u)},!0),c("scrollbarStyle","native",function(u){jl(u),Tr(u),u.display.scrollbars.setScrollTop(u.doc.scrollTop),u.display.scrollbars.setScrollLeft(u.doc.scrollLeft)},!0),c("lineNumbers",!1,function(u,d){u.display.gutterSpecs=Hl(u.options.gutters,d),wa(u)},!0),c("firstLineNumber",1,wa,!0),c("lineNumberFormatter",function(u){return u},wa,!0),c("showCursorWhenSelecting",!1,oo,!0),c("resetSelectionOnContextMenu",!0),c("lineWiseCopyCut",!0),c("pasteLinesPerSelection",!0),c("selectionsMayTouch",!1),c("readOnly",!1,function(u,d){d=="nocursor"&&(ga(u),u.display.input.blur()),u.display.input.readOnlyChanged(d)}),c("screenReaderLabel",null,function(u,d){d=d===""?null:d,u.display.input.screenReaderLabelChanged(d)}),c("disableInput",!1,function(u,d){d||u.display.input.reset()},!0),c("dragDrop",!0,ud),c("allowDropFileTypes",null),c("cursorBlinkRate",530),c("cursorScrollMargin",0),c("cursorHeight",1,oo,!0),c("singleCursorHeightPerLine",!0,oo,!0),c("workTime",100),c("workDelay",100),c("flattenSpans",!0,Ja,!0),c("addModeClass",!1,Ja,!0),c("pollInterval",100),c("undoDepth",200,function(u,d){return u.doc.history.undoDepth=d}),c("historyEventDelay",1250),c("viewportMargin",10,function(u){return u.refresh()},!0),c("maxHighlightLength",1e4,Ja,!0),c("moveInputWithCursor",!0,function(u,d){d||u.display.input.resetPosition()}),c("tabindex",null,function(u,d){return u.display.input.getField().tabIndex=d||""}),c("autofocus",null),c("direction","ltr",function(u,d){return u.doc.setDirection(d)},!0),c("phrases",null)}function ud(o,s,c){var u=c&&c!=Yo;if(!s!=!u){var d=o.display.dragFunctions,v=s?Se:Le;v(o.display.scroller,"dragstart",d.start),v(o.display.scroller,"dragenter",d.enter),v(o.display.scroller,"dragover",d.over),v(o.display.scroller,"dragleave",d.leave),v(o.display.scroller,"drop",d.drop)}}function cd(o){o.options.lineWrapping?(X(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(I(o.display.wrapper,"CodeMirror-wrap"),Yi(o)),ha(o),_n(o),no(o),setTimeout(function(){return Tr(o)},100)}function br(o,s){var c=this;if(!(this instanceof br))return new br(o,s);this.options=s=s?qt(s):{},qt(Ac,s,!1);var u=s.value;typeof u=="string"?u=new bn(u,s.mode,null,s.lineSeparator,s.direction):s.mode&&(u.modeOption=s.mode),this.doc=u;var d=new br.inputStyles[s.inputStyle](this),v=this.display=new Rf(o,u,d,s);v.wrapper.CodeMirror=this,lu(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),jl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new $t,keySeq:null,specialChars:null},s.autofocus&&!W&&v.input.focus(),K&&et<11&&setTimeout(function(){return c.display.input.reset(!0)},20),fd(this),Jf(),zo(this),this.curOp.forceUpdate=!0,tc(this,u),s.autofocus&&!W||this.hasFocus()?setTimeout(function(){c.hasFocus()&&!c.state.focused&&Dl(c)},20):ga(this);for(var y in ol)ol.hasOwnProperty(y)&&ol[y](this,s[y],Yo);Zu(this),s.finishInit&&s.finishInit(this);for(var S=0;S<al.length;++S)al[S](this);Uo(this),m&&s.lineWrapping&&getComputedStyle(v.lineDiv).textRendering=="optimizelegibility"&&(v.lineDiv.style.textRendering="auto")}br.defaults=Ac,br.optionHandlers=ol;function fd(o){var s=o.display;Se(s.scroller,"mousedown",Er(o,ou)),K&&et<11?Se(s.scroller,"dblclick",Er(o,function(P){if(!ze(o,P)){var z=Vo(o,P);if(!(!z||su(o,P)||Hn(o.display,P))){ot(P);var pt=o.findWordAt(z);$s(o.doc,pt.anchor,pt.head)}}})):Se(s.scroller,"dblclick",function(P){return ze(o,P)||ot(P)}),Se(s.scroller,"contextmenu",function(P){return kc(o,P)}),Se(s.input.getField(),"contextmenu",function(P){s.scroller.contains(P.target)||kc(o,P)});var c,u={end:0};function d(){s.activeTouch&&(c=setTimeout(function(){return s.activeTouch=null},1e3),u=s.activeTouch,u.end=+new Date)}function v(P){if(P.touches.length!=1)return!1;var z=P.touches[0];return z.radiusX<=1&&z.radiusY<=1}function y(P,z){if(z.left==null)return!0;var pt=z.left-P.left,xt=z.top-P.top;return pt*pt+xt*xt>20*20}Se(s.scroller,"touchstart",function(P){if(!ze(o,P)&&!v(P)&&!su(o,P)){s.input.ensurePolled(),clearTimeout(c);var z=+new Date;s.activeTouch={start:z,moved:!1,prev:z-u.end<=300?u:null},P.touches.length==1&&(s.activeTouch.left=P.touches[0].pageX,s.activeTouch.top=P.touches[0].pageY)}}),Se(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),Se(s.scroller,"touchend",function(P){var z=s.activeTouch;if(z&&!Hn(s,P)&&z.left!=null&&!z.moved&&new Date-z.start<300){var pt=o.coordsChar(s.activeTouch,"page"),xt;!z.prev||y(z,z.prev)?xt=new cr(pt,pt):!z.prev.prev||y(z,z.prev.prev)?xt=o.findWordAt(pt):xt=new cr(j(pt.line,0),ke(o.doc,j(pt.line+1,0))),o.setSelection(xt.anchor,xt.head),o.focus(),ot(P)}d()}),Se(s.scroller,"touchcancel",d),Se(s.scroller,"scroll",function(){s.scroller.clientHeight&&($a(o,s.scroller.scrollTop),ao(o,s.scroller.scrollLeft,!0),nr(o,"scroll",o))}),Se(s.scroller,"mousewheel",function(P){return Yu(o,P)}),Se(s.scroller,"DOMMouseScroll",function(P){return Yu(o,P)}),Se(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(P){ze(o,P)||ne(P)},over:function(P){ze(o,P)||(Xf(o,P),ne(P))},start:function(P){return Yf(o,P)},drop:Er(o,qf),leave:function(P){ze(o,P)||Yl(o)}};var S=s.input.getField();Se(S,"keyup",function(P){return qo.call(o,P)}),Se(S,"keydown",Er(o,ei)),Se(S,"keypress",Er(o,ru)),Se(S,"focus",function(P){return Dl(o,P)}),Se(S,"blur",function(P){return ga(o,P)})}var al=[];br.defineInitHook=function(o){return al.push(o)};function us(o,s,c,u){var d=o.doc,v;c==null&&(c="add"),c=="smart"&&(d.mode.indent?v=ko(o,s).state:c="prev");var y=o.options.tabSize,S=Pe(d,s),P=Vt(S.text,null,y);S.stateAfter&&(S.stateAfter=null);var z=S.text.match(/^\s*/)[0],pt;if(!u&&!/\S/.test(S.text))pt=0,c="not";else if(c=="smart"&&(pt=d.mode.indent(v,S.text.slice(z.length),S.text),pt==ae||pt>150)){if(!u)return;c="prev"}c=="prev"?s>d.first?pt=Vt(Pe(d,s-1).text,null,y):pt=0:c=="add"?pt=P+o.options.indentUnit:c=="subtract"?pt=P-o.options.indentUnit:typeof c=="number"&&(pt=P+c),pt=Math.max(0,pt);var xt="",zt=0;if(o.options.indentWithTabs)for(var Ft=Math.floor(pt/y);Ft;--Ft)zt+=y,xt+="	";if(zt<pt&&(xt+=Me(pt-zt)),xt!=z)return Ko(d,xt,j(s,0),j(s,z.length),"+input"),S.stateAfter=null,!0;for(var Jt=0;Jt<d.sel.ranges.length;Jt++){var oe=d.sel.ranges[Jt];if(oe.head.line==s&&oe.head.ch<z.length){var de=j(s,z.length);Gl(d,Jt,new cr(de,de));break}}}var fi=null;function sl(o){fi=o}function ll(o,s,c,u,d){var v=o.doc;o.display.shift=!1,u||(u=v.sel);var y=+new Date-200,S=d=="paste"||o.state.pasteIncoming>y,P=mn(s),z=null;if(S&&u.ranges.length>1)if(fi&&fi.text.join(`
`)==s){if(u.ranges.length%fi.text.length==0){z=[];for(var pt=0;pt<fi.text.length;pt++)z.push(v.splitLines(fi.text[pt]))}}else P.length==u.ranges.length&&o.options.pasteLinesPerSelection&&(z=R(P,function(me){return[me]}));for(var xt=o.curOp.updateInput,zt=u.ranges.length-1;zt>=0;zt--){var Ft=u.ranges[zt],Jt=Ft.from(),oe=Ft.to();Ft.empty()&&(c&&c>0?Jt=j(Jt.line,Jt.ch-c):o.state.overwrite&&!S?oe=j(oe.line,Math.min(Pe(v,oe.line).text.length,oe.ch+ue(P).length)):S&&fi&&fi.lineWise&&fi.text.join(`
`)==P.join(`
`)&&(Jt=oe=j(Jt.line,0)));var de={from:Jt,to:oe,text:z?z[zt%z.length]:P,origin:d||(S?"paste":o.state.cutIncoming>y?"cut":"+input")};Go(o.doc,de),Ir(o,"inputRead",o,de)}s&&!S&&Mc(o,s),_a(o),o.curOp.updateInput<2&&(o.curOp.updateInput=xt),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function Lc(o,s){var c=o.clipboardData&&o.clipboardData.getData("Text");if(c)return o.preventDefault(),!s.isReadOnly()&&!s.options.disableInput&&s.hasFocus()&&kn(s,function(){return ll(s,c,0,null,"paste")}),!0}function Mc(o,s){if(!(!o.options.electricChars||!o.options.smartIndent))for(var c=o.doc.sel,u=c.ranges.length-1;u>=0;u--){var d=c.ranges[u];if(!(d.head.ch>100||u&&c.ranges[u-1].head.line==d.head.line)){var v=o.getModeAt(d.head),y=!1;if(v.electricChars){for(var S=0;S<v.electricChars.length;S++)if(s.indexOf(v.electricChars.charAt(S))>-1){y=us(o,d.head.line,"smart");break}}else v.electricInput&&v.electricInput.test(Pe(o.doc,d.head.line).text.slice(0,d.head.ch))&&(y=us(o,d.head.line,"smart"));y&&Ir(o,"electricInput",o,d.head.line)}}}function Cr(o){for(var s=[],c=[],u=0;u<o.doc.sel.ranges.length;u++){var d=o.doc.sel.ranges[u].head.line,v={anchor:j(d,0),head:j(d+1,0)};c.push(v),s.push(o.getRange(v.anchor,v.head))}return{text:s,ranges:c}}function ul(o,s,c,u){o.setAttribute("autocorrect",c?"on":"off"),o.setAttribute("autocapitalize",u?"on":"off"),o.setAttribute("spellcheck",!!s)}function cl(){var o=B("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=B("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return m?o.style.width="1000px":o.setAttribute("wrap","off"),st&&(o.style.border="1px solid black"),s}function cs(o){var s=o.optionHandlers,c=o.helpers={};o.prototype={constructor:o,focus:function(){jt(this).focus(),this.display.input.focus()},setOption:function(u,d){var v=this.options,y=v[u];v[u]==d&&u!="mode"||(v[u]=d,s.hasOwnProperty(u)&&Er(this,s[u])(this,d,y),nr(this,"optionChange",this,u))},getOption:function(u){return this.options[u]},getDoc:function(){return this.doc},addKeyMap:function(u,d){this.state.keyMaps[d?"push":"unshift"](el(u))},removeKeyMap:function(u){for(var d=this.state.keyMaps,v=0;v<d.length;++v)if(d[v]==u||d[v].name==u)return d.splice(v,1),!0},addOverlay:Zr(function(u,d){var v=u.token?u:o.getMode(this.options,u);if(v.startState)throw new Error("Overlays may not be stateful.");at(this.state.overlays,{mode:v,modeSpec:u,opaque:d&&d.opaque,priority:d&&d.priority||0},function(y){return y.priority}),this.state.modeGen++,_n(this)}),removeOverlay:Zr(function(u){for(var d=this.state.overlays,v=0;v<d.length;++v){var y=d[v].modeSpec;if(y==u||typeof u=="string"&&y.name==u){d.splice(v,1),this.state.modeGen++,_n(this);return}}}),indentLine:Zr(function(u,d,v){typeof d!="string"&&typeof d!="number"&&(d==null?d=this.options.smartIndent?"smart":"prev":d=d?"add":"subtract"),hi(this.doc,u)&&us(this,u,d,v)}),indentSelection:Zr(function(u){for(var d=this.doc.sel.ranges,v=-1,y=0;y<d.length;y++){var S=d[y];if(S.empty())S.head.line>v&&(us(this,S.head.line,u,!0),v=S.head.line,y==this.doc.sel.primIndex&&_a(this));else{var P=S.from(),z=S.to(),pt=Math.max(v,P.line);v=Math.min(this.lastLine(),z.line-(z.ch?0:1))+1;for(var xt=pt;xt<v;++xt)us(this,xt,u);var zt=this.doc.sel.ranges;P.ch==0&&d.length==zt.length&&zt[y].from().ch>0&&Gl(this.doc,y,new cr(P,zt[y].to()),Yt)}}}),getTokenAt:function(u,d){return Bi(this,u,d)},getLineTokens:function(u,d){return Bi(this,j(u),d,!0)},getTokenTypeAt:function(u){u=ke(this.doc,u);var d=Ia(this,Pe(this.doc,u.line)),v=0,y=(d.length-1)/2,S=u.ch,P;if(S==0)P=d[2];else for(;;){var z=v+y>>1;if((z?d[z*2-1]:0)>=S)y=z;else if(d[z*2+1]<S)v=z+1;else{P=d[z*2+2];break}}var pt=P?P.indexOf("overlay "):-1;return pt<0?P:pt==0?null:P.slice(0,pt-1)},getModeAt:function(u){var d=this.doc.mode;return d.innerMode?o.innerMode(d,this.getTokenAt(u).state).mode:d},getHelper:function(u,d){return this.getHelpers(u,d)[0]},getHelpers:function(u,d){var v=[];if(!c.hasOwnProperty(d))return v;var y=c[d],S=this.getModeAt(u);if(typeof S[d]=="string")y[S[d]]&&v.push(y[S[d]]);else if(S[d])for(var P=0;P<S[d].length;P++){var z=y[S[d][P]];z&&v.push(z)}else S.helperType&&y[S.helperType]?v.push(y[S.helperType]):y[S.name]&&v.push(y[S.name]);for(var pt=0;pt<y._global.length;pt++){var xt=y._global[pt];xt.pred(S,this)&&Ct(v,xt.val)==-1&&v.push(xt.val)}return v},getStateAfter:function(u,d){var v=this.doc;return u=sr(v,u??v.first+v.size-1),ko(this,u+1,d).state},cursorCoords:function(u,d){var v,y=this.doc.sel.primary();return u==null?v=y.head:typeof u=="object"?v=ke(this.doc,u):v=u?y.from():y.to(),ti(this,v,d||"page")},charCoords:function(u,d){return Fs(this,ke(this.doc,u),d||"page")},coordsChar:function(u,d){return u=Rs(this,u,d||"page"),El(this,u.left,u.top)},lineAtHeight:function(u,d){return u=Rs(this,{top:u,left:0},d||"page").top,qn(this.doc,u+this.display.viewOffset)},heightAtLine:function(u,d,v){var y=!1,S;if(typeof u=="number"){var P=this.doc.first+this.doc.size-1;u<this.doc.first?u=this.doc.first:u>P&&(u=P,y=!0),S=Pe(this.doc,u)}else S=u;return Fo(this,S,{top:0,left:0},d||"page",v||y).top+(y?this.doc.height-Dr(S):0)},defaultTextHeight:function(){return Pi(this.display)},defaultCharWidth:function(){return io(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(u,d,v,y,S){var P=this.display;u=ti(this,ke(this.doc,u));var z=u.bottom,pt=u.left;if(d.style.position="absolute",d.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(d),P.sizer.appendChild(d),y=="over")z=u.top;else if(y=="above"||y=="near"){var xt=Math.max(P.wrapper.clientHeight,this.doc.height),zt=Math.max(P.sizer.clientWidth,P.lineSpace.clientWidth);(y=="above"||u.bottom+d.offsetHeight>xt)&&u.top>d.offsetHeight?z=u.top-d.offsetHeight:u.bottom+d.offsetHeight<=xt&&(z=u.bottom),pt+d.offsetWidth>zt&&(pt=zt-d.offsetWidth)}d.style.top=z+"px",d.style.left=d.style.right="",S=="right"?(pt=P.sizer.clientWidth-d.offsetWidth,d.style.right="0px"):(S=="left"?pt=0:S=="middle"&&(pt=(P.sizer.clientWidth-d.offsetWidth)/2),d.style.left=pt+"px"),v&&Nu(this,{left:pt,top:z,right:pt+d.offsetWidth,bottom:z+d.offsetHeight})},triggerOnKeyDown:Zr(ei),triggerOnKeyPress:Zr(ru),triggerOnKeyUp:qo,triggerOnMouseDown:Zr(ou),execCommand:function(u){if(Di.hasOwnProperty(u))return Di[u].call(null,this)},triggerElectric:Zr(function(u){Mc(this,u)}),findPosH:function(u,d,v,y){var S=1;d<0&&(S=-1,d=-d);for(var P=ke(this.doc,u),z=0;z<d&&(P=fs(this.doc,P,S,v,y),!P.hitSide);++z);return P},moveH:Zr(function(u,d){var v=this;this.extendSelectionsBy(function(y){return v.display.shift||v.doc.extend||y.empty()?fs(v.doc,y.head,u,d,v.options.rtlMoveVisually):u<0?y.from():y.to()},De)}),deleteH:Zr(function(u,d){var v=this.doc.sel,y=this.doc;v.somethingSelected()?y.replaceSelection("",null,"+delete"):_i(this,function(S){var P=fs(y,S.head,u,d,!1);return u<0?{from:P,to:S.head}:{from:S.head,to:P}})}),findPosV:function(u,d,v,y){var S=1,P=y;d<0&&(S=-1,d=-d);for(var z=ke(this.doc,u),pt=0;pt<d;++pt){var xt=ti(this,z,"div");if(P==null?P=xt.left:xt.left=P,z=Dc(this,xt,S,v),z.hitSide)break}return z},moveV:Zr(function(u,d){var v=this,y=this.doc,S=[],P=!this.display.shift&&!y.extend&&y.sel.somethingSelected();if(y.extendSelectionsBy(function(pt){if(P)return u<0?pt.from():pt.to();var xt=ti(v,pt.head,"div");pt.goalColumn!=null&&(xt.left=pt.goalColumn),S.push(xt.left);var zt=Dc(v,xt,u,d);return d=="page"&&pt==y.sel.primary()&&Il(v,Fs(v,zt,"div").top-xt.top),zt},De),S.length)for(var z=0;z<y.sel.ranges.length;z++)y.sel.ranges[z].goalColumn=S[z]}),findWordAt:function(u){var d=this.doc,v=Pe(d,u.line).text,y=u.ch,S=u.ch;if(v){var P=this.getHelper(u,"wordChars");(u.sticky=="before"||S==v.length)&&y?--y:++S;for(var z=v.charAt(y),pt=Y(z,P)?function(xt){return Y(xt,P)}:/\s/.test(z)?function(xt){return/\s/.test(xt)}:function(xt){return!/\s/.test(xt)&&!Y(xt)};y>0&&pt(v.charAt(y-1));)--y;for(;S<v.length&&pt(v.charAt(S));)++S}return new cr(j(u.line,y),j(u.line,S))},toggleOverwrite:function(u){u!=null&&u==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?X(this.display.cursorDiv,"CodeMirror-overwrite"):I(this.display.cursorDiv,"CodeMirror-overwrite"),nr(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Dt(Nt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Zr(function(u,d){Za(this,u,d)}),getScrollInfo:function(){var u=this.display.scroller;return{left:u.scrollLeft,top:u.scrollTop,height:u.scrollHeight-tt(this)-this.display.barHeight,width:u.scrollWidth-tt(this)-this.display.barWidth,clientHeight:Ot(this),clientWidth:wt(this)}},scrollIntoView:Zr(function(u,d){u==null?(u={from:this.doc.sel.primary().head,to:null},d==null&&(d=this.options.cursorScrollMargin)):typeof u=="number"?u={from:j(u,0),to:null}:u.from==null&&(u={from:u,to:null}),u.to||(u.to=u.from),u.margin=d||0,u.from.line!=null?zs(this,u):Vu(this,u.from,u.to,u.margin)}),setSize:Zr(function(u,d){var v=this,y=function(P){return typeof P=="number"||/^\d+$/.test(String(P))?P+"px":P};u!=null&&(this.display.wrapper.style.width=y(u)),d!=null&&(this.display.wrapper.style.height=y(d)),this.options.lineWrapping&&Wa(this);var S=this.display.viewFrom;this.doc.iter(S,this.display.viewTo,function(P){if(P.widgets){for(var z=0;z<P.widgets.length;z++)if(P.widgets[z].noHScroll){ui(v,S,"widget");break}}++S}),this.curOp.forceUpdate=!0,nr(this,"refresh",this)}),operation:function(u){return kn(this,u)},startOperation:function(){return zo(this)},endOperation:function(){return Uo(this)},refresh:Zr(function(){var u=this.display.cachedTextHeight;_n(this),this.curOp.forceUpdate=!0,no(this),Za(this,this.doc.scrollLeft,this.doc.scrollTop),Nl(this.display),(u==null||Math.abs(u-Pi(this.display))>.5||this.options.lineWrapping)&&ha(this),nr(this,"refresh",this)}),swapDoc:Zr(function(u){var d=this.doc;return d.cm=null,this.state.selectingText&&this.state.selectingText(),tc(this,u),no(this),this.display.input.reset(),Za(this,u.scrollLeft,u.scrollTop),this.curOp.forceScroll=!0,Ir(this,"swapDoc",this,d),d}),phrase:function(u){var d=this.options.phrases;return d&&Object.prototype.hasOwnProperty.call(d,u)?d[u]:u},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Sr(o),o.registerHelper=function(u,d,v){c.hasOwnProperty(u)||(c[u]=o[u]={_global:[]}),c[u][d]=v},o.registerGlobalHelper=function(u,d,v,y){o.registerHelper(u,d,y),c[u]._global.push({pred:v,val:y})}}function fs(o,s,c,u,d){var v=s,y=c,S=Pe(o,s.line),P=d&&o.direction=="rtl"?-c:c;function z(){var Oe=s.line+P;return Oe<o.first||Oe>=o.first+o.size?!1:(s=new j(Oe,s.ch,s.sticky),S=Pe(o,Oe))}function pt(Oe){var we;if(u=="codepoint"){var Te=S.text.charCodeAt(s.ch+(c>0?0:-1));if(isNaN(Te))we=null;else{var Ne=c>0?Te>=55296&&Te<56320:Te>=56320&&Te<57343;we=new j(s.line,Math.max(0,Math.min(S.text.length,s.ch+c*(Ne?2:1))),-c)}}else d?we=wc(o.cm,S,s,c):we=rl(S,s,c);if(we==null)if(!Oe&&z())s=nl(d,o.cm,S,s.line,P);else return!1;else s=we;return!0}if(u=="char"||u=="codepoint")pt();else if(u=="column")pt(!0);else if(u=="word"||u=="group")for(var xt=null,zt=u=="group",Ft=o.cm&&o.cm.getHelper(s,"wordChars"),Jt=!0;!(c<0&&!pt(!Jt));Jt=!1){var oe=S.text.charAt(s.ch)||`
`,de=Y(oe,Ft)?"w":zt&&oe==`
`?"n":!zt||/\s/.test(oe)?null:"p";if(zt&&!Jt&&!de&&(de="s"),xt&&xt!=de){c<0&&(c=1,pt(),s.sticky="after");break}if(de&&(xt=de),c>0&&!pt(!Jt))break}var me=Xs(o,s,v,y,!0);return re(v,me)&&(me.hitSide=!0),me}function Dc(o,s,c,u){var d=o.doc,v=s.left,y;if(u=="page"){var S=Math.min(o.display.wrapper.clientHeight,jt(o).innerHeight||d(o).documentElement.clientHeight),P=Math.max(S-.5*Pi(o.display),3);y=(c>0?s.bottom:s.top)+c*P}else u=="line"&&(y=c>0?s.bottom+3:s.top-3);for(var z;z=El(o,v,y),!!z.outside;){if(c<0?y<=0:y>=d.height){z.hitSide=!0;break}y+=c*5}return z}var dr=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new $t,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};dr.prototype.init=function(o){var s=this,c=this,u=c.cm,d=c.div=o.lineDiv;d.contentEditable=!0,ul(d,u.options.spellcheck,u.options.autocorrect,u.options.autocapitalize);function v(S){for(var P=S.target;P;P=P.parentNode){if(P==d)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(P.className))break}return!1}Se(d,"paste",function(S){!v(S)||ze(u,S)||Lc(S,u)||et<=11&&setTimeout(Er(u,function(){return s.updateFromDOM()}),20)}),Se(d,"compositionstart",function(S){s.composing={data:S.data,done:!1}}),Se(d,"compositionupdate",function(S){s.composing||(s.composing={data:S.data,done:!1})}),Se(d,"compositionend",function(S){s.composing&&(S.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),Se(d,"touchstart",function(){return c.forceCompositionEnd()}),Se(d,"input",function(){s.composing||s.readFromDOMSoon()});function y(S){if(!(!v(S)||ze(u,S))){if(u.somethingSelected())sl({lineWise:!1,text:u.getSelections()}),S.type=="cut"&&u.replaceSelection("",null,"cut");else if(u.options.lineWiseCopyCut){var P=Cr(u);sl({lineWise:!0,text:P.text}),S.type=="cut"&&u.operation(function(){u.setSelections(P.ranges,0,Yt),u.replaceSelection("",null,"cut")})}else return;if(S.clipboardData){S.clipboardData.clearData();var z=fi.text.join(`
`);if(S.clipboardData.setData("Text",z),S.clipboardData.getData("Text")==z){S.preventDefault();return}}var pt=cl(),xt=pt.firstChild;ul(xt),u.display.lineSpace.insertBefore(pt,u.display.lineSpace.firstChild),xt.value=fi.text.join(`
`);var zt=Dt(d.ownerDocument);V(xt),setTimeout(function(){u.display.lineSpace.removeChild(pt),zt.focus(),zt==d&&c.showPrimarySelection()},50)}}Se(d,"copy",y),Se(d,"cut",y)},dr.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},dr.prototype.prepareSelection=function(){var o=Vs(this.cm,!1);return o.focus=Dt(this.div.ownerDocument)==this.div,o},dr.prototype.showSelection=function(o,s){!o||!this.cm.display.view.length||((o.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(o))},dr.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},dr.prototype.showPrimarySelection=function(){var o=this.getSelection(),s=this.cm,c=s.doc.sel.primary(),u=c.from(),d=c.to();if(s.display.viewTo==s.display.viewFrom||u.line>=s.display.viewTo||d.line<s.display.viewFrom){o.removeAllRanges();return}var v=ds(s,o.anchorNode,o.anchorOffset),y=ds(s,o.focusNode,o.focusOffset);if(!(v&&!v.bad&&y&&!y.bad&&ft(qe(v,y),u)==0&&ft(Ue(v,y),d)==0)){var S=s.display.view,P=u.line>=s.display.viewFrom&&fl(s,u)||{node:S[0].measure.map[2],offset:0},z=d.line<s.display.viewTo&&fl(s,d);if(!z){var pt=S[S.length-1].measure,xt=pt.maps?pt.maps[pt.maps.length-1]:pt.map;z={node:xt[xt.length-1],offset:xt[xt.length-2]-xt[xt.length-3]}}if(!P||!z){o.removeAllRanges();return}var zt=o.rangeCount&&o.getRangeAt(0),Ft;try{Ft=A(P.node,P.offset,z.offset,z.node)}catch{}Ft&&(!St&&s.state.focused?(o.collapse(P.node,P.offset),Ft.collapsed||(o.removeAllRanges(),o.addRange(Ft))):(o.removeAllRanges(),o.addRange(Ft)),zt&&o.anchorNode==null?o.addRange(zt):St&&this.startGracePeriod()),this.rememberSelection()}},dr.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},dr.prototype.showMultipleSelections=function(o){ut(this.cm.display.cursorDiv,o.cursors),ut(this.cm.display.selectionDiv,o.selection)},dr.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},dr.prototype.selectionInEditor=function(){var o=this.getSelection();if(!o.rangeCount)return!1;var s=o.getRangeAt(0).commonAncestorContainer;return Mt(this.div,s)},dr.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Dt(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},dr.prototype.blur=function(){this.div.blur()},dr.prototype.getField=function(){return this.div},dr.prototype.supportsTouch=function(){return!0},dr.prototype.receivedFocus=function(){var o=this,s=this;this.selectionInEditor()?setTimeout(function(){return o.pollSelection()},20):kn(this.cm,function(){return s.cm.curOp.selectionChanged=!0});function c(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,c))}this.polling.set(this.cm.options.pollInterval,c)},dr.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},dr.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var o=this.getSelection(),s=this.cm;if(q&&b&&this.cm.display.gutterSpecs.length&&Ic(o.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var c=ds(s,o.anchorNode,o.anchorOffset),u=ds(s,o.focusNode,o.focusOffset);c&&u&&kn(s,function(){sn(s.doc,so(c,u),Yt),(c.bad||u.bad)&&(s.curOp.selectionChanged=!0)})}}},dr.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o=this.cm,s=o.display,c=o.doc.sel.primary(),u=c.from(),d=c.to();if(u.ch==0&&u.line>o.firstLine()&&(u=j(u.line-1,Pe(o.doc,u.line-1).length)),d.ch==Pe(o.doc,d.line).text.length&&d.line<o.lastLine()&&(d=j(d.line+1,0)),u.line<s.viewFrom||d.line>s.viewTo-1)return!1;var v,y,S;u.line==s.viewFrom||(v=Ho(o,u.line))==0?(y=or(s.view[0].line),S=s.view[0].node):(y=or(s.view[v].line),S=s.view[v-1].node.nextSibling);var P=Ho(o,d.line),z,pt;if(P==s.view.length-1?(z=s.viewTo-1,pt=s.lineDiv.lastChild):(z=or(s.view[P+1].line)-1,pt=s.view[P+1].node.previousSibling),!S)return!1;for(var xt=o.doc.splitLines(jc(o,S,pt,y,z)),zt=Tn(o.doc,j(y,0),j(z,Pe(o.doc,z).text.length));xt.length>1&&zt.length>1;)if(ue(xt)==ue(zt))xt.pop(),zt.pop(),z--;else if(xt[0]==zt[0])xt.shift(),zt.shift(),y++;else break;for(var Ft=0,Jt=0,oe=xt[0],de=zt[0],me=Math.min(oe.length,de.length);Ft<me&&oe.charCodeAt(Ft)==de.charCodeAt(Ft);)++Ft;for(var Oe=ue(xt),we=ue(zt),Te=Math.min(Oe.length-(xt.length==1?Ft:0),we.length-(zt.length==1?Ft:0));Jt<Te&&Oe.charCodeAt(Oe.length-Jt-1)==we.charCodeAt(we.length-Jt-1);)++Jt;if(xt.length==1&&zt.length==1&&y==u.line)for(;Ft&&Ft>u.ch&&Oe.charCodeAt(Oe.length-Jt-1)==we.charCodeAt(we.length-Jt-1);)Ft--,Jt++;xt[xt.length-1]=Oe.slice(0,Oe.length-Jt).replace(/^\u200b+/,""),xt[0]=xt[0].slice(Ft).replace(/\u200b+$/,"");var Ne=j(y,Ft),je=j(z,zt.length?ue(zt).length-Jt:0);if(xt.length>1||xt[0]||ft(Ne,je))return Ko(o.doc,xt,Ne,je,"+input"),!0},dr.prototype.ensurePolled=function(){this.forceCompositionEnd()},dr.prototype.reset=function(){this.forceCompositionEnd()},dr.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},dr.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing)if(o.composing.done)o.composing=null;else return;o.updateFromDOM()},80))},dr.prototype.updateFromDOM=function(){var o=this;(this.cm.isReadOnly()||!this.pollContent())&&kn(this.cm,function(){return _n(o.cm)})},dr.prototype.setUneditable=function(o){o.contentEditable="false"},dr.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||Er(this.cm,ll)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},dr.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},dr.prototype.onContextMenu=function(){},dr.prototype.resetPosition=function(){},dr.prototype.needsContentAttribute=!0;function fl(o,s){var c=Ge(o,s.line);if(!c||c.hidden)return null;var u=Pe(o.doc,s.line),d=Bt(c,u,s.line),v=Ae(u,o.doc.direction),y="left";if(v){var S=ce(v,s.ch);y=S%2?"right":"left"}var P=Ua(d.map,s.ch,y);return P.offset=P.collapse=="right"?P.end:P.start,P}function Ic(o){for(var s=o;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function Ii(o,s){return s&&(o.bad=!0),o}function jc(o,s,c,u,d){var v="",y=!1,S=o.doc.lineSeparator(),P=!1;function z(Ft){return function(Jt){return Jt.id==Ft}}function pt(){y&&(v+=S,P&&(v+=S),y=P=!1)}function xt(Ft){Ft&&(pt(),v+=Ft)}function zt(Ft){if(Ft.nodeType==1){var Jt=Ft.getAttribute("cm-text");if(Jt){xt(Jt);return}var oe=Ft.getAttribute("cm-marker"),de;if(oe){var me=o.findMarks(j(u,0),j(d+1,0),z(+oe));me.length&&(de=me[0].find(0))&&xt(Tn(o.doc,de.from,de.to).join(S));return}if(Ft.getAttribute("contenteditable")=="false")return;var Oe=/^(pre|div|p|li|table|br)$/i.test(Ft.nodeName);if(!/^br$/i.test(Ft.nodeName)&&Ft.textContent.length==0)return;Oe&&pt();for(var we=0;we<Ft.childNodes.length;we++)zt(Ft.childNodes[we]);/^(pre|p)$/i.test(Ft.nodeName)&&(P=!0),Oe&&(y=!0)}else Ft.nodeType==3&&xt(Ft.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;zt(s),s!=c;)s=s.nextSibling,P=!1;return v}function ds(o,s,c){var u;if(s==o.display.lineDiv){if(u=o.display.lineDiv.childNodes[c],!u)return Ii(o.clipPos(j(o.display.viewTo-1)),!0);s=null,c=0}else for(u=s;;u=u.parentNode){if(!u||u==o.display.lineDiv)return null;if(u.parentNode&&u.parentNode==o.display.lineDiv)break}for(var d=0;d<o.display.view.length;d++){var v=o.display.view[d];if(v.node==u)return dd(v,s,c)}}function dd(o,s,c){var u=o.text.firstChild,d=!1;if(!s||!Mt(u,s))return Ii(j(or(o.line),0),!0);if(s==u&&(d=!0,s=u.childNodes[c],c=0,!s)){var v=o.rest?ue(o.rest):o.line;return Ii(j(or(v),v.text.length),d)}var y=s.nodeType==3?s:null,S=s;for(!y&&s.childNodes.length==1&&s.firstChild.nodeType==3&&(y=s.firstChild,c&&(c=y.nodeValue.length));S.parentNode!=u;)S=S.parentNode;var P=o.measure,z=P.maps;function pt(de,me,Oe){for(var we=-1;we<(z?z.length:0);we++)for(var Te=we<0?P.map:z[we],Ne=0;Ne<Te.length;Ne+=3){var je=Te[Ne+2];if(je==de||je==me){var tr=or(we<0?o.line:o.rest[we]),gr=Te[Ne]+Oe;return(Oe<0||je!=de)&&(gr=Te[Ne+(Oe?1:0)]),j(tr,gr)}}}var xt=pt(y,S,c);if(xt)return Ii(xt,d);for(var zt=S.nextSibling,Ft=y?y.nodeValue.length-c:0;zt;zt=zt.nextSibling){if(xt=pt(zt,zt.firstChild,0),xt)return Ii(j(xt.line,xt.ch-Ft),d);Ft+=zt.textContent.length}for(var Jt=S.previousSibling,oe=c;Jt;Jt=Jt.previousSibling){if(xt=pt(Jt,Jt.firstChild,-1),xt)return Ii(j(xt.line,xt.ch+oe),d);oe+=Jt.textContent.length}}var Rr=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new $t,this.hasSelection=!1,this.composing=null,this.resetting=!1};Rr.prototype.init=function(o){var s=this,c=this,u=this.cm;this.createField(o);var d=this.textarea;o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),st&&(d.style.width="0px"),Se(d,"input",function(){K&&et>=9&&s.hasSelection&&(s.hasSelection=null),c.poll()}),Se(d,"paste",function(y){ze(u,y)||Lc(y,u)||(u.state.pasteIncoming=+new Date,c.fastPoll())});function v(y){if(!ze(u,y)){if(u.somethingSelected())sl({lineWise:!1,text:u.getSelections()});else if(u.options.lineWiseCopyCut){var S=Cr(u);sl({lineWise:!0,text:S.text}),y.type=="cut"?u.setSelections(S.ranges,null,Yt):(c.prevInput="",d.value=S.text.join(`
`),V(d))}else return;y.type=="cut"&&(u.state.cutIncoming=+new Date)}}Se(d,"cut",v),Se(d,"copy",v),Se(o.scroller,"paste",function(y){if(!(Hn(o,y)||ze(u,y))){if(!d.dispatchEvent){u.state.pasteIncoming=+new Date,c.focus();return}var S=new Event("paste");S.clipboardData=y.clipboardData,d.dispatchEvent(S)}}),Se(o.lineSpace,"selectstart",function(y){Hn(o,y)||ot(y)}),Se(d,"compositionstart",function(){var y=u.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:y,range:u.markText(y,u.getCursor("to"),{className:"CodeMirror-composing"})}}),Se(d,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},Rr.prototype.createField=function(o){this.wrapper=cl(),this.textarea=this.wrapper.firstChild;var s=this.cm.options;ul(this.textarea,s.spellcheck,s.autocorrect,s.autocapitalize)},Rr.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},Rr.prototype.prepareSelection=function(){var o=this.cm,s=o.display,c=o.doc,u=Vs(o);if(o.options.moveInputWithCursor){var d=ti(o,c.sel.primary().head,"div"),v=s.wrapper.getBoundingClientRect(),y=s.lineDiv.getBoundingClientRect();u.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,d.top+y.top-v.top)),u.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,d.left+y.left-v.left))}return u},Rr.prototype.showSelection=function(o){var s=this.cm,c=s.display;ut(c.cursorDiv,o.cursors),ut(c.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},Rr.prototype.reset=function(o){if(!(this.contextMenuPending||this.composing&&o)){var s=this.cm;if(this.resetting=!0,s.somethingSelected()){this.prevInput="";var c=s.getSelection();this.textarea.value=c,s.state.focused&&V(this.textarea),K&&et>=9&&(this.hasSelection=c)}else o||(this.prevInput=this.textarea.value="",K&&et>=9&&(this.hasSelection=null));this.resetting=!1}},Rr.prototype.getField=function(){return this.textarea},Rr.prototype.supportsTouch=function(){return!1},Rr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!W||Dt(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Rr.prototype.blur=function(){this.textarea.blur()},Rr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Rr.prototype.receivedFocus=function(){this.slowPoll()},Rr.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},Rr.prototype.fastPoll=function(){var o=!1,s=this;s.pollingFast=!0;function c(){var u=s.poll();!u&&!o?(o=!0,s.polling.set(60,c)):(s.pollingFast=!1,s.slowPoll())}s.polling.set(20,c)},Rr.prototype.poll=function(){var o=this,s=this.cm,c=this.textarea,u=this.prevInput;if(this.contextMenuPending||this.resetting||!s.state.focused||Cn(c)&&!u&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var d=c.value;if(d==u&&!s.somethingSelected())return!1;if(K&&et>=9&&this.hasSelection===d||T&&/[\uf700-\uf7ff]/.test(d))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var v=d.charCodeAt(0);if(v==8203&&!u&&(u="​"),v==8666)return this.reset(),this.cm.execCommand("undo")}for(var y=0,S=Math.min(u.length,d.length);y<S&&u.charCodeAt(y)==d.charCodeAt(y);)++y;return kn(s,function(){ll(s,d.slice(y),u.length-y,null,o.composing?"*compose":null),d.length>1e3||d.indexOf(`
`)>-1?c.value=o.prevInput="":o.prevInput=d,o.composing&&(o.composing.range.clear(),o.composing.range=s.markText(o.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Rr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Rr.prototype.onKeyPress=function(){K&&et>=9&&(this.hasSelection=null),this.fastPoll()},Rr.prototype.onContextMenu=function(o){var s=this,c=s.cm,u=c.display,d=s.textarea;s.contextMenuPending&&s.contextMenuPending();var v=Vo(c,o),y=u.scroller.scrollTop;if(!v||E)return;var S=c.options.resetSelectionOnContextMenu;S&&c.doc.sel.contains(v)==-1&&Er(c,sn)(c.doc,so(v),Yt);var P=d.style.cssText,z=s.wrapper.style.cssText,pt=s.wrapper.offsetParent.getBoundingClientRect();s.wrapper.style.cssText="position: static",d.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(o.clientY-pt.top-5)+"px; left: "+(o.clientX-pt.left-5)+`px;
      z-index: 1000; background: `+(K?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var xt;m&&(xt=d.ownerDocument.defaultView.scrollY),u.input.focus(),m&&d.ownerDocument.defaultView.scrollTo(null,xt),u.input.reset(),c.somethingSelected()||(d.value=s.prevInput=" "),s.contextMenuPending=Ft,u.selForContextMenu=c.doc.sel,clearTimeout(u.detectingSelectAll);function zt(){if(d.selectionStart!=null){var oe=c.somethingSelected(),de="​"+(oe?d.value:"");d.value="⇚",d.value=de,s.prevInput=oe?"":"​",d.selectionStart=1,d.selectionEnd=de.length,u.selForContextMenu=c.doc.sel}}function Ft(){if(s.contextMenuPending==Ft&&(s.contextMenuPending=!1,s.wrapper.style.cssText=z,d.style.cssText=P,K&&et<9&&u.scrollbars.setScrollTop(u.scroller.scrollTop=y),d.selectionStart!=null)){(!K||K&&et<9)&&zt();var oe=0,de=function(){u.selForContextMenu==c.doc.sel&&d.selectionStart==0&&d.selectionEnd>0&&s.prevInput=="​"?Er(c,lc)(c):oe++<10?u.detectingSelectAll=setTimeout(de,500):(u.selForContextMenu=null,u.input.reset())};u.detectingSelectAll=setTimeout(de,200)}}if(K&&et>=9&&zt(),O){ne(o);var Jt=function(){Le(window,"mouseup",Jt),setTimeout(Ft,20)};Se(window,"mouseup",Jt)}else setTimeout(Ft,50)},Rr.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},Rr.prototype.setUneditable=function(){},Rr.prototype.needsContentAttribute=!1;function pd(o,s){if(s=s?qt(s):{},s.value=o.value,!s.tabindex&&o.tabIndex&&(s.tabindex=o.tabIndex),!s.placeholder&&o.placeholder&&(s.placeholder=o.placeholder),s.autofocus==null){var c=Dt(o.ownerDocument);s.autofocus=c==o||o.getAttribute("autofocus")!=null&&c==document.body}function u(){o.value=S.getValue()}var d;if(o.form&&(Se(o.form,"submit",u),!s.leaveSubmitMethodAlone)){var v=o.form;d=v.submit;try{var y=v.submit=function(){u(),v.submit=d,v.submit(),v.submit=y}}catch{}}s.finishInit=function(P){P.save=u,P.getTextArea=function(){return o},P.toTextArea=function(){P.toTextArea=isNaN,u(),o.parentNode.removeChild(P.getWrapperElement()),o.style.display="",o.form&&(Le(o.form,"submit",u),!s.leaveSubmitMethodAlone&&typeof o.form.submit=="function"&&(o.form.submit=d))}},o.style.display="none";var S=br(function(P){return o.parentNode.insertBefore(P,o.nextSibling)},s);return S}function Ta(o){o.off=Le,o.on=Se,o.wheelEventPixels=Ff,o.Doc=bn,o.splitLines=mn,o.countColumn=Vt,o.findColumn=Xe,o.isWordChar=J,o.Pass=ae,o.signal=nr,o.Line=Ci,o.changeEnd=lo,o.scrollbarModel=zu,o.Pos=j,o.cmpPos=ft,o.modes=fr,o.mimeModes=pe,o.resolveMode=Mn,o.getMode=$n,o.modeExtensions=Br,o.extendMode=oi,o.copyState=Sn,o.startState=bi,o.innerMode=On,o.commands=Di,o.keyMap=Mi,o.keyName=Ql,o.isModifierKey=Xl,o.lookupKey=$o,o.normalizeKeyMap=_c,o.StringStream=ur,o.SharedTextMarker=os,o.TextMarker=po,o.LineWidget=is,o.e_preventDefault=ot,o.e_stopPropagation=Pt,o.e_stop=ne,o.addClass=X,o.contains=Mt,o.rmClass=I,o.keyNames=vo}Xo(br),cs(br);var uu="iter insert remove copy getEditor constructor".split(" ");for(var Ea in bn.prototype)bn.prototype.hasOwnProperty(Ea)&&Ct(uu,Ea)<0&&(br.prototype[Ea]=function(o){return function(){return o.apply(this.doc,arguments)}}(bn.prototype[Ea]));return Sr(bn),br.inputStyles={textarea:Rr,contenteditable:dr},br.defineMode=function(o){!br.defaults.mode&&o!="null"&&(br.defaults.mode=o),Zn.apply(this,arguments)},br.defineMIME=Po,br.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),br.defineMIME("text/plain","null"),br.defineExtension=function(o,s){br.prototype[o]=s},br.defineDocExtension=function(o,s){bn.prototype[o]=s},br.fromTextArea=pd,Ta(br),br.version="5.65.15",br})},629:(L,ct,kt)=>{(function(St){St(kt(631))})(function(St){St.defineMode("css",function(I,G){var ut=G.inline;G.propertyKeywords||(G=St.resolveMode("text/css"));var B=I.indentUnit,mt=G.tokenHooks,A=G.documentTypes||{},Mt=G.mediaTypes||{},Dt=G.mediaFeatures||{},X=G.mediaValueKeywords||{},Et=G.propertyKeywords||{},V=G.nonStandardPropertyKeywords||{},Nt=G.fontProperties||{},jt=G.counterDescriptors||{},Lt=G.colorKeywords||{},qt=G.valueKeywords||{},Vt=G.allowNested,$t=G.lineComment,Ct=G.supportsAtComponent===!0,It=I.highlightNonStandardPropertyKeywords!==!1,ae,Yt;function Xt(J,Y){return ae=Y,J}function De(J,Y){var H=J.next();if(mt[H]){var Tt=mt[H](J,Y);if(Tt!==!1)return Tt}if(H=="@")return J.eatWhile(/[\w\\\-]/),Xt("def",J.current());if(H=="="||(H=="~"||H=="|")&&J.eat("="))return Xt(null,"compare");if(H=='"'||H=="'")return Y.tokenize=Xe(H),Y.tokenize(J,Y);if(H=="#")return J.eatWhile(/[\w\\\-]/),Xt("atom","hash");if(H=="!")return J.match(/^\s*\w*/),Xt("keyword","important");if(/\d/.test(H)||H=="."&&J.eat(/\d/))return J.eatWhile(/[\w.%]/),Xt("number","unit");if(H==="-"){if(/[\d.]/.test(J.peek()))return J.eatWhile(/[\w.%]/),Xt("number","unit");if(J.match(/^-[\w\\\-]*/))return J.eatWhile(/[\w\\\-]/),J.match(/^\s*:/,!1)?Xt("variable-2","variable-definition"):Xt("variable-2","variable");if(J.match(/^\w+-/))return Xt("meta","meta")}else return/[,+>*\/]/.test(H)?Xt(null,"select-op"):H=="."&&J.match(/^-?[_a-z][_a-z0-9-]*/i)?Xt("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(H)?Xt(null,H):J.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(J.current())&&(Y.tokenize=Ie),Xt("variable callee","variable")):/[\w\\\-]/.test(H)?(J.eatWhile(/[\w\\\-]/),Xt("property","word")):Xt(null,null)}function Xe(J){return function(Y,H){for(var Tt=!1,te;(te=Y.next())!=null;){if(te==J&&!Tt){J==")"&&Y.backUp(1);break}Tt=!Tt&&te=="\\"}return(te==J||!Tt&&J!=")")&&(H.tokenize=null),Xt("string","string")}}function Ie(J,Y){return J.next(),J.match(/^\s*[\"\')]/,!1)?Y.tokenize=null:Y.tokenize=Xe(")"),Xt(null,"(")}function Me(J,Y,H){this.type=J,this.indent=Y,this.prev=H}function ue(J,Y,H,Tt){return J.context=new Me(H,Y.indentation()+(Tt===!1?0:B),J.context),H}function R(J){return J.context.prev&&(J.context=J.context.prev),J.context.type}function at(J,Y,H){return bt[H.context.type](J,Y,H)}function yt(J,Y,H,Tt){for(var te=Tt||1;te>0;te--)H.context=H.context.prev;return at(J,Y,H)}function _(J){var Y=J.current().toLowerCase();qt.hasOwnProperty(Y)?Yt="atom":Lt.hasOwnProperty(Y)?Yt="keyword":Yt="variable"}var bt={};return bt.top=function(J,Y,H){if(J=="{")return ue(H,Y,"block");if(J=="}"&&H.context.prev)return R(H);if(Ct&&/@component/i.test(J))return ue(H,Y,"atComponentBlock");if(/^@(-moz-)?document$/i.test(J))return ue(H,Y,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(J))return ue(H,Y,"atBlock");if(/^@(font-face|counter-style)/i.test(J))return H.stateArg=J,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(J))return"keyframes";if(J&&J.charAt(0)=="@")return ue(H,Y,"at");if(J=="hash")Yt="builtin";else if(J=="word")Yt="tag";else{if(J=="variable-definition")return"maybeprop";if(J=="interpolation")return ue(H,Y,"interpolation");if(J==":")return"pseudo";if(Vt&&J=="(")return ue(H,Y,"parens")}return H.context.type},bt.block=function(J,Y,H){if(J=="word"){var Tt=Y.current().toLowerCase();return Et.hasOwnProperty(Tt)?(Yt="property","maybeprop"):V.hasOwnProperty(Tt)?(Yt=It?"string-2":"property","maybeprop"):Vt?(Yt=Y.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Yt+=" error","maybeprop")}else return J=="meta"?"block":!Vt&&(J=="hash"||J=="qualifier")?(Yt="error","block"):bt.top(J,Y,H)},bt.maybeprop=function(J,Y,H){return J==":"?ue(H,Y,"prop"):at(J,Y,H)},bt.prop=function(J,Y,H){if(J==";")return R(H);if(J=="{"&&Vt)return ue(H,Y,"propBlock");if(J=="}"||J=="{")return yt(J,Y,H);if(J=="(")return ue(H,Y,"parens");if(J=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(Y.current()))Yt+=" error";else if(J=="word")_(Y);else if(J=="interpolation")return ue(H,Y,"interpolation");return"prop"},bt.propBlock=function(J,Y,H){return J=="}"?R(H):J=="word"?(Yt="property","maybeprop"):H.context.type},bt.parens=function(J,Y,H){return J=="{"||J=="}"?yt(J,Y,H):J==")"?R(H):J=="("?ue(H,Y,"parens"):J=="interpolation"?ue(H,Y,"interpolation"):(J=="word"&&_(Y),"parens")},bt.pseudo=function(J,Y,H){return J=="meta"?"pseudo":J=="word"?(Yt="variable-3",H.context.type):at(J,Y,H)},bt.documentTypes=function(J,Y,H){return J=="word"&&A.hasOwnProperty(Y.current())?(Yt="tag",H.context.type):bt.atBlock(J,Y,H)},bt.atBlock=function(J,Y,H){if(J=="(")return ue(H,Y,"atBlock_parens");if(J=="}"||J==";")return yt(J,Y,H);if(J=="{")return R(H)&&ue(H,Y,Vt?"block":"top");if(J=="interpolation")return ue(H,Y,"interpolation");if(J=="word"){var Tt=Y.current().toLowerCase();Tt=="only"||Tt=="not"||Tt=="and"||Tt=="or"?Yt="keyword":Mt.hasOwnProperty(Tt)?Yt="attribute":Dt.hasOwnProperty(Tt)?Yt="property":X.hasOwnProperty(Tt)?Yt="keyword":Et.hasOwnProperty(Tt)?Yt="property":V.hasOwnProperty(Tt)?Yt=It?"string-2":"property":qt.hasOwnProperty(Tt)?Yt="atom":Lt.hasOwnProperty(Tt)?Yt="keyword":Yt="error"}return H.context.type},bt.atComponentBlock=function(J,Y,H){return J=="}"?yt(J,Y,H):J=="{"?R(H)&&ue(H,Y,Vt?"block":"top",!1):(J=="word"&&(Yt="error"),H.context.type)},bt.atBlock_parens=function(J,Y,H){return J==")"?R(H):J=="{"||J=="}"?yt(J,Y,H,2):bt.atBlock(J,Y,H)},bt.restricted_atBlock_before=function(J,Y,H){return J=="{"?ue(H,Y,"restricted_atBlock"):J=="word"&&H.stateArg=="@counter-style"?(Yt="variable","restricted_atBlock_before"):at(J,Y,H)},bt.restricted_atBlock=function(J,Y,H){return J=="}"?(H.stateArg=null,R(H)):J=="word"?(H.stateArg=="@font-face"&&!Nt.hasOwnProperty(Y.current().toLowerCase())||H.stateArg=="@counter-style"&&!jt.hasOwnProperty(Y.current().toLowerCase())?Yt="error":Yt="property","maybeprop"):"restricted_atBlock"},bt.keyframes=function(J,Y,H){return J=="word"?(Yt="variable","keyframes"):J=="{"?ue(H,Y,"top"):at(J,Y,H)},bt.at=function(J,Y,H){return J==";"?R(H):J=="{"||J=="}"?yt(J,Y,H):(J=="word"?Yt="tag":J=="hash"&&(Yt="builtin"),"at")},bt.interpolation=function(J,Y,H){return J=="}"?R(H):J=="{"||J==";"?yt(J,Y,H):(J=="word"?Yt="variable":J!="variable"&&J!="("&&J!=")"&&(Yt="error"),"interpolation")},{startState:function(J){return{tokenize:null,state:ut?"block":"top",stateArg:null,context:new Me(ut?"block":"top",J||0,null)}},token:function(J,Y){if(!Y.tokenize&&J.eatSpace())return null;var H=(Y.tokenize||De)(J,Y);return H&&typeof H=="object"&&(ae=H[1],H=H[0]),Yt=H,ae!="comment"&&(Y.state=bt[Y.state](ae,J,Y)),Yt},indent:function(J,Y){var H=J.context,Tt=Y&&Y.charAt(0),te=H.indent;return H.type=="prop"&&(Tt=="}"||Tt==")")&&(H=H.prev),H.prev&&(Tt=="}"&&(H.type=="block"||H.type=="top"||H.type=="interpolation"||H.type=="restricted_atBlock")?(H=H.prev,te=H.indent):(Tt==")"&&(H.type=="parens"||H.type=="atBlock_parens")||Tt=="{"&&(H.type=="at"||H.type=="atBlock"))&&(te=Math.max(0,H.indent-B))),te},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:$t,fold:"brace"}});function Rt(I){for(var G={},ut=0;ut<I.length;++ut)G[I[ut].toLowerCase()]=!0;return G}var gt=["domain","regexp","url","url-prefix"],lt=Rt(gt),K=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],et=Rt(K),m=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],k=Rt(m),b=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],C=Rt(b),E=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],x=Rt(E),F=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],Q=Rt(F),st=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],q=Rt(st),W=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],T=Rt(W),it=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],U=Rt(it),rt=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],$=Rt(rt),O=gt.concat(K).concat(m).concat(b).concat(E).concat(F).concat(it).concat(rt);St.registerHelper("hintWords","css",O);function N(I,G){for(var ut=!1,B;(B=I.next())!=null;){if(ut&&B=="/"){G.tokenize=null;break}ut=B=="*"}return["comment","comment"]}St.defineMIME("text/css",{documentTypes:lt,mediaTypes:et,mediaFeatures:k,mediaValueKeywords:C,propertyKeywords:x,nonStandardPropertyKeywords:Q,fontProperties:q,counterDescriptors:T,colorKeywords:U,valueKeywords:$,tokenHooks:{"/":function(I,G){return I.eat("*")?(G.tokenize=N,N(I,G)):!1}},name:"css"}),St.defineMIME("text/x-scss",{mediaTypes:et,mediaFeatures:k,mediaValueKeywords:C,propertyKeywords:x,nonStandardPropertyKeywords:Q,colorKeywords:U,valueKeywords:$,fontProperties:q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(I,G){return I.eat("/")?(I.skipToEnd(),["comment","comment"]):I.eat("*")?(G.tokenize=N,N(I,G)):["operator","operator"]},":":function(I){return I.match(/^\s*\{/,!1)?[null,null]:!1},$:function(I){return I.match(/^[\w-]+/),I.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(I){return I.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),St.defineMIME("text/x-less",{mediaTypes:et,mediaFeatures:k,mediaValueKeywords:C,propertyKeywords:x,nonStandardPropertyKeywords:Q,colorKeywords:U,valueKeywords:$,fontProperties:q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(I,G){return I.eat("/")?(I.skipToEnd(),["comment","comment"]):I.eat("*")?(G.tokenize=N,N(I,G)):["operator","operator"]},"@":function(I){return I.eat("{")?[null,"interpolation"]:I.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(I.eatWhile(/[\w\\\-]/),I.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),St.defineMIME("text/x-gss",{documentTypes:lt,mediaTypes:et,mediaFeatures:k,propertyKeywords:x,nonStandardPropertyKeywords:Q,fontProperties:q,counterDescriptors:T,colorKeywords:U,valueKeywords:$,supportsAtComponent:!0,tokenHooks:{"/":function(I,G){return I.eat("*")?(G.tokenize=N,N(I,G)):!1}},name:"css",helperType:"gss"})})},531:(L,ct,kt)=>{(function(St){St(kt(631),kt(589),kt(876),kt(629))})(function(St){var Rt={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function gt(C,E,x){var F=C.current(),Q=F.search(E);return Q>-1?C.backUp(F.length-Q):F.match(/<\/?$/)&&(C.backUp(F.length),C.match(E,!1)||C.match(F)),x}var lt={};function K(C){var E=lt[C];return E||(lt[C]=new RegExp("\\s+"+C+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function et(C,E){var x=C.match(K(E));return x?/^\s*(.*?)\s*$/.exec(x[2])[1]:""}function m(C,E){return new RegExp((E?"^":"")+"</\\s*"+C+"\\s*>","i")}function k(C,E){for(var x in C)for(var F=E[x]||(E[x]=[]),Q=C[x],st=Q.length-1;st>=0;st--)F.unshift(Q[st])}function b(C,E){for(var x=0;x<C.length;x++){var F=C[x];if(!F[0]||F[1].test(et(E,F[0])))return F[2]}}St.defineMode("htmlmixed",function(C,E){var x=St.getMode(C,{name:"xml",htmlMode:!0,multilineTagIndentFactor:E.multilineTagIndentFactor,multilineTagIndentPastTag:E.multilineTagIndentPastTag,allowMissingTagName:E.allowMissingTagName}),F={},Q=E&&E.tags,st=E&&E.scriptTypes;if(k(Rt,F),Q&&k(Q,F),st)for(var q=st.length-1;q>=0;q--)F.script.unshift(["type",st[q].matches,st[q].mode]);function W(T,it){var U=x.token(T,it.htmlState),rt=/\btag\b/.test(U),$;if(rt&&!/[<>\s\/]/.test(T.current())&&($=it.htmlState.tagName&&it.htmlState.tagName.toLowerCase())&&F.hasOwnProperty($))it.inTag=$+" ";else if(it.inTag&&rt&&/>$/.test(T.current())){var O=/^([\S]+) (.*)/.exec(it.inTag);it.inTag=null;var N=T.current()==">"&&b(F[O[1]],O[2]),I=St.getMode(C,N),G=m(O[1],!0),ut=m(O[1],!1);it.token=function(B,mt){return B.match(G,!1)?(mt.token=W,mt.localState=mt.localMode=null,null):gt(B,ut,mt.localMode.token(B,mt.localState))},it.localMode=I,it.localState=St.startState(I,x.indent(it.htmlState,"",""))}else it.inTag&&(it.inTag+=T.current(),T.eol()&&(it.inTag+=" "));return U}return{startState:function(){var T=St.startState(x);return{token:W,inTag:null,localMode:null,localState:null,htmlState:T}},copyState:function(T){var it;return T.localState&&(it=St.copyState(T.localMode,T.localState)),{token:T.token,inTag:T.inTag,localMode:T.localMode,localState:it,htmlState:St.copyState(x,T.htmlState)}},token:function(T,it){return it.token(T,it)},indent:function(T,it,U){return!T.localMode||/^\s*<\//.test(it)?x.indent(T.htmlState,it,U):T.localMode.indent?T.localMode.indent(T.localState,it,U):St.Pass},innerMode:function(T){return{state:T.localState||T.htmlState,mode:T.localMode||x}}}},"xml","javascript","css"),St.defineMIME("text/html","htmlmixed")})},876:(L,ct,kt)=>{(function(St){St(kt(631))})(function(St){St.defineMode("javascript",function(Rt,gt){var lt=Rt.indentUnit,K=gt.statementIndent,et=gt.jsonld,m=gt.json||et,k=gt.trackScope!==!1,b=gt.typescript,C=gt.wordCharacters||/[\w$\xa1-\uffff]/,E=function(){function j(ke){return{type:ke,style:"keyword"}}var ft=j("keyword a"),re=j("keyword b"),fe=j("keyword c"),Ue=j("keyword d"),qe=j("operator"),sr={type:"atom",style:"atom"};return{if:j("if"),while:ft,with:ft,else:re,do:re,try:re,finally:re,return:Ue,break:Ue,continue:Ue,new:j("new"),delete:fe,void:fe,throw:fe,debugger:j("debugger"),var:j("var"),const:j("var"),let:j("var"),function:j("function"),catch:j("catch"),for:j("for"),switch:j("switch"),case:j("case"),default:j("default"),in:qe,typeof:qe,instanceof:qe,true:sr,false:sr,null:sr,undefined:sr,NaN:sr,Infinity:sr,this:j("this"),class:j("class"),super:j("atom"),yield:fe,export:j("export"),import:j("import"),extends:fe,await:fe}}(),x=/[+\-*&%=<>!?|~^@]/,F=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function Q(j){for(var ft=!1,re,fe=!1;(re=j.next())!=null;){if(!ft){if(re=="/"&&!fe)return;re=="["?fe=!0:fe&&re=="]"&&(fe=!1)}ft=!ft&&re=="\\"}}var st,q;function W(j,ft,re){return st=j,q=re,ft}function T(j,ft){var re=j.next();if(re=='"'||re=="'")return ft.tokenize=it(re),ft.tokenize(j,ft);if(re=="."&&j.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return W("number","number");if(re=="."&&j.match(".."))return W("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(re))return W(re);if(re=="="&&j.eat(">"))return W("=>","operator");if(re=="0"&&j.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return W("number","number");if(/\d/.test(re))return j.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),W("number","number");if(re=="/")return j.eat("*")?(ft.tokenize=U,U(j,ft)):j.eat("/")?(j.skipToEnd(),W("comment","comment")):zr(j,ft,1)?(Q(j),j.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),W("regexp","string-2")):(j.eat("="),W("operator","operator",j.current()));if(re=="`")return ft.tokenize=rt,rt(j,ft);if(re=="#"&&j.peek()=="!")return j.skipToEnd(),W("meta","meta");if(re=="#"&&j.eatWhile(C))return W("variable","property");if(re=="<"&&j.match("!--")||re=="-"&&j.match("->")&&!/\S/.test(j.string.slice(0,j.start)))return j.skipToEnd(),W("comment","comment");if(x.test(re))return(re!=">"||!ft.lexical||ft.lexical.type!=">")&&(j.eat("=")?(re=="!"||re=="=")&&j.eat("="):/[<>*+\-|&?]/.test(re)&&(j.eat(re),re==">"&&j.eat(re))),re=="?"&&j.eat(".")?W("."):W("operator","operator",j.current());if(C.test(re)){j.eatWhile(C);var fe=j.current();if(ft.lastType!="."){if(E.propertyIsEnumerable(fe)){var Ue=E[fe];return W(Ue.type,Ue.style,fe)}if(fe=="async"&&j.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return W("async","keyword",fe)}return W("variable","variable",fe)}}function it(j){return function(ft,re){var fe=!1,Ue;if(et&&ft.peek()=="@"&&ft.match(F))return re.tokenize=T,W("jsonld-keyword","meta");for(;(Ue=ft.next())!=null&&!(Ue==j&&!fe);)fe=!fe&&Ue=="\\";return fe||(re.tokenize=T),W("string","string")}}function U(j,ft){for(var re=!1,fe;fe=j.next();){if(fe=="/"&&re){ft.tokenize=T;break}re=fe=="*"}return W("comment","comment")}function rt(j,ft){for(var re=!1,fe;(fe=j.next())!=null;){if(!re&&(fe=="`"||fe=="$"&&j.eat("{"))){ft.tokenize=T;break}re=!re&&fe=="\\"}return W("quasi","string-2",j.current())}var $="([{}])";function O(j,ft){ft.fatArrowAt&&(ft.fatArrowAt=null);var re=j.string.indexOf("=>",j.start);if(!(re<0)){if(b){var fe=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(j.string.slice(j.start,re));fe&&(re=fe.index)}for(var Ue=0,qe=!1,sr=re-1;sr>=0;--sr){var ke=j.string.charAt(sr),En=$.indexOf(ke);if(En>=0&&En<3){if(!Ue){++sr;break}if(--Ue==0){ke=="("&&(qe=!0);break}}else if(En>=3&&En<6)++Ue;else if(C.test(ke))qe=!0;else if(/["'\/`]/.test(ke))for(;;--sr){if(sr==0)return;var ia=j.string.charAt(sr-1);if(ia==ke&&j.string.charAt(sr-2)!="\\"){sr--;break}}else if(qe&&!Ue){++sr;break}}qe&&!Ue&&(ft.fatArrowAt=sr)}}var N={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function I(j,ft,re,fe,Ue,qe){this.indented=j,this.column=ft,this.type=re,this.prev=Ue,this.info=qe,fe!=null&&(this.align=fe)}function G(j,ft){if(!k)return!1;for(var re=j.localVars;re;re=re.next)if(re.name==ft)return!0;for(var fe=j.context;fe;fe=fe.prev)for(var re=fe.vars;re;re=re.next)if(re.name==ft)return!0}function ut(j,ft,re,fe,Ue){var qe=j.cc;for(B.state=j,B.stream=Ue,B.marked=null,B.cc=qe,B.style=ft,j.lexical.hasOwnProperty("align")||(j.lexical.align=!0);;){var sr=qe.length?qe.pop():m?Xt:ae;if(sr(re,fe)){for(;qe.length&&qe[qe.length-1].lex;)qe.pop()();return B.marked?B.marked:re=="variable"&&G(j,fe)?"variable-2":ft}}}var B={state:null,column:null,marked:null,cc:null};function mt(){for(var j=arguments.length-1;j>=0;j--)B.cc.push(arguments[j])}function A(){return mt.apply(null,arguments),!0}function Mt(j,ft){for(var re=ft;re;re=re.next)if(re.name==j)return!0;return!1}function Dt(j){var ft=B.state;if(B.marked="def",!!k){if(ft.context){if(ft.lexical.info=="var"&&ft.context&&ft.context.block){var re=X(j,ft.context);if(re!=null){ft.context=re;return}}else if(!Mt(j,ft.localVars)){ft.localVars=new Nt(j,ft.localVars);return}}gt.globalVars&&!Mt(j,ft.globalVars)&&(ft.globalVars=new Nt(j,ft.globalVars))}}function X(j,ft){if(ft)if(ft.block){var re=X(j,ft.prev);return re?re==ft.prev?ft:new V(re,ft.vars,!0):null}else return Mt(j,ft.vars)?ft:new V(ft.prev,new Nt(j,ft.vars),!1);else return null}function Et(j){return j=="public"||j=="private"||j=="protected"||j=="abstract"||j=="readonly"}function V(j,ft,re){this.prev=j,this.vars=ft,this.block=re}function Nt(j,ft){this.name=j,this.next=ft}var jt=new Nt("this",new Nt("arguments",null));function Lt(){B.state.context=new V(B.state.context,B.state.localVars,!1),B.state.localVars=jt}function qt(){B.state.context=new V(B.state.context,B.state.localVars,!0),B.state.localVars=null}Lt.lex=qt.lex=!0;function Vt(){B.state.localVars=B.state.context.vars,B.state.context=B.state.context.prev}Vt.lex=!0;function $t(j,ft){var re=function(){var fe=B.state,Ue=fe.indented;if(fe.lexical.type=="stat")Ue=fe.lexical.indented;else for(var qe=fe.lexical;qe&&qe.type==")"&&qe.align;qe=qe.prev)Ue=qe.indented;fe.lexical=new I(Ue,B.stream.column(),j,null,fe.lexical,ft)};return re.lex=!0,re}function Ct(){var j=B.state;j.lexical.prev&&(j.lexical.type==")"&&(j.indented=j.lexical.indented),j.lexical=j.lexical.prev)}Ct.lex=!0;function It(j){function ft(re){return re==j?A():j==";"||re=="}"||re==")"||re=="]"?mt():A(ft)}return ft}function ae(j,ft){return j=="var"?A($t("vardef",ft),Fe,It(";"),Ct):j=="keyword a"?A($t("form"),Xe,ae,Ct):j=="keyword b"?A($t("form"),ae,Ct):j=="keyword d"?B.stream.match(/^\s*$/,!1)?A():A($t("stat"),Me,It(";"),Ct):j=="debugger"?A(It(";")):j=="{"?A($t("}"),qt,xe,Ct,Vt):j==";"?A():j=="if"?(B.state.lexical.info=="else"&&B.state.cc[B.state.cc.length-1]==Ct&&B.state.cc.pop()(),A($t("form"),Xe,ae,Ct,mn)):j=="function"?A(cn):j=="for"?A($t("form"),qt,Cn,ae,Vt,Ct):j=="class"||b&&ft=="interface"?(B.marked="keyword",A($t("form",j=="class"?j:ft),Mn,Ct)):j=="variable"?b&&ft=="declare"?(B.marked="keyword",A(ae)):b&&(ft=="module"||ft=="enum"||ft=="type")&&B.stream.match(/^\s*\w/,!1)?(B.marked="keyword",ft=="enum"?A(or):ft=="type"?A(pe,It("operator"),Le,It(";")):A($t("form"),$e,It("{"),$t("}"),xe,Ct,Ct)):b&&ft=="namespace"?(B.marked="keyword",A($t("form"),Xt,ae,Ct)):b&&ft=="abstract"?(B.marked="keyword",A(ae)):A($t("stat"),Tt):j=="switch"?A($t("form"),Xe,It("{"),$t("}","switch"),qt,xe,Ct,Ct,Vt):j=="case"?A(Xt,It(":")):j=="default"?A(It(":")):j=="catch"?A($t("form"),Lt,Yt,ae,Ct,Vt):j=="export"?A($t("stat"),Sn,Ct):j=="import"?A($t("stat"),bi,Ct):j=="async"?A(ae):ft=="@"?A(Xt,ae):mt($t("stat"),Xt,It(";"),Ct)}function Yt(j){if(j=="(")return A(Zn,It(")"))}function Xt(j,ft){return Ie(j,ft,!1)}function De(j,ft){return Ie(j,ft,!0)}function Xe(j){return j!="("?mt():A($t(")"),Me,It(")"),Ct)}function Ie(j,ft,re){if(B.state.fatArrowAt==B.stream.start){var fe=re?bt:_;if(j=="(")return A(Lt,$t(")"),ee(Zn,")"),Ct,It("=>"),fe,Vt);if(j=="variable")return mt(Lt,$e,It("=>"),fe,Vt)}var Ue=re?R:ue;return N.hasOwnProperty(j)?A(Ue):j=="function"?A(cn,Ue):j=="class"||b&&ft=="interface"?(B.marked="keyword",A($t("form"),Po,Ct)):j=="keyword c"||j=="async"?A(re?De:Xt):j=="("?A($t(")"),Me,It(")"),Ct,Ue):j=="operator"||j=="spread"?A(re?De:Xt):j=="["?A($t("]"),rn,Ct,Ue):j=="{"?ce(Qt,"}",null,Ue):j=="quasi"?mt(at,Ue):j=="new"?A(J(re)):A()}function Me(j){return j.match(/[;\}\)\],]/)?mt():mt(Xt)}function ue(j,ft){return j==","?A(Me):R(j,ft,!1)}function R(j,ft,re){var fe=re==!1?ue:R,Ue=re==!1?Xt:De;if(j=="=>")return A(Lt,re?bt:_,Vt);if(j=="operator")return/\+\+|--/.test(ft)||b&&ft=="!"?A(fe):b&&ft=="<"&&B.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?A($t(">"),ee(Le,">"),Ct,fe):ft=="?"?A(Xt,It(":"),Ue):A(Ue);if(j=="quasi")return mt(at,fe);if(j!=";"){if(j=="(")return ce(De,")","call",fe);if(j==".")return A(te,fe);if(j=="[")return A($t("]"),Me,It("]"),Ct,fe);if(b&&ft=="as")return B.marked="keyword",A(Le,fe);if(j=="regexp")return B.state.lastType=B.marked="operator",B.stream.backUp(B.stream.pos-B.stream.start-1),A(Ue)}}function at(j,ft){return j!="quasi"?mt():ft.slice(ft.length-2)!="${"?A(at):A(Me,yt)}function yt(j){if(j=="}")return B.marked="string-2",B.state.tokenize=rt,A(at)}function _(j){return O(B.stream,B.state),mt(j=="{"?ae:Xt)}function bt(j){return O(B.stream,B.state),mt(j=="{"?ae:De)}function J(j){return function(ft){return ft=="."?A(j?H:Y):ft=="variable"&&b?A(Ht,j?R:ue):mt(j?De:Xt)}}function Y(j,ft){if(ft=="target")return B.marked="keyword",A(ue)}function H(j,ft){if(ft=="target")return B.marked="keyword",A(R)}function Tt(j){return j==":"?A(Ct,ae):mt(ue,It(";"),Ct)}function te(j){if(j=="variable")return B.marked="property",A()}function Qt(j,ft){if(j=="async")return B.marked="property",A(Qt);if(j=="variable"||B.style=="keyword"){if(B.marked="property",ft=="get"||ft=="set")return A(Ut);var re;return b&&B.state.fatArrowAt==B.stream.start&&(re=B.stream.match(/^\s*:\s*/,!1))&&(B.state.fatArrowAt=B.stream.pos+re[0].length),A(se)}else{if(j=="number"||j=="string")return B.marked=et?"property":B.style+" property",A(se);if(j=="jsonld-keyword")return A(se);if(b&&Et(ft))return B.marked="keyword",A(Qt);if(j=="[")return A(Xt,Ae,It("]"),se);if(j=="spread")return A(De,se);if(ft=="*")return B.marked="keyword",A(Qt);if(j==":")return mt(se)}}function Ut(j){return j!="variable"?mt(se):(B.marked="property",A(cn))}function se(j){if(j==":")return A(De);if(j=="(")return mt(cn)}function ee(j,ft,re){function fe(Ue,qe){if(re?re.indexOf(Ue)>-1:Ue==","){var sr=B.state.lexical;return sr.info=="call"&&(sr.pos=(sr.pos||0)+1),A(function(ke,En){return ke==ft||En==ft?mt():mt(j)},fe)}return Ue==ft||qe==ft?A():re&&re.indexOf(";")>-1?mt(j):A(It(ft))}return function(Ue,qe){return Ue==ft||qe==ft?A():mt(j,fe)}}function ce(j,ft,re){for(var fe=3;fe<arguments.length;fe++)B.cc.push(arguments[fe]);return A($t(ft,re),ee(j,ft),Ct)}function xe(j){return j=="}"?A():mt(ae,xe)}function Ae(j,ft){if(b){if(j==":")return A(Le);if(ft=="?")return A(Ae)}}function Ve(j,ft){if(b&&(j==":"||ft=="in"))return A(Le)}function Se(j){if(b&&j==":")return B.stream.match(/^\s*\w+\s+is\b/,!1)?A(Xt,hr,Le):A(Le)}function hr(j,ft){if(ft=="is")return B.marked="keyword",A()}function Le(j,ft){if(ft=="keyof"||ft=="typeof"||ft=="infer"||ft=="readonly")return B.marked="keyword",A(ft=="typeof"?De:Le);if(j=="variable"||ft=="void")return B.marked="type",A(Pt);if(ft=="|"||ft=="&")return A(Le);if(j=="string"||j=="number"||j=="atom")return A(Pt);if(j=="[")return A($t("]"),ee(Le,"]",","),Ct,Pt);if(j=="{")return A($t("}"),ze,Ct,Pt);if(j=="(")return A(ee(ot,")"),nr,Pt);if(j=="<")return A(ee(Le,">"),Le);if(j=="quasi")return mt(mr,Pt)}function nr(j){if(j=="=>")return A(Le)}function ze(j){return j.match(/[\}\)\]]/)?A():j==","||j==";"?A(ze):mt(xr,ze)}function xr(j,ft){if(j=="variable"||B.style=="keyword")return B.marked="property",A(xr);if(ft=="?"||j=="number"||j=="string")return A(xr);if(j==":")return A(Le);if(j=="[")return A(It("variable"),Ve,It("]"),xr);if(j=="(")return mt(fr,xr);if(!j.match(/[;\}\)\],]/))return A()}function mr(j,ft){return j!="quasi"?mt():ft.slice(ft.length-2)!="${"?A(mr):A(Le,Sr)}function Sr(j){if(j=="}")return B.marked="string-2",B.state.tokenize=rt,A(mr)}function ot(j,ft){return j=="variable"&&B.stream.match(/^\s*[?:]/,!1)||ft=="?"?A(ot):j==":"?A(Le):j=="spread"?A(ot):mt(Le)}function Pt(j,ft){if(ft=="<")return A($t(">"),ee(Le,">"),Ct,Pt);if(ft=="|"||j=="."||ft=="&")return A(Le);if(j=="[")return A(Le,It("]"),Pt);if(ft=="extends"||ft=="implements")return B.marked="keyword",A(Le);if(ft=="?")return A(Le,It(":"),Le)}function Ht(j,ft){if(ft=="<")return A($t(">"),ee(Le,">"),Ct,Pt)}function ne(){return mt(Le,_e)}function _e(j,ft){if(ft=="=")return A(Le)}function Fe(j,ft){return ft=="enum"?(B.marked="keyword",A(or)):mt($e,Ae,lr,Vi)}function $e(j,ft){if(b&&Et(ft))return B.marked="keyword",A($e);if(j=="variable")return Dt(ft),A();if(j=="spread")return A($e);if(j=="[")return ce(gn,"]");if(j=="{")return ce(en,"}")}function en(j,ft){return j=="variable"&&!B.stream.match(/^\s*:/,!1)?(Dt(ft),A(lr)):(j=="variable"&&(B.marked="property"),j=="spread"?A($e):j=="}"?mt():j=="["?A(Xt,It("]"),It(":"),en):A(It(":"),$e,lr))}function gn(){return mt($e,lr)}function lr(j,ft){if(ft=="=")return A(De)}function Vi(j){if(j==",")return A(Fe)}function mn(j,ft){if(j=="keyword b"&&ft=="else")return A($t("form","else"),ae,Ct)}function Cn(j,ft){if(ft=="await")return A(Cn);if(j=="(")return A($t(")"),ii,Ct)}function ii(j){return j=="var"?A(Fe,Mr):j=="variable"?A(Mr):mt(Mr)}function Mr(j,ft){return j==")"?A():j==";"?A(Mr):ft=="in"||ft=="of"?(B.marked="keyword",A(Xt,Mr)):mt(Xt,Mr)}function cn(j,ft){if(ft=="*")return B.marked="keyword",A(cn);if(j=="variable")return Dt(ft),A(cn);if(j=="(")return A(Lt,$t(")"),ee(Zn,")"),Ct,Se,ae,Vt);if(b&&ft=="<")return A($t(">"),ee(ne,">"),Ct,cn)}function fr(j,ft){if(ft=="*")return B.marked="keyword",A(fr);if(j=="variable")return Dt(ft),A(fr);if(j=="(")return A(Lt,$t(")"),ee(Zn,")"),Ct,Se,Vt);if(b&&ft=="<")return A($t(">"),ee(ne,">"),Ct,fr)}function pe(j,ft){if(j=="keyword"||j=="variable")return B.marked="type",A(pe);if(ft=="<")return A($t(">"),ee(ne,">"),Ct)}function Zn(j,ft){return ft=="@"&&A(Xt,Zn),j=="spread"?A(Zn):b&&Et(ft)?(B.marked="keyword",A(Zn)):b&&j=="this"?A(Ae,lr):mt($e,Ae,lr)}function Po(j,ft){return j=="variable"?Mn(j,ft):$n(j,ft)}function Mn(j,ft){if(j=="variable")return Dt(ft),A($n)}function $n(j,ft){if(ft=="<")return A($t(">"),ee(ne,">"),Ct,$n);if(ft=="extends"||ft=="implements"||b&&j==",")return ft=="implements"&&(B.marked="keyword"),A(b?Le:Xt,$n);if(j=="{")return A($t("}"),Br,Ct)}function Br(j,ft){if(j=="async"||j=="variable"&&(ft=="static"||ft=="get"||ft=="set"||b&&Et(ft))&&B.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return B.marked="keyword",A(Br);if(j=="variable"||B.style=="keyword")return B.marked="property",A(oi,Br);if(j=="number"||j=="string")return A(oi,Br);if(j=="[")return A(Xt,Ae,It("]"),oi,Br);if(ft=="*")return B.marked="keyword",A(Br);if(b&&j=="(")return mt(fr,Br);if(j==";"||j==",")return A(Br);if(j=="}")return A();if(ft=="@")return A(Xt,Br)}function oi(j,ft){if(ft=="!"||ft=="?")return A(oi);if(j==":")return A(Le,lr);if(ft=="=")return A(De);var re=B.state.lexical.prev,fe=re&&re.info=="interface";return mt(fe?fr:cn)}function Sn(j,ft){return ft=="*"?(B.marked="keyword",A(Or,It(";"))):ft=="default"?(B.marked="keyword",A(Xt,It(";"))):j=="{"?A(ee(On,"}"),Or,It(";")):mt(ae)}function On(j,ft){if(ft=="as")return B.marked="keyword",A(It("variable"));if(j=="variable")return mt(De,On)}function bi(j){return j=="string"?A():j=="("?mt(Xt):j=="."?mt(ue):mt(ur,Pe,Or)}function ur(j,ft){return j=="{"?ce(ur,"}"):(j=="variable"&&Dt(ft),ft=="*"&&(B.marked="keyword"),A(Tn))}function Pe(j){if(j==",")return A(ur,Pe)}function Tn(j,ft){if(ft=="as")return B.marked="keyword",A(ur)}function Or(j,ft){if(ft=="from")return B.marked="keyword",A(Xt)}function rn(j){return j=="]"?A():mt(ee(De,"]"))}function or(){return mt($t("form"),$e,It("{"),$t("}"),ee(qn,"}"),Ct,Ct)}function qn(){return mt($e,lr)}function hi(j,ft){return j.lastType=="operator"||j.lastType==","||x.test(ft.charAt(0))||/[,.]/.test(ft.charAt(0))}function zr(j,ft,re){return ft.tokenize==T&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(ft.lastType)||ft.lastType=="quasi"&&/\{\s*$/.test(j.string.slice(0,j.pos-(re||0)))}return{startState:function(j){var ft={tokenize:T,lastType:"sof",cc:[],lexical:new I((j||0)-lt,0,"block",!1),localVars:gt.localVars,context:gt.localVars&&new V(null,null,!1),indented:j||0};return gt.globalVars&&typeof gt.globalVars=="object"&&(ft.globalVars=gt.globalVars),ft},token:function(j,ft){if(j.sol()&&(ft.lexical.hasOwnProperty("align")||(ft.lexical.align=!1),ft.indented=j.indentation(),O(j,ft)),ft.tokenize!=U&&j.eatSpace())return null;var re=ft.tokenize(j,ft);return st=="comment"?re:(ft.lastType=st=="operator"&&(q=="++"||q=="--")?"incdec":st,ut(ft,re,st,q,j))},indent:function(j,ft){if(j.tokenize==U||j.tokenize==rt)return St.Pass;if(j.tokenize!=T)return 0;var re=ft&&ft.charAt(0),fe=j.lexical,Ue;if(!/^\s*else\b/.test(ft))for(var qe=j.cc.length-1;qe>=0;--qe){var sr=j.cc[qe];if(sr==Ct)fe=fe.prev;else if(sr!=mn&&sr!=Vt)break}for(;(fe.type=="stat"||fe.type=="form")&&(re=="}"||(Ue=j.cc[j.cc.length-1])&&(Ue==ue||Ue==R)&&!/^[,\.=+\-*:?[\(]/.test(ft));)fe=fe.prev;K&&fe.type==")"&&fe.prev.type=="stat"&&(fe=fe.prev);var ke=fe.type,En=re==ke;return ke=="vardef"?fe.indented+(j.lastType=="operator"||j.lastType==","?fe.info.length+1:0):ke=="form"&&re=="{"?fe.indented:ke=="form"?fe.indented+lt:ke=="stat"?fe.indented+(hi(j,ft)?K||lt:0):fe.info=="switch"&&!En&&gt.doubleIndentSwitch!=!1?fe.indented+(/^(?:case|default)\b/.test(ft)?lt:2*lt):fe.align?fe.column+(En?0:1):fe.indented+(En?0:lt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:m?null:"/*",blockCommentEnd:m?null:"*/",blockCommentContinue:m?null:" * ",lineComment:m?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:m?"json":"javascript",jsonldMode:et,jsonMode:m,expressionAllowed:zr,skipExpression:function(j){ut(j,"atom","atom","true",new St.StringStream("",2,null))}}}),St.registerHelper("wordChars","javascript",/[\w$]/),St.defineMIME("text/javascript","javascript"),St.defineMIME("text/ecmascript","javascript"),St.defineMIME("application/javascript","javascript"),St.defineMIME("application/x-javascript","javascript"),St.defineMIME("application/ecmascript","javascript"),St.defineMIME("application/json",{name:"javascript",json:!0}),St.defineMIME("application/x-json",{name:"javascript",json:!0}),St.defineMIME("application/manifest+json",{name:"javascript",json:!0}),St.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),St.defineMIME("text/typescript",{name:"javascript",typescript:!0}),St.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},589:(L,ct,kt)=>{(function(St){St(kt(631))})(function(St){var Rt={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},gt={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};St.defineMode("xml",function(lt,K){var et=lt.indentUnit,m={},k=K.htmlMode?Rt:gt;for(var b in k)m[b]=k[b];for(var b in K)m[b]=K[b];var C,E;function x(A,Mt){function Dt(V){return Mt.tokenize=V,V(A,Mt)}var X=A.next();if(X=="<")return A.eat("!")?A.eat("[")?A.match("CDATA[")?Dt(st("atom","]]>")):null:A.match("--")?Dt(st("comment","-->")):A.match("DOCTYPE",!0,!0)?(A.eatWhile(/[\w\._\-]/),Dt(q(1))):null:A.eat("?")?(A.eatWhile(/[\w\._\-]/),Mt.tokenize=st("meta","?>"),"meta"):(C=A.eat("/")?"closeTag":"openTag",Mt.tokenize=F,"tag bracket");if(X=="&"){var Et;return A.eat("#")?A.eat("x")?Et=A.eatWhile(/[a-fA-F\d]/)&&A.eat(";"):Et=A.eatWhile(/[\d]/)&&A.eat(";"):Et=A.eatWhile(/[\w\.\-:]/)&&A.eat(";"),Et?"atom":"error"}else return A.eatWhile(/[^&<]/),null}x.isInText=!0;function F(A,Mt){var Dt=A.next();if(Dt==">"||Dt=="/"&&A.eat(">"))return Mt.tokenize=x,C=Dt==">"?"endTag":"selfcloseTag","tag bracket";if(Dt=="=")return C="equals",null;if(Dt=="<"){Mt.tokenize=x,Mt.state=rt,Mt.tagName=Mt.tagStart=null;var X=Mt.tokenize(A,Mt);return X?X+" tag error":"tag error"}else return/[\'\"]/.test(Dt)?(Mt.tokenize=Q(Dt),Mt.stringStartCol=A.column(),Mt.tokenize(A,Mt)):(A.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Q(A){var Mt=function(Dt,X){for(;!Dt.eol();)if(Dt.next()==A){X.tokenize=F;break}return"string"};return Mt.isInAttribute=!0,Mt}function st(A,Mt){return function(Dt,X){for(;!Dt.eol();){if(Dt.match(Mt)){X.tokenize=x;break}Dt.next()}return A}}function q(A){return function(Mt,Dt){for(var X;(X=Mt.next())!=null;){if(X=="<")return Dt.tokenize=q(A+1),Dt.tokenize(Mt,Dt);if(X==">")if(A==1){Dt.tokenize=x;break}else return Dt.tokenize=q(A-1),Dt.tokenize(Mt,Dt)}return"meta"}}function W(A){return A&&A.toLowerCase()}function T(A,Mt,Dt){this.prev=A.context,this.tagName=Mt||"",this.indent=A.indented,this.startOfLine=Dt,(m.doNotIndent.hasOwnProperty(Mt)||A.context&&A.context.noIndent)&&(this.noIndent=!0)}function it(A){A.context&&(A.context=A.context.prev)}function U(A,Mt){for(var Dt;;){if(!A.context||(Dt=A.context.tagName,!m.contextGrabbers.hasOwnProperty(W(Dt))||!m.contextGrabbers[W(Dt)].hasOwnProperty(W(Mt))))return;it(A)}}function rt(A,Mt,Dt){return A=="openTag"?(Dt.tagStart=Mt.column(),$):A=="closeTag"?O:rt}function $(A,Mt,Dt){return A=="word"?(Dt.tagName=Mt.current(),E="tag",G):m.allowMissingTagName&&A=="endTag"?(E="tag bracket",G(A,Mt,Dt)):(E="error",$)}function O(A,Mt,Dt){if(A=="word"){var X=Mt.current();return Dt.context&&Dt.context.tagName!=X&&m.implicitlyClosed.hasOwnProperty(W(Dt.context.tagName))&&it(Dt),Dt.context&&Dt.context.tagName==X||m.matchClosing===!1?(E="tag",N):(E="tag error",I)}else return m.allowMissingTagName&&A=="endTag"?(E="tag bracket",N(A,Mt,Dt)):(E="error",I)}function N(A,Mt,Dt){return A!="endTag"?(E="error",N):(it(Dt),rt)}function I(A,Mt,Dt){return E="error",N(A,Mt,Dt)}function G(A,Mt,Dt){if(A=="word")return E="attribute",ut;if(A=="endTag"||A=="selfcloseTag"){var X=Dt.tagName,Et=Dt.tagStart;return Dt.tagName=Dt.tagStart=null,A=="selfcloseTag"||m.autoSelfClosers.hasOwnProperty(W(X))?U(Dt,X):(U(Dt,X),Dt.context=new T(Dt,X,Et==Dt.indented)),rt}return E="error",G}function ut(A,Mt,Dt){return A=="equals"?B:(m.allowMissing||(E="error"),G(A,Mt,Dt))}function B(A,Mt,Dt){return A=="string"?mt:A=="word"&&m.allowUnquoted?(E="string",G):(E="error",G(A,Mt,Dt))}function mt(A,Mt,Dt){return A=="string"?mt:G(A,Mt,Dt)}return{startState:function(A){var Mt={tokenize:x,state:rt,indented:A||0,tagName:null,tagStart:null,context:null};return A!=null&&(Mt.baseIndent=A),Mt},token:function(A,Mt){if(!Mt.tagName&&A.sol()&&(Mt.indented=A.indentation()),A.eatSpace())return null;C=null;var Dt=Mt.tokenize(A,Mt);return(Dt||C)&&Dt!="comment"&&(E=null,Mt.state=Mt.state(C||Dt,A,Mt),E&&(Dt=E=="error"?Dt+" error":E)),Dt},indent:function(A,Mt,Dt){var X=A.context;if(A.tokenize.isInAttribute)return A.tagStart==A.indented?A.stringStartCol+1:A.indented+et;if(X&&X.noIndent)return St.Pass;if(A.tokenize!=F&&A.tokenize!=x)return Dt?Dt.match(/^(\s*)/)[0].length:0;if(A.tagName)return m.multilineTagIndentPastTag!==!1?A.tagStart+A.tagName.length+2:A.tagStart+et*(m.multilineTagIndentFactor||1);if(m.alignCDATA&&/<!\[CDATA\[/.test(Mt))return 0;var Et=Mt&&/^<(\/)?([\w_:\.-]*)/.exec(Mt);if(Et&&Et[1])for(;X;)if(X.tagName==Et[2]){X=X.prev;break}else if(m.implicitlyClosed.hasOwnProperty(W(X.tagName)))X=X.prev;else break;else if(Et)for(;X;){var V=m.contextGrabbers[W(X.tagName)];if(V&&V.hasOwnProperty(W(Et[2])))X=X.prev;else break}for(;X&&X.prev&&!X.startOfLine;)X=X.prev;return X?X.indent+et:A.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:m.htmlMode?"html":"xml",helperType:m.htmlMode?"html":"xml",skipAttribute:function(A){A.state==B&&(A.state=G)},xmlCurrentTag:function(A){return A.tagName?{name:A.tagName,close:A.type=="closeTag"}:null},xmlCurrentContext:function(A){for(var Mt=[],Dt=A.context;Dt;Dt=Dt.prev)Mt.push(Dt.tagName);return Mt.reverse()}}}),St.defineMIME("text/xml","xml"),St.defineMIME("application/xml","xml"),St.mimeModes.hasOwnProperty("text/html")||St.defineMIME("text/html",{name:"xml",htmlMode:!0})})},642:(L,ct,kt)=>{kt.d(ct,{Z:()=>lt});var St=kt(346),Rt=function(){var K=function(et,m){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,b){k.__proto__=b}||function(k,b){for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(k[C]=b[C])},K(et,m)};return function(et,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");K(et,m);function k(){this.constructor=et}et.prototype=m===null?Object.create(m):(k.prototype=m.prototype,new k)}}(),gt=function(K){Rt(et,K);function et(m,k,b){var C=K.call(this,k,b)||this;return C._module=m,C}return Object.defineProperty(et.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(et.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(et.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),et}(St.Hn);const lt=gt},675:(L,ct,kt)=>{kt.d(ct,{Z:()=>K,q:()=>gt});var St=kt(642),Rt=function(){var et=function(m,k){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(b[E]=C[E])},et(m,k)};return function(m,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");et(m,k);function b(){this.constructor=m}m.prototype=k===null?Object.create(k):(b.prototype=k.prototype,new b)}}(),gt;(function(et){et.Select="select",et.Hover="hover",et.Spacing="spacing",et.Target="target",et.Resize="resize"})(gt||(gt={}));var lt=function(et){Rt(m,et);function m(){return et!==null&&et.apply(this,arguments)||this}return m.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(m.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"component",{get:function(){var k,b=this.get("component");return b||((k=this.get("componentView"))===null||k===void 0?void 0:k.model)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"componentView",{get:function(){var k,b=this.get("componentView");return b||((k=this.get("component"))===null||k===void 0?void 0:k.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"el",{get:function(){var k;return(k=this.componentView)===null||k===void 0?void 0:k.el},enumerable:!1,configurable:!0}),m.prototype.getBoxRect=function(k){var b=this,C=b.el,E=b.em,x=E.Canvas.getCanvasView(),F=this.get("boxRect");return F||(C&&x?x.getElBoxRect(C,k):{x:0,y:0,width:0,height:0})},m.prototype.getStyle=function(k){k===void 0&&(k={});var b=k.boxRect||this.getBoxRect(k),C=b.width,E=b.height,x=b.x,F=b.y;return{width:"".concat(C,"px"),height:"".concat(E,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(x,"px ").concat(F,"px")}},m.prototype.isType=function(k){return this.type===k},m}(St.Z);const K=lt},858:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>St});const St={run:function(Rt){Rt.Components.clear(),Rt.Css.clear()}}},884:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>lt});var St=kt(50),Rt=kt(668),gt=kt(491);const lt={run:function(K){(0,St.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=K,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(K){this.toggleMove(),this.disableDragger()},onKeyUp:function(K){(0,gt.sN)(K)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(K){this.toggleDragger(1,K)},disableDragger:function(K){this.toggleDragger(0,K)},toggleDragger:function(K,et){var m=this,k=m.canvasModel,b=m.em,C=this.dragger,E=K?"add":"remove";this.getCanvas().classList[E]("".concat(this.ppfx,"is__grabbing")),C||(C=new Rt.Z({getPosition:function(){return{x:k.get("x"),y:k.get("y")}},setPosition:function(x){var F=x.x,Q=x.y;k.set({x:F,y:Q})},onStart:function(x,F){b.trigger("canvas:move:start",F)},onDrag:function(x,F){b.trigger("canvas:move",F)},onEnd:function(x,F){b.trigger("canvas:move:end",F)}}),this.dragger=C),K?C.start(et):C.stop()},toggleMove:function(K){var et=this.ppfx,m=K?"add":"remove",k=K?"on":"off",b={on:gt.on,off:gt.S1},C=this.getCanvas(),E=["".concat(et,"is__grab")];!K&&E.push("".concat(et,"is__grabbing")),E.forEach(function(x){return C.classList[m](x)}),b[k](document,"keyup",this.onKeyUp),b[k](C,"mousedown",this.enableDragger),b[k](document,"mouseup",this.disableDragger)}}},790:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>K,defineCommand:()=>gt});var St=kt(346),Rt=function(){var et=function(m,k){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(b[E]=C[E])},et(m,k)};return function(m,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");et(m,k);function b(){this.constructor=m}m.prototype=k===null?Object.create(k):(b.prototype=k.prototype,new b)}}();function gt(et){return et}var lt=function(et){Rt(m,et);function m(k){var b=et.call(this,0)||this;b.config=k||{},b.em=b.config.em||{};var C=b.config.stylePrefix;return b.pfx=C,b.ppfx=b.config.pStylePrefix,b.hoverClass="".concat(C,"hover"),b.badgeClass="".concat(C,"badge"),b.plhClass="".concat(C,"placeholder"),b.freezClass="".concat(b.ppfx,"freezed"),b.canvas=b.em.Canvas,b.init(b.config),b}return m.prototype.onFrameScroll=function(k){},m.prototype.getCanvas=function(){return this.canvas.getElement()},m.prototype.getCanvasBody=function(){return this.canvas.getBody()},m.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},m.prototype.offset=function(k){var b=k.getBoundingClientRect();return{top:b.top+k.ownerDocument.body.scrollTop,left:b.left+k.ownerDocument.body.scrollLeft}},m.prototype.init=function(k){},m.prototype.callRun=function(k,b){b===void 0&&(b={});var C=this.id;if(k.trigger("run:".concat(C,":before"),b),b&&b.abort){k.trigger("abort:".concat(C),b);return}var E=b.sender||k,x=this.run(k,E,b);return k.trigger("run:".concat(C),x,b),k.trigger("run",C,x,b),x},m.prototype.callStop=function(k,b){b===void 0&&(b={});var C=this.id,E=b.sender||k;k.trigger("stop:".concat(C,":before"),b);var x=this.stop(k,E,b);return k.trigger("stop:".concat(C),x,b),k.trigger("stop",C,x,b),x},m.prototype.stopCommand=function(k){this.em.Commands.stop(this.id,k)},m.prototype.run=function(k,b,C){},m.prototype.stop=function(k,b,C){},m}(St.Hn);const K=lt},180:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>lt});var St=kt(50),Rt=function(K,et,m){if(m||arguments.length===2)for(var k=0,b=et.length,C;k<b;k++)(C||!(k in et))&&(C||(C=Array.prototype.slice.call(et,0,k)),C[k]=et[k]);return K.concat(C||Array.prototype.slice.call(et))},gt={run:function(K,et,m){var k=this;m===void 0&&(m={});var b=[],C=m.component||K.getSelectedAll();return C=(0,St.isArray)(C)?Rt([],C,!0):[C],C.filter(Boolean).forEach(function(E){if(!E.get("removable"))return b.push(E),k.em.logWarning("The element is not removable",{component:E});E.remove()}),K.select(b),C}};const lt=gt},544:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>K});var St=kt(50),Rt=kt(668),gt=function(){return gt=Object.assign||function(et){for(var m,k=1,b=arguments.length;k<b;k++){m=arguments[k];for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&(et[C]=m[C])}return et},gt.apply(this,arguments)},lt="dmode";const K={run:function(et,m,k){var b=this;k===void 0&&(k={}),(0,St.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var C=k.target,E=k.event,x=k.mode,F=k.dragger,Q=F===void 0?{}:F,st=C.getEl(),q=gt({doc:st.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return b.guidesStatic},guidesTarget:function(){return b.guidesTarget}},Q);this.setupGuides(),this.opts=k,this.editor=et,this.em=et.getModel(),this.target=C,this.isTran=x=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var W=this.dragger;return W?W.setOptions(q):(W=new Rt.Z(q),this.dragger=W),E&&W.start(E),this.toggleDrag(1),this.em.trigger("".concat(lt,":start"),this.getEventOpts()),W},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(et){var m=et.guide;m&&m.parentNode.removeChild(m)}),this.guides=[]},getGuidesContainer:function(){var et=this,m=this.guidesEl;if(!m){var k=this,b=k.editor,C=k.em,E=k.opts,x=b.getConfig().stylePrefix,F=document.createElement("div"),Q=document.createElement("div"),st='<div class="'.concat(x,"guide-info__line ").concat(x,`danger-bg">
        <div class="`).concat(x,"guide-info__content ").concat(x,`danger-color"></div>
      </div>`);m=document.createElement("div"),m.className="".concat(x,"guides"),F.className="".concat(x,"guide-info ").concat(x,"guide-info__x"),Q.className="".concat(x,"guide-info ").concat(x,"guide-info__y"),F.innerHTML=st,Q.innerHTML=st,m.appendChild(F),m.appendChild(Q),b.Canvas.getGlobalToolsEl().appendChild(m),this.guidesEl=m,this.elGuideInfoX=F,this.elGuideInfoY=Q,this.elGuideInfoContentX=F.querySelector(".".concat(x,"guide-info__content")),this.elGuideInfoContentY=Q.querySelector(".".concat(x,"guide-info__content")),C.on("canvas:update frame:scroll",(0,St.debounce)(function(){var q;et.updateGuides(),E.debug&&((q=et.guides)===null||q===void 0||q.forEach(function(W){return et.renderGuide(W)}))},200))}return m},getGuidesStatic:function(){var et=this,m=[],k=this.target.getEl(),b=k.parentNode,C=b===void 0?{}:b;return(0,St.each)(C.children,function(E){return m=m.concat(k!==E?et.getElementGuides(E):[])}),m.concat(this.getElementGuides(C))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(et){var m=this,k,b;(et||this.guides).forEach(function(C){var E=C.origin,x=k===E?b:m.getElementPos(E);k=E,b=x,(0,St.each)(m.getGuidePosUpdate(C,x),function(F,Q){return C[Q]=F}),C.originRect=x})},getGuidePosUpdate:function(et,m){var k={},b=m.top,C=m.height,E=m.left,x=m.width;switch(et.type){case"t":k.y=b;break;case"b":k.y=b+C;break;case"l":k.x=E;break;case"r":k.x=E+x;break;case"x":k.x=E+x/2;break;case"y":k.y=b+C/2;break}return k},renderGuide:function(et){et===void 0&&(et={});var m=et.guide||document.createElement("div"),k="px",b=et.active?2:1,C=m.children[0];return m.style="position: absolute; background-color: ".concat(et.active?"green":"red",";"),m.children.length||(C=document.createElement("div"),C.style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",m.appendChild(C)),et.y?(m.style.width="100%",m.style.height="".concat(b).concat(k),m.style.top="".concat(et.y).concat(k),m.style.left=0):(m.style.width="".concat(b).concat(k),m.style.height="100%",m.style.left="".concat(et.x).concat(k),m.style.top="0".concat(k)),!et.guide&&this.guidesContainer.appendChild(m),m},getElementPos:function(et){return this.editor.Canvas.getElementPos(et,{noScroll:1})},getElementGuides:function(et){var m=this,k=this.opts,b=this.getElementPos(et),C=b.top,E=b.height,x=b.left,F=b.width,Q=[{type:"t",y:C},{type:"b",y:C+E},{type:"l",x},{type:"r",x:x+F},{type:"x",x:x+F/2},{type:"y",y:C+E/2}].map(function(st){return gt(gt({},st),{origin:et,originRect:b,guide:k.debug&&m.renderGuide(st)})});return Q.forEach(function(st){var q;return(q=m.guides)===null||q===void 0?void 0:q.push(st)}),Q},getTranslate:function(et,m){m===void 0&&(m="x");var k=0;return(et||"").split(" ").forEach(function(b){var C=b.trim(),E="translate".concat(m.toUpperCase(),"(");C.indexOf(E)===0&&(k=parseFloat(C.replace(E,"")))}),k},setTranslate:function(et,m,k){var b="translate".concat(m.toUpperCase(),"("),C="".concat(b).concat(k,")"),E=(et||"").split(" ").map(function(x){var F=x.trim();return F.indexOf(b)===0&&(x=C),x}).join(" ");return E.indexOf(b)<0&&(E+=" ".concat(C)),E},getPosition:function(){var et=this,m=et.target,k=et.isTran,b=m.getStyle(),C=b.left,E=b.top,x=b.transform,F=0,Q=0;return k?(F=this.getTranslate(x),Q=this.getTranslate(x,"y")):(F=parseFloat(C||0),Q=parseFloat(E||0)),{x:F,y:Q}},setPosition:function(et){var m=et.x,k=et.y,b=et.end,C=et.position,E=et.width,x=et.height,F=this,Q=F.target,st=F.isTran,q=F.em,W="px",T=!b,it="".concat(parseInt(m,10)).concat(W),U="".concat(parseInt(k,10)).concat(W),rt={};if(st){var $=Q.getStyle().transform||"";$=this.setTranslate($,"x",it),$=this.setTranslate($,"y",U),rt={transform:$,__p:T},Q.addStyle(rt,{avoidStore:!b})}else{var O={position:C,width:E,height:x},N={left:it,top:U,__p:T};(0,St.keys)(O).forEach(function(I){var G=O[I];G&&(N[I]=G)}),rt=N,Q.addStyle(rt,{avoidStore:!b})}q==null||q.Styles.__emitCmpStyleUpdate(rt,{components:q.getSelected()})},_getDragData:function(){var et=this.target;return{target:et,parent:et.parent(),index:et.index()}},onStart:function(et){var m=this,k=m.target,b=m.editor,C=m.isTran,E=m.opts,x=E.center,F=E.onStart,Q=b.Canvas,st=k.getStyle(),q="absolute",W=[q,"relative"];if(F&&F(this._getDragData()),!C&&st.position!==q){var T=Q.offset(k.getEl()),it=T.left,U=T.top,rt=T.width,$=T.height,O=k.parent(),N=void 0;do{var I=O.getStyle();N=W.indexOf(I.position)>=0?O:null,O=O.parent()}while(O&&!N);if(x){var G=Q.getMouseRelativeCanvas(et),ut=G.x,B=G.y;it=ut,U=B}else if(N){var mt=Q.offset(N.getEl());it=it-mt.left,U=U-mt.top}this.setPosition({x:it,y:U,width:"".concat(rt,"px"),height:"".concat($,"px"),position:q})}},onDrag:function(){var et=this,m=this,k=m.guidesTarget,b=m.opts,C=b.onDrag;this.updateGuides(k),b.debug&&k.forEach(function(E){return et.renderGuide(E)}),b.guidesInfo&&this.renderGuideInfo(k.filter(function(E){return E.active})),C&&C(this._getDragData())},onEnd:function(et,m,k){k===void 0&&(k={});var b=this,C=b.editor,E=b.opts,x=b.id,F=E.onEnd;F&&F(et,k,gt(gt({event:et},k),this._getDragData())),C.stopCommand(x),this.hideGuidesInfo(),this.em.trigger("".concat(lt,":end"),this.getEventOpts())},hideGuidesInfo:function(){var et=this;["X","Y"].forEach(function(m){var k=et["elGuideInfo".concat(m)];k&&(k.style.display="none")})},renderGuideInfo:function(et){var m=this;et===void 0&&(et=[]);var k=this.guidesStatic;this.hideGuidesInfo(),et.forEach(function(b){var C=b.origin,E=b.x,x=m.getElementPos(C),F=(0,St.isUndefined)(E)?"y":"x",Q=F==="y",st=x[Q?"left":"top"],q=x.rect[Q?"left":"top"],W=Q?st+x.width:st+x.height,T=Q?q+x.rect.width:q+x.rect.height,it=m["elGuideInfo".concat(F.toUpperCase())],U=m["elGuideInfoContent".concat(F.toUpperCase())],rt=it.style,$=k==null?void 0:k.filter(function(qt){return qt.type===b.type}).map(function(qt){var Vt=qt.originRect,$t=Vt.left,Ct=Vt.width,It=Vt.top,ae=Vt.height,Yt=Q?$t:It,Xt=Q?$t+Ct:It+ae;return{gap:Xt<st?st-Xt:Yt-W,guide:qt}}).filter(function(qt){return qt.gap>0}).sort(function(qt,Vt){return qt.gap-Vt.gap}).map(function(qt){return qt.guide})[0];if($){var O=$.originRect,N=O.left,I=O.width,G=O.top,ut=O.height,B=O.rect,mt=Q?N<x.left:G<x.top,A=Q?N:G,Mt=Q?B.left:B.top,Dt=Q?N+I:G+ut,X=Q?B.left+B.width:B.top+B.height,Et=Q?b.y:b.x,V=mt?Dt:W,Nt="".concat(Et,"px"),jt=mt?st-Dt:A-W,Lt=mt?q-X:Mt-T;rt.display="",rt[Q?"top":"left"]=Nt,rt[Q?"left":"top"]="".concat(V,"px"),rt[Q?"width":"height"]="".concat(jt,"px"),U.innerHTML="".concat(Math.round(Lt),"px"),m.em.trigger("".concat(lt,":active"),gt(gt({},m.getEventOpts()),{guide:b,guidesStatic:k,matched:$,posFirst:Et,posSecond:V,size:jt,sizeRaw:Lt,elGuideInfo:it,elGuideInfoCnt:U}))}})},toggleDrag:function(et){var m=this,k=m.ppfx,b=m.editor,C=et?"add":"remove",E=["".concat(k,"is__grabbing")],x=b.Canvas,F=x.getBody();E.forEach(function(Q){return F.classList[C](Q)}),x[et?"startAutoscroll":"stopAutoscroll"]()}}},236:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>St});const St={run:function(Rt){if(Rt.Canvas.hasFocus()){var gt=[];Rt.getSelectedAll().forEach(function(lt){var K=lt.components(),et=K&&K.filter(function(m){return m.get("selectable")})[0];et&&gt.push(et)}),gt.length&&Rt.select(gt)}}}},368:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>St});const St={run:function(Rt,gt,lt){if(lt===void 0&&(lt={}),!(!Rt.Canvas.hasFocus()&&!lt.force)){var K=[];Rt.getSelectedAll().forEach(function(et){for(var m=et.parent();m&&!m.get("selectable");)m=m.parent();m&&K.push(m)}),K.length&&Rt.select(K)}}}},243:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>St});const St={run:function(Rt){if(Rt.Canvas.hasFocus()){var gt=[];Rt.getSelectedAll().forEach(function(lt){var K=lt.parent();if(K){var et=K.components().length,m=0,k=0,b;do m++,k=lt.index()+m,b=k<=et?K.getChildAt(k):null;while(b&&!b.get("selectable"));gt.push(b||lt)}}),gt.length&&Rt.select(gt)}}}},400:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>St});const St={run:function(Rt){if(Rt.Canvas.hasFocus()){var gt=[];Rt.getSelectedAll().forEach(function(lt){var K=lt.parent();if(K){var et=0,m=0,k;do et++,m=lt.index()-et,k=m>=0?K.getChildAt(m):null;while(k&&!k.get("selectable"));gt.push(k||lt)}}),gt.length&&Rt.select(gt)}}}},910:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=kt(50);const Rt={run:function(gt,lt,K){K===void 0&&(K={});var et=K.target,m=[];if(!et.get("styles"))return m;var k=et.get("type"),b=gt.Pages.getAllWrappers(),C=(0,St.flatten)(b.map(function(x){return x.findType(k)})).length;if(!C){var E=gt.CssComposer.getAll();m=E.filter(function(x){return x.get("group")==="cmp:".concat(k)}),E.remove(m)}return m}}},744:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=function(gt,lt,K){if(K||arguments.length===2)for(var et=0,m=lt.length,k;et<m;et++)(k||!(et in lt))&&(k||(k=Array.prototype.slice.call(lt,0,et)),k[et]=lt[et]);return gt.concat(k||Array.prototype.slice.call(lt))};const Rt={run:function(gt){var lt=gt.getModel(),K=St([],gt.getSelectedAll(),!0);K.length&&lt.set("clipboard",K)}}},517:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>lt});var St=kt(50),Rt=kt(895),gt=kt(407);const lt=(0,St.extend)({},gt.default,{init:function(){(0,St.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(K){K.stopPropagation();var et=(0,Rt.default)(K.target);et.data("model").get("removable")&&(et.addClass(this.hoverClass),this.attachBadge(et.get(0)))},stopDelete:function(K){K.stopPropagation();var et=(0,Rt.default)(K.target);et.removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(K){K.stopPropagation();var et=(0,Rt.default)(K.target);et.data("model").get("removable")&&(et.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(K){this.badge.html("Remove "+K.getName())}})},457:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=kt(491);const Rt={run:function(gt,lt,K){var et=this;K===void 0&&(K={}),lt&&lt.set&&lt.set("active",0);var m=gt.getConfig(),k=gt.Modal,b=m.stylePrefix;if(this.cm=gt.CodeManager||null,!this.editors){var C=this.buildEditor("htmlmixed","hopscotch","HTML"),E=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=C.model,this.cssEditor=E.model;var x=(0,St.ut)("div",{class:"".concat(b,"export-dl")});x.appendChild(C.el),x.appendChild(E.el),this.editors=x}k.open({title:m.textViewCode,content:this.editors}).getModel().once("change:open",function(){return gt.stopCommand("".concat(et.id))}),this.htmlEditor.setContent(gt.getHtml(K.optsHtml)),this.cssEditor.setContent(gt.getCss(K.optsCss))},stop:function(gt){var lt=gt.Modal;lt&&lt.close()},buildEditor:function(gt,lt,K){var et=this.em.CodeManager,m=et.createViewer({label:K,codeName:gt,theme:lt}),k=new et.EditorView({model:m,config:et.getConfig()}).render().el;return{model:m,el:k}}}},975:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=kt(50);const Rt={isEnabled:function(){var gt=document;return!!(gt.fullscreenElement||gt.webkitFullscreenElement||gt.mozFullScreenElement)},enable:function(gt){var lt="";return gt.requestFullscreen?gt.requestFullscreen():gt.webkitRequestFullscreen?(lt="webkit",gt.webkitRequestFullscreen()):gt.mozRequestFullScreen?(lt="moz",gt.mozRequestFullScreen()):gt.msRequestFullscreen&&gt.msRequestFullscreen(),lt},disable:function(){var gt=document;this.isEnabled()&&(gt.exitFullscreen?gt.exitFullscreen():gt.webkitExitFullscreen?gt.webkitExitFullscreen():gt.mozCancelFullScreen?gt.mozCancelFullScreen():gt.msExitFullscreen&&gt.msExitFullscreen())},fsChanged:function(gt){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(gt||"","fullscreenchange"),this.fsChanged))},run:function(gt,lt,K){K===void 0&&(K={}),this.sender=lt;var et=K.target,m=(0,St.isElement)(et)?et:document.querySelector(et),k=this.enable(m||gt.getContainer());this.fsChanged=this.fsChanged.bind(this,k),document.addEventListener(k+"fullscreenchange",this.fsChanged),gt.trigger("change:canvasOffset")},stop:function(gt,lt){lt&&lt.set&&lt.set("active",!1),this.disable(),gt&&gt.trigger("change:canvasOffset")}}},191:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>et});var St=kt(50),Rt=kt(895),gt=kt(491),lt=kt(407),K=kt(189);const et=(0,St.extend)({},K.default,lt.default,{init:function(m){lt.default.init.apply(this,arguments),(0,St.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=m,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var m=[],k=0;k<arguments.length;k++)m[k]=arguments[k];lt.default.enable.apply(this,m),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var b=this.$wrapper;b.css("cursor","move"),b.on("mousedown",this.initSorter),b.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(m){var k=(0,Rt.default)(m.target).data("model"),b=k.get("draggable");b&&(this.cacheEl=null,this.startSelectPosition(m.target,this.frameEl.contentDocument),this.sorter.draggable=b,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,gt.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(m){var k=m.get("draggable");if(k){this.cacheEl=null;var b=m.view.el;this.startSelectPosition(b,this.frameEl.contentDocument),this.sorter.draggable=k,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,gt.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(m){this.cacheEl=null;var k=m[m.length-1],b=this.em.getCurrentFrame(),C=k.getEl(b==null?void 0:b.model),E=C.ownerDocument;this.startSelectPosition(C,E,{onStart:this.onStart}),this.sorter.draggable=k.get("draggable"),this.sorter.toMove=m,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,gt.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,gt.S1)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,gt.S1)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(m,k){},rollback:function(m,k){var b=m.which||m.keyCode;(b==27||k)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,Rt.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,Rt.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var m=[],k=0;k<arguments.length;k++)m[k]=arguments[k];lt.default.stop.apply(this,m),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var b=this.$wrapper;b.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>gt});var St=kt(50),Rt=kt(491);const gt={open:function(lt){var K=this,et=this,m=et.editor,k=et.title,b=et.config,C=et.am,E=b.custom;if((0,St.isFunction)(E.open))return E.open(C.__customData());var x=m.Modal;x.open({title:k,content:lt}).onceClose(function(){return m.stopCommand(K.id)})},close:function(){var lt=this.config.custom;if((0,St.isFunction)(lt.close))return lt.close(this.am.__customData());var K=this.editor.Modal;K&&K.close()},run:function(lt,K,et){et===void 0&&(et={});var m=lt.AssetManager,k=m.getConfig(),b=et.types,C=b===void 0?[]:b,E=et.accept,x=et.select;if(this.title=et.modalTitle||lt.t("assetManager.modalTitle")||"",this.editor=lt,this.config=k,this.am=m,m.setTarget(et.target),m.onClick(et.onClick),m.onDblClick(et.onDblClick),m.onSelect(et.onSelect),m.__behaviour({select:x,types:C,options:et}),k.custom)this.rendered=this.rendered||(0,Rt.ut)("div"),this.rendered.className="".concat(k.stylePrefix,"custom-wrp"),m.__behaviour({container:this.rendered}),m.__trgCustom();else{if(!this.rendered||C){var F=m.getAll().filter(function(st){return st});C&&C.length&&(F=F.filter(function(st){return C.indexOf(st.get("type"))!==-1})),m.render(F),this.rendered=m.getContainer()}if(E){var Q=this.rendered.querySelector("input#".concat(k.stylePrefix,"uploadFile"));Q&&Q.setAttribute("accept",E)}}return this.open(this.rendered),this},stop:function(lt){this.editor=lt,this.close(this.rendered)}}},117:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>gt});var St=kt(50),Rt=kt(491);const gt={open:function(){var lt=this,K=lt.container,et=lt.editor,m=lt.bm,k=lt.config,b=k.custom,C=k.appendTo;if((0,St.isFunction)(b.open))return b.open(m.__customData());if(this.firstRender&&!C){var E="views-container",x=et.Panels,F=x.getPanel(E)||x.addPanel({id:E});F.set("appendContent",K).trigger("change:appendContent"),b||K.appendChild(m.render())}K&&(K.style.display="block")},close:function(){var lt=this,K=lt.container,et=lt.config,m=et.custom;if((0,St.isFunction)(m.close))return m.close(this.bm.__customData());K&&(K.style.display="none")},run:function(lt){var K=lt.Blocks;this.config=K.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,Rt.ut)("div"),this.editor=lt,this.bm=K;var et=this.container;K.__behaviour({container:et}),this.config.custom&&K.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>St});const St={run:function(Rt){var gt=Rt.LayerManager,lt=Rt.Panels,K=gt.getConfig();if(!K.appendTo){if(!this.layers){var et="views-container",m=document.createElement("div"),k=lt.getPanel(et)||lt.addPanel({id:et});K.custom?gt.__trgCustom({container:m}):m.appendChild(gt.render()),k.set("appendContent",m).trigger("change:appendContent"),this.layers=m}this.layers.style.display="block"}},stop:function(){var Rt=this.layers;Rt&&(Rt.style.display="none")}}},801:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=kt(895);const Rt={run:function(gt,lt){if(this.sender=lt,!this.$cnt){var K=gt.getConfig(),et=gt.Panels,m=gt.DeviceManager,k=gt.SelectorManager,b=gt.StyleManager,C="change:appendContent",E=(0,St.default)("<div></div>"),x=(0,St.default)("<div></div>"),F=(0,St.default)("<div></div>"),Q=(0,St.default)("<div></div>");if(this.$cnt=E,this.$cntInner=x,x.append(F),x.append(Q),E.append(x),m&&K.showDevices){var st=et.addPanel({id:"devices-c"}),q=m.render();st.set("appendContent",q).trigger(C)}var W=k.getConfig();W.custom?k.__trgCustom({container:F.get(0)}):W.appendTo||F.append(k.render([])),this.sm=b;var T=b.getConfig(),it=T.stylePrefix;this.$header=(0,St.default)('<div class="'.concat(it,'header">').concat(gt.t("styleManager.empty"),"</div>")),E.append(this.$header),T.custom?b.__trgCustom({container:Q.get(0)}):T.appendTo||Q.append(b.render());var U="views-container",rt=et.getPanel(U)||et.addPanel({id:U});rt.set("appendContent",E).trigger(C);var $=gt.getModel();this.listenTo($,b.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var gt=this,lt=gt.sender,K=gt.sm,et=gt.$cntInner,m=gt.$header;lt&&lt.get&&!lt.get("active")||!K||(K.getSelected()?(et==null||et.show(),m==null||m.hide()):(et==null||et.hide(),m==null||m.show()))},stop:function(){var gt,lt;(gt=this.$cntInner)===null||gt===void 0||gt.hide(),(lt=this.$header)===null||lt===void 0||lt.hide()}}},395:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=kt(895);const Rt={run:function(gt,lt){this.sender=lt;var K=gt.getModel(),et=gt.Config,m=et.stylePrefix,k=gt.TraitManager,b=k.getConfig(),C;if(!b.appendTo){if(!this.$cn){this.$cn=(0,St.default)("<div></div>"),this.$cn2=(0,St.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,St.default)("<div>").append('<div class="'.concat(b.stylePrefix,'header">').concat(K.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),b.custom?k.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(m,'traits-label">').concat(K.t("traitManager.label"),"</div>")),this.$cn2.append(k.render()));var E=gt.Panels;E.getPanel("views-container")?C=E.getPanel("views-container"):C=E.addPanel({id:"views-container"}),C==null||C.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=gt.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var gt=this.sender;gt&&gt.get&&!gt.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=kt(50);const Rt={run:function(gt,lt,K){K===void 0&&(K={});var et=gt.getModel(),m=et.get("clipboard"),k=gt.getSelected();m&&k&&(gt.getSelectedAll().forEach(function(b){var C=b.collection;if(C){var E,x=b.index()+1,F={at:x,action:K.action||"paste-component"};if((0,St.contains)(m,b)&&b.get("copyable"))E=C.add(b.clone(),F);else{var Q=m.filter(function(q){return q.get("copyable")}),st=Q.filter(function(q){return gt.Components.canMove(b.parent(),q).result});E=C.add(st.map(function(q){return q.clone()}),F)}E=(0,St.isArray)(E)?E:[E],E.forEach(function(q){return gt.trigger("component:paste",q)})}}),k.emitUpdate())}}},129:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>lt});var St=kt(50),Rt=function(K,et,m){if(m||arguments.length===2)for(var k=0,b=et.length,C;k<b;k++)(C||!(k in et))&&(C||(C=Array.prototype.slice.call(et,0,k)),C[k]=et[k]);return K.concat(C||Array.prototype.slice.call(et))},gt="core:component-outline";const lt={getPanels:function(K){return this.panels||(this.panels=K.Panels.getPanels()),this.panels},preventDrag:function(K){K.abort=1},tglEffects:function(K){var et=this.em,m=K?"on":"off";if(et){var k=et.Canvas,b=k.getBody(),C=k.getToolbarEl();C&&(C.style.display=K?"none":"");var E=b.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,St.each)(E,function(x){return x.style.pointerEvents=K?"all":""}),et[m]("run:tlb-move:before",this.preventDrag)}},run:function(K,et){var m=this;this.sender=et,this.selected=Rt([],K.getSelectedAll(),!0),K.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=K.Commands.isActive(gt)),this.shouldRunSwVisibility&&K.stopCommand(gt),K.getModel().stopDefault();var k=this.getPanels(K),b=K.Canvas.getElement(),C=K.getEl(),E=K.Config.stylePrefix;if(!this.helper){var x=document.createElement("span");x.className="".concat(E,"off-prv fa fa-eye-slash"),C.appendChild(x),x.onclick=function(){return m.stopCommand()},this.helper=x}this.helper.style.display="inline-block",k.forEach(function(Q){return Q.set("visible",!1)});var F=b.style;F.width="100%",F.height="100%",F.top="0",F.left="0",F.padding="0",F.margin="0",K.refresh(),this.tglEffects(1)},stop:function(K){var et=this,m=et.sender,k=m===void 0?{}:m,b=et.selected;k.set&&k.set("active",0);var C=this.getPanels(K);this.shouldRunSwVisibility&&(K.runCommand(gt),this.shouldRunSwVisibility=!1),K.getModel().runDefault(),C.forEach(function(x){return x.set("visible",!0)});var E=K.Canvas.getElement();E.setAttribute("style",""),b&&K.select(b),delete this.selected,this.helper&&(this.helper.style.display="none"),K.refresh(),this.tglEffects()}}},116:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=function(){return St=Object.assign||function(gt){for(var lt,K=1,et=arguments.length;K<et;K++){lt=arguments[K];for(var m in lt)Object.prototype.hasOwnProperty.call(lt,m)&&(gt[m]=lt[m])}return gt},St.apply(this,arguments)};const Rt={run:function(gt,lt,K){var et=K||{},m=gt.Canvas,k=m.getCanvasView(),b=St({appendTo:m.getResizerEl(),prefix:gt.getConfig().stylePrefix,posFetcher:k.getElementPos.bind(k),mousePosFetcher:m.getMouseRelativePos},et.options||{}),C=this.canvasResizer;return(!C||et.forceNew)&&(this.canvasResizer=new gt.Utils.Resizer(b),C=this.canvasResizer),C.setOptions(b,!0),C.blur(),C.focus(et.el),C},stop:function(){var gt;(gt=this.canvasResizer)===null||gt===void 0||gt.blur()}}},407:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>$});var St=kt(50),Rt=kt(346),gt=function(){var O=function(N,I){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,ut){G.__proto__=ut}||function(G,ut){for(var B in ut)Object.prototype.hasOwnProperty.call(ut,B)&&(G[B]=ut[B])},O(N,I)};return function(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");O(N,I);function G(){this.constructor=N}N.prototype=I===null?Object.create(I):(G.prototype=I.prototype,new G)}}(),lt=function(O){gt(N,O);function N(){return O!==null&&O.apply(this,arguments)||this}return N.prototype.defaults=function(){return{command:"",attributes:{}}},N}(Rt.Hn);const K=lt;var et=function(){var O=function(N,I){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,ut){G.__proto__=ut}||function(G,ut){for(var B in ut)Object.prototype.hasOwnProperty.call(ut,B)&&(G[B]=ut[B])},O(N,I)};return function(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");O(N,I);function G(){this.constructor=N}N.prototype=I===null?Object.create(I):(G.prototype=I.prototype,new G)}}(),m=function(O){et(N,O);function N(){return O!==null&&O.apply(this,arguments)||this}return N}(Rt.FE);const k=m;m.prototype.model=K;var b=kt(330),C=function(){var O=function(N,I){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,ut){G.__proto__=ut}||function(G,ut){for(var B in ut)Object.prototype.hasOwnProperty.call(ut,B)&&(G[B]=ut[B])},O(N,I)};return function(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");O(N,I);function G(){this.constructor=N}N.prototype=I===null?Object.create(I):(G.prototype=I.prototype,new G)}}(),E=function(){return E=Object.assign||function(O){for(var N,I=1,G=arguments.length;I<G;I++){N=arguments[I];for(var ut in N)Object.prototype.hasOwnProperty.call(N,ut)&&(O[ut]=N[ut])}return O},E.apply(this,arguments)},x=function(O){C(N,O);function N(I){var G=O.call(this,I)||this;return G.em=I.config.em,G}return N.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},N.prototype.attributes=function(){return this.model.get("attributes")},N.prototype.handleClick=function(I){I.preventDefault(),I.stopPropagation();var G=this.em,ut=G.Canvas.getFrameEl().getBoundingClientRect(),B=ut.left,mt=ut.top,A=E(E({},I),{clientX:I.clientX-B,clientY:I.clientY-mt});G.trigger("toolbar:run:before",{event:A}),this.execCommand(A)},N.prototype.execCommand=function(I){var G=this,ut=G.em,B=G.model,mt={event:I},A=B.get("command"),Mt=ut.Editor;(0,St.isFunction)(A)&&A(Mt,null,mt),(0,St.isString)(A)&&Mt.runCommand(A,mt)},N.prototype.render=function(){var I=this,G=I.em,ut=I.$el,B=I.model,mt=B.get("id"),A=B.get("label"),Mt=G.getConfig().stylePrefix;return ut.addClass("".concat(Mt,"toolbar-item")),mt&&ut.addClass("".concat(Mt,"toolbar-item__").concat(mt)),A&&ut.append(A),this},N}(Rt.G7);const F=x;var Q=function(){var O=function(N,I){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,ut){G.__proto__=ut}||function(G,ut){for(var B in ut)Object.prototype.hasOwnProperty.call(ut,B)&&(G[B]=ut[B])},O(N,I)};return function(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");O(N,I);function G(){this.constructor=N}N.prototype=I===null?Object.create(I):(G.prototype=I.prototype,new G)}}(),st=function(O){Q(N,O);function N(I){var G=O.call(this,I)||this,ut=I.em;return G.em=ut,G.config={em:ut},G.listenTo(G.collection,"reset",G.render),G}return N.prototype.onRender=function(){var I=this.em.config.stylePrefix;this.el.className="".concat(I,"toolbar-items")},N}(b.Z);const q=st;st.prototype.itemView=F;var W=kt(491),T=kt(163),it=kt(675),U=function(){return U=Object.assign||function(O){for(var N,I=1,G=arguments.length;I<G;I++){N=arguments[I];for(var ut in N)Object.prototype.hasOwnProperty.call(N,ut)&&(O[ut]=N[ut])}return O},U.apply(this,arguments)},rt;const $={init:function(){this.onSelect=(0,St.debounce)(this.onSelect,0),(0,St.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),rt=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(O){var N=this,I=this.em,G=I.getConfig().listenToEl,ut=I.getContainer().parentNode,B=O?"on":"off",mt={on:W.on,off:W.S1};!G.length&&ut&&G.push(ut);var A=function(Mt,Dt){mt[B](Dt,"mouseover",N.onHover),mt[B](Dt,"mouseleave",N.onOut),mt[B](Dt,"click",N.onClick),mt[B](Mt,"scroll",N.onFrameScroll,!0),mt[B](Mt,"resize",N.onFrameResize)};mt[B](window,"resize",this.onFrameUpdated),mt[B](G,"scroll",this.onContainerChange),I[B]("component:toggled component:update undo redo",this.onSelect,this),I[B]("change:componentHovered",this.onHovered,this),I[B]("component:resize styleable:change component:input",this.updateGlobalPos,this),I[B]("component:update:toolbar",this._upToolbar,this),I[B]("change:canvasOffset",this.updateAttached,this),I[B]("frame:updated",this.onFrameUpdated,this),I[B]("canvas:updateTools",this.onFrameUpdated,this),I.Canvas.getFrames().forEach(function(Mt){var Dt=Mt.view,X=Dt==null?void 0:Dt.getWindow();X&&A(X,Dt==null?void 0:Dt.getBody())})},onHover:function(O){O.stopPropagation();var N=this.em,I=O.target,G=(0,T.getComponentView)(I),ut=G==null?void 0:G.frameView,B=G==null?void 0:G.model;if(!B)for(var mt=I.parentNode;!B&&mt&&!(0,W.Mx)(mt);)B=(0,T.getComponentModel)(mt),mt=mt.parentNode;this.currentDoc=I.ownerDocument,N.setHovered(B,{useValid:!0}),ut&&N.setCurrentFrame(ut)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(O,N){var I=this,G,ut={};N?(G=N.views)===null||G===void 0||G.forEach(function(B){var mt=B.el,A=I.getElementPos(mt);ut={el:mt,pos:A,component:N,view:(0,T.getViewEl)(mt)},mt.ownerDocument===I.currentDoc&&(I.elHovered=ut),I.updateToolsLocal(ut)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(B){var mt=B.view,A=mt&&mt.getToolsEl();A&&I.toggleToolsEl(0,0,{el:A})}))},onSelect:function(){var O=this.em,N=O.getSelected(),I=O.getCurrentFrame(),G=N&&N.getView(I==null?void 0:I.model),ut=G&&G.el,B={};if(ut&&(0,W.pn)(ut)){var mt=this.getElementPos(ut);B={el:ut,pos:mt,component:N,view:(0,T.getViewEl)(ut)}}this.elSelected=B,this.updateToolsGlobal(),this.updateLocalPos(B),this.initResize(N)},updateGlobalPos:function(){var O=this.getElSelected();O.el&&(O.pos=this.getElementPos(O.el),this.updateToolsGlobal())},updateLocalPos:function(O){var N=this.getElHovered();N.el&&(N.pos=this.getElementPos(N.el),this.updateToolsLocal(O))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(O,N,I){I===void 0&&(I={});var G=I.el||this.canvas.getToolsEl(N);return G&&(G.style.display=O?"":"none"),G||{}},showElementOffset:function(O,N,I){I===void 0&&(I={}),rt&&this.editor.runCommand("show-offset",{el:O,elPos:N,view:I.view,force:1,top:0,left:0})},hideElementOffset:function(O){this.editor.stopCommand("show-offset",{view:O})},showFixedElementOffset:function(O,N){this.editor.runCommand("show-offset",{el:O,elPos:N,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(O){this.canvas.getHighlighter(O).style.opacity=0},onClick:function(O){O.stopPropagation(),O.preventDefault();var N=this.em;if(N.get("_cmpDrag"))return N.set("_cmpDrag");var I=O.target,G=(0,T.getComponentModel)(I);if(!G)for(var ut=I.parentNode;!G&&ut&&!(0,W.Mx)(ut);)G=(0,T.getComponentModel)(ut),ut=ut.parentNode;if(G){if(N.isEditing()&&!G.get("textable")&&G.isChildOf("text"))return;this.select(G,O)}},select:function(O,N){N===void 0&&(N={}),O&&(this.editor.select(O,{event:N,useValid:!0}),this.initResize(O))},updateBadge:function(O,N,I){I===void 0&&(I={});var G=this.canvas,ut=(0,T.getComponentModel)(O),B=this.getBadge(I),mt=B.style;if(!ut||!ut.get("badgable")){mt.display="none";return}if(!I.posOnly){var A=this.canvas.getConfig(),Mt=ut.getIcon(),Dt=A.pStylePrefix||"",X="".concat(Dt,"badge"),Et=A.customBadgeLabel,V="".concat(Mt?'<div class="'.concat(X,'__icon">').concat(Mt,"</div>"):"",`
        <div class="`).concat(X,'__name">').concat(ut.getName(),"</div>");B.innerHTML=Et?Et(ut):V}var Nt="px";mt.display="block";var jt=G.getTargetToElementFixed(O,B,{pos:N}),Lt=jt.top,qt=I.leftOff<0?-I.leftOff:0;mt.top=Lt+Nt,mt.left=qt+Nt},showHighlighter:function(O){this.canvas.getHighlighter(O).style.opacity=""},initResize:function(O){var N=this,I=N.em,G=N.canvas,ut=I.Editor,B=!(0,St.isElement)(O)&&(0,W.o5)(O)?O:I.getSelected(),mt=B==null?void 0:B.get("resizable"),A=it.q.Resize,Mt=G.hasCustomSpot(A);if(G.removeSpots({type:A}),B&&mt){G.addSpot({type:A,component:B});var Dt=(0,St.isElement)(O)?O:B.getEl();if(Mt||!Dt)return;var X,Et=I.config,V=Et.stylePrefix||"",Nt="".concat(V,"resizing"),jt=function(qt,Vt,$t){var Ct=$t.docs;Ct&&Ct.forEach(function(It){var ae=It.body,Yt=ae.className||"";ae.className=(qt=="add"?"".concat(Yt," ").concat(Nt):Yt.replace(Nt,"")).trim()})},Lt=U({onStart:function(qt,Vt){Vt===void 0&&(Vt={});var $t=Vt.el,Ct=Vt.config,It=Vt.resizer,ae=Ct.keyHeight,Yt=Ct.keyWidth,Xt=Ct.currentUnit,De=Ct.keepAutoHeight,Xe=Ct.keepAutoWidth;jt("add",qt,Vt),X=I.Styles.getModelToStyle(B),G.toggleFramesEvents(!1);var Ie=getComputedStyle($t),Me=X.getStyle(),ue=Me[Yt];Ct.autoWidth=Xe&&ue==="auto",isNaN(parseFloat(ue))&&(ue=Ie[Yt]);var R=Me[ae];Ct.autoHeight=De&&R==="auto",isNaN(parseFloat(R))&&(R=Ie[ae]),It.startDim.w=parseFloat(ue),It.startDim.h=parseFloat(R),rt=!1,Xt&&(Ct.unitHeight=(0,T.getUnitFromValue)(R),Ct.unitWidth=(0,T.getUnitFromValue)(ue))},onMove:function(){ut.trigger("component:resize")},onEnd:function(qt,Vt){jt("remove",qt,Vt),ut.trigger("component:resize"),G.toggleFramesEvents(!0),rt=!0},updateTarget:function(qt,Vt,$t){if($t===void 0&&($t={}),!!X){var Ct=$t.store,It=$t.selectedHandler,ae=$t.config,Yt=ae.keyHeight,Xt=ae.keyWidth,De=ae.autoHeight,Xe=ae.autoWidth,Ie=ae.unitWidth,Me=ae.unitHeight,ue=["tc","bc"].indexOf(It)>=0,R=["cl","cr"].indexOf(It)>=0,at={};if(!ue){var yt=G.getBody().offsetWidth,_=Vt.w<yt?Vt.w:yt;at[Xt]=Xe?"auto":"".concat(_).concat(Ie)}R||(at[Yt]=De?"auto":"".concat(Vt.h).concat(Me)),I.getDragMode(B)&&(at.top="".concat(Vt.t).concat(Me),at.left="".concat(Vt.l).concat(Ie));var bt=U(U({},at),{__p:!Ct});X.addStyle(bt,{avoidStore:!Ct}),I.Styles.__emitCmpStyleUpdate(bt,{components:I.getSelected()})}}},(0,T.isObject)(mt)?mt:{});this.resizer=ut.runCommand("resize",{el:Dt,options:Lt,force:1})}else{if(Mt)return;ut.stopCommand("resize"),this.resizer=null}},updateToolbar:function(O){var N=this.canvas,I=this.config.em,G=O===I?I.getSelected():O,ut=N.getToolbarEl(),B=ut.style,mt=G.get("toolbar"),A=I.config.showToolbar,Mt=!N.hasCustomSpot(it.q.Select);if(G&&A&&mt&&mt.length&&Mt){if(B.display="",!this.toolbar){ut.innerHTML="",this.toolbar=new k(mt);var Dt=new q({collection:this.toolbar,em:I});ut.appendChild(Dt.render().el)}this.toolbar.reset(mt),B.top="-100px",B.left="0"}else B.display="none"},updateToolbarPos:function(O){var N="px",I=this.canvas.getToolbarEl().style;I.top="".concat(O.top).concat(N),I.left="".concat(O.left).concat(N),I.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(O){return O===void 0&&(O={}),this.canvas.getBadgeEl(O.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refreshSpots()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(O){return O&&O.get("status")==="selected"},updateToolsLocal:function(O){var N=this.em.getConfig(),I=O||this.getElHovered(),G=I.el,ut=I.pos,B=I.view,mt=I.component;if(!G){this.lastHovered=0;return}var A=mt.get("hoverable"),Mt=this.lastHovered!==G,Dt=Mt?{}:{posOnly:1},X=this.canvas.hasCustomSpot(it.q.Hover);Mt&&A&&(this.lastHovered=G,X?this.hideHighlighter(B):this.showHighlighter(B),this.showElementOffset(G,ut,{view:B})),this.isCompSelected(mt)&&(this.hideHighlighter(B),!N.showOffsetsSelected&&this.hideElementOffset(B));var Et="px",V=this.toggleToolsEl(1,B),Nt=V.style,jt=this.canvas.canvasRectOffset(G,ut),Lt=jt.top,qt=jt.left;!X&&this.updateBadge(G,ut,U(U({},Dt),{view:B,topOff:Lt,leftOff:qt})),Nt.top=Lt+Et,Nt.left=qt+Et,Nt.width=ut.width+Et,Nt.height=ut.height+Et,this._trgToolUp("local",{component:mt,el:V,top:Lt,left:qt,width:ut.width,height:ut.height})},_upToolbar:(0,St.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(O,N){N===void 0&&(N={}),this.em.trigger("canvas:tools:update",U({type:O},N))},updateToolsGlobal:function(O){O===void 0&&(O={});var N=this.getElSelected(),I=N.el,G=N.pos,ut=N.component;if(!I){this.toggleToolsEl(),this.lastSelected=0;return}var B=this.canvas,mt=this.lastSelected!==I;(mt||O.force)&&(this.lastSelected=I,this.updateToolbar(ut));var A="px",Mt=this.toggleToolsEl(1),Dt=Mt.style,X=B.getTargetToElementFixed(I,B.getToolbarEl(),{pos:G}),Et=X.canvasOffsetTop,V=X.canvasOffsetLeft;Dt.top=Et+A,Dt.left=V+A,Dt.width=G.width+A,Dt.height=G.height+A,this.updateToolbarPos({top:X.top,left:X.left}),this._trgToolUp("global",{component:ut,el:Mt,top:Et,left:V,width:G.width,height:G.height})},updateAttached:(0,St.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,St.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(O){return this.canvas.getCanvasView().getElementPos(O,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(O){O&&O.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(O){(0,T.hasWin)()&&(this.editor=O&&O.get("Editor"),this.enable())},stop:function(O,N,I){if(I===void 0&&(I={}),!!(0,T.hasWin)()){var G=this,ut=G.em,B=G.editor;this.onHovered(),this.stopSelectComponent(),!I.preserveSelected&&ut.setSelected(),this.toggleToolsEl(),B&&B.stopCommand("resize")}}}},189:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Rt});var St=kt(895);const Rt={startSelectPosition:function(gt,lt,K){var et=this;K===void 0&&(K={}),this.isPointed=!1;var m=this.em.Utils,k=gt.ownerDocument.body;m&&!this.sorter&&(this.sorter=new m.Sorter({container:k,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:lt,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return et.em.getZoomDecimal()}})),K.onStart&&(this.sorter.onStart=K.onStart),gt&&this.sorter.startSort(gt,{container:k})},getOffsetDim:function(){var gt=this.offset(this.canvas.getFrameEl()),lt=this.offset(this.canvas.getElement()),K=gt.top-lt.top,et=gt.left-lt.left;return{top:K,left:et}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,St.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,St.default)(this.cDim[this.posIndex][5]).parent():(0,St.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(gt,lt,K){var et=gt||0,m=lt||"before",k=K.length,b=k!==0&&m=="after"&&et==k;return k!==0&&(!b&&!K[et][4]||K[et-1]&&!K[et-1][4]||b&&!K[et-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>et});var St=kt(50),Rt=kt(675),gt=kt(895),lt=kt(491),K=function(){return K=Object.assign||function(m){for(var k,b=1,C=arguments.length;b<C;b++){k=arguments[b];for(var E in k)Object.prototype.hasOwnProperty.call(k,E)&&(m[E]=k[E])}return m},K.apply(this,arguments)};const et={getOffsetMethod:function(m){var k=m||"";return"get"+k+"OffsetViewerEl"},run:function(m,k,b){var C=this.canvas,E=b||{},x=E.state||"",F=m.getConfig(),Q=this.em.getZoomDecimal(),st=E.el;if(!F.showOffsets||!st||(0,lt.BM)(st)||!F.showOffsetsSelected&&x=="Fixed"){m.stopCommand("".concat(this.id),b);return}if(!C.hasCustomSpot(Rt.q.Spacing)){var q=K({},E.elPos||C.getElementPos(st));(0,St.isUndefined)(E.top)||(q.top=E.top),(0,St.isUndefined)(E.left)||(q.left=E.left);var W=window.getComputedStyle(st),T=this.ppfx,it=x+"State",U=this.getOffsetMethod(x),rt=C[U](b.view);rt.style.opacity="";var $=this["marginT"+x],O=this["marginB"+x],N=this["marginL"+x],I=this["marginR"+x],G=this["padT"+x],ut=this["padB"+x],B=this["padL"+x],mt=this["padR"+x];if(rt.childNodes.length&&(this[it]="1",$=rt.querySelector("[data-offset-m-t]"),O=rt.querySelector("[data-offset-m-b]"),N=rt.querySelector("[data-offset-m-l]"),I=rt.querySelector("[data-offset-m-r]"),G=rt.querySelector("[data-offset-p-t]"),ut=rt.querySelector("[data-offset-p-b]"),B=rt.querySelector("[data-offset-p-l]"),mt=rt.querySelector("[data-offset-p-r]")),!this[it]){var A=x.toLowerCase(),Mt=A+"margin-v",Dt=A+"padding-v",X=(0,gt.default)('<div class="'.concat(T,'marginName">')).get(0),Et=(0,gt.default)('<div class="'.concat(T,'paddingName">')).get(0),V=T+Mt+"-el",Nt=T+Dt+"-el",jt="".concat(V," ").concat(T+Mt),Lt="".concat(Nt," ").concat(T+Dt);$=(0,gt.default)('<div class="'.concat(jt,'-top"></div>')).get(0),O=(0,gt.default)('<div class="'.concat(jt,'-bottom"></div>')).get(0),N=(0,gt.default)('<div class="'.concat(jt,'-left"></div>')).get(0),I=(0,gt.default)('<div class="'.concat(jt,'-right"></div>')).get(0),G=(0,gt.default)('<div class="'.concat(Lt,'-top"></div>')).get(0),ut=(0,gt.default)('<div class="'.concat(Lt,'-bottom"></div>')).get(0),B=(0,gt.default)('<div class="'.concat(Lt,'-left"></div>')).get(0),mt=(0,gt.default)('<div class="'.concat(Lt,'-right"></div>')).get(0),this["marginT"+x]=$,this["marginB"+x]=O,this["marginL"+x]=N,this["marginR"+x]=I,this["padT"+x]=G,this["padB"+x]=ut,this["padL"+x]=B,this["padR"+x]=mt,X.appendChild($),X.appendChild(O),X.appendChild(N),X.appendChild(I),Et.appendChild(G),Et.appendChild(ut),Et.appendChild(B),Et.appendChild(mt),rt.appendChild(X),rt.appendChild(Et),this[it]="1"}var qt="px",Vt=parseFloat(W.marginLeft.replace(qt,""))*Q,$t=parseFloat(W.marginRight.replace(qt,""))*Q,Ct=parseFloat(W.marginTop.replace(qt,""))*Q,It=parseFloat(W.marginBottom.replace(qt,""))*Q,ae=$.style,Yt=O.style,Xt=N.style,De=I.style,Xe=G.style,Ie=ut.style,Me=B.style,ue=mt.style,R=parseFloat(q.left),at=parseFloat(W.width)*Q+qt;ae.height=Ct+qt,ae.width=at,ae.top=q.top-Ct+qt,ae.left=R+qt,Yt.height=It+qt,Yt.width=at,Yt.top=q.top+q.height+qt,Yt.left=R+qt;var yt=q.height+Ct+It+qt,_=q.top-Ct+qt;Xt.height=yt,Xt.width=Vt+qt,Xt.top=_,Xt.left=R-Vt+qt,De.height=yt,De.width=$t+qt,De.top=_,De.left=R+q.width+qt;var bt=parseFloat(W.paddingTop)*Q;Xe.height=bt+qt;var J=parseFloat(W.paddingBottom)*Q;Ie.height=J+qt;var Y=q.height-J-bt+qt,H=q.top+bt+qt;Me.height=Y,Me.width=parseFloat(W.paddingLeft)*Q+qt,Me.top=H;var Tt=parseFloat(W.paddingRight)*Q;ue.height=Y,ue.width=Tt+qt,ue.top=H}},stop:function(m,k,b){b===void 0&&(b={});var C=b||{},E=C.state||"",x=this.getOffsetMethod(E),F=b.view,Q=this.canvas,st=Q[x](F);st.style.opacity=0}}},434:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>gt});var St=kt(50),Rt=kt(163);const gt={init:function(){(0,St.bindAll)(this,"_onFramesChange")},run:function(lt){this.toggleVis(lt,!0)},stop:function(lt){this.toggleVis(lt,!1)},toggleVis:function(lt,K){if(K===void 0&&(K=!0),!lt.Commands.isActive("preview")){var et=lt.Canvas,m=K?"on":"off",k=et.getModel();k[m]("change:frames",this._onFramesChange),this.handleFrames(et.getFrames(),K)}},handleFrames:function(lt,K){var et=this;lt.forEach(function(m){var k;!((k=m.view)===null||k===void 0)&&k.loaded&&et._upFrame(m,K),m.__ol||(m.on("loaded",function(){return et._upFrame(m)}),m.__ol=!0)})},_onFramesChange:function(lt,K){this.handleFrames(K)},_upFrame:function(lt,K){var et,m=this,k=m.ppfx,b=m.em,C=m.id,E=(0,Rt.isDef)(K)?K:b.Commands.isActive(C),x=E?"add":"remove",F="".concat(k,"dashed");(et=lt.view)===null||et===void 0||et.getBody().classList[x](F)}}},346:(L,ct,kt)=>{kt.d(ct,{FE:()=>et,G7:()=>m,Hn:()=>K,pH:()=>b,vA:()=>k});var St=kt(316),Rt=kt.n(St),gt=function(){var C=function(E,x){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,Q){F.__proto__=Q}||function(F,Q){for(var st in Q)Object.prototype.hasOwnProperty.call(Q,st)&&(F[st]=Q[st])},C(E,x)};return function(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");C(E,x);function F(){this.constructor=E}E.prototype=x===null?Object.create(x):(F.prototype=x.prototype,new F)}}(),lt=function(){return lt=Object.assign||function(C){for(var E,x=1,F=arguments.length;x<F;x++){E=arguments[x];for(var Q in E)Object.prototype.hasOwnProperty.call(E,Q)&&(C[Q]=E[Q])}return C},lt.apply(this,arguments)},K=function(C){gt(E,C);function E(){return C!==null&&C.apply(this,arguments)||this}return E}(Rt().Model),et=function(C){gt(E,C);function E(){return C!==null&&C.apply(this,arguments)||this}return E}(Rt().Collection),m=function(C){gt(E,C);function E(){return C!==null&&C.apply(this,arguments)||this}return E}(Rt().View),k;(function(C){C.Screen="screen",C.World="world"})(k||(k={}));var b={x:0,y:0};lt(lt({},b),{width:0,height:0})},330:(L,ct,kt)=>{kt.d(ct,{Z:()=>K});var St=kt(50),Rt=kt(346),gt=function(){var et=function(m,k){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(b[E]=C[E])},et(m,k)};return function(m,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");et(m,k);function b(){this.constructor=m}m.prototype=k===null?Object.create(k):(b.prototype=k.prototype,new b)}}(),lt=function(et){gt(m,et);function m(k,b,C){k===void 0&&(k={}),C===void 0&&(C=!1);var E=et.call(this,k)||this;return E.itemsView="",E.itemType="type",E.reuseView=!1,E.config=b||k.config||{},C&&E.listenTo(E.collection,"add",E.addTo),E.items=[],E}return m.prototype.addTo=function(k){this.add(k)},m.prototype.itemViewNotFound=function(k){var b=this,C=b.config,E=b.ns,x=C.em,F="".concat(E?"[".concat(E,"]: "):"","'").concat(k,"' type not found");x&&x.logWarning(F)},m.prototype.add=function(k,b){var C=this,E=C.config,x=C.reuseView,F=C.items,Q=this.itemsView||{},st=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],q=b||null,W=this.itemView,T=k.get(this.itemType),it;Q[T]?W=Q[T]:T&&!Q[T]&&!(0,St.includes)(st,T)&&this.itemViewNotFound(T),k.view&&x?it=k.view:it=new W({model:k,config:E},E),F&&F.push(it);var U=it.render().el;q?q.appendChild(U):this.$el.append(U)},m.prototype.render=function(){var k=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(b){this.add(b,k)},this),this.$el.append(k),this.onRender(),this},m.prototype.onRender=function(){},m.prototype.onRemoveBefore=function(k,b){},m.prototype.onRemove=function(k,b){},m.prototype.remove=function(k){k===void 0&&(k={});var b=this.items;return this.onRemoveBefore(b,k),this.clearItems(),et.prototype.remove.call(this),this.onRemove(b,k),this},m.prototype.clearItems=function(){this.items},m}(Rt.G7);const K=lt;lt.prototype.itemView=""},668:(L,ct,kt)=>{kt.d(ct,{Z:()=>m});var St=kt(50),Rt=kt(491),gt=function(){return gt=Object.assign||function(k){for(var b,C=1,E=arguments.length;C<E;C++){b=arguments[C];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(k[x]=b[x])}return k},gt.apply(this,arguments)},lt=function(){return{x:0,y:0}},K=["x","y"],et=function(){function k(b){return b===void 0&&(b={}),this.opts={snapOffset:5,scale:1},(0,St.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(b),this.delta=lt(),this.lastScroll=lt(),this.lastScrollDiff=lt(),this.startPointer=lt(),this.startPosition=lt(),this.globScrollDiff=lt(),this.currentPointer=lt(),this.position=lt(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return k.prototype.setOptions=function(b){b===void 0&&(b={}),this.opts=gt(gt({},this.opts),b)},k.prototype.toggleDrag=function(b){var C=this.getDocumentEl(),E=this.getContainerEl(),x=this.getWindowEl(),F=b?"on":"off",Q={on:Rt.on,off:Rt.S1};Q[F](E,"mousemove dragover",this.drag),Q[F](C,"mouseup dragend touchend",this.stop),Q[F](C,"keydown",this.keyHandle),Q[F](x,"scroll",this.handleScroll)},k.prototype.handleScroll=function(){var b=this,C=b.lastScroll,E=b.delta,x=this.getScrollInfo(),F={x:x.x-C.x,y:x.y-C.y};this.move(E.x+F.x,E.y+F.y),this.lastScrollDiff=F},k.prototype.start=function(b){var C=this.opts,E=C.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(b),this.guidesStatic=(0,St.result)(C,"guidesStatic")||[],this.guidesTarget=(0,St.result)(C,"guidesTarget")||[],(0,St.isFunction)(E)&&E(b,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=lt(),this.globScrollDiff=lt(),this.drag(b)},k.prototype.drag=function(b){var C=this,E=this,x=E.opts,F=E.lastScrollDiff,Q=E.globScrollDiff,st=x.onDrag,q=this.startPointer,W=this.getPointerPos(b),T={x:Q.x+F.x,y:Q.y+F.y};this.globScrollDiff=T;var it={x:W.x-q.x+T.x,y:W.y-q.y+T.y};this.lastScrollDiff=lt();var U=this.lockedAxis;b.shiftKey?U=!U&&this.detectAxisLock(it.x,it.y):U=null,U==="x"?it.x=q.x:U==="y"&&(it.y=q.y);var rt=function(ut){K.forEach(function(B){return ut[B]=ut[B]*(0,St.result)(x,"scale")}),C.delta=ut,C.move(ut.x,ut.y),(0,St.isFunction)(st)&&st(b,C)},$=gt({},it);if(this.currentPointer=W,this.lockedAxis=U,this.lastScroll=this.getScrollInfo(),rt(it),this.guidesTarget.length){var O=this.snapGuides($),N=O.newDelta,I=O.trgX,G=O.trgY;(I||G)&&rt(N)}b.which===0&&this.stop(b)},k.prototype.snapGuides=function(b){var C=this,E=b,x=this,F=x.trgX,Q=x.trgY;return this.guidesTarget.forEach(function(st){st.x&&C.trgX||st.y&&C.trgY||(st.active=!1,C.guidesStatic.forEach(function(q){if(!(st.y&&q.x||st.x&&q.y)){var W=st.y&&q.y,T=W?"y":"x",it=st[T],U=q[T],rt=b[T],$=W?Q:F;if(C.isPointIn(it,U)&&(0,St.isUndefined)($)){var O=rt-(it-U);C.setGuideLock(st,O)}}}))}),F=this.trgX,Q=this.trgY,K.forEach(function(st){var q=st.toUpperCase(),W=C["trg".concat(q)];W&&!C.isPointIn(b[st],W.lock)&&(C.setGuideLock(W,null),W=null),W&&!(0,St.isUndefined)(W.lock)&&(E[st]=W.lock)}),{newDelta:E,trgX:this.trgX,trgY:this.trgY}},k.prototype.isPointIn=function(b,C,E){var x=E===void 0?{}:E,F=x.offset,Q=F||this.opts.snapOffset||0;return b>=C&&b<=C+Q||b<=C&&b>=C-Q},k.prototype.setGuideLock=function(b,C){var E=(0,St.isUndefined)(b.x)?"Y":"X",x="trg".concat(E);return C!==null?(b.active=!0,b.lock=C,this[x]=b):(delete b.active,delete b.lock,delete this[x]),b},k.prototype.stop=function(b,C){C===void 0&&(C={});var E=this.delta,x=!!C.cancel,F=x?0:E.x,Q=x?0:E.y;this.toggleDrag(),this.lockedAxis=null,this.move(F,Q,!0);var st=this.opts.onEnd;(0,St.isFunction)(st)&&st(b,this,{cancelled:x})},k.prototype.keyHandle=function(b){(0,Rt.kl)(b)&&this.stop(b,{cancel:!0})},k.prototype.move=function(b,C,E){var x=this,F=x.el,Q=x.opts,st=this.startPosition;if(st){var q=Q.setPosition,W=st.x+b,T=st.y+C;this.position={x:W,y:T,end:E},(0,St.isFunction)(q)&&q(this.position),F&&(F.style.left="".concat(W,"px"),F.style.top="".concat(T,"px"))}},k.prototype.getContainerEl=function(){var b=this.opts.container;return b?[b]:this.getDocumentEl()},k.prototype.getWindowEl=function(){var b=this.getContainerEl();return b.map(function(C){var E=C.ownerDocument||C;return E.defaultView||E.parentWindow})},k.prototype.getDocumentEl=function(b){var C=this.opts.doc;if(b=b||this.el,!this.docs.length){var E=[document];b&&E.push(b.ownerDocument),C&&E.push(C),this.docs=E}return this.docs},k.prototype.getPointerPos=function(b){var C=this.opts.getPointerPosition,E=(0,Rt.VB)(b);return C?C(b):{x:E.clientX,y:E.clientY}},k.prototype.getStartPosition=function(){var b=this,C=b.el,E=b.opts,x=E.getPosition,F=lt();return(0,St.isFunction)(x)?F=x():C&&(F={x:parseFloat(C.style.left),y:parseFloat(C.style.top)}),F},k.prototype.getScrollInfo=function(){var b=this.opts.doc,C=b&&b.body;return{y:C?C.scrollTop:0,x:C?C.scrollLeft:0}},k.prototype.detectAxisLock=function(b,C){var E=b,x=C,F=Math.abs(E),Q=Math.abs(x);if(x>=F||x<=-F)return"x";if(E>Q||E<-Q)return"y"},k}();const m=et},895:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{default:()=>Sr});var St=typeof document<"u"?document:null,Rt=typeof window<"u"?window:null,gt=Array.prototype,lt=gt.filter,K=gt.indexOf,et=gt.map,m=gt.push,k=gt.reverse,b=gt.slice,C=gt.splice,E=/^#[\w-]*$/,x=/^\.[\w-]*$/,F=/<.+>/,Q=/^\w+$/;function st(ot,Pt){return Pt===void 0&&(Pt=St),x.test(ot)?Pt.getElementsByClassName(ot.slice(1)):Q.test(ot)?Pt.getElementsByTagName(ot):Pt.querySelectorAll(ot)}function q(ot,Pt){if(Pt===void 0&&(Pt=St),!!ot){if(ot.__cash)return ot;var Ht=ot;if(ut(ot)){if(Pt.__cash&&(Pt=Pt[0]),Ht=E.test(ot)?Pt.getElementById(ot.slice(1)):F.test(ot)?nr(ot):st(ot,Pt),!Ht)return}else if(G(ot))return this.ready(ot);(Ht.nodeType||Ht===Rt)&&(Ht=[Ht]),this.length=Ht.length;for(var ne=0,_e=this.length;ne<_e;ne++)this[ne]=Ht[ne]}}function W(ot,Pt){return new q(ot,Pt)}var T=W.fn=W.prototype=q.prototype={constructor:W,__cash:!0,length:0,splice:C};T.get=function(ot){return ot===void 0?b.call(this):this[ot<0?ot+this.length:ot]},T.eq=function(ot){return W(this.get(ot))},T.first=function(){return this.eq(0)},T.last=function(){return this.eq(-1)},T.map=function(ot){return W(et.call(this,function(Pt,Ht){return ot.call(Pt,Ht,Pt)}))},T.slice=function(){return W(b.apply(this,arguments))};var it=/(?:^\w|[A-Z]|\b\w)/g,U=/[\s-_]+/g;function rt(ot){return ot.replace(it,function(Pt,Ht){return Pt[Ht?"toUpperCase":"toLowerCase"]()}).replace(U,"")}W.camelCase=rt;function $(ot,Pt){for(var Ht=0,ne=ot.length;Ht<ne&&Pt.call(ot[Ht],ot[Ht],Ht,ot)!==!1;Ht++);}W.each=$,T.each=function(ot){return $(this,function(Pt,Ht){return ot.call(Pt,Ht,Pt)}),this},T.removeProp=function(ot){return this.each(function(Pt,Ht){delete Ht[ot]})};function O(ot){ot===void 0&&(ot=this);for(var Pt=arguments,Ht=Pt.length,ne=Ht<2?0:1;ne<Ht;ne++)for(var _e in Pt[ne])ot[_e]=Pt[ne][_e];return ot}W.extend=T.extend=O;var N=1;W.guid=N;function I(ot,Pt){var Ht=ot&&(ot.matches||ot.webkitMatchesSelector||ot.mozMatchesSelector||ot.msMatchesSelector||ot.oMatchesSelector);return!!Ht&&Ht.call(ot,Pt)}W.matches=I;function G(ot){return typeof ot=="function"}W.isFunction=G;function ut(ot){return typeof ot=="string"}W.isString=ut;function B(ot){return!isNaN(parseFloat(ot))&&isFinite(ot)}W.isNumeric=B;var mt=Array.isArray;W.isArray=mt,T.prop=function(ot,Pt){if(ot){if(ut(ot))return arguments.length<2?this[0]&&this[0][ot]:this.each(function(ne,_e){_e[ot]=Pt});for(var Ht in ot)this.prop(Ht,ot[Ht]);return this}};function A(ot){return ut(ot)?function(Pt,Ht){return I(Ht,ot)}:ot.__cash?function(Pt,Ht){return ot.is(Ht)}:function(Pt,Ht,ne){return Ht===ne}}T.filter=function(ot){if(!ot)return W();var Pt=G(ot)?ot:A(ot);return W(lt.call(this,function(Ht,ne){return Pt.call(Ht,ne,Ht,ot)}))};var Mt=/\S+/g;function Dt(ot){return ut(ot)?ot.match(Mt)||[]:[]}T.hasClass=function(ot){var Pt=Dt(ot),Ht=!1;return Pt.length&&this.each(function(ne,_e){return Ht=_e.classList.contains(Pt[0]),!Ht}),Ht},T.removeAttr=function(ot){var Pt=Dt(ot);return Pt.length?this.each(function(Ht,ne){$(Pt,function(_e){ne.removeAttribute(_e)})}):this},T.attr=function(ot,Pt){if(ot){if(ut(ot)){if(arguments.length<2){if(!this[0])return;var Ht=this[0].getAttribute(ot);return Ht===null?void 0:Ht}return Pt===null?this.removeAttr(ot):this.each(function(_e,Fe){Fe.setAttribute(ot,Pt)})}for(var ne in ot)this.attr(ne,ot[ne]);return this}},T.toggleClass=function(ot,Pt){var Ht=Dt(ot),ne=Pt!==void 0;return Ht.length?this.each(function(_e,Fe){$(Ht,function($e){ne?Pt?Fe.classList.add($e):Fe.classList.remove($e):Fe.classList.toggle($e)})}):this},T.addClass=function(ot){return this.toggleClass(ot,!0)},T.removeClass=function(ot){return arguments.length?this.toggleClass(ot,!1):this.attr("class","")};function X(ot){return ot.filter(function(Pt,Ht,ne){return ne.indexOf(Pt)===Ht})}W.unique=X,T.add=function(ot,Pt){return W(X(this.get().concat(W(ot,Pt).get())))};function Et(ot,Pt,Ht){if(ot.nodeType===1){var ne=Rt.getComputedStyle(ot,null);return Pt?Ht?ne.getPropertyValue(Pt):ne[Pt]:ne}}function V(ot,Pt){return parseInt(Et(ot,Pt),10)||0}var Nt=/^--/;function jt(ot){return Nt.test(ot)}var Lt={},qt=St&&St.createElement("div"),Vt=qt?qt.style:{},$t=["webkit","moz","ms","o"];function Ct(ot,Pt){if(Pt===void 0&&(Pt=jt(ot)),Pt)return ot;if(!Lt[ot]){var Ht=rt(ot),ne=""+Ht.charAt(0).toUpperCase()+Ht.slice(1),_e=(Ht+" "+$t.join(ne+" ")+ne).split(" ");$(_e,function(Fe){if(Fe in Vt)return Lt[ot]=Fe,!1})}return Lt[ot]}W.prefixedProp=Ct;var It={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ae(ot,Pt,Ht){return Ht===void 0&&(Ht=jt(ot)),!Ht&&!It[ot]&&B(Pt)?Pt+"px":Pt}T.css=function(ot,Pt){if(ut(ot)){var Ht=jt(ot);return ot=Ct(ot,Ht),arguments.length<2?this[0]&&Et(this[0],ot,Ht):ot?(Pt=ae(ot,Pt,Ht),this.each(function(_e,Fe){Fe.nodeType===1&&(Ht?Fe.style.setProperty(ot,Pt):Fe.style[ot]=Pt)})):this}for(var ne in ot)this.css(ne,ot[ne]);return this};var Yt="__cashData",Xt=/^data-(.*)/;W.hasData=function(ot){return Yt in ot};function De(ot){return ot[Yt]=ot[Yt]||{}}function Xe(ot,Pt){var Ht=De(ot);if(Pt){if(!(Pt in Ht)){var ne=ot.dataset?ot.dataset[Pt]||ot.dataset[rt(Pt)]:W(ot).attr("data-"+Pt);if(ne!==void 0){try{ne=JSON.parse(ne)}catch{}Ht[Pt]=ne}}return Ht[Pt]}return Ht}function Ie(ot,Pt){Pt===void 0?delete ot[Yt]:delete De(ot)[Pt]}function Me(ot,Pt,Ht){De(ot)[Pt]=Ht}T.data=function(ot,Pt){var Ht=this;if(!ot)return this[0]?($(this[0].attributes,function(_e){var Fe=_e.name.match(Xt);Fe&&Ht.data(Fe[1])}),Xe(this[0])):void 0;if(ut(ot))return Pt===void 0?this[0]&&Xe(this[0],ot):this.each(function(_e,Fe){return Me(Fe,ot,Pt)});for(var ne in ot)this.data(ne,ot[ne]);return this},T.removeData=function(ot){return this.each(function(Pt,Ht){return Ie(Ht,ot)})};function ue(ot,Pt){return V(ot,"border"+(Pt?"Left":"Top")+"Width")+V(ot,"padding"+(Pt?"Left":"Top"))+V(ot,"padding"+(Pt?"Right":"Bottom"))+V(ot,"border"+(Pt?"Right":"Bottom")+"Width")}$(["Width","Height"],function(ot){T["inner"+ot]=function(){if(this[0])return this[0]===Rt?Rt["inner"+ot]:this[0]["client"+ot]}}),$(["width","height"],function(ot,Pt){T[ot]=function(Ht){return this[0]?arguments.length?(Ht=parseInt(Ht,10),this.each(function(ne,_e){if(_e.nodeType===1){var Fe=Et(_e,"boxSizing");_e.style[ot]=ae(ot,Ht+(Fe==="border-box"?ue(_e,!Pt):0))}})):this[0]===Rt?this[0][rt("outer-"+ot)]:this[0].getBoundingClientRect()[ot]-ue(this[0],!Pt):Ht===void 0?void 0:this}}),$(["Width","Height"],function(ot,Pt){T["outer"+ot]=function(Ht){if(this[0])return this[0]===Rt?Rt["outer"+ot]:this[0]["offset"+ot]+(Ht?V(this[0],"margin"+(Pt?"Top":"Left"))+V(this[0],"margin"+(Pt?"Bottom":"Right")):0)}});function R(ot,Pt){for(var Ht=0,ne=Pt.length;Ht<ne;Ht++)if(ot.indexOf(Pt[Ht])<0)return!1;return!0}function at(ot,Pt,Ht){$(ot[Ht],function(ne){ne[0];var _e=ne[1];Pt.removeEventListener(Ht,_e)}),delete ot[Ht]}var yt="__cashEvents",_=".";function bt(ot){return ot[yt]=ot[yt]||{}}function J(ot,Pt,Ht,ne){ne.guid=ne.guid||N++;var _e=bt(ot);_e[Pt]=_e[Pt]||[],_e[Pt].push([Ht,ne]),ot.addEventListener(Pt,ne)}function Y(ot){var Pt=ot.split(_);return[Pt[0],Pt.slice(1).sort()]}function H(ot,Pt,Ht,ne){var _e=bt(ot);if(Pt){var Fe=_e[Pt];if(!Fe)return;ne&&(ne.guid=ne.guid||N++),_e[Pt]=Fe.filter(function($e){var en=$e[0],gn=$e[1];if(ne&&gn.guid!==ne.guid||!R(en,Ht))return!0;ot.removeEventListener(Pt,gn)})}else if(!Ht||!Ht.length)for(Pt in _e)at(_e,ot,Pt);else for(Pt in _e)H(ot,Pt,Ht,ne)}T.off=function(ot,Pt){var Ht=this;return ot===void 0?this.each(function(ne,_e){return H(_e)}):$(Dt(ot),function(ne){var _e=Y(ne),Fe=_e[0],$e=_e[1];Ht.each(function(en,gn){return H(gn,Fe,$e,Pt)})}),this},T.on=function(ot,Pt,Ht,ne){var _e=this;if(!ut(ot)){for(var Fe in ot)this.on(Fe,Pt,ot[Fe]);return this}return G(Pt)&&(Ht=Pt,Pt=!1),$(Dt(ot),function($e){var en=Y($e),gn=en[0],lr=en[1];_e.each(function(Vi,mn){var Cn=function ii(Mr){if(!(Mr.namespace&&!R(lr,Mr.namespace.split(_)))){var cn=mn;if(Pt){for(var fr=Mr.target;!I(fr,Pt);)if(fr===mn||(fr=fr.parentNode,!fr))return;cn=fr}Mr.namespace=Mr.namespace||"";var pe=Ht.call(cn,Mr,Mr.data);ne&&H(mn,gn,lr,ii),pe===!1&&(Mr.preventDefault(),Mr.stopPropagation())}};Cn.guid=Ht.guid=Ht.guid||N++,J(mn,gn,lr,Cn)})}),this},T.one=function(ot,Pt,Ht){return this.on(ot,Pt,Ht,!0)},T.ready=function(ot){var Pt=function(){return ot(W)};return St.readyState!=="loading"?setTimeout(Pt):St.addEventListener("DOMContentLoaded",Pt),this},T.trigger=function(ot,Pt){var Ht=ot;if(ut(ot)){var ne=Y(ot),_e=ne[0],Fe=ne[1];Ht=St.createEvent("HTMLEvents"),Ht.initEvent(_e,!0,!0),Ht.namespace=Fe.join(_)}return Ht.data=Pt,this.each(function($e,en){en.dispatchEvent(Ht)})};function Tt(ot){var Pt=[];return $(ot.options,function(Ht){Ht.selected&&!Ht.disabled&&!Ht.parentNode.disabled&&Pt.push(Ht.value)}),Pt}function te(ot){return ot.selectedIndex<0?null:ot.options[ot.selectedIndex].value}var Qt=/select-one/i,Ut=/select-multiple/i;function se(ot){var Pt=ot.type;return Qt.test(Pt)?te(ot):Ut.test(Pt)?Tt(ot):ot.value}var ee=/%20/g;function ce(ot,Pt){return"&"+encodeURIComponent(ot)+"="+encodeURIComponent(Pt).replace(ee,"+")}var xe=/file|reset|submit|button|image/i,Ae=/radio|checkbox/i;T.serialize=function(){var ot="";return this.each(function(Pt,Ht){$(Ht.elements||[Ht],function(ne){if(!(ne.disabled||!ne.name||ne.tagName==="FIELDSET")&&!xe.test(ne.type)&&!(Ae.test(ne.type)&&!ne.checked)){var _e=se(ne);if(_e!==void 0){var Fe=mt(_e)?_e:[_e];$(Fe,function($e){ot+=ce(ne.name,$e)})}}})}),ot.substr(1)},T.val=function(ot){return ot===void 0?this[0]&&se(this[0]):this.each(function(Pt,Ht){var ne=Ut.test(Ht.type),_e=ot===null?ne?[]:"":ot;ne&&mt(_e)?$(Ht.options,function(Fe){Fe.selected=_e.indexOf(Fe.value)>=0}):Ht.value=_e})},T.clone=function(){return this.map(function(ot,Pt){return Pt.cloneNode(!0)})},T.detach=function(){return this.each(function(ot,Pt){Pt.parentNode&&Pt.parentNode.removeChild(Pt)})};var Ve=/^\s*<(\w+)[^>]*>/,Se=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,hr;function Le(){if(!hr){var ot=St.createElement("table"),Pt=St.createElement("tr");hr={"*":St.createElement("div"),tr:St.createElement("tbody"),td:Pt,th:Pt,thead:ot,tbody:ot,tfoot:ot}}}function nr(ot){if(Le(),!ut(ot))return[];if(Se.test(ot))return[St.createElement(RegExp.$1)];var Pt=Ve.test(ot)&&RegExp.$1,Ht=hr[Pt]||hr["*"];return Ht.innerHTML=ot,W(Ht.childNodes).detach().get()}W.parseHTML=nr,T.empty=function(){var ot=this[0];if(ot)for(;ot.firstChild;)ot.removeChild(ot.firstChild);return this};function ze(ot,Pt,Ht){Ht?ot.insertBefore(Pt,ot.childNodes[0]):ot.appendChild(Pt)}function xr(ot,Pt,Ht){if(Pt!==void 0){var ne=ut(Pt);!ne&&Pt.length?$(Pt,function(_e){return xr(ot,_e,Ht)}):$(ot,ne?function(_e){_e.insertAdjacentHTML(Ht?"afterbegin":"beforeend",Pt)}:function(_e,Fe){return ze(_e,Fe?Pt.cloneNode(!0):Pt,Ht)})}}T.append=function(){var ot=this;return $(arguments,function(Pt){xr(ot,Pt)}),this},T.appendTo=function(ot){return xr(W(ot),this),this},T.html=function(ot){if(ot===void 0)return this[0]&&this[0].innerHTML;var Pt=ot.nodeType?ot[0].outerHTML:ot;return this.each(function(Ht,ne){ne.innerHTML=Pt})},T.insertAfter=function(ot){var Pt=this;return W(ot).each(function(Ht,ne){var _e=ne.parentNode;Pt.each(function(Fe,$e){_e.insertBefore(Ht?$e.cloneNode(!0):$e,ne.nextSibling)})}),this},T.after=function(){var ot=this;return $(k.apply(arguments),function(Pt){k.apply(W(Pt).slice()).insertAfter(ot)}),this},T.insertBefore=function(ot){var Pt=this;return W(ot).each(function(Ht,ne){var _e=ne.parentNode;Pt.each(function(Fe,$e){_e.insertBefore(Ht?$e.cloneNode(!0):$e,ne)})}),this},T.before=function(){var ot=this;return $(arguments,function(Pt){W(Pt).insertBefore(ot)}),this},T.prepend=function(){var ot=this;return $(arguments,function(Pt){xr(ot,Pt,!0)}),this},T.prependTo=function(ot){return xr(W(ot),k.apply(this.slice()),!0),this},T.remove=function(){return this.detach().off()},T.replaceWith=function(ot){var Pt=this;return this.each(function(Ht,ne){var _e=ne.parentNode;if(_e){var Fe=Ht?W(ot).clone():W(ot);if(!Fe[0])return Pt.remove(),!1;_e.replaceChild(Fe[0],ne),W(Fe[0]).after(Fe.slice(1))}})},T.replaceAll=function(ot){return W(ot).replaceWith(this),this},T.text=function(ot){return ot===void 0?this[0]?this[0].textContent:"":this.each(function(Pt,Ht){Ht.textContent=ot})};var mr=St&&St.documentElement;T.offset=function(){var ot=this[0];if(ot){var Pt=ot.getBoundingClientRect();return{top:Pt.top+Rt.pageYOffset-mr.clientTop,left:Pt.left+Rt.pageXOffset-mr.clientLeft}}},T.offsetParent=function(){return W(this[0]&&this[0].offsetParent)},T.position=function(){var ot=this[0];if(ot)return{left:ot.offsetLeft,top:ot.offsetTop}},T.children=function(ot){var Pt=[];return this.each(function(Ht,ne){m.apply(Pt,ne.children)}),Pt=W(X(Pt)),ot?Pt.filter(function(Ht,ne){return I(ne,ot)}):Pt},T.contents=function(){var ot=[];return this.each(function(Pt,Ht){m.apply(ot,Ht.tagName==="IFRAME"?[Ht.contentDocument]:Ht.childNodes)}),W(ot.length&&X(ot))},T.find=function(ot){for(var Pt=[],Ht=0,ne=this.length;Ht<ne;Ht++){var _e=st(ot,this[Ht]);_e.length&&m.apply(Pt,_e)}return W(Pt.length&&X(Pt))},T.has=function(ot){var Pt=ut(ot)?function(Ht,ne){return!!st(ot,ne).length}:function(Ht,ne){return ne.contains(ot)};return this.filter(Pt)},T.is=function(ot){if(!ot||!this[0])return!1;var Pt=A(ot),Ht=!1;return this.each(function(ne,_e){return Ht=Pt(ne,_e,ot),!Ht}),Ht},T.next=function(){return W(this[0]&&this[0].nextElementSibling)},T.not=function(ot){if(!ot||!this[0])return this;var Pt=A(ot);return this.filter(function(Ht,ne){return!Pt(Ht,ne,ot)})},T.parent=function(){var ot=[];return this.each(function(Pt,Ht){Ht&&Ht.parentNode&&ot.push(Ht.parentNode)}),W(X(ot))},T.index=function(ot){var Pt=ot?W(ot)[0]:this[0],Ht=ot?this:W(Pt).parent().children();return K.call(Ht,Pt)},T.closest=function(ot){return!ot||!this[0]?W():this.is(ot)?this.filter(ot):this.parent().closest(ot)},T.parents=function(ot){var Pt=[],Ht;return this.each(function(ne,_e){for(Ht=_e;Ht&&Ht.parentNode&&Ht!==St.body.parentNode;)Ht=Ht.parentNode,(!ot||ot&&I(Ht,ot))&&Pt.push(Ht)}),W(X(Pt))},T.prev=function(){return W(this[0]&&this[0].previousElementSibling)},T.siblings=function(){var ot=this[0];return this.parent().children().filter(function(Pt,Ht){return Ht!==ot})};const Sr=W},491:(L,ct,kt)=>{kt.d(ct,{$Q:()=>F,BM:()=>it,FW:()=>C,G1:()=>K,GX:()=>O,L_:()=>m,Mx:()=>et,R3:()=>Q,S1:()=>Dt,SJ:()=>T,Ut:()=>$,VB:()=>G,Vb:()=>A,cx:()=>k,dL:()=>x,kl:()=>ut,o5:()=>rt,on:()=>Mt,pn:()=>E,r$:()=>B,rw:()=>q,sE:()=>b,sN:()=>I,t3:()=>W,ut:()=>st});var St=kt(50),Rt=function(X,Et,V){if(V||arguments.length===2)for(var Nt=0,jt=Et.length,Lt;Nt<jt;Nt++)(Lt||!(Nt in Et))&&(Lt||(Lt=Array.prototype.slice.call(Et,0,Nt)),Lt[Nt]=Et[Nt]);return X.concat(Lt||Array.prototype.slice.call(Et))},gt="tag",lt="attributes",K="transitionend oTransitionEnd transitionend webkitTransitionEnd",et=function(X){return(X==null?void 0:X.nodeType)===Node.DOCUMENT_NODE},m=function(X){var Et=X&&X.parentNode;Et&&Et.removeChild(X)};function k(){for(var X=[],Et=0;Et<arguments.length;Et++)X[Et]=arguments[Et];var V=Array.isArray(X[0])?X[0]:Rt([],X,!0);return V.filter(Boolean).join(" ")}var b=function(X,Et){return X.querySelectorAll(Et)},C=function(X,Et){return Et===void 0&&(Et={}),X&&X.setAttribute&&(0,St.each)(Et,function(V,Nt){return X.setAttribute(Nt,V)})},E=function(X){return X&&!!(X.offsetWidth||X.offsetHeight||X.getClientRects().length)},x=function(X,Et){var V;(V=X.parentNode)===null||V===void 0||V.replaceChild(Et,X)},F=function(X,Et,V){var Nt=X.childNodes,jt=Nt.length,Lt=(0,St.isUndefined)(V)?jt:V;(0,St.isString)(Et)&&(X.insertAdjacentHTML("beforeEnd",Et),Et=X.lastChild,X.removeChild(Et)),Lt>=jt?X.appendChild(Et):X.insertBefore(Et,Nt[Lt])},Q=function(X,Et){return F(X,Et)},st=function(X,Et,V){Et===void 0&&(Et={});var Nt=document.createElement(X);return Et&&(0,St.each)(Et,function(jt,Lt){return Nt.setAttribute(Lt,jt)}),V&&((0,St.isString)(V)?Nt.innerHTML=V:Nt.appendChild(V)),Nt},q=function(X){return document.createTextNode(X)},W=function(X,Et){var V,Nt=X.type;try{V=new window[Et](Nt,X)}catch{V=document.createEvent(Et),V.initEvent(Nt,!0,!0)}return V._parentEvent=X,Nt.indexOf("key")===0&&(V.keyCodeVal=X.keyCode,["keyCode","which"].forEach(function(jt){Object.defineProperty(V,jt,{get:function(){return this.keyCodeVal}})})),V},T=function(X,Et){Et===void 0&&(Et=[]);var V=Array.isArray(Et)?Et:[Et];V.forEach(function(Nt){var jt=Nt[gt]||"div",Lt=Nt[lt]||{},qt=document.createElement(jt);(0,St.each)(Lt,function(Vt,$t){qt.setAttribute($t,Vt)}),X.appendChild(qt)})},it=function(X){return(X==null?void 0:X.nodeType)===Node.TEXT_NODE},U=function(X){return(X==null?void 0:X.nodeType)===Node.COMMENT_NODE},rt=function(X){return X&&!it(X)&&!U(X)},$=function(X){var Et={top:0,left:0,width:0,height:0};if(!X)return Et;var V;if(it(X)){var Nt=document.createRange();Nt.selectNode(X),V=Nt.getBoundingClientRect(),Nt.detach()}return V||(X.getBoundingClientRect?X.getBoundingClientRect():Et)},O=function(X){var Et=(X==null?void 0:X.ownerDocument)||document,V=Et.documentElement,Nt=Et.defaultView||window;return{x:(Nt.pageXOffset||V.scrollLeft||0)-(V.clientLeft||0),y:(Nt.pageYOffset||V.scrollTop||0)-(V.clientTop||0)}},N=function(X){return X.which||X.keyCode},I=function(X){return String.fromCharCode(N(X))},G=function(X){return X.touches&&X.touches[0]?X.touches[0]:X},ut=function(X){return N(X)===27},B=function(X){return N(X)===13},mt=function(X){return X.ctrlKey},A=function(X){return mt(X)||X.metaKey},Mt=function(X,Et,V,Nt){var jt=Et.split(/\s+/),Lt=(0,St.isArray)(X)?X:[X];jt.forEach(function(qt){Lt.forEach(function(Vt){return Vt==null?void 0:Vt.addEventListener(qt,V,Nt)})})},Dt=function(X,Et,V,Nt){var jt=Et.split(/\s+/),Lt=(0,St.isArray)(X)?X:[X];jt.forEach(function(qt){Lt.forEach(function(Vt){return Vt==null?void 0:Vt.removeEventListener(qt,V,Nt)})})}},163:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{appendStyles:()=>F,buildBase64UrlFromSvg:()=>Nt,camelCase:()=>W,capitalize:()=>B,createId:()=>V,deepMerge:()=>N,escape:()=>$,escapeNodeContent:()=>O,find:()=>rt,getComponentModel:()=>X,getComponentView:()=>Dt,getElement:()=>U,getGlobal:()=>k,getModel:()=>I,getUiClass:()=>x,getUnitFromValue:()=>st,getViewEl:()=>A,hasDnd:()=>it,hasWin:()=>m,isComponent:()=>Mt,isDef:()=>et,isEmptyObj:()=>ut,isObject:()=>G,isRule:()=>mt,matches:()=>E,normalizeFloat:()=>T,setViewEl:()=>Et,shallowDiff:()=>Q,toLowerCase:()=>b,upFirst:()=>q,wait:()=>K});var St=kt(50),Rt=kt(491),gt=function(){return gt=Object.assign||function(jt){for(var Lt,qt=1,Vt=arguments.length;qt<Vt;qt++){Lt=arguments[qt];for(var $t in Lt)Object.prototype.hasOwnProperty.call(Lt,$t)&&(jt[$t]=Lt[$t])}return jt},gt.apply(this,arguments)},lt=function(jt,Lt,qt){if(qt||arguments.length===2)for(var Vt=0,$t=Lt.length,Ct;Vt<$t;Vt++)(Ct||!(Vt in Lt))&&(Ct||(Ct=Array.prototype.slice.call(Lt,0,Vt)),Ct[Vt]=Lt[Vt]);return jt.concat(Ct||Array.prototype.slice.call(Lt))},K=function(jt){return jt===void 0&&(jt=0),new Promise(function(Lt){return setTimeout(Lt,jt)})},et=function(jt){return typeof jt<"u"},m=function(){return typeof window<"u"},k=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:kt.g},b=function(jt){return(jt||"").toLowerCase()},C=m()?window.Element.prototype:{},E=C.matches||C.webkitMatchesSelector||C.mozMatchesSelector||C.msMatchesSelector,x=function(jt,Lt){var qt=jt.getConfig(),Vt=qt.stylePrefix,$t=qt.customUI;return[$t&&"".concat(Vt,"cui"),Lt].filter(function(Ct){return Ct}).join(" ")},F=function(jt,Lt){Lt===void 0&&(Lt={});var qt=(0,St.isArray)(jt)?lt([],jt,!0):[jt];if(qt.length){var Vt=qt.shift();if(Vt&&(!Lt.unique||!document.querySelector('link[href="'.concat(Vt,'"]')))){var $t=document.head,Ct=document.createElement("link");Ct.href=Vt,Ct.rel="stylesheet",Lt.prepand?$t.insertBefore(Ct,$t.firstChild):$t.appendChild(Ct)}F(qt)}},Q=function(jt,Lt){var qt={},Vt=(0,St.keys)(Lt);for(var $t in jt)if(jt.hasOwnProperty($t)){var Ct=jt[$t],It=Lt[$t];Vt.indexOf($t)>=0?Ct!==It&&(qt[$t]=It):qt[$t]=null}for(var $t in Lt)Lt.hasOwnProperty($t)&&(0,St.isUndefined)(jt[$t])&&(qt[$t]=Lt[$t]);return qt},st=function(jt){return jt.replace(parseFloat(jt),"")},q=function(jt){return jt[0].toUpperCase()+jt.toLowerCase().slice(1)},W=function(jt){return jt.replace(/-./g,function(Lt){return Lt[1].toUpperCase()})},T=function(jt,Lt,qt){Lt===void 0&&(Lt=1),qt===void 0&&(qt=0);var Vt=0;if(isNaN(jt))return qt;if(jt=parseFloat(jt),Math.floor(jt)!==jt){var $t=Lt.toString().split(".")[1];Vt=$t?$t.length:0}return Vt?parseFloat(jt.toFixed(Vt)):jt},it=function(jt){return"draggable"in document.createElement("i")&&(jt?jt.config.nativeDnD:!0)},U=function(jt){if((0,St.isElement)(jt)||(0,Rt.BM)(jt))return jt;if(jt&&jt.getEl)return jt.getEl()},rt=function(jt,Lt){var qt=null;return jt.some(function(Vt,$t){return Lt(Vt,$t,jt)?(qt=Vt,1):0}),qt},$=function(jt){return jt===void 0&&(jt=""),"".concat(jt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},O=function(jt){return jt===void 0&&(jt=""),"".concat(jt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},N=function(){for(var jt=[],Lt=0;Lt<arguments.length;Lt++)jt[Lt]=arguments[Lt];for(var qt=gt({},jt[0]),Vt=1;Vt<jt.length;Vt++){var $t=gt({},jt[Vt]);for(var Ct in $t){var It=qt[Ct],ae=$t[Ct];G(It)&&G(ae)?qt[Ct]=N(It,ae):qt[Ct]=ae}}return qt},I=function(jt,Lt){var qt=jt;return!Lt&&jt&&jt.__cashData?qt=jt.__cashData.model:(0,St.isElement)(jt)&&(qt=Lt(jt).data("model")),qt},G=function(jt){return jt&&!Array.isArray(jt)&&typeof jt=="object"},ut=function(jt){return Object.keys(jt).length<=0},B=function(jt){return jt===void 0&&(jt=""),jt&&jt.charAt(0).toUpperCase()+jt.substring(1)},mt=function(jt){return jt&&jt.toCSS},A=function(jt){return jt==null?void 0:jt.__gjsv},Mt=function(jt){return!!(jt!=null&&jt.toHTML)},Dt=function(jt){return A(jt)},X=function(jt){var Lt;return(Lt=Dt(jt))===null||Lt===void 0?void 0:Lt.model},Et=function(jt,Lt){jt.__gjsv=Lt},V=function(jt){jt===void 0&&(jt=16);for(var Lt="",qt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Vt=qt.length,$t=0;$t<jt;$t++)Lt+=qt.charAt(Math.floor(Math.random()*Vt));return Lt},Nt=function(jt){if(jt&&jt.substr(0,4)==="<svg"){var Lt="";return m()?Lt=window.btoa(jt):typeof Buffer<"u"&&(Lt=Buffer.from(jt,"utf8").toString("base64")),Lt?"data:image/svg+xml;base64,".concat(Lt):jt}return jt}},828:(L,ct,kt)=>{var St={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./DeleteComponent":517,"./DeleteComponent.ts":517,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function Rt(lt){var K=gt(lt);return kt(K)}function gt(lt){if(!kt.o(St,lt)){var K=new Error("Cannot find module '"+lt+"'");throw K.code="MODULE_NOT_FOUND",K}return St[lt]}Rt.keys=function(){return Object.keys(St)},Rt.resolve=gt,L.exports=Rt,Rt.id=828},50:(L,ct,kt)=>{kt.r(ct),kt.d(ct,{VERSION:()=>Rt,after:()=>ua,all:()=>Vn,allKeys:()=>hr,any:()=>si,assign:()=>Cn,before:()=>Ra,bind:()=>Ao,bindAll:()=>Ts,chain:()=>ai,chunk:()=>to,clone:()=>pe,collect:()=>Fn,compact:()=>Ha,compose:()=>Ps,constant:()=>ue,contains:()=>Dr,countBy:()=>on,create:()=>fr,debounce:()=>zi,default:()=>ro,defaults:()=>ii,defer:()=>ja,delay:()=>In,detect:()=>$i,difference:()=>li,drop:()=>dn,each:()=>yn,escape:()=>fe,every:()=>Vn,extend:()=>mn,extendOwn:()=>Cn,filter:()=>Nn,find:()=>$i,findIndex:()=>Wi,findKey:()=>ca,findLastIndex:()=>Gi,findWhere:()=>vi,first:()=>Ji,flatten:()=>Ba,foldl:()=>qi,foldr:()=>Do,forEach:()=>yn,functions:()=>lr,get:()=>Br,groupBy:()=>Xi,has:()=>oi,head:()=>Ji,identity:()=>Sn,include:()=>Dr,includes:()=>Dr,indexBy:()=>Si,indexOf:()=>Mo,initial:()=>Kr,inject:()=>qi,intersection:()=>Ti,invert:()=>gn,invoke:()=>gi,isArguments:()=>Xe,isArray:()=>Yt,isArrayBuffer:()=>V,isBoolean:()=>G,isDataView:()=>ae,isDate:()=>Mt,isElement:()=>ut,isEmpty:()=>Ut,isEqual:()=>Se,isError:()=>X,isFinite:()=>Ie,isFunction:()=>Lt,isMap:()=>Ht,isMatch:()=>se,isNaN:()=>Me,isNull:()=>N,isNumber:()=>A,isObject:()=>O,isRegExp:()=>Dt,isSet:()=>_e,isString:()=>mt,isSymbol:()=>Et,isTypedArray:()=>Y,isUndefined:()=>I,isWeakMap:()=>ne,isWeakSet:()=>Fe,iteratee:()=>Tn,keys:()=>Qt,last:()=>Ir,lastIndexOf:()=>Zi,map:()=>Fn,mapObject:()=>rn,matcher:()=>On,matches:()=>On,max:()=>Fa,memoize:()=>Dn,methods:()=>lr,min:()=>ks,mixin:()=>Ei,negate:()=>Xn,noop:()=>or,now:()=>j,object:()=>js,omit:()=>Ls,once:()=>Lo,pairs:()=>en,partial:()=>Bi,partition:()=>Pn,pick:()=>Qn,pluck:()=>Yi,property:()=>bi,propertyOf:()=>qn,random:()=>zr,range:()=>za,reduce:()=>qi,reduceRight:()=>Do,reject:()=>Jn,rest:()=>dn,restArguments:()=>$,result:()=>Ia,sample:()=>Qe,select:()=>Nn,shuffle:()=>Va,size:()=>jo,some:()=>si,sortBy:()=>fn,sortedIndex:()=>Rn,tail:()=>dn,take:()=>Ji,tap:()=>Zn,template:()=>Hi,templateSettings:()=>sr,throttle:()=>Es,times:()=>hi,toArray:()=>Na,toPath:()=>Po,transpose:()=>mi,unescape:()=>qe,union:()=>Ds,uniq:()=>Qi,unique:()=>Qi,uniqueId:()=>aa,unzip:()=>mi,values:()=>$e,where:()=>Ci,without:()=>Ms,wrap:()=>Ui,zip:()=>Is});var St={};kt.r(St),kt.d(St,{VERSION:()=>Rt,after:()=>ua,all:()=>Vn,allKeys:()=>hr,any:()=>si,assign:()=>Cn,before:()=>Ra,bind:()=>Ao,bindAll:()=>Ts,chain:()=>ai,chunk:()=>to,clone:()=>pe,collect:()=>Fn,compact:()=>Ha,compose:()=>Ps,constant:()=>ue,contains:()=>Dr,countBy:()=>on,create:()=>fr,debounce:()=>zi,default:()=>Hn,defaults:()=>ii,defer:()=>ja,delay:()=>In,detect:()=>$i,difference:()=>li,drop:()=>dn,each:()=>yn,escape:()=>fe,every:()=>Vn,extend:()=>mn,extendOwn:()=>Cn,filter:()=>Nn,find:()=>$i,findIndex:()=>Wi,findKey:()=>ca,findLastIndex:()=>Gi,findWhere:()=>vi,first:()=>Ji,flatten:()=>Ba,foldl:()=>qi,foldr:()=>Do,forEach:()=>yn,functions:()=>lr,get:()=>Br,groupBy:()=>Xi,has:()=>oi,head:()=>Ji,identity:()=>Sn,include:()=>Dr,includes:()=>Dr,indexBy:()=>Si,indexOf:()=>Mo,initial:()=>Kr,inject:()=>qi,intersection:()=>Ti,invert:()=>gn,invoke:()=>gi,isArguments:()=>Xe,isArray:()=>Yt,isArrayBuffer:()=>V,isBoolean:()=>G,isDataView:()=>ae,isDate:()=>Mt,isElement:()=>ut,isEmpty:()=>Ut,isEqual:()=>Se,isError:()=>X,isFinite:()=>Ie,isFunction:()=>Lt,isMap:()=>Ht,isMatch:()=>se,isNaN:()=>Me,isNull:()=>N,isNumber:()=>A,isObject:()=>O,isRegExp:()=>Dt,isSet:()=>_e,isString:()=>mt,isSymbol:()=>Et,isTypedArray:()=>Y,isUndefined:()=>I,isWeakMap:()=>ne,isWeakSet:()=>Fe,iteratee:()=>Tn,keys:()=>Qt,last:()=>Ir,lastIndexOf:()=>Zi,map:()=>Fn,mapObject:()=>rn,matcher:()=>On,matches:()=>On,max:()=>Fa,memoize:()=>Dn,methods:()=>lr,min:()=>ks,mixin:()=>Ei,negate:()=>Xn,noop:()=>or,now:()=>j,object:()=>js,omit:()=>Ls,once:()=>Lo,pairs:()=>en,partial:()=>Bi,partition:()=>Pn,pick:()=>Qn,pluck:()=>Yi,property:()=>bi,propertyOf:()=>qn,random:()=>zr,range:()=>za,reduce:()=>qi,reduceRight:()=>Do,reject:()=>Jn,rest:()=>dn,restArguments:()=>$,result:()=>Ia,sample:()=>Qe,select:()=>Nn,shuffle:()=>Va,size:()=>jo,some:()=>si,sortBy:()=>fn,sortedIndex:()=>Rn,tail:()=>dn,take:()=>Ji,tap:()=>Zn,template:()=>Hi,templateSettings:()=>sr,throttle:()=>Es,times:()=>hi,toArray:()=>Na,toPath:()=>Po,transpose:()=>mi,unescape:()=>qe,union:()=>Ds,uniq:()=>Qi,unique:()=>Qi,uniqueId:()=>aa,unzip:()=>mi,values:()=>$e,where:()=>Ci,without:()=>Ms,wrap:()=>Ui,zip:()=>Is});var Rt="1.13.6",gt=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},lt=Array.prototype,K=Object.prototype,et=typeof Symbol<"u"?Symbol.prototype:null,m=lt.push,k=lt.slice,b=K.toString,C=K.hasOwnProperty,E=typeof ArrayBuffer<"u",x=typeof DataView<"u",F=Array.isArray,Q=Object.keys,st=Object.create,q=E&&ArrayBuffer.isView,W=isNaN,T=isFinite,it=!{toString:null}.propertyIsEnumerable("toString"),U=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],rt=Math.pow(2,53)-1;function $(D,tt){return tt=tt==null?D.length-1:+tt,function(){for(var wt=Math.max(arguments.length-tt,0),Ot=Array(wt),Gt=0;Gt<wt;Gt++)Ot[Gt]=arguments[Gt+tt];switch(tt){case 0:return D.call(this,Ot);case 1:return D.call(this,arguments[0],Ot);case 2:return D.call(this,arguments[0],arguments[1],Ot)}var Bt=Array(tt+1);for(Gt=0;Gt<tt;Gt++)Bt[Gt]=arguments[Gt];return Bt[tt]=Ot,D.apply(this,Bt)}}function O(D){var tt=typeof D;return tt==="function"||tt==="object"&&!!D}function N(D){return D===null}function I(D){return D===void 0}function G(D){return D===!0||D===!1||b.call(D)==="[object Boolean]"}function ut(D){return!!(D&&D.nodeType===1)}function B(D){var tt="[object "+D+"]";return function(wt){return b.call(wt)===tt}}const mt=B("String"),A=B("Number"),Mt=B("Date"),Dt=B("RegExp"),X=B("Error"),Et=B("Symbol"),V=B("ArrayBuffer");var Nt=B("Function"),jt=gt.document&&gt.document.childNodes;typeof Int8Array!="object"&&typeof jt!="function"&&(Nt=function(D){return typeof D=="function"||!1});const Lt=Nt,qt=B("Object");var Vt=x&&qt(new DataView(new ArrayBuffer(8))),$t=typeof Map<"u"&&qt(new Map),Ct=B("DataView");function It(D){return D!=null&&Lt(D.getInt8)&&V(D.buffer)}const ae=Vt?It:Ct,Yt=F||B("Array");function Xt(D,tt){return D!=null&&C.call(D,tt)}var De=B("Arguments");(function(){De(arguments)||(De=function(D){return Xt(D,"callee")})})();const Xe=De;function Ie(D){return!Et(D)&&T(D)&&!isNaN(parseFloat(D))}function Me(D){return A(D)&&W(D)}function ue(D){return function(){return D}}function R(D){return function(tt){var wt=D(tt);return typeof wt=="number"&&wt>=0&&wt<=rt}}function at(D){return function(tt){return tt==null?void 0:tt[D]}}const yt=at("byteLength"),_=R(yt);var bt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function J(D){return q?q(D)&&!ae(D):_(D)&&bt.test(b.call(D))}const Y=E?J:ue(!1),H=at("length");function Tt(D){for(var tt={},wt=D.length,Ot=0;Ot<wt;++Ot)tt[D[Ot]]=!0;return{contains:function(Gt){return tt[Gt]===!0},push:function(Gt){return tt[Gt]=!0,D.push(Gt)}}}function te(D,tt){tt=Tt(tt);var wt=U.length,Ot=D.constructor,Gt=Lt(Ot)&&Ot.prototype||K,Bt="constructor";for(Xt(D,Bt)&&!tt.contains(Bt)&&tt.push(Bt);wt--;)Bt=U[wt],Bt in D&&D[Bt]!==Gt[Bt]&&!tt.contains(Bt)&&tt.push(Bt)}function Qt(D){if(!O(D))return[];if(Q)return Q(D);var tt=[];for(var wt in D)Xt(D,wt)&&tt.push(wt);return it&&te(D,tt),tt}function Ut(D){if(D==null)return!0;var tt=H(D);return typeof tt=="number"&&(Yt(D)||mt(D)||Xe(D))?tt===0:H(Qt(D))===0}function se(D,tt){var wt=Qt(tt),Ot=wt.length;if(D==null)return!Ot;for(var Gt=Object(D),Bt=0;Bt<Ot;Bt++){var ie=wt[Bt];if(tt[ie]!==Gt[ie]||!(ie in Gt))return!1}return!0}function ee(D){if(D instanceof ee)return D;if(!(this instanceof ee))return new ee(D);this._wrapped=D}ee.VERSION=Rt,ee.prototype.value=function(){return this._wrapped},ee.prototype.valueOf=ee.prototype.toJSON=ee.prototype.value,ee.prototype.toString=function(){return String(this._wrapped)};function ce(D){return new Uint8Array(D.buffer||D,D.byteOffset||0,yt(D))}var xe="[object DataView]";function Ae(D,tt,wt,Ot){if(D===tt)return D!==0||1/D===1/tt;if(D==null||tt==null)return!1;if(D!==D)return tt!==tt;var Gt=typeof D;return Gt!=="function"&&Gt!=="object"&&typeof tt!="object"?!1:Ve(D,tt,wt,Ot)}function Ve(D,tt,wt,Ot){D instanceof ee&&(D=D._wrapped),tt instanceof ee&&(tt=tt._wrapped);var Gt=b.call(D);if(Gt!==b.call(tt))return!1;if(Vt&&Gt=="[object Object]"&&ae(D)){if(!ae(tt))return!1;Gt=xe}switch(Gt){case"[object RegExp]":case"[object String]":return""+D==""+tt;case"[object Number]":return+D!=+D?+tt!=+tt:+D==0?1/+D===1/tt:+D==+tt;case"[object Date]":case"[object Boolean]":return+D==+tt;case"[object Symbol]":return et.valueOf.call(D)===et.valueOf.call(tt);case"[object ArrayBuffer]":case xe:return Ve(ce(D),ce(tt),wt,Ot)}var Bt=Gt==="[object Array]";if(!Bt&&Y(D)){var ie=yt(D);if(ie!==yt(tt))return!1;if(D.buffer===tt.buffer&&D.byteOffset===tt.byteOffset)return!0;Bt=!0}if(!Bt){if(typeof D!="object"||typeof tt!="object")return!1;var be=D.constructor,Ge=tt.constructor;if(be!==Ge&&!(Lt(be)&&be instanceof be&&Lt(Ge)&&Ge instanceof Ge)&&"constructor"in D&&"constructor"in tt)return!1}wt=wt||[],Ot=Ot||[];for(var He=wt.length;He--;)if(wt[He]===D)return Ot[He]===tt;if(wt.push(D),Ot.push(tt),Bt){if(He=D.length,He!==tt.length)return!1;for(;He--;)if(!Ae(D[He],tt[He],wt,Ot))return!1}else{var vr=Qt(D),Yr;if(He=vr.length,Qt(tt).length!==He)return!1;for(;He--;)if(Yr=vr[He],!(Xt(tt,Yr)&&Ae(D[Yr],tt[Yr],wt,Ot)))return!1}return wt.pop(),Ot.pop(),!0}function Se(D,tt){return Ae(D,tt)}function hr(D){if(!O(D))return[];var tt=[];for(var wt in D)tt.push(wt);return it&&te(D,tt),tt}function Le(D){var tt=H(D);return function(wt){if(wt==null)return!1;var Ot=hr(wt);if(H(Ot))return!1;for(var Gt=0;Gt<tt;Gt++)if(!Lt(wt[D[Gt]]))return!1;return D!==ot||!Lt(wt[nr])}}var nr="forEach",ze="has",xr=["clear","delete"],mr=["get",ze,"set"],Sr=xr.concat(nr,mr),ot=xr.concat(mr),Pt=["add"].concat(xr,nr,ze);const Ht=$t?Le(Sr):B("Map"),ne=$t?Le(ot):B("WeakMap"),_e=$t?Le(Pt):B("Set"),Fe=B("WeakSet");function $e(D){for(var tt=Qt(D),wt=tt.length,Ot=Array(wt),Gt=0;Gt<wt;Gt++)Ot[Gt]=D[tt[Gt]];return Ot}function en(D){for(var tt=Qt(D),wt=tt.length,Ot=Array(wt),Gt=0;Gt<wt;Gt++)Ot[Gt]=[tt[Gt],D[tt[Gt]]];return Ot}function gn(D){for(var tt={},wt=Qt(D),Ot=0,Gt=wt.length;Ot<Gt;Ot++)tt[D[wt[Ot]]]=wt[Ot];return tt}function lr(D){var tt=[];for(var wt in D)Lt(D[wt])&&tt.push(wt);return tt.sort()}function Vi(D,tt){return function(wt){var Ot=arguments.length;if(tt&&(wt=Object(wt)),Ot<2||wt==null)return wt;for(var Gt=1;Gt<Ot;Gt++)for(var Bt=arguments[Gt],ie=D(Bt),be=ie.length,Ge=0;Ge<be;Ge++){var He=ie[Ge];(!tt||wt[He]===void 0)&&(wt[He]=Bt[He])}return wt}}const mn=Vi(hr),Cn=Vi(Qt),ii=Vi(hr,!0);function Mr(){return function(){}}function cn(D){if(!O(D))return{};if(st)return st(D);var tt=Mr();tt.prototype=D;var wt=new tt;return tt.prototype=null,wt}function fr(D,tt){var wt=cn(D);return tt&&Cn(wt,tt),wt}function pe(D){return O(D)?Yt(D)?D.slice():mn({},D):D}function Zn(D,tt){return tt(D),D}function Po(D){return Yt(D)?D:[D]}ee.toPath=Po;function Mn(D){return ee.toPath(D)}function $n(D,tt){for(var wt=tt.length,Ot=0;Ot<wt;Ot++){if(D==null)return;D=D[tt[Ot]]}return wt?D:void 0}function Br(D,tt,wt){var Ot=$n(D,Mn(tt));return I(Ot)?wt:Ot}function oi(D,tt){tt=Mn(tt);for(var wt=tt.length,Ot=0;Ot<wt;Ot++){var Gt=tt[Ot];if(!Xt(D,Gt))return!1;D=D[Gt]}return!!wt}function Sn(D){return D}function On(D){return D=Cn({},D),function(tt){return se(tt,D)}}function bi(D){return D=Mn(D),function(tt){return $n(tt,D)}}function ur(D,tt,wt){if(tt===void 0)return D;switch(wt??3){case 1:return function(Ot){return D.call(tt,Ot)};case 3:return function(Ot,Gt,Bt){return D.call(tt,Ot,Gt,Bt)};case 4:return function(Ot,Gt,Bt,ie){return D.call(tt,Ot,Gt,Bt,ie)}}return function(){return D.apply(tt,arguments)}}function Pe(D,tt,wt){return D==null?Sn:Lt(D)?ur(D,tt,wt):O(D)&&!Yt(D)?On(D):bi(D)}function Tn(D,tt){return Pe(D,tt,1/0)}ee.iteratee=Tn;function Or(D,tt,wt){return ee.iteratee!==Tn?ee.iteratee(D,tt):Pe(D,tt,wt)}function rn(D,tt,wt){tt=Or(tt,wt);for(var Ot=Qt(D),Gt=Ot.length,Bt={},ie=0;ie<Gt;ie++){var be=Ot[ie];Bt[be]=tt(D[be],be,D)}return Bt}function or(){}function qn(D){return D==null?or:function(tt){return Br(D,tt)}}function hi(D,tt,wt){var Ot=Array(Math.max(0,D));tt=ur(tt,wt,1);for(var Gt=0;Gt<D;Gt++)Ot[Gt]=tt(Gt);return Ot}function zr(D,tt){return tt==null&&(tt=D,D=0),D+Math.floor(Math.random()*(tt-D+1))}const j=Date.now||function(){return new Date().getTime()};function ft(D){var tt=function(Bt){return D[Bt]},wt="(?:"+Qt(D).join("|")+")",Ot=RegExp(wt),Gt=RegExp(wt,"g");return function(Bt){return Bt=Bt==null?"":""+Bt,Ot.test(Bt)?Bt.replace(Gt,tt):Bt}}const re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},fe=ft(re),Ue=gn(re),qe=ft(Ue),sr=ee.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ke=/(.)^/,En={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ia=/\\|'|\r|\n|\u2028|\u2029/g;function oa(D){return"\\"+En[D]}var Yn=/^\s*(\w|\$)+\s*$/;function Hi(D,tt,wt){!tt&&wt&&(tt=wt),tt=ii({},tt,ee.templateSettings);var Ot=RegExp([(tt.escape||ke).source,(tt.interpolate||ke).source,(tt.evaluate||ke).source].join("|")+"|$","g"),Gt=0,Bt="__p+='";D.replace(Ot,function(He,vr,Yr,Ua,Ro){return Bt+=D.slice(Gt,Ro).replace(ia,oa),Gt=Ro+He.length,vr?Bt+=`'+
((__t=(`+vr+`))==null?'':_.escape(__t))+
'`:Yr?Bt+=`'+
((__t=(`+Yr+`))==null?'':__t)+
'`:Ua&&(Bt+=`';
`+Ua+`
__p+='`),He}),Bt+=`';
`;var ie=tt.variable;if(ie){if(!Yn.test(ie))throw new Error("variable is not a bare identifier: "+ie)}else Bt=`with(obj||{}){
`+Bt+`}
`,ie="obj";Bt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+Bt+`return __p;
`;var be;try{be=new Function(ie,"_",Bt)}catch(He){throw He.source=Bt,He}var Ge=function(He){return be.call(this,He,ee)};return Ge.source="function("+ie+`){
`+Bt+"}",Ge}function Ia(D,tt,wt){tt=Mn(tt);var Ot=tt.length;if(!Ot)return Lt(wt)?wt.call(D):wt;for(var Gt=0;Gt<Ot;Gt++){var Bt=D==null?void 0:D[tt[Gt]];Bt===void 0&&(Bt=wt,Gt=Ot),D=Lt(Bt)?Bt.call(D):Bt}return D}var ko=0;function aa(D){var tt=++ko+"";return D?D+tt:tt}function ai(D){var tt=ee(D);return tt._chain=!0,tt}function sa(D,tt,wt,Ot,Gt){if(!(Ot instanceof tt))return D.apply(wt,Gt);var Bt=cn(D.prototype),ie=D.apply(Bt,Gt);return O(ie)?ie:Bt}var la=$(function(D,tt){var wt=la.placeholder,Ot=function(){for(var Gt=0,Bt=tt.length,ie=Array(Bt),be=0;be<Bt;be++)ie[be]=tt[be]===wt?arguments[Gt++]:tt[be];for(;Gt<arguments.length;)ie.push(arguments[Gt++]);return sa(D,Ot,this,this,ie)};return Ot});la.placeholder=ee;const Bi=la,Ao=$(function(D,tt,wt){if(!Lt(D))throw new TypeError("Bind must be called on a function");var Ot=$(function(Gt){return sa(D,Ot,tt,this,wt.concat(Gt))});return Ot}),nn=R(H);function xi(D,tt,wt,Ot){if(Ot=Ot||[],!tt&&tt!==0)tt=1/0;else if(tt<=0)return Ot.concat(D);for(var Gt=Ot.length,Bt=0,ie=H(D);Bt<ie;Bt++){var be=D[Bt];if(nn(be)&&(Yt(be)||Xe(be)))if(tt>1)xi(be,tt-1,wt,Ot),Gt=Ot.length;else for(var Ge=0,He=be.length;Ge<He;)Ot[Gt++]=be[Ge++];else wt||(Ot[Gt++]=be)}return Ot}const Ts=$(function(D,tt){tt=xi(tt,!1,!1);var wt=tt.length;if(wt<1)throw new Error("bindAll must be passed function names");for(;wt--;){var Ot=tt[wt];D[Ot]=Ao(D[Ot],D)}return D});function Dn(D,tt){var wt=function(Ot){var Gt=wt.cache,Bt=""+(tt?tt.apply(this,arguments):Ot);return Xt(Gt,Bt)||(Gt[Bt]=D.apply(this,arguments)),Gt[Bt]};return wt.cache={},wt}const In=$(function(D,tt,wt){return setTimeout(function(){return D.apply(null,wt)},tt)}),ja=Bi(In,ee,1);function Es(D,tt,wt){var Ot,Gt,Bt,ie,be=0;wt||(wt={});var Ge=function(){be=wt.leading===!1?0:j(),Ot=null,ie=D.apply(Gt,Bt),Ot||(Gt=Bt=null)},He=function(){var vr=j();!be&&wt.leading===!1&&(be=vr);var Yr=tt-(vr-be);return Gt=this,Bt=arguments,Yr<=0||Yr>tt?(Ot&&(clearTimeout(Ot),Ot=null),be=vr,ie=D.apply(Gt,Bt),Ot||(Gt=Bt=null)):!Ot&&wt.trailing!==!1&&(Ot=setTimeout(Ge,Yr)),ie};return He.cancel=function(){clearTimeout(Ot),be=0,Ot=Gt=Bt=null},He}function zi(D,tt,wt){var Ot,Gt,Bt,ie,be,Ge=function(){var vr=j()-Gt;tt>vr?Ot=setTimeout(Ge,tt-vr):(Ot=null,wt||(ie=D.apply(be,Bt)),Ot||(Bt=be=null))},He=$(function(vr){return be=this,Bt=vr,Gt=j(),Ot||(Ot=setTimeout(Ge,tt),wt&&(ie=D.apply(be,Bt))),ie});return He.cancel=function(){clearTimeout(Ot),Ot=Bt=be=null},He}function Ui(D,tt){return Bi(tt,D)}function Xn(D){return function(){return!D.apply(this,arguments)}}function Ps(){var D=arguments,tt=D.length-1;return function(){for(var wt=tt,Ot=D[tt].apply(this,arguments);wt--;)Ot=D[wt].call(this,Ot);return Ot}}function ua(D,tt){return function(){if(--D<1)return tt.apply(this,arguments)}}function Ra(D,tt){var wt;return function(){return--D>0&&(wt=tt.apply(this,arguments)),D<=1&&(tt=null),wt}}const Lo=Bi(Ra,2);function ca(D,tt,wt){tt=Or(tt,wt);for(var Ot=Qt(D),Gt,Bt=0,ie=Ot.length;Bt<ie;Bt++)if(Gt=Ot[Bt],tt(D[Gt],Gt,D))return Gt}function jn(D){return function(tt,wt,Ot){wt=Or(wt,Ot);for(var Gt=H(tt),Bt=D>0?0:Gt-1;Bt>=0&&Bt<Gt;Bt+=D)if(wt(tt[Bt],Bt,tt))return Bt;return-1}}const Wi=jn(1),Gi=jn(-1);function Rn(D,tt,wt,Ot){wt=Or(wt,Ot,1);for(var Gt=wt(tt),Bt=0,ie=H(D);Bt<ie;){var be=Math.floor((Bt+ie)/2);wt(D[be])<Gt?Bt=be+1:ie=be}return Bt}function Ki(D,tt,wt){return function(Ot,Gt,Bt){var ie=0,be=H(Ot);if(typeof Bt=="number")D>0?ie=Bt>=0?Bt:Math.max(Bt+be,ie):be=Bt>=0?Math.min(Bt+1,be):Bt+be+1;else if(wt&&Bt&&be)return Bt=wt(Ot,Gt),Ot[Bt]===Gt?Bt:-1;if(Gt!==Gt)return Bt=tt(k.call(Ot,ie,be),Me),Bt>=0?Bt+ie:-1;for(Bt=D>0?ie:be-1;Bt>=0&&Bt<be;Bt+=D)if(Ot[Bt]===Gt)return Bt;return-1}}const Mo=Ki(1,Wi,Rn),Zi=Ki(-1,Gi);function $i(D,tt,wt){var Ot=nn(D)?Wi:ca,Gt=Ot(D,tt,wt);if(Gt!==void 0&&Gt!==-1)return D[Gt]}function vi(D,tt){return $i(D,On(tt))}function yn(D,tt,wt){tt=ur(tt,wt);var Ot,Gt;if(nn(D))for(Ot=0,Gt=D.length;Ot<Gt;Ot++)tt(D[Ot],Ot,D);else{var Bt=Qt(D);for(Ot=0,Gt=Bt.length;Ot<Gt;Ot++)tt(D[Bt[Ot]],Bt[Ot],D)}return D}function Fn(D,tt,wt){tt=Or(tt,wt);for(var Ot=!nn(D)&&Qt(D),Gt=(Ot||D).length,Bt=Array(Gt),ie=0;ie<Gt;ie++){var be=Ot?Ot[ie]:ie;Bt[ie]=tt(D[be],be,D)}return Bt}function yr(D){var tt=function(wt,Ot,Gt,Bt){var ie=!nn(wt)&&Qt(wt),be=(ie||wt).length,Ge=D>0?0:be-1;for(Bt||(Gt=wt[ie?ie[Ge]:Ge],Ge+=D);Ge>=0&&Ge<be;Ge+=D){var He=ie?ie[Ge]:Ge;Gt=Ot(Gt,wt[He],He,wt)}return Gt};return function(wt,Ot,Gt,Bt){var ie=arguments.length>=3;return tt(wt,ur(Ot,Bt,4),Gt,ie)}}const qi=yr(1),Do=yr(-1);function Nn(D,tt,wt){var Ot=[];return tt=Or(tt,wt),yn(D,function(Gt,Bt,ie){tt(Gt,Bt,ie)&&Ot.push(Gt)}),Ot}function Jn(D,tt,wt){return Nn(D,Xn(Or(tt)),wt)}function Vn(D,tt,wt){tt=Or(tt,wt);for(var Ot=!nn(D)&&Qt(D),Gt=(Ot||D).length,Bt=0;Bt<Gt;Bt++){var ie=Ot?Ot[Bt]:Bt;if(!tt(D[ie],ie,D))return!1}return!0}function si(D,tt,wt){tt=Or(tt,wt);for(var Ot=!nn(D)&&Qt(D),Gt=(Ot||D).length,Bt=0;Bt<Gt;Bt++){var ie=Ot?Ot[Bt]:Bt;if(tt(D[ie],ie,D))return!0}return!1}function Dr(D,tt,wt,Ot){return nn(D)||(D=$e(D)),(typeof wt!="number"||Ot)&&(wt=0),Mo(D,tt,wt)>=0}const gi=$(function(D,tt,wt){var Ot,Gt;return Lt(tt)?Gt=tt:(tt=Mn(tt),Ot=tt.slice(0,-1),tt=tt[tt.length-1]),Fn(D,function(Bt){var ie=Gt;if(!ie){if(Ot&&Ot.length&&(Bt=$n(Bt,Ot)),Bt==null)return;ie=Bt[tt]}return ie==null?ie:ie.apply(Bt,wt)})});function Yi(D,tt){return Fn(D,bi(tt))}function Ci(D,tt){return Nn(D,On(tt))}function Fa(D,tt,wt){var Ot=-1/0,Gt=-1/0,Bt,ie;if(tt==null||typeof tt=="number"&&typeof D[0]!="object"&&D!=null){D=nn(D)?D:$e(D);for(var be=0,Ge=D.length;be<Ge;be++)Bt=D[be],Bt!=null&&Bt>Ot&&(Ot=Bt)}else tt=Or(tt,wt),yn(D,function(He,vr,Yr){ie=tt(He,vr,Yr),(ie>Gt||ie===-1/0&&Ot===-1/0)&&(Ot=He,Gt=ie)});return Ot}function ks(D,tt,wt){var Ot=1/0,Gt=1/0,Bt,ie;if(tt==null||typeof tt=="number"&&typeof D[0]!="object"&&D!=null){D=nn(D)?D:$e(D);for(var be=0,Ge=D.length;be<Ge;be++)Bt=D[be],Bt!=null&&Bt<Ot&&(Ot=Bt)}else tt=Or(tt,wt),yn(D,function(He,vr,Yr){ie=tt(He,vr,Yr),(ie<Gt||ie===1/0&&Ot===1/0)&&(Ot=He,Gt=ie)});return Ot}var As=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Na(D){return D?Yt(D)?k.call(D):mt(D)?D.match(As):nn(D)?Fn(D,Sn):$e(D):[]}function Qe(D,tt,wt){if(tt==null||wt)return nn(D)||(D=$e(D)),D[zr(D.length-1)];var Ot=Na(D),Gt=H(Ot);tt=Math.max(Math.min(tt,Gt),0);for(var Bt=Gt-1,ie=0;ie<tt;ie++){var be=zr(ie,Bt),Ge=Ot[ie];Ot[ie]=Ot[be],Ot[be]=Ge}return Ot.slice(0,tt)}function Va(D){return Qe(D,1/0)}function fn(D,tt,wt){var Ot=0;return tt=Or(tt,wt),Yi(Fn(D,function(Gt,Bt,ie){return{value:Gt,index:Ot++,criteria:tt(Gt,Bt,ie)}}).sort(function(Gt,Bt){var ie=Gt.criteria,be=Bt.criteria;if(ie!==be){if(ie>be||ie===void 0)return 1;if(ie<be||be===void 0)return-1}return Gt.index-Bt.index}),"value")}function Io(D,tt){return function(wt,Ot,Gt){var Bt=tt?[[],[]]:{};return Ot=Or(Ot,Gt),yn(wt,function(ie,be){var Ge=Ot(ie,be,wt);D(Bt,ie,Ge)}),Bt}}const Xi=Io(function(D,tt,wt){Xt(D,wt)?D[wt].push(tt):D[wt]=[tt]}),Si=Io(function(D,tt,wt){D[wt]=tt}),on=Io(function(D,tt,wt){Xt(D,wt)?D[wt]++:D[wt]=1}),Pn=Io(function(D,tt,wt){D[wt?0:1].push(tt)},!0);function jo(D){return D==null?0:nn(D)?D.length:Qt(D).length}function Oi(D,tt,wt){return tt in wt}const Qn=$(function(D,tt){var wt={},Ot=tt[0];if(D==null)return wt;Lt(Ot)?(tt.length>1&&(Ot=ur(Ot,tt[1])),tt=hr(D)):(Ot=Oi,tt=xi(tt,!1,!1),D=Object(D));for(var Gt=0,Bt=tt.length;Gt<Bt;Gt++){var ie=tt[Gt],be=D[ie];Ot(be,ie,D)&&(wt[ie]=be)}return wt}),Ls=$(function(D,tt){var wt=tt[0],Ot;return Lt(wt)?(wt=Xn(wt),tt.length>1&&(Ot=tt[1])):(tt=Fn(xi(tt,!1,!1),String),wt=function(Gt,Bt){return!Dr(tt,Bt)}),Qn(D,wt,Ot)});function Kr(D,tt,wt){return k.call(D,0,Math.max(0,D.length-(tt==null||wt?1:tt)))}function Ji(D,tt,wt){return D==null||D.length<1?tt==null||wt?void 0:[]:tt==null||wt?D[0]:Kr(D,D.length-tt)}function dn(D,tt,wt){return k.call(D,tt==null||wt?1:tt)}function Ir(D,tt,wt){return D==null||D.length<1?tt==null||wt?void 0:[]:tt==null||wt?D[D.length-1]:dn(D,Math.max(0,D.length-tt))}function Ha(D){return Nn(D,Boolean)}function Ba(D,tt){return xi(D,tt,!1)}const li=$(function(D,tt){return tt=xi(tt,!0,!0),Nn(D,function(wt){return!Dr(tt,wt)})}),Ms=$(function(D,tt){return li(D,tt)});function Qi(D,tt,wt,Ot){G(tt)||(Ot=wt,wt=tt,tt=!1),wt!=null&&(wt=Or(wt,Ot));for(var Gt=[],Bt=[],ie=0,be=H(D);ie<be;ie++){var Ge=D[ie],He=wt?wt(Ge,ie,D):Ge;tt&&!wt?((!ie||Bt!==He)&&Gt.push(Ge),Bt=He):wt?Dr(Bt,He)||(Bt.push(He),Gt.push(Ge)):Dr(Gt,Ge)||Gt.push(Ge)}return Gt}const Ds=$(function(D){return Qi(xi(D,!0,!0))});function Ti(D){for(var tt=[],wt=arguments.length,Ot=0,Gt=H(D);Ot<Gt;Ot++){var Bt=D[Ot];if(!Dr(tt,Bt)){var ie;for(ie=1;ie<wt&&Dr(arguments[ie],Bt);ie++);ie===wt&&tt.push(Bt)}}return tt}function mi(D){for(var tt=D&&Fa(D,H).length||0,wt=Array(tt),Ot=0;Ot<tt;Ot++)wt[Ot]=Yi(D,Ot);return wt}const Is=$(mi);function js(D,tt){for(var wt={},Ot=0,Gt=H(D);Ot<Gt;Ot++)tt?wt[D[Ot]]=tt[Ot]:wt[D[Ot][0]]=D[Ot][1];return wt}function za(D,tt,wt){tt==null&&(tt=D||0,D=0),wt||(wt=tt<D?-1:1);for(var Ot=Math.max(Math.ceil((tt-D)/wt),0),Gt=Array(Ot),Bt=0;Bt<Ot;Bt++,D+=wt)Gt[Bt]=D;return Gt}function to(D,tt){if(tt==null||tt<1)return[];for(var wt=[],Ot=0,Gt=D.length;Ot<Gt;)wt.push(k.call(D,Ot,Ot+=tt));return wt}function fa(D,tt){return D._chain?ee(tt).chain():tt}function Ei(D){return yn(lr(D),function(tt){var wt=ee[tt]=D[tt];ee.prototype[tt]=function(){var Ot=[this._wrapped];return m.apply(Ot,arguments),fa(this,wt.apply(ee,Ot))}}),ee}yn(["pop","push","reverse","shift","sort","splice","unshift"],function(D){var tt=lt[D];ee.prototype[D]=function(){var wt=this._wrapped;return wt!=null&&(tt.apply(wt,arguments),(D==="shift"||D==="splice")&&wt.length===0&&delete wt[0]),fa(this,wt)}}),yn(["concat","join","slice"],function(D){var tt=lt[D];ee.prototype[D]=function(){var wt=this._wrapped;return wt!=null&&(wt=tt.apply(wt,arguments)),fa(this,wt)}});const Hn=ee;var eo=Ei(St);eo._=eo;const ro=eo}},Eh={};function wr(L){var ct=Eh[L];if(ct!==void 0)return ct.exports;var kt=Eh[L]={exports:{}};return b_[L].call(kt.exports,kt,kt.exports,wr),kt.exports}wr.n=L=>{var ct=L&&L.__esModule?()=>L.default:()=>L;return wr.d(ct,{a:ct}),ct};wr.d=(L,ct)=>{for(var kt in ct)wr.o(ct,kt)&&!wr.o(L,kt)&&Object.defineProperty(L,kt,{enumerable:!0,get:ct[kt]})};wr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();wr.o=(L,ct)=>Object.prototype.hasOwnProperty.call(L,ct);wr.r=L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})};var Ah={};(()=>{wr.d(Ah,{ZP:()=>z0,kr:()=>ch,j7:()=>uh});var L=wr(50),ct=wr(163);function kt(a){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var e=a.raw;return e.reduce(function(r,i,l){var f=n[l-1],p=e[l-1];return Array.isArray(f)?f=f.join(""):p&&p.slice(-1)==="$"?r=r.slice(0,-1):f=(0,ct.escape)(f),r+f+i})}var St={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1};const Rt=St;var gt=wr(316),lt=wr.n(gt),K=wr(895);const et=function(a){var n=a.$;if(n&&n.prototype&&n.prototype.constructor.name!=="jQuery"){var t=n.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var i=this.get(0);return i&&i.focus(),this},t.bind=function(i,l){return this.on(i,l)},t.unbind=function(i,l){if((0,L.isObject)(i)){for(var f in i)i.hasOwnProperty(f)&&this.off(f,i[f]);return this}else return this.off(i,l)},t.click=function(i){return i?this.on("click",i):this.trigger("click")},t.change=function(i){return i?this.on("change",i):this.trigger("change")},t.keydown=function(i){return i?this.on("keydown",i):this.trigger("keydown")},t.delegate=function(i,l,f,p){return p||(p=f),this.on(l,i,function(h){h.data=f,p(h)})},t.scrollLeft=function(){var i=this.get(0);i=i.nodeType==9?i.defaultView:i;var l=i instanceof Window?i:null;return l?l.pageXOffset:i.scrollLeft||0},t.scrollTop=function(){var i=this.get(0);i=i.nodeType==9?i.defaultView:i;var l=i instanceof Window?i:null;return l?l.pageYOffset:i.scrollTop||0};var e=n.prototype.offset;t.offset=function(i){var l,f;return i&&(l=i.top,f=i.left),typeof l<"u"&&this.css("top","".concat(l,"px")),typeof f<"u"&&this.css("left","".concat(f,"px")),e.call(this)},n.map=function(i,l){for(var f=[],p=0;p<i.length;p++)f.push(l(i[p],p));return f};var r=Array.prototype.indexOf;n.inArray=function(i,l,f){return l==null?-1:r.call(l,i,f)},n.Event=function(i,l){if(!(this instanceof n.Event))return new n.Event(i,l);this.type=i,this.isDefaultPrevented=function(){return!1}}}};var m=wr(346),k=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),b=function(a){k(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(m.Hn),C=function(a){k(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getByComponent=function(t){var e=this;return this.filter(function(r){return e.getComponent(r)===t})[0]},n.prototype.addComponent=function(t,e){var r=this,i=((0,L.isArray)(t)?t:[t]).filter(function(l){return!r.hasComponent(l)}).map(function(l){return new b({component:l})})[0];return this.push(i,e)},n.prototype.getComponent=function(t){return t.get("component")},n.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},n.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},n.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},n.prototype.removeComponent=function(t,e){var r=this,i=((0,L.isArray)(t)?t:[t]).map(function(l){return r.getByComponent(l)});return this.remove(i,e)},n}(m.FE);const E=C;var x=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),F=function(){return F=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},F.apply(this,arguments)},Q=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},st=function(){function a(n,t,e){this.cls=[],this._em=n,this._name=t;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),i=(0,L.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],l=i===!0?{}:i||{};l.pStylePrefix=n.config.pStylePrefix||"",!(0,L.isUndefined)(i)&&!i&&(l._disable=1),l.em=n,this._config=(0,ct.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.render=function(n){},a.prototype.postLoad=function(n){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return n?this.config[n]:this.config},a.prototype.__logWarn=function(n,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(n),t)},a.prototype.__appendTo=function(){var n=this.getConfig().appendTo;if(n){var t=(0,L.isElement)(n)?n:document.querySelector(n);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const q=st;var W=function(a){x(n,a);function n(t,e,r,i,l,f){f===void 0&&(f={});var p=a.call(this,t,e,l)||this;return p.cls=[],p.private=!1,p.all=r,p.events=i,!f.skipListen&&p.__initListen(),p}return n.prototype.postLoad=function(t){},n.prototype.render=function(t){},n.prototype.getProjectData=function(t){var e={},r=this.storageKey;return r&&(e[r]=t||this.getAll()),e},n.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.all,i=e.onResult,l=e.reset,f=this.storageKey,p={action:"load"},h=r||this.all,g=t[f];if(typeof g=="string")try{g=JSON.parse(g)}catch{this.__logWarn("Data parsing failed",{input:g})}return l&&g&&h.reset(void 0,p),i?g&&i(g,p):g&&(0,ct.isDef)(g.length)&&h.reset(g,p),g},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},n.prototype.getAll=function(){return Q([],this.all.models,!0)},n.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},n.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,r=e.all,i=e.em,l=e.events;r&&i&&r.on("add",function(f,p,h){return i.trigger(l.add,f,h)}).on("remove",function(f,p,h){return i.trigger(l.remove,f,h)}).on("change",function(f,p){return i.trigger(l.update,f,f.changedAttributes(),p)}).on("all",this.__catchAllEvent,this),this.cls=[r].concat(t.collections||[]),(t.propagate||[]).forEach(function(f){var p=f.entity,h=f.event;p.on("all",function(g,w,M,Z){var nt=Z||M,vt=F({event:g},nt);[i,r].map(function(_t){return _t.trigger(h,w,vt)})})})},n.prototype.__remove=function(t,e){var r=this;e===void 0&&(e={});var i=this.em,l=(0,L.isString)(t)?this.get(t):t,f=function(){return l&&r.all.remove(l,e),l};return!e.silent&&(i==null||i.trigger(this.events.removeBefore,l,f,e)),!e.abort&&f()},n.prototype.__catchAllEvent=function(t,e,r,i){var l=this,f=l.em,p=l.events,h=i||r;f&&p.all&&f.trigger(p.all,{event:t,model:e,options:h}),this.__onAllEvent()},n.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var r=(0,L.isElement)(e)?e:document.querySelector(e);if(!r)return this.__logWarn('"appendTo" element not found');r.appendChild(this.render(t))}},n.prototype.__onAllEvent=function(){},n.prototype._createId=function(t){t===void 0&&(t=16);var e=this.getAll(),r=e.length+t,i=this.getAllMap(),l;do l=(0,ct.createId)(r);while(i[l]);return l},n.prototype.__listenAdd=function(t,e){var r=this;t.on("add",function(i,l,f){return r.em.trigger(e,i,f)})},n.prototype.__listenRemove=function(t,e){var r=this;t.on("remove",function(i,l,f){return r.em.trigger(e,i,f)})},n.prototype.__listenUpdate=function(t,e){var r=this;t.on("change",function(i,l){return r.em.trigger(e,i,i.changedAttributes(),l)})},n.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},n}(st),T={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0};const it=T;var U=wr(642),rt={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};const $=rt;var O=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),N=function(a){O(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},n.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var e=["width","height","widthMedia"];e.forEach(function(r){return t.checkUnit(r)})},n.prototype.checkUnit=function(t){var e=this.get(t)||"",r=(parseFloat(e)||0).toString()===e.toString();r&&this.set(t,"".concat(e,"px"))},n.prototype.getName=function(){return this.get("name")||this.get("id")},n.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},n}(m.Hn);const I=N;var G=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ut=function(a){G(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(m.FE);const B=ut;ut.prototype.model=I;var mt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),A=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Mt=function(a){mt(n,a);function n(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return n.prototype.template=function(t){var e=t.ppfx,r=t.label;return kt(X||(X=A([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,r,e,e,e,e,e,e,e)},n.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},n.prototype.startAdd=function(){},n.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},n.prototype.updateSelect=function(){var t=this,e=t.em,r=t.devicesEl;if(e&&e.getDeviceModel&&r){var i=e.getDeviceModel();r.val(i?i.get("id"):"")}},n.prototype.getOptions=function(){var t=this,e=t.collection,r=t.em,i="";return e.forEach(function(l){var f=l.attributes,p=f.name,h=f.id,g=r&&r.t&&r.t("deviceManager.devices.".concat(h))||p;i+='<option value="'.concat(h||p,'">').concat(g,"</option>")}),i},n.prototype.render=function(){var t=this,e=t.em,r=t.ppfx,i=t.$el,l=t.el,f=e&&e.t&&e.t("deviceManager.device");return i.html(this.template({ppfx:r,label:f})),this.devicesEl=i.find(".".concat(r,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(r,"devices-c"),this},n}(m.G7);const Dt=Mt;var X,Et=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),V=function(){return V=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},V.apply(this,arguments)},Nt="device",jt="".concat(Nt,":"),Lt="".concat(jt,"select"),qt="".concat(jt,"update"),Vt="".concat(jt,"add"),$t="".concat(jt,"remove"),Ct="".concat($t,":before"),It="change:device",ae={all:Nt,select:Lt,update:qt,add:Vt,remove:$t,removeBefore:Ct},Yt=function(a){Et(n,a);function n(t){var e,r=a.call(this,t,"DeviceManager",new B,ae,$)||this;return r.Device=I,r.Devices=B,r.storageKey="",r.devices=r.all,(e=r.config.devices)===null||e===void 0||e.forEach(function(i){return r.add(i,{silent:!0})}),r.select(r.config.default||r.devices.at(0)),t.on(It,r._onSelect,r),r}return n.prototype._onSelect=function(t,e,r){var i=this,l=i.em,f=i.events,p=t.previous("device"),h=this.get(e),g=f.select;l.trigger(g,h,this.get(p)),this.__catchAllEvent(g,h,r)},n.prototype.add=function(t,e){e===void 0&&(e={});var r,i=e;if((0,L.isString)(t)){var l=e;i=arguments[2]||{},r=V(V({},i),{id:t,name:i.name||t,width:l})}else r=t;return r.id||(r.id=r.name||this._createId()),this.devices.add(r,i)},n.prototype.get=function(t){var e=this.getAll().filter(function(r){return r.get("name")===t})[0];return e||this.devices.get(t)||null},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(t,e){e===void 0&&(e={});var r=(0,L.isString)(t)?this.get(t):t;return r&&this.em.set("device",r.get("id"),e),this},n.prototype.getSelected=function(){return this.get(this.em.get("device"))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new Dt({collection:this.devices,config:V({em:e},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(W);const Xt=Yt;var De=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xe=function(a){De(n,a);function n(t,e,r){return a.call(this,e,{module:t,modelConstructor:r})||this}return n.prototype.add=function(t,e){var r=this,i,l=(0,L.isArray)(t)?t:(0,L.isUndefined)(t)?void 0:[t];return l=(i=l==null?void 0:l.map(function(f){return f instanceof r.newModel?f:new r.newModel(r.module,f)}))!==null&&i!==void 0?i:[void 0],a.prototype.add.call(this,(0,L.isArray)(t)?l:l[0],e)},n.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},n}(m.FE);const Ie=Xe;var Me=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ue=function(){return ue=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ue.apply(this,arguments)},R=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},at="__aw",yt="__ah",_=function(a,n){var t,e=a.get(n),r=(t=a.view)===null||t===void 0?void 0:t.el[n==="width"?"offsetWidth":"offsetHeight"];return(0,L.isNumber)(e)?e:(0,L.isString)(e)&&e.endsWith("px")?parseFloat(e):r||0},bt=function(a){Me(n,a);function n(t,e){var r=a.call(this,t,e)||this,i=r.em,l=r.attributes,f=l.styles,p=l.component,h=i.Components,g=h.getConfig(),w=i.Css.getAll(),M={},Z={em:i,config:g,frame:r,idMap:M};if(!(0,ct.isComponent)(p)){var nt=(0,ct.isObject)(p)?p:{components:p};!nt.type&&(nt.type="wrapper");var vt=h.getType("wrapper").model;r.set("component",new vt(nt,Z))}if(!f)r.set("styles",w);else if(!(0,ct.isObject)(f)){var _t=Object.keys(M);_t.length&&Array.isArray(f)&&f.forEach(function(At){var Zt=At.selectors;if(Zt&&Zt.length==1){var Kt=Zt[0],he=Kt.name&&Kt.type===2&&Kt;if(he&&M[he.name])he.name=M[he.name];else if((0,L.isString)(Kt)&&Kt[0]==="#"){var Ce=Kt.substring(1);Ce&&M[Ce]&&(Zt[0]="#".concat(M[Ce]))}}}),w.add(f),r.set("styles",w)}return!e.width&&r.set(at,1),!e.height&&r.set(yt,1),!r.id&&r.set("id",(0,ct.createId)()),r}return n.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(n.prototype,"width",{get:function(){return _(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return _(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var t=this.refFrame;return(t==null?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),n.prototype.initRefs=function(){var t=this.refFrame;if((0,L.isString)(t)){var e=this.module.framesById[t];e&&this.set({refFrame:e},{silent:!0})}},n.prototype.getBoxRect=function(){var t=this.attributes,e=t.x,r=t.y,i=this,l=i.width,f=i.height;return{x:e,y:r,width:l,height:f}},n.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},n.prototype.changesUp=function(t){t===void 0&&(t={}),!(t.temporary||t.noCount||t.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},n.prototype.getComponent=function(){return this.get("component")},n.prototype.getStyles=function(){return this.get("styles")},n.prototype.disable=function(){this.trigger("disable")},n.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},n.prototype.getHead=function(){return R([],this.head,!0)},n.prototype.setHead=function(t){return this.set("head",R([],t,!0))},n.prototype.addHeadItem=function(t){this.head.push(t)},n.prototype.getHeadByAttr=function(t,e,r){return this.head.filter(function(i){return i.attributes&&i.attributes[t]==e&&(!r||r===i.tag)})[0]},n.prototype.removeHeadByAttr=function(t,e,r){var i=this.getHeadByAttr(t,e,r),l=this.head.indexOf(i);l>=0&&this.head.splice(l,1)},n.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},n.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},n.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},n.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},n.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},n.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",ue({frame:this},t))},n.prototype.hasAutoHeight=function(){var t=this.attributes.height;return!!(t==="auto"||this.config.infiniteCanvas)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=U.Z.prototype.toJSON.call(this,t),r=(0,L.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[at]&&delete e.width,e[yt]&&delete e.height,e.refFrame&&(e.refFrame=e.refFrame.id,delete e.component),(0,L.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,L.forEach)(r,function(i,l){e[l]===i&&delete e[l]}),(0,L.forEach)(["attributes","head"],function(i){(0,L.isEmpty)(e[i])&&delete e[i]}),e},n}(U.Z);const J=bt;var Y=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),H=function(a){Y(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,J)||this;return r.loadedItems=0,r.itemsToLoad=0,(0,L.bindAll)(r,"itemLoaded"),r.on("add",r.onAdd),r.on("reset",r.onReset),r.on("remove",r.onRemove),r.forEach(function(i){return r.onAdd(i)}),r}return n.prototype.onAdd=function(t){this.module.framesById[t.id]=t},n.prototype.onReset=function(t,e){var r=this,i=(e==null?void 0:e.previousModels)||[];i.map(function(l){return r.onRemove(l)})},n.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},n.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(r){return r[t?"on":"off"]("loaded",e.itemLoaded)})},n}(Ie);const Tt=H;var te=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qt=function(a){te(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,i=e.em,l={};r.em=i,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(h){return r.unset(h)}));var f=t.frames||[l],p=new Tt(i.Canvas,f);return p.page=r,r.set("frames",p),!r.getId()&&r.set("id",i==null?void 0:i.Pages._createId()),i==null||i.UndoManager.add(p),r}return n.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get("frames")},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get("name")},n.prototype.setName=function(t){return this.set({name:t})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=m.Hn.prototype.toJSON.call(this,t),r=(0,L.result)(this,"defaults");return(0,L.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,L.forEach)(r,function(i,l){e[l]===i&&delete e[l]}),e},n}(m.Hn);const Ut=Qt;var se=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ee=function(){return ee=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ee.apply(this,arguments)},ce=function(a){se(n,a);function n(t,e){var r=a.call(this,t)||this;return r.on("reset",r.onReset),r.on("remove",r.onRemove),r.model=function(i,l){return l===void 0&&(l={}),new Ut(i,ee(ee({},l),{em:e}))},r}return n.prototype.onReset=function(t,e){var r=this,i;(i=e==null?void 0:e.previousModels)===null||i===void 0||i.map(function(l){return r.onRemove(l)})},n.prototype.onRemove=function(t){t==null||t.onRemove()},n}(m.FE);const xe=ce;var Ae=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ve=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Se="page",hr="".concat(Se,":"),Le="".concat(hr,"select"),nr="".concat(Le,":before"),ze="".concat(hr,"update"),xr="".concat(hr,"add"),mr="".concat(xr,":before"),Sr="".concat(hr,"remove"),ot="".concat(Sr,":before"),Pt="change:selected",Ht="main",ne={all:Se,select:Le,selectBefore:nr,update:ze,add:xr,addBefore:mr,remove:Sr,removeBefore:ot},_e=function(a){Ae(n,a);function n(t){var e=a.call(this,t,"PageManager",new xe([],t),ne)||this;e.storageKey="pages",(0,L.bindAll)(e,"_onPageChange");var r=new U.Z({_undo:!0});return e.model=r,e.pages.on("reset",function(i){return i.at(0)&&e.select(i.at(0))}),e.pages.on("all",e.__onChange,e),r.on(Pt,e._onPageChange),e}return Object.defineProperty(n.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),n.prototype.getAll=function(){return Ve([],this.all.models,!0)},n.prototype.__onChange=function(t,e,r,i){var l=i||r;this.em.trigger(Se,{event:t,page:e,options:l})},n.prototype.onLoad=function(){var t,e=this,r=e.pages,i=e.config,l=e.em,f={silent:!0},p=((t=i.pages)===null||t===void 0?void 0:t.map(function(g){return new Ut(g,{em:l,config:i})}))||[];r.add(p,f);var h=r.length?this.getMain():this.add({type:Ht},f);h&&this.select(h,f)},n.prototype._onPageChange=function(t,e,r){var i=this.em,l=i.Layers,f=e.getMainComponent();l&&f&&l.setRoot(f),i.trigger(Le,e,t.previous("selected")),this.__onChange(Pt,e,r)},n.prototype.postLoad=function(){var t=this,e=t.em,r=t.model,i=t.pages,l=e.UndoManager;l.add(r),l.add(i),i.on("add remove reset change",function(f,p,h){return e.changesUp(h||p)})},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var i=this.em;t.id=t.id||this._createId();var l=function(){var f=r.pages.add(new Ut(t,{em:r.em,config:r.config}),e);return e.select&&r.select(f),f};return!e.silent&&i.trigger(mr,t,l,e),!e.abort&&l()},n.prototype.remove=function(t,e){var r=this;e===void 0&&(e={});var i=this.em,l=(0,L.isString)(t)?this.get(t):t,f=function(){return l&&r.pages.remove(l,e),l};return!e.silent&&i.trigger(ot,l,f,e),!e.abort&&f()},n.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},n.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===Ht})[0]||t.at(0)},n.prototype.getAllWrappers=function(){var t=this.getAll();return(0,L.unique)((0,L.flatten)(t.map(function(e){return e.getAllFrames().map(function(r){return r.getComponent()})})))},n.prototype.select=function(t,e){e===void 0&&(e={});var r=(0,L.isString)(t)?this.get(t):t;return r&&(this.em.trigger(nr,r,e),this.model.set("selected",r,e)),this},n.prototype.getSelected=function(){return this.model.get("selected")},n.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){var e=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach(function(r){return r.getFrames().initRefs()}),e},n.prototype._createId=function(){var t=this.getAll(),e=t.length+16,r=this.getAllMap(),i;do i=(0,ct.createId)(e);while(r[i]);return i},n}(W);const Fe=_e;var $e=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),en=function(a){$e(n,a);function n(t){var e=this,r=t.em,i=t.config,l=i.scripts,f=i.styles;return e=a.call(this,t,{scripts:l,styles:f})||this,e.set("frames",new Tt(t)),e.on("change:zoom",e.onZoomChange),e.on("change:x change:y",e.onCoordsChange),e.on("change:pointer change:pointerScreen",e.onPointerChange),e.listenTo(r,"change:device ".concat(qt),e.updateDevice),e.listenTo(r,Le,e._pageUpdated),e}return n.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:m.pH,pointerScreen:m.pH}},Object.defineProperty(n.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),n.prototype.init=function(){var t=this.em,e=t.Pages.getMain();this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},n.prototype._pageUpdated=function(t,e){var r=this.em;r.setSelected(),r.get("readyCanvas")&&r.stopDefault(),e==null||e.getFrames().map(function(i){return i.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},n.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,r=e.getDeviceModel(),i=t.frame||e.getCurrentFrameModel();if(i&&r){var l=r.attributes,f=l.width,p=l.height;i.set({width:f,height:p},{noUndo:1})}},n.prototype.onZoomChange=function(){var t=this,e=t.em,r=t.module,i=this.get("zoom");i<1&&this.set("zoom",1),e.trigger(r.events.zoom)},n.prototype.onCoordsChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.coords)},n.prototype.onPointerChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.pointer)},n.prototype.getPointerCoords=function(t){t===void 0&&(t=m.vA.World);var e=this.attributes,r=e.pointer,i=e.pointerScreen;return t===m.vA.World?r:i},n}(U.Z);const gn=en;var lr=wr(675),Vi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mn=function(a){Vi(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,lr.Z)||this;r.on("add",r.onAdd),r.on("change",r.onChange),r.on("remove",r.onRemove);var i=r.em;r.refreshDbn=(0,L.debounce)(function(){return r.refresh()},0);var l="component:resize styleable:change component:input component:update frame:updated undo redo";return r.listenTo(i,l,function(){return r.refreshDbn()}),r}return Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.spot)},n.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},n.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},n.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},n.prototype.__trgEvent=function(t,e){var r=this.module,i=r.em;i.trigger(t,e),this.refreshDbn()},n}(Ie);const Cn=mn;var ii;(function(a){a.dragEnter="canvas:dragenter",a.dragOver="canvas:dragover",a.dragEnd="canvas:dragend",a.dragData="canvas:dragdata",a.drop="canvas:drop",a.spot="canvas:spot",a.spotAdd="canvas:spot:add",a.spotUpdate="canvas:spot:update",a.spotRemove="canvas:spot:remove",a.coords="canvas:coords",a.zoom="canvas:zoom",a.pointer="canvas:pointer"})(ii||(ii={}));var Mr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cn=function(a){Mr(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),n.prototype.preinitialize=function(t){this.className=""},n}(m.G7);const fr=cn;var pe=wr(491),Zn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Po=function(a){Zn(n,a);function n(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var r=a.call(this,t)||this;return r.itemsView="",r.itemType="type",r.reuseView=!1,r.viewCollection=[],e&&r.listenTo(r.collection,"add",r.addTo),r}return n.prototype.addTo=function(t){this.add(t)},n.prototype.itemViewNotFound=function(t){},n.prototype.add=function(t,e){var r=this,i=r.reuseView,l=r.viewCollection,f=e||null,p=t.get(this.itemType),h;t.view&&i?h=t.view:h=this.renderView(t,p),l.push(h);var g=h.render().el;f?f.appendChild(g):this.$el.append(g)},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(r){return t.add(r,e)}),this.$el.append(e),this.onRender(),this},n.prototype.onRender=function(){},n.prototype.onRemoveBefore=function(t,e){},n.prototype.onRemove=function(t,e){},n.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),m.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},n.prototype.clearItems=function(){this.viewCollection},n}(fr);const Mn=Po;var $n=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Br=function(a){$n(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var r=e.model;return e.listenTo(r,"change",e.render),e.listenTo(r,"destroy remove",e.remove),e.listenTo(r.get("selectors"),"change",e.render),e}return n.prototype.tagName=function(){return"style"},n.prototype.render=function(){var t=this,e=t.model,r=t.el,i=e.get("important");return r.innerHTML=e.toCSS({important:i}),this},n}(m.G7);const oi=Br;var Sn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),On=function(a){Sn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},n}(oi);const bi=On;var ur=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pe=function(a,n){return"".concat(a).concat(n?"-".concat(parseFloat(n)):"")},Tn=function(a){ur(n,a);function n(t){var e=a.call(this,t)||this;(0,L.bindAll)(e,"sortRules");var r=t.config||{};e.atRules={},e.config=r,e.em=r.em,e.pfx=r.stylePrefix||"",e.className=e.pfx+"rules";var i=e.collection;return e.listenTo(i,"add",e.addTo),e.listenTo(i,"reset",e.render),e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){if(this.renderStarted){var r=e||null,i=this.config,l={model:t,config:i},f,p;if(t.get("atRuleType")==="keyframes"){var h=t.getAtRule(),g=this.atRules[h];if(!g){var w=document.createElement("style");g=document.createTextNode(""),w.appendChild(document.createTextNode("".concat(h,"{"))),w.appendChild(g),w.appendChild(document.createTextNode("}")),this.atRules[h]=g,f=w}p=new bi(l),g.appendData(p.render().el.textContent)}else p=new oi(l),f=p.render().el;var M=this.className,Z=t.get("mediaText"),nt=Pe(M),vt=nt;if(Z&&(vt=Pe(M,this.getMediaWidth(Z))),f){var _t=r||this.el,At=void 0;try{At=_t.querySelector("#".concat(vt))}catch{}At||(At=_t.querySelector("#".concat(nt))),At==null||At.appendChild(f)}return f}},n.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},n.prototype.sortRules=function(t,e){var r=this.em,i=(r.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!i)return 0;var l=i?t:e,f=i?e:t;return l-f},n.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,r=e.em,i=e.$el,l=e.collection,f=this.className,p=document.createDocumentFragment();i.empty();var h=r.Devices.getAll().pluck("priority").sort(this.sortRules);return h.every(function(g){return g})&&h.unshift(0),h.forEach(function(g){return p.appendChild((0,pe.ut)("div",{id:Pe(f,g)}))}),l.each(function(g){return t.addToCollection(g,p)}),i.append(p),i.attr("class",f),this},n}(m.G7);const Or=Tn;var rn=function(){return rn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},rn.apply(this,arguments)},or=function(){function a(n,t){var e=this;this.em=n,this.canvas=n.Canvas;var r=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),i=Array.isArray(r)?r:[r];this.el=i[0],this.counter=0,(0,L.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),i.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(n,t){var e={on:pe.on,off:pe.S1},r=t?"on":"off";e[r](n,"dragenter",this.handleDragEnter),e[r](n,"dragover",this.handleDragOver),e[r](n,"drop",this.handleDrop),e[r](n,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(n){var t,e=n?pe.on:pe.S1,r=this.el.ownerDocument,i=(t=r.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=n?{onStart:function(l){var f=l.sorter;(0,pe.on)(i,"pointermove",f.onMove)},onEnd:function(l){var f=l.sorter;(0,pe.S1)(i,"pointermove",f.onMove)},customTarget:function(l){var f=l.event;return r.elementFromPoint(f.clientX,f.clientY)}}:null,e(i,"pointerenter",this.handleDragEnter),e(i,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(i,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(n){this.over?this.endDrop(n):this.__customTglEff(!1)},a.prototype.endDrop=function(n,t){var e=this,r=e.em,i=e.dragStop;this.counter=0,i&&i(n||!this.over),this.__customTglEff(!1),r.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(n){this.updateCounter(-1,n)},a.prototype.updateCounter=function(n,t){this.counter+=n,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(n){var t=this,e=this,r=e.em,i=e.canvas,l=n.dataTransfer,f=r.get("dragContent");if(!(!f&&!i.getConfig().allowExternalDrop)&&(this.updateCounter(1,n),!this.over)){this.over=!0;var p=r.Utils,h=f||"<br>",g,w;if(r.stopDefault(),r.inAbsoluteMode()){var M=r.Components.getWrapper(),Z=M.append({})[0],nt=r.Commands.run("core:component-drag",{event:n,guidesInfo:1,center:1,target:Z,onEnd:function(_t,At,Zt){var Kt=Zt.cancelled,he;if(!Kt){he=M.append(h)[0];var Ce=i.getOffset(),Re=Z.getStyle(),Ze=Re.top,ge=Re.left,Ke=Re.position,ar=(0,pe.GX)(_t.target),un=parseInt("".concat(parseFloat(ge)+ar.x-Ce.left),10),ye=parseInt("".concat(parseFloat(Ze)+ar.y-Ce.top),10);he.addStyle({left:un+"px",top:ye+"px",position:Ke})}t.handleDragEnd(he,l),Z.remove()}});g=function(_t){return nt.stop(n,{cancel:_t})},w=function(_t){return h=_t}}else{var vt=new p.Sorter(rn({em:r,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:i.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(_t){return t.handleDragEnd(_t,l)},document:this.el.ownerDocument},this.sortOpts||{}));vt.setDropContent(h),vt.startSort(),this.sorter=vt,g=function(_t){_t&&(vt.moved=!1),vt.endMove()},w=function(_t){return vt.setDropContent(_t)}}this.dragStop=g,this.dragContent=w,r.trigger("canvas:dragenter",l,h)}},a.prototype.handleDragEnd=function(n,t){var e=this.em;this.over=!1,n&&(e.set("dragResult",n),e.trigger("canvas:drop",t,n)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(n){n.preventDefault(),this.em.trigger("canvas:dragover",n)},a.prototype.handleDrop=function(n){n.preventDefault();var t=this.dragContent,e=n.dataTransfer,r=this.getContentByData(e).content;n.target.style.border="",r&&t&&t(r),this.endDrop(!r,n)},a.prototype.getContentByData=function(n){var t=this.em,e=n&&n.types,r=n&&n.files||[],i=t.get("dragContent"),l=n&&n.getData("text");if(r.length){l=[];for(var f=0;f<r.length;f++){var p=r[f],h=p.type.split("/")[0];h=="image"&&l.push({type:h,file:p,attributes:{alt:p.name}})}}else if(i)l=i;else if((0,L.indexOf)(e,"text/html")>=0)l=n&&n.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,L.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,L.indexOf)(e,"text/json")>=0){var g=n&&n.getData("text/json");g&&(l=JSON.parse(g))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var w={content:l};return t.trigger("canvas:dragdata",n,w),w},a}();const qn=or;var hi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zr=function(){return zr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zr.apply(this,arguments)},j=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},ft=function(a){hi(n,a);function n(t,e){var r=a.call(this,{model:t})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,L.bindAll)(r,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var i=r.el;r.module._config=zr(zr({},r.config||{}),{frameView:r}),r.frameWrapView=e,r.showGlobalTools=(0,L.debounce)(r.showGlobalTools.bind(r),50);var l=r.getCanvasModel();return r.listenTo(t,"change:head",r.updateHead),r.listenTo(l,"change:styles",r.renderStyles),t.view=r,(0,ct.setViewEl)(i,r),r}return Object.defineProperty(n.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),n.prototype.getBoxRect=function(){var t=this,e=t.el,r=t.module,i=r.getCanvasView(),l=r.getCoords(),f=e.getBoundingClientRect(),p=i.getCanvasOffset(),h=i.getViewportDelta(),g=r.getZoomMultiplier(),w=(f.x-p.left-h.x-l.x)*g,M=(f.y-p.top-h.y-l.y)*g,Z=f.width*g,nt=f.height*g;return{x:w,y:M,width:Z,height:nt}},n.prototype.updateHead=function(){var t=this.model,e=this.getHead(),r=[],i=[],l=t.head,f=t.previous("head"),p=function(g){return g===void 0&&(g={}),Object.keys(g).sort().map(function(w){return"[".concat(w,'="').concat(g[w],'"]')}).join("")},h=function(g,w,M){g.forEach(function(Z){var nt=Z.tag,vt=Z.attributes,_t=w.some(function(At){return At.tag===nt&&p(At.attributes)===p(vt)});!_t&&M.push(Z)})};h(l,f,i),h(f,l,r),r.forEach(function(g){var w,M=e.querySelector("".concat(g.tag).concat(p(g.attributes)));(w=M==null?void 0:M.parentNode)===null||w===void 0||w.removeChild(M)}),(0,pe.SJ)(e,i)},n.prototype.getEl=function(){return this.el},n.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},n.prototype.getWindow=function(){return this.getEl().contentWindow},n.prototype.getDoc=function(){return this.getEl().contentDocument},n.prototype.getHead=function(){return this.getDoc().querySelector("head")},n.prototype.getBody=function(){return this.getDoc().querySelector("body")},n.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},n.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,pe.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},n.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},n.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},n.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},n.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},n.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},n.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},n.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),r=e.scrollTop,i=e.scrollLeft,l=t.offsetHeight,f=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:f,scrollTop:r,scrollLeft:i,scrollBottom:r+l,scrollRight:i+f}},n.prototype._getTool=function(t){var e=this.tools,r=this.getToolsEl();return e[t]||(e[t]=r.querySelector(t)),e[t]},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),fr.prototype.remove.apply(this,e),this},n.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},n.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,r=this.getWindow(),i=r.pageYOffset,l=t||0,f=e.getConfig().autoscrollLimit,p=this.getRect().height-f,h=i;if(l<f&&(h-=f-l),l>p&&(h+=l-p),!(0,L.isUndefined)(t)&&h!==i&&h>0&&h<this.lastMaxHeight){var g=this.getGlobalToolsEl();g.style.opacity="0",this.showGlobalTools(),r.scrollTo(0,h),e.spots.refreshDbn()}requestAnimationFrame(this.autoscroll)}},n.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,pe.VB)(t).clientY*this.em.getZoomDecimal()},n.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},n.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},n.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),r=t?"on":"off",i={on:pe.on,off:pe.S1};i[r](e,"mousemove dragover",this.updateClientY),i[r](e,"mouseup",this.stopAutoscroll)},n.prototype.render=function(){var t=this,e=t.$el,r=t.ppfx,i=t.em;return e.attr({class:"".concat(r,"frame")}),this.renderScripts(),i.trigger("frame:render",this),this},n.prototype.renderScripts=function(){var t=this,e=this,r=e.el,i=e.model,l=e.em,f="frame:load",p={el:r,model:i,view:this},h=this.getCanvasModel(),g=function(w){var M;if(w.length>0){var Z=w.shift(),nt=(0,pe.ut)("script",zr({type:"text/javascript"},(0,L.isString)(Z)?{src:Z}:Z));nt.onerror=nt.onload=g.bind(null,w),(M=r.contentDocument)===null||M===void 0||M.head.appendChild(nt)}else t.renderBody(),l&&l.trigger(f,p)};r.onload=function(){var w=t.config.frameContent;if(w){var M=t.getDoc();M.open(),M.write(w),M.close()}l&&l.trigger("".concat(f,":before"),p),g(j([],h.get("scripts"),!0))}},n.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),r=this.getCanvasModel(),i=function(w){return w.map(function(M){return{tag:"link",attributes:zr({rel:"stylesheet"},(0,L.isString)(M)?{href:M}:M)}})},l=i(t.prev||r.previous("styles")),f=i(r.get("styles")),p=[],h=[],g=function(w,M,Z){w.forEach(function(nt){var vt=nt.attributes.href,_t=M.some(function(At){return At.attributes.href===vt});!_t&&Z.push(nt)})};g(f,l,h),g(l,f,p),p.forEach(function(w){var M,Z=e.querySelector('link[href="'.concat(w.attributes.href,'"]'));(M=Z==null?void 0:Z.parentNode)===null||M===void 0||M.removeChild(Z)}),(0,pe.SJ)(e,h)},n.prototype.renderBody=function(){var t=this,e,r,i=this,l=i.config,f=i.em,p=i.model,h=i.ppfx,g=this.getDoc(),w=this.getBody(),M=this.getWindow(),Z=p.hasAutoHeight(),nt=f.config;M._isEditor=!0,this.renderStyles({prev:[]});var vt="#ffca6f";(0,pe.R3)(w,`<style>
      `.concat(nt.baseCss||l.frameStyle||"",`

      `).concat(Z?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(Z?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(h,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(h,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(h,`selected-parent {
        outline: 2px solid `).concat(vt,` !important
      }

      .`).concat(h,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(h,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(h,`no-pointer {
        pointer-events: none;
      }

      .`).concat(h,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(h,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(h,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(h,`is__grabbing,
      .`).concat(h,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(nt.canvasCss||"",`
      `).concat(nt.protectedCss||"",`
    </style>`));var _t=p.root,At=f.Components.getType("wrapper").view;this.wrapper=new At({model:_t,config:zr(zr({},_t.config),{em:f,frameView:this})}).render(),(0,pe.R3)(w,(e=this.wrapper)===null||e===void 0?void 0:e.el),(0,pe.R3)(w,new Or({collection:p.getStyles(),config:zr(zr({},f.Css.getConfig()),{frameView:this})}).render().el),(0,pe.R3)(w,this.getJsContainer()),(0,pe.on)(w,"click",function(Zt){var Kt;return Zt&&((Kt=Zt.target)===null||Kt===void 0?void 0:Kt.tagName)=="A"&&Zt.preventDefault()}),(0,pe.on)(w,"submit",function(Zt){return Zt&&Zt.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!l.infiniteCanvas}}].forEach(function(Zt){return Zt.event.split(" ").forEach(function(Kt){g.addEventListener(Kt,function(he){return t.el.dispatchEvent((0,pe.t3)(he,Zt.class))},Zt.opts)})}),this._toggleEffects(!0),(0,ct.hasDnd)(f)&&(this.droppable=new qn(f,(r=this.wrapper)===null||r===void 0?void 0:r.el)),this.loaded=!0,p.trigger("loaded")},n.prototype._toggleEffects=function(t){var e=t?pe.on:pe.S1,r=this.getWindow();r&&e(r,"".concat(pe.G1," resize"),this._emitUpdate)},n.prototype._emitUpdate=function(){this.model._emitUpdated()},n}(fr);const re=ft;var fe=wr(668),Ue=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qe=function(){return qe=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qe.apply(this,arguments)},sr=function(a){Ue(n,a);function n(t,e){var r=a.call(this,{model:t})||this;return(0,L.bindAll)(r,"onScroll","frameLoaded","updateOffset","remove","startDrag"),qe(qe({},t.config),{frameWrapView:r}),r.cv=e,r.frame=new re(t,r),r.classAnim="".concat(r.ppfx,"frame-wrapper--anim"),r.updateOffset=(0,L.debounce)(r.updateOffset.bind(r),0),r.updateSize=(0,L.debounce)(r.updateSize.bind(r),0),r.listenTo(t,"loaded",r.frameLoaded),r.listenTo(t,"change:x change:y",r.updatePos),r.listenTo(t,"change:width change:height",r.updateSize),r.listenTo(t,"destroy remove",r.remove),r.updatePos(),r.setupDragger(),r}return n.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},n.prototype.setupDragger=function(){var t=this,e=this,r=e.module,i=e.model,l,f,p,h=function(g){r.toggleFramesEvents(g)};this.dragger=new fe.Z({onStart:function(){var g=i.attributes,w=g.x,M=g.y;p=t.em.getZoomMultiplier(),l=w,f=M,h(!1)},onEnd:function(){return h(!0)},setPosition:function(g){i.set({x:l+g.x*p,y:f+g.y*p})}})},n.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},n.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,pe.L_)(this.elTools)},n.prototype.remove=function(t){var e=this;return this.__clear(t),fr.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(r){return e[r]=0}),this},n.prototype.updateOffset=function(){var t,e=this,r=e.em,i=e.$el,l=e.frame;!r||r.destroyed||(r.runDefault({preserveSelected:1}),i.removeClass(this.classAnim),(t=l==null?void 0:l.model)===null||t===void 0||t._emitUpdated())},n.prototype.updatePos=function(t){var e=this,r=e.model,i=e.el,l=r.attributes,f=l.x,p=l.y,h=i.style;this.frame.rect=void 0,h.left=isNaN(f)?f:"".concat(f,"px"),h.top=isNaN(p)?p:"".concat(p,"px"),t&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var t=this,e=t.em,r=t.el,i=t.$el,l=t.model,f=t.classAnim,p=t.frame;if(p){p.rect=void 0,i.addClass(f);var h=this.__handleSize(),g=h.noChanges,w=h.width,M=h.height;((0,L.isNull)(w)||(0,L.isNull)(M))&&l.set(qe(qe({},w?{}:{width:r.offsetWidth}),M?{}:{height:r.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),g?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var t=this,e=t.frame,r=t.em;r.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},n.prototype.frameLoaded=function(){var t=this,e=t.frame;t.config,e.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var t,e,r="px",i=this,l=i.model,f=i.el,p=f.style,h=l.attributes,g=h.width,w=h.height,M=p.width||"",Z=p.height||"",nt=g||"",vt=w||"",_t=M==nt&&Z==vt,At=(0,L.isNumber)(nt)?"".concat(nt).concat(r):nt,Zt=(0,L.isNumber)(vt)?"".concat(vt).concat(r):vt;if(p.width=At,l.hasAutoHeight()){var Kt=this.frame.el;if(Kt.contentDocument){var he=Kt.contentDocument,Ce=new ResizeObserver(function(){p.height="".concat(he.body.scrollHeight,"px")});Ce.observe(he.body),(t=this.sizeObserver)===null||t===void 0||t.disconnect(),this.sizeObserver=Ce}}else p.height=Zt,(e=this.sizeObserver)===null||e===void 0||e.disconnect(),delete this.sizeObserver;return{noChanges:_t,width:g,height:w,newW:nt,newH:vt}},n.prototype.render=function(){var t=this,e=t.frame,r=t.$el,i=t.ppfx,l=t.cv,f=t.model,p=t.el,h=f.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),r.empty().attr({class:"".concat(i,"frame-wrapper")}).append(`
      <div class="`.concat(i,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(i,`frame-wrapper__name" data-action-move>
          `).concat(f.get("name")||"",`
        </div>
        <div class="`).concat(i,`frame-wrapper__top-r">
          <div class="`).concat(i,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(i,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(i,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(i,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var g=(0,pe.ut)("div",{class:"".concat(i,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(i,`highlighter" data-hl></div>
      <div class="`).concat(i,`badge" data-badge></div>
      <div class="`).concat(i,`placeholder">
        <div class="`).concat(i,`placeholder-int"></div>
      </div>
      <div class="`).concat(i,`ghost"></div>
      <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(i,`resizer"></div>
      <div class="`).concat(i,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(i,`offset-fixed-v"></div>
    `));this.elTools=g;var w=l==null?void 0:l.toolsWrapper;return w&&w.appendChild(g),h&&h({el:p,elTop:p.querySelector("[data-frame-top]"),elRight:p.querySelector("[data-frame-right]"),elBottom:p.querySelector("[data-frame-bottom]"),elLeft:p.querySelector("[data-frame-left]"),frame:f,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(fr);const ke=sr;var En=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ia=function(a){En(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,!0)||this;return r.listenTo(r.collection,"reset",r.render),r.canvasView=e.canvasView,r._module=e.module,r}return n.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(r){return r.remove(e)})},n.prototype.onRender=function(){var t=this,e=t.$el,r=t.ppfx;e.attr({class:"".concat(r,"frames")})},n.prototype.clearItems=function(){var t=this.viewCollection||[];t.forEach(function(e){return e.remove()}),this.viewCollection=[]},n.prototype.renderView=function(t,e){return new ke(t,this.canvasView)},n}(Mn);const oa=ia;var Yn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hi=function(){return Hi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Hi.apply(this,arguments)},Ia=function(a){Yn(n,a);function n(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,L.bindAll)(e,"clearOff","onKeyPress","onWheel","onPointer");var r=e,i=r.em,l=r.pfx,f=r.ppfx,p=e.module.events;return e.className="".concat(l,"canvas ").concat(f,"no-touch-actions").concat(i.config.customUI?"":" ".concat(l,"canvas-bg")),e.clsUnscale="".concat(l,"unscale"),e._initFrames(),e.listenTo(i,"change:canvasOffset",e.clearOff),e.listenTo(i,"component:selected",e.checkSelected),e.listenTo(i,"".concat(p.coords," ").concat(p.zoom),e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return n.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},n.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},n.prototype._initFrames=function(){var t=this,e=t.frames,r=t.model,i=t.config,l=t.em,f=r.frames;l.set("readyCanvas",0),f.once("loaded:all",function(){return l.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new oa({collection:f},Hi(Hi({},i),{canvasView:this}))},n.prototype.checkSelected=function(t,e){var r;e===void 0&&(e={});var i=e.scroll,l=this.em.getCurrentFrame();i&&((r=t.views)===null||r===void 0||r.forEach(function(f){f.frameView===l&&f.scrollIntoView(i)}))},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,fr.prototype.remove.apply(this,e),this.toggleListeners(!1),this},n.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},n.prototype.toggleListeners=function(t){var e=this,r=e.el,i=e.config,l=t?pe.on:pe.S1;l(document,"keypress",this.onKeyPress),l(window,"scroll resize",this.clearOff),l(r,"wheel",this.onWheel,{passive:!i.infiniteCanvas}),l(r,"pointermove",this.onPointer)},n.prototype.screenToWorld=function(t,e){var r=this.module,i=r.getCoords(),l=r.getZoomMultiplier(),f=this.getViewportDelta();return{x:(t-i.x-f.x)*l,y:(e-i.y-f.y)*l}},n.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),r=(0,pe.GX)(),i={x:t.clientX-e.left+r.x,y:t.clientY-e.top+r.y};if(t._parentEvent){var l=t.target.getBoundingClientRect(),f=this.module.getZoomDecimal();i.x=l.left-e.left+r.x+t.clientX*f,i.y=l.top-e.top+r.y+t.clientY*f}this.model.set({pointerScreen:i,pointer:this.screenToWorld(i.x,i.y)})}},n.prototype.onKeyPress=function(t){var e=this.em,r=(0,pe.sN)(t);r===" "&&e.getZoomDecimal()!==1&&!e.Canvas.isInputFocused()&&(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},n.prototype.onWheel=function(t){var e=this,r=e.module,i=e.config;if(i.infiniteCanvas){this.preventDefault(t);var l=t.deltaX,f=t.deltaY,p=r.getZoomDecimal(),h=(0,pe.Vb)(t),g=r.getCoords();if(h){var w=p-f*p*.01;r.setZoom(w*100);var M=this.model.getPointerCoords(m.vA.Screen),Z=this.getCanvasOffset(),nt=M.x-Z.width/2,vt=M.y-Z.height/2,_t=w/p,At=nt-(nt-g.x)*_t,Zt=vt-(vt-g.y)*_t;r.setCoords(At,Zt)}else this.onPointer(t),r.setCoords(g.x-l,g.y-f)}},n.prototype.updateFrames=function(t){var e=this.em,r=this.toolsWrapper,i={preserveSelected:1};this.updateFramesArea(),this.clearOff(),r.style.display="none",e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){e.stopDefault(i),e.runDefault(i),r.style.display=""},300)},n.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,r=t.model,i=t.module,l=t.cvStyle,f=t.clsUnscale,p=i.getZoomMultiplier();if(e){var h=r.attributes,g=h.x,w=h.y,M=i.getZoomDecimal();e.style.transform="scale(".concat(M,") translate(").concat(g*p,"px, ").concat(w*p,"px)")}l&&(l.innerHTML=`
        .`.concat(f," { scale: ").concat(p,` }
      `))},n.prototype.fitViewport=function(t){var e,r;t===void 0&&(t={});var i=this,l=i.em,f=i.module,p=i.model,h=this.getCanvasOffset(),g=t.el,w=g&&((e=(0,ct.getComponentView)(g))===null||e===void 0?void 0:e.frameView),M=w?w.model:t.frame||l.getCurrentFrameModel()||p.frames.at(0),Z=M.attributes,nt=Z.x,vt=Z.y,_t={x:nt??0,y:vt??0,width:M.width,height:M.height};if(g){var At=this.getElBoxRect(g);_t.x=_t.x+At.x,_t.y=_t.y+At.y,_t.width=At.width,_t.height=At.height}var Zt=t.ignoreHeight,Kt=(r=t.gap)!==null&&r!==void 0?r:0,he=(0,L.isNumber)(Kt),Ce=he?Kt:Kt.x,Re=he?Kt:Kt.y,Ze=_t.width+Ce*2,ge=_t.height+Re*2,Ke=h.width,ar=h.height,un=Ke/Ze,ye=ar/ge,vn=Zt?un:Math.min(un,ye),wo=vn*100;f.setZoom(wo);var bo=-_t.x+(M.width>=Ke?Ke/2-Ze/2:-Ce),xo=-_t.y+ar/2-ge/2,Fi={x:(bo+Ce)*vn,y:(xo+Re)*vn};if(Zt){var of=f.getZoomMultiplier(),af=ar*of,sf=af-ar,Ud=sf/2;Fi.y=(-_t.y+Re)*vn-Ud/of}f.setCoords(Fi.x,Fi.y)},n.prototype.isElInViewport=function(t){var e=(0,ct.getElement)(t),r=(0,pe.Ut)(e),i=this.getFrameOffset(e),l=r.top,f=r.left;return l>=0&&f>=0&&l<=i.height&&f<=i.width},n.prototype.offset=function(t,e){e===void 0&&(e={});var r=e.noScroll,i=(0,pe.Ut)(t),l=r?{x:0,y:0}:(0,pe.GX)(t);return{top:i.top+l.y,left:i.left+l.x,width:i.width,height:i.height}},n.prototype.getRectToScreen=function(t){var e,r,i,l,f=this.module.getZoomDecimal(),p=this.module.getCoords(),h=this.getViewportDelta(),g=((e=t.x)!==null&&e!==void 0?e:0)*f+p.x+h.x||0,w=((r=t.y)!==null&&r!==void 0?r:0)*f+p.y+h.y||0;return{x:g,y:w,width:((i=t.width)!==null&&i!==void 0?i:0)*f,height:((l=t.height)!==null&&l!==void 0?l:0)*f}},n.prototype.getElBoxRect=function(t,e){var r,i,l;e===void 0&&(e={});var f=this.module,p=(0,pe.Ut)(t),h=p.width,g=p.height,w=p.left,M=p.top,Z=(r=(0,ct.getComponentView)(t))===null||r===void 0?void 0:r.frameView,nt=Z==null?void 0:Z.getBoxRect(),vt=f.getZoomMultiplier(),_t=(i=nt==null?void 0:nt.x)!==null&&i!==void 0?i:0,At=(l=nt==null?void 0:nt.y)!==null&&l!==void 0?l:0,Zt=this.el,Kt=(0,pe.GX)(),he=w+_t+(Zt.scrollLeft+Kt.x)*vt,Ce=M+At+(Zt.scrollTop+Kt.y)*vt,Re={x:he,y:Ce,width:h,height:g};return e.local&&(Re.x=w,Re.y=M),e.toScreen?this.getRectToScreen(Re):Re},n.prototype.getViewportRect=function(t){t===void 0&&(t={});var e=this.getCanvasOffset(),r=e.top,i=e.left,l=e.width,f=e.height,p=this.module;if(t.toWorld){var h=p.getZoomMultiplier(),g=p.getCoords(),w=this.getViewportDelta(),M=-g.x-w.x||0,Z=-g.y-w.y||0;return{x:M*h,y:Z*h,width:l*h,height:f*h}}else return{x:i,y:r,width:l,height:f}},n.prototype.getViewportDelta=function(t){var e=this.module.getZoomMultiplier(),r=this.getCanvasOffset(),i=r.width,l=r.height,f=i*e,p=l*e,h=f-i,g=p-l;return{x:h/2/e,y:g/2/e}},n.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},n.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var r=(e=this.frame)===null||e===void 0?void 0:e.el,i=t==null?void 0:t.ownerDocument.defaultView,l=i?i.frameElement:r;this.frmOff=this.offset(l||r)}return this.frmOff},n.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},n.prototype.getElementPos=function(t,e){e===void 0&&(e={});var r=this.module.getZoomDecimal(),i=this.getFrameOffset(t),l=this.el,f=this.getCanvasOffset(),p=this.offset(t,e),h=e.avoidFrameOffset?0:i.top,g=e.avoidFrameOffset?0:i.left,w=e.avoidFrameZoom?p.top:p.top*r,M=e.avoidFrameZoom?p.left:p.left*r,Z=e.avoidFrameOffset?w:w+h-f.top+l.scrollTop,nt=e.avoidFrameOffset?M:M+g-f.left+l.scrollLeft,vt=e.avoidFrameZoom?p.height:p.height*r,_t=e.avoidFrameZoom?p.width:p.width*r;return{top:Z,left:nt,height:vt,width:_t,zoom:r,rect:p}},n.prototype.getElementOffsets=function(t){if(!t||(0,pe.BM)(t))return{};var e={},r=window.getComputedStyle(t),i=this.module.getZoomDecimal(),l=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"];return l.forEach(function(f){e[f]=parseFloat(r[f])*i}),e},n.prototype.getPosition=function(t){var e;t===void 0&&(t={});var r=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(!r)return{top:0,left:0,width:0,height:0};var i=r.body,l=this.module.getZoomDecimal(),f=this.getFrameOffset(),p=this.getCanvasOffset(),h=t.noScroll;return{top:f.top+(h?0:i.scrollTop)*l-p.top,left:f.left+(h?0:i.scrollLeft)*l-p.left,width:p.width,height:p.height}},n.prototype.updateScript=function(t){var e=t.model,r=e.getId();if(!t.scriptContainer){t.scriptContainer=(0,pe.ut)("div",{"data-id":r});var i=this.getJsContainer();i==null||i.appendChild(t.scriptContainer)}t.el.id=r,t.scriptContainer.innerHTML="";var l=document.createElement("script"),f=e.getScriptString(),p=e.get("script-props")?f:`function(){
`.concat(f,`
;}`),h=JSON.stringify(e.__getScriptProps());l.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(r,`');
        if (!item) return;
        (`).concat(p,".bind(item))(").concat(h,`)
      }, 1);`),setTimeout(function(){var g=t.scriptContainer;g==null||g.appendChild(l)},0)},n.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e==null?void 0:e.getJsContainer()},n.prototype.getFrameView=function(t){return(t==null?void 0:t.frameView)||this.em.getCurrentFrame()},n.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,r=t.frames,i=t.em,l=t.framesArea,f=e.frames;f.listenToLoad(),r.render();var p=f.at(0),h=p==null?void 0:p.view;i.setCurrentFrame(h),l==null||l.appendChild(r.el),this.frame=h,this.updateFramesArea()}},n.prototype.renderFrames=function(){this._renderFrames()},n.prototype.render=function(){var t=this,e=t.el,r=t.$el,i=t.ppfx,l=t.config,f=t.em;r.html(this.template());var p=r.find("[data-frames]");this.framesArea=p.get(0);var h=r.find("[data-tools]");return this.toolsWrapper=h.get(0),h.append(`
      <div class="`.concat(i,"tools ").concat(i,`tools-gl" style="pointer-events:none">
        <div class="`).concat(i,`placeholder">
          <div class="`).concat(i,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(i,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(i,'highlighter-sel"></div>'):"",`
        <div class="`).concat(i,`badge"></div>
        <div class="`).concat(i,`ghost"></div>
        <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(i,`resizer"></div>
        <div class="`).concat(i,`offset-v"></div>
        <div class="`).concat(i,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(i,"tools")),this.hlEl=e.querySelector(".".concat(i,"highlighter")),this.badgeEl=e.querySelector(".".concat(i,"badge")),this.placerEl=e.querySelector(".".concat(i,"placeholder")),this.ghostEl=e.querySelector(".".concat(i,"ghost")),this.toolbarEl=e.querySelector(".".concat(i,"toolbar")),this.resizerEl=e.querySelector(".".concat(i,"resizer")),this.offsetEl=e.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(i,"tools-gl")),this.spotsEl=e.querySelector("[data-spots]"),this.cvStyle=e.querySelector("[data-canvas-style]"),this.el.className=(0,ct.getUiClass)(f,this.className),this.ready=!0,this._renderFrames(),this},n}(fr);const ko=Ia;var aa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ai=function(){return ai=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ai.apply(this,arguments)},sa=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},la=function(a){aa(n,a);function n(t){var e=a.call(this,t,"Canvas",it)||this;return e.events=ii,e.framesById={},e.canvas=new gn(e),e.spots=new Cn(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return n.prototype.getCanvasView=function(){return this.canvasView},n.prototype.postLoad=function(){this.model.init()},n.prototype.getModel=function(){return this.canvas},n.prototype.getElement=function(){return this.getCanvasView().el},n.prototype.getFrame=function(t){return this.getFrames()[t||0]},n.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},n.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},n.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},n.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},n.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},n.prototype._getLocalEl=function(t,e,r){var i=t,l=e==null?void 0:e.frameView;return i=l?l[r]():i,i},n.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},n.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},n.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},n.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},n.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},n.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},n.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},n.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},n.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},n.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},n.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},n.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new ko(this.canvas),this.canvasView.render().el},n.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},n.prototype.offset=function(t){return this.getCanvasView().offset(t)},n.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},n.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},n.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},n.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},r=e.top,i=r===void 0?0:r,l=e.left,f=l===void 0?0:l;return ai(ai({},this.getCanvasView().getCanvasOffset()),{topScroll:i,leftScroll:f})},n.prototype.getTargetToElementDim=function(t,e,r){r===void 0&&(r={});var i=r||{},l=this.getCanvasView().getPosition();if(l){var f=i.elPos||this.getCanvasView().getElementPos(e),p=r.toRight||0,h=i.targetHeight||t.offsetHeight,g=i.targetWidth||t.offsetWidth,w=i.event||null,M=f.top-h,Z=f.left;Z+=p?f.width:0,Z=p?Z-g:Z;var nt=Z<l.left?l.left:Z,vt=M<l.top?l.top:M;vt=vt>f.top+f.height?f.top+f.height:vt;var _t={top:vt,left:nt,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return w&&this.em&&this.em.trigger(w,_t),_t}},n.prototype.canvasRectOffset=function(t,e,r){var i=this;r===void 0&&(r={});var l=function(p){var h=p.defaultView;return h==null?void 0:h.frameElement},f=function(p,h,g){h===void 0&&(h=1);var w=i.em.getZoomDecimal(),M=h?"top":"left",Z=p.ownerDocument,nt=r.offset?l(Z):{},vt=nt.offsetTop,_t=vt===void 0?0:vt,At=nt.offsetLeft,Zt=At===void 0?0:At,Kt=Z.body||{},he=Kt.scrollTop,Ce=he===void 0?0:he,Re=Kt.scrollLeft,Ze=Re===void 0?0:Re,ge=h?Ce:Ze,Ke=h?_t:Zt;return g[M]-(ge-Ke)*w};return{top:f(t,1,e),left:f(t,0,e)}},n.prototype.getTargetToElementFixed=function(t,e,r){r===void 0&&(r={});var i=r.pos||this.getElementPos(t,{noScroll:!0}),l=r.canvasOff||this.canvasRectOffset(t,i),f=e.offsetHeight||0,p=e.offsetWidth||0,h=i.left+i.width,g=this.getCanvasView(),w=g.getPosition(),M=g.getFrameOffset(t),Z=r.event,nt=-f,vt=(0,L.isUndefined)(r.left)?i.width-p:r.left;if(vt=i.left<-vt?-i.left:vt,vt=h>w.width?vt-(h-w.width):vt,l.top<f){var _t=i.height+f,At=_t<M.height;At?nt=nt+_t:nt=-l.top<i.height?-l.top:i.height}var Zt={top:nt,left:vt,canvasOffsetTop:l.top,canvasOffsetLeft:l.left,elRect:i,canvasOffset:l,canvasRect:w,targetWidth:p,targetHeight:f};return Z&&this.em.trigger(Z,Zt),Zt},n.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var r=0,i=0,l=e.subWinOffset,f=t.target.ownerDocument,p=f.defaultView||f.parentWindow,h=p.frameElement,g=l?p.pageYOffset:0,w=l?p.pageXOffset:0;if(h){var M=h.getBoundingClientRect();r=M.top||0,i=M.left||0}return{y:t.clientY+r-g,x:t.clientX+i-w}},n.prototype.getMouseRelativeCanvas=function(t,e){var r,i=this.getZoomDecimal(),l=(r=this.getCanvasView().getPosition(e))!==null&&r!==void 0?r:{},f=l.top,p=f===void 0?0:f,h=l.left,g=h===void 0?0:h;return{y:t.clientY*i+p,x:t.clientX*i+g}},n.prototype.hasFocus=function(){return this.getDocument().hasFocus()},n.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),r=sa(["body"],this.config.notTextable,!0),i=e&&document.activeElement===e,l=i?t&&t.activeElement:document.activeElement;return l&&!r.some(function(f){return l.matches(f)})},n.prototype.scrollTo=function(t,e){e===void 0&&(e={});var r=(0,ct.getElement)(t),i=r&&(0,ct.getViewEl)(r);i&&i.scrollIntoView(e)},n.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},n.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},n.prototype.setZoom=function(t){return this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t),this},n.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},n.prototype.setCoords=function(t,e,r){var i;r===void 0&&(r={});var l=t||t===0,f=e||e===0,p={x:this.canvas.get("x"),y:this.canvas.get("y")};if(l&&(p.x=parseFloat("".concat(t))),f&&(p.y=parseFloat("".concat(e))),r.toWorld){var h=(i=this.canvasView)===null||i===void 0?void 0:i.getViewportDelta();h&&(l&&(p.x=p.x-h.x),f&&(p.y=p.y-h.y))}return this.canvas.set(p),this},n.prototype.getCoords=function(){var t=this.canvas.attributes,e=t.x,r=t.y;return{x:e,y:r}},n.prototype.getPointer=function(t){var e=this.canvas.attributes,r=e.pointer,i=e.pointerScreen;return t?i:r},n.prototype.getZoomDecimal=function(){return this.getZoom()/100},n.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},n.prototype.fitViewport=function(t){var e;(e=this.canvasView)===null||e===void 0||e.fitViewport(t)},n.prototype.toggleFramesEvents=function(t){var e=this.getFramesEl().style;e.pointerEvents=t?"":"none"},n.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},n.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new J(this,ai({},t)),e)},n.prototype.getLastDragResult=function(){return this.em.get("dragResult")},n.prototype.addSpot=function(t,e){var r;e===void 0&&(e={});var i=t,l=this.getSpots(i);if(l.length){var f=l[0];return f.set(i),f}var p=i.componentView||((r=i.component)===null||r===void 0?void 0:r.view),h=new lr.Z(this,ai(ai({},i),{id:i.id||"cs_".concat(i.type,"_").concat(p==null?void 0:p.cid),type:i.type||""}));return this.spots.add(h,e),h},n.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},n.prototype.removeSpots=function(t){t===void 0&&(t={});var e=(0,L.isArray)(t)?t:this.getSpots(t),r=this.spots.remove(e);return r},n.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(e===!0||e&&t&&e[t])},n.prototype.getWorldRectToScreen=function(t){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.getRectToScreen(t)},n.prototype.refreshSpots=function(){this.spots.refresh()},n.prototype.destroy=function(){var t=this,e;this.canvas.stopListening(),(e=this.canvasView)===null||e===void 0||e.remove(),["model","droppable"].forEach(function(r){return t[r]={}})},n}(q);const Bi=la,Ao={stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var nn="text/html",xi=nn;const Ts=function(a,n){n===void 0&&(n={});var t=new DOMParser,e=n.htmlType||xi,r=e===nn,i=r?a:"<div>".concat(a,"</div>"),l=t.parseFromString(i,e),f;if(r){var p=l.head,h=l.body,g=p.querySelectorAll("script");(0,L.each)(g,function(M){return h.appendChild(M)});var w=[];(0,L.each)(p.children,function(M){return w.push(M)}),(0,L.each)(w,function(M,Z){return h.insertBefore(M,h.children[Z])}),f=h}else f=l.firstChild;return f};var Dn=function(){return Dn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Dn.apply(this,arguments)},In="data-gjs-",ja="parse:html",Es=function(a,n){return n===void 0&&(n={}),{compTypes:"",modelAttrStart:In,getPropAttribute:function(t,e){var r=t.replace(this.modelAttrStart,""),i=(e==null?void 0:e.length)||0,l=e==null?void 0:e.substring(0,1),f=e==null?void 0:e.substring(i-1),p=e==="true"?!0:e==="false"?!1:e;try{p=l=="{"&&f=="}"||l=="["&&f=="]"?JSON.parse(p):p}catch{}return{name:r,value:p}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var r={},i={};return(0,L.each)(t,function(l,f){if(f.indexOf(e.modelAttrStart)===0){var p=e.getPropAttribute(f,l);r[p.name]=p.value}else i[f]=l}),{props:r,attrs:i}},parseStyle:function(t){for(var e={};t.indexOf("/*")>=0;){var r=t.indexOf("/*"),i=t.indexOf("*/")+2;t=t.replace(t.slice(r,i),"")}for(var l=t.split(";"),f=0,p=l.length;f<p;f++){var h=l[f].trim();if(h){var g=h.split(":"),w=g[0].trim(),M=g.slice(1).join(":").trim();e[w]?((0,L.isArray)(e[w])||(e[w]=[e[w]]),e[w].push(M)):e[w]=M}}return e},parseClass:function(t){for(var e=[],r=t.split(" "),i=0,l=r.length;i<l;i++){var f=r[i].trim();f&&e.push(f)}return e},parseNode:function(t,e){e===void 0&&(e={});for(var r=[],i=t.childNodes,l=0,f=i.length;l<f;l++){var p=i[l],h=p.attributes||[],g=h.length,w=r[r.length-1],M=p.childNodes.length,Z=this.compTypes,nt={};if(Z){var vt="",_t=p.getAttribute&&p.getAttribute("".concat(this.modelAttrStart,"type"));if(_t)nt={type:_t};else{for(var At=0;At<Z.length;At++){var Zt=Z[At];if(vt=Zt.model.isComponent(p,e),vt){typeof vt!="object"&&(vt={type:Zt.id});break}}nt=vt}}if(!nt.tagName){var Kt=p.tagName||"",he=p.namespaceURI||"";nt.tagName=Kt&&he==="http://www.w3.org/1999/xhtml"?Kt.toLowerCase():Kt}g&&(nt.attributes={});for(var Ce=0;Ce<g;Ce++){var Re=h[Ce].nodeName,Ze=h[Ce].nodeValue;if(Re=="style")nt.style=this.parseStyle(Ze);else if(Re=="class")nt.classes=this.parseClass(Ze);else{if(Re=="contenteditable")continue;if(Re.indexOf(this.modelAttrStart)===0){var ge=this.getPropAttribute(Re,Ze);nt[ge.name]=ge.value}else Ze===""&&p[Re]===!0&&(Ze=!0),nt.attributes[Re]=Ze}}if(M&&!nt.components){var Ke=p.childNodes[0];M===1&&Ke.nodeType===3?(!nt.type&&(nt.type="text"),nt.components={type:"textnode",content:Ke.nodeValue}):nt.components=this.parseNode(p,Dn(Dn({},e),{inSvg:e.inSvg||nt.type==="svg"}))}if(nt.type=="textnode"){if(w&&w.type=="textnode"){w.content+=nt.content;continue}if(!e.keepEmptyTextNodes){var ar=p.nodeValue;if(ar!=" "&&!ar.trim())continue}}!M&&"".concat(p.outerHTML).slice(-2)==="/>"&&(nt.void=!0);var un=nt.components;if(!nt.type&&un){for(var ye=1,vn=0,wo=0;wo<un.length;wo++){var bo=un[wo],xo=bo.type;if(["text","textnode"].indexOf(xo)<0&&n.textTags.indexOf(bo.tagName)<0){ye=0;break}xo=="textnode"&&(vn=1)}ye&&vn&&(nt.type="text")}!nt.tagName&&nt.type!="textnode"||r.push(nt)}return r},parse:function(t,e,r){var i;r===void 0&&(r={});var l=(a==null?void 0:a.get("Config"))||{},f={html:[]},p=Dn(Dn({},n),r),h=Dn(Dn(Dn({},n.optionsHtml),{htmlType:((i=n.optionsHtml)===null||i===void 0?void 0:i.htmlType)||n.htmlType}),r),g=(0,L.isFunction)(p.parserHtml)?p.parserHtml(t,h):Ts(t,h),w=g.querySelectorAll("script"),M=w.length,Z=(0,L.isUndefined)(l.allowScripts)?h.allowScripts:l.allowScripts;if(!Z)for(;M--;)w[M].parentNode.removeChild(w[M]);if(h.allowUnsafeAttr||this.__clearUnsafeAttr(g),e){for(var nt=g.querySelectorAll("style"),vt=nt.length,_t="";vt--;)_t=nt[vt].innerHTML+_t,nt[vt].parentNode.removeChild(nt[vt]);_t&&(f.css=e.parse(_t))}a&&a.trigger("".concat(ja,":root"),{input:t,root:g});var At=this.parseNode(g,p),Zt=At.length===1&&!p.returnArray?At[0]:At;return f.html=Zt,a&&a.trigger(ja,{input:t,output:f}),f},__clearUnsafeAttr:function(t){var e=this,r=t.attributes||[],i=t.childNodes||[],l=[];(0,L.each)(r,function(f){var p=f.nodeName||"";p.indexOf("on")===0&&l.push(p)}),l.map(function(f){return t.removeAttribute(f)}),(0,L.each)(i,function(f){return e.__clearUnsafeAttr(f)})}}};const zi=Es;var Ui=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xn=function(){return Xn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Xn.apply(this,arguments)},Ps=zi(),ua=function(a){return(0,L.isArray)(a)?a[a.length-1]:a},Ra=function(a){Ui(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.parseStyle=function(t){return Ps.parseStyle(t)},n.prototype.extendStyle=function(t){return Xn(Xn({},this.getStyle()),t)},n.prototype.getStyle=function(t){var e=this.get("style")||{},r=Xn({},e);return t&&(0,L.isString)(t)?r[t]:r},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,L.isString)(t)&&(t=this.parseStyle(t));var i=this.getStyle(e);e.partial||e.avoidStore?(e.avoidStore=!0,t.__p=!0):delete t.__p;var l=Xn({},t),f=Xn({},l);(0,L.keys)(f).forEach(function(h){f[h]===""&&delete f[h]}),this.set("style",f,e);var p=(0,ct.shallowDiff)(i,l);return delete p.__p,(0,L.keys)(p).forEach(function(h){var g=r.em;e.noEvent||(r.trigger("change:style:".concat(h)),g&&(g.trigger("styleable:change",r,h,e),g.trigger("styleable:change:".concat(h),r,h,e)))}),l},n.prototype.addStyle=function(t,e,r){var i;e===void 0&&(e=""),r===void 0&&(r={}),typeof t=="string"?t=(i={},i[t]=e,i):r=e||{},t=this.extendStyle(t),this.setStyle(t,r)},n.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},n.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],r=this.getStyle(t),i=t.important,l=function(p){var h=(0,L.isArray)(i)?i.indexOf(p)>=0:i,g=p.substring(0,2),w=g==="__";if(w)return"continue";var M=r[p],Z=(0,L.isArray)(M)?M:[M];Z.forEach(function(nt){var vt="".concat(nt).concat(h?" !important":"");vt&&e.push("".concat(p,":").concat(vt,";"))})};for(var f in r)l(f);return e.join("")},n.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},n.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},n}(m.Hn);const Lo=Ra;var ca=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jn=function(){return jn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},jn.apply(this,arguments)},Wi=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Gi=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Rn=function(a,n){if(n===void 0&&(n=[]),!a)return[];var t=(0,L.isArray)(a)||(0,L.isFunction)(a.map)?a:[a];return t.map(function(e){n.push(e.getId()),Rn(e.components().models,n)}),n},Ki=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps,r=(0,L.isArray)(a)?a:[a];return r.map(function(i){var l=i.attributes,f=l===void 0?{}:l,p=i.components,h=i.tagName,g=f.id;f.draggable;var w=Wi(f,["id","draggable"]),M=i;if(g&&(e[g]?(e[g].push(M),g=Kr.getNewId(n),M.attributes.id=g):(e[g]=[],n[g]&&(M=n[g],h&&M.set({tagName:h},jn(jn({},t),{silent:!0})),(0,L.keys)(w).length&&M.addAttributes(w,jn({},t))))),p){var Z=Ki(p,n);if((0,L.isFunction)(M.components)){var nt=M.components();nt.length>0&&nt.reset(Z,t)}else M.components=Z}return M})},Mo=function(a){ca(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.opt=e,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren);var r=e.em,i=e.config;this.config=i,this.em=r,this.domc=e.domc||(r==null?void 0:r.Components)},n.prototype.resetChildren=function(t,e){var r=this;e===void 0&&(e={});var i=this,l=e.previousModels||[],f=l.filter(function(g){return!t.get(g.cid)}),p=Rn(t),h=Rn(l).filter(function(g){return p.indexOf(g)>=0});e.keepIds=(e.keepIds||[]).concat(h),f.forEach(function(g){return r.removeChildren(g,i,e)}),t.each(function(g){return r.onAdd(g)})},n.prototype.resetFromString=function(t,e){var r,i;t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=Rn(this);var l=this,f=l.domc,p=l.em,h=l.parent,g=p==null?void 0:p.Css,w=(f==null?void 0:f.allById())||{},M=this.parseString(t,e),Z=Ki(M,w,e),nt=e.visitedCmps,vt=nt===void 0?{}:nt;Object.keys(vt).forEach(function(_t){var At=vt[_t];if(At.length){var Zt=(g==null?void 0:g.getRules("#".concat(_t)))||[];Zt.length&&At.forEach(function(Kt){Zt.forEach(function(he){var Ce=he.clone();Ce.set("selectors",["#".concat(Kt.attributes.id)]),g.getAll().add(Ce)})})}}),this.reset(Z,e),p==null||p.trigger("component:content",h,e,t),(i=(r=h).__checkInnerChilds)===null||i===void 0||i.call(r)},n.prototype.removeChildren=function(t,e,r){var i=this;if(r===void 0&&(r={}),!!t){var l=this,f=l.domc,p=l.em,h=r.temporary||r.fromUndo;if(t.prevColl=this,!h){var g=t.getId(),w=p.Selectors.getAll(),M=p.Css.getAll(),Z=(r.keepIds||[]).indexOf(g)<0,nt=f?f.allById():{};delete nt[g];var vt=Z?M.remove(M.filter(function(Zt){return Zt.getSelectors().getFullString()==="#".concat(g)}),r):[];w.remove(vt.map(function(Zt){return Zt.getSelectors().at(0)})),t.opt.temporary||(p.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),p.trigger("component:remove",t));var _t=t.components();_t.forEach(function(Zt){return i.removeChildren(Zt,e,r)})}var At=t.components();p.stopListening(At),p.stopListening(t),p.stopListening(t.get("classes")),t.__postRemove()}},n.prototype.model=function(t,e){var r=e.collection.opt,i=r.em,l,f=i.Components.componentTypes;e.em=i,e.config=r.config,e.componentTypes=f,e.domc=r.domc;for(var p=0;p<f.length;p++){var h=f[p].id;if(h==t.type){l=f[p].model;break}}return l||(l=f[f.length-1].model,i&&t.type&&i.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new l(t,e)},n.prototype.parseString=function(t,e){e===void 0&&(e={});var r=this,i=r.em,l=r.domc,f=i.Css,p=i.Parser.parseHtml(t);if(Kr.checkId(p.html,p.css,l.componentsById,e),p.css&&f&&!e.temporary){e.at;var h=Wi(e,["at"]);f.addCollection(p.css,jn(jn({},h),{extend:1}))}return p.html},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={}),e.keepIds=Gi(Gi([],e.keepIds||[],!0),Rn(e.previousModels),!0),(0,L.isString)(t)?t=this.parseString(t,e):(0,L.isArray)(t)&&(t=Gi([],t,!0),t.forEach(function(f,p){if((0,L.isString)(f)){var h=r.parseString(f,e);t[p]=(0,L.isArray)(h)&&!h.length?null:h}}));var i=(0,L.isArray)(t);t=(i?t:[t]).filter(Boolean).map(function(f){return r.processDef(f)}),t=i?(0,L.flatten)(t,1):t[0];var l=m.FE.prototype.add.apply(this,[t,e]);return this.__firstAdd=l,l},n.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this,r=e.em,i=e.config,l=i===void 0?{}:i,f=l.processor,p=t;if(f){p=jn({},p);var h=f(p);h&&((0,L.each)(p,function(_t,At){return delete p[At]}),(0,L.extend)(p,h))}if(p.$$typeof&&typeof p.props=="object"){p=jn({},p),p.props=jn({},p.props);var g=r.Components,w=r.Parser,M=w.parserHtml;(0,L.each)(p,function(_t,At){(0,L.includes)(["props","type"],At)||delete p[At]});var Z=p.props,nt=Z.children;delete Z.children,delete p.props;var vt=M.splitPropsFromAttr(Z);p.attributes=vt.attrs,nt&&(p.components=nt),p.type?g.getType(p.type)||(p.tagName=p.type,delete p.type):p.type="textnode",(0,L.extend)(p,vt.props)}return p},n.prototype.onAdd=function(t,e,r){r===void 0&&(r={});var i=this,l=i.domc,f=i.em,p=t.getStyle(),h=f&&f.getConfig().avoidInlineStyle;if(l&&l.Component.ensureInList(t),!(0,L.isEmpty)(p)&&!h&&f&&f.get&&f.getConfig().forceClass&&!r.temporary){var g=t.cid;f.Css.setClassRule(g,p),t.setStyle({}),t.addClass(g)}t.__postAdd({recursive:!0})},n}(m.FE);const Zi=Mo;var $i=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vi=1,yn=2,Fn=function(a){$i(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,i=e.config,l=i===void 0?{}:i,f=r.get("name"),p=r.get("label");f?p||r.set("label",f):r.set("name",p);var h=r.get("name"),g=l.escapeName,w=g?g(h):n.escapeName(h);return r.set("name",w),r.em=e.em,r}return n.prototype.defaults=function(){return{name:"",label:"",type:vi,active:!0,private:!1,protected:!1,_undo:!0}},n.prototype.isId=function(){return this.get("type")===yn},n.prototype.isClass=function(){return this.get("type")===vi},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,r=this.get("name"),i="";switch(this.get("type")){case vi:i=".";break;case yn:i="#";break}return i+(e?e(r):r)},n.prototype.toString=function(){return this.getFullName()},n.prototype.getLabel=function(){return this.get("label")},n.prototype.setLabel=function(t){return this.set("label",t)},n.prototype.getActive=function(){return this.get("active")},n.prototype.setActive=function(t){return this.set("active",t)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,r=m.Hn.prototype.toJSON.call(this,[t]),i=(0,L.result)(this,"defaults");if(e&&e.getConfig().avoidDefaults){(0,L.forEach)(i,function(f,p){r[p]===f&&delete r[p]}),r.label===r.name&&delete r.label;var l=(0,L.keys)(r).length;l===1&&r.name&&(r=r.name),l===2&&r.name&&r.type&&(r=this.getFullName())}return r},n.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\:@]+)/gi,"-")},n.TYPE_CLASS=vi,n.TYPE_ID=yn,n}(m.Hn);const yr=Fn;Fn.prototype.idAttribute="name";var qi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Do=function(a,n){return a.reduce(function(t,e,r){return t.concat(Do(a.slice(r+1),"".concat(n).concat(e)))},[n])},Nn=function(a){qi(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||yr.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,L.filter)(this.models,function(t){return t.get("active")&&!t.get("private")})},n.prototype.getValid=function(t){var e=t===void 0?{}:t,r=e.noDisabled;return(0,L.filter)(this.models,function(i){return!i.get("private")}).filter(function(i){return r?i.get("active"):1})},n.prototype.getFullString=function(t,e){e===void 0&&(e={});var r=[],i=t||this;return i.forEach(function(l){return r.push(l.getFullName(e))}),e.sort&&r.sort(),r.join("").trim()},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,r=t.array,i=[],l=this.map(function(f){return f.getFullName(t)}).sort();return e?l.forEach(function(f,p){i=i.concat(Do(l.slice(p+1),f))}):i=l,r?i:e?i.join(","):i.join("")},n}(m.FE);const Jn=Nn;Nn.prototype.model=yr;var Vn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),si=function(){return si=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},si.apply(this,arguments)},Dr=function(a){Vn(n,a);function n(t,e){var r=a.call(this,t)||this,i=r.attributes,l=i.target,f=i.name;return!r.get("id")&&r.set("id",f),l&&r.setTarget(l),r.em=e,r}return n.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",changeProp:!1,options:[]}},n.prototype.setTarget=function(t){if(t){var e=this.attributes,r=e.name,i=e.changeProp,l=e.value;this.target=t,this.unset("target");var f=i?"change:".concat(r):"change:attributes:".concat(r);this.listenTo(t,f,this.targetUpdated);var p=l||this.getValue();!(0,L.isUndefined)(p)&&this.set({value:p},{silent:!0})}},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,i=r===void 0?!0:r,l=this.getId(),f=this.get("label")||this.getName();return i&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||f},n.prototype.getValue=function(){return this.getTargetValue()},n.prototype.setValue=function(t,e){var r=this,i;e===void 0&&(e={});var l={},f=this.get("setValue");if(f){f({value:t,editor:(i=this.em)===null||i===void 0?void 0:i.getEditor(),trait:this,component:this.target,partial:!!e.partial,emitUpdate:function(){return r.targetUpdated()}});return}e.partial&&(l.avoidStore=!0),this.setTargetValue(t,l),e.partial===!1&&(this.setTargetValue(""),this.setTargetValue(t))},n.prototype.getDefault=function(){return this.get("default")},n.prototype.getOptions=function(){return this.get("options")||[]},n.prototype.getOption=function(t){var e=this,r=(0,ct.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(i){return e.getOptionId(i)===r})[0]},n.prototype.getOptionId=function(t){return t.id||t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var i=e.locale,l=i===void 0?!0:i,f=(0,L.isString)(t)?this.getOption(t):t,p=this.getOptionId(f),h=f.label||f.name||p,g=this.getName();return l&&((r=this.em)===null||r===void 0?void 0:r.t("traitManager.traits.options.".concat(g,".").concat(p)))||h},n.prototype.props=function(){return this.attributes},n.prototype.targetUpdated=function(){var t,e=this.getTargetValue();this.set({value:e},{fromTarget:1}),(t=this.em)===null||t===void 0||t.trigger("trait:update",{trait:this,component:this.target})},n.prototype.getTargetValue=function(){var t,e=this.getName(),r=this.target,i=this.get("getValue"),l;return i?l=i({editor:(t=this.em)===null||t===void 0?void 0:t.getEditor(),trait:this,component:r}):this.get("changeProp")?l=r.get(e):l=r.getAttributes()[e],(0,L.isUndefined)(l)?"":l},n.prototype.setTargetValue=function(t,e){var r;e===void 0&&(e={});var i=this,l=i.target,f=i.attributes,p=this.getName();if(!(0,L.isUndefined)(t)){var h=t;if(t==="false"?h=!1:t==="true"&&(h=!0),this.getType()==="checkbox"){var g=f.valueTrue,w=f.valueFalse;h&&!(0,L.isUndefined)(g)&&(h=g),!h&&!(0,L.isUndefined)(w)&&(h=w)}this.get("changeProp")?l.set(p,h,e):l.addAttributes((r={},r[p]=h,r),e)}},n.prototype.setValueFromInput=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var i={value:t};this.set(i,si(si({},r),{avoidStore:1})),e&&(this.set("value","",r),this.set(i,r))},n.prototype.getInitValue=function(){var t=this.target,e=this.getName(),r;if(t){var i=t.get("attributes");r=this.get("changeProp")?t.get(e):i[e]}return r||this.get("value")||this.get("default")},n}(m.Hn);const gi=Dr;var Yi=function(){function a(n){n===void 0&&(n={}),this.config=n}return a.prototype.build=function(n,t){return(0,L.isString)(n)?this.buildFromString(n,t):new gi(n,t)},a.prototype.buildFromString=function(n,t){var e={name:n,type:"text"};switch(n){case"target":e.type="select",e.default=!1,e.options=this.config.optionsTarget;break}return new gi(e,t)},a}();const Ci=Yi;var Fa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ks=function(a){Fa(n,a);function n(t,e){var r,i=a.call(this,t)||this;i.em=e.em,i.listenTo(i,"add",i.handleAdd),i.listenTo(i,"reset",i.handleReset);var l=(r=i.em)===null||r===void 0?void 0:r.Traits,f=l==null?void 0:l.getConfig();return i.tf=new Ci(f),i}return n.prototype.handleReset=function(t,e){var r=e===void 0?{}:e,i=r.previousModels,l=i===void 0?[]:i;l.forEach(function(f){return f.trigger("remove")})},n.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e)},n.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(e){return e.setTarget(t)})},n.prototype.add=function(t,e){if(t!=null){var r=this,i=r.target,l=r.em;if((0,L.isArray)(t)){for(var f=[],p=0,h=t.length;p<h;p++){var g=t[p];f[p]=g instanceof gi?g:this.tf.build(g,l),f[p].setTarget(i)}return a.prototype.add.call(this,f,e)}var w=t instanceof gi?t:this.tf.build(t,l);return w.setTarget(i),a.prototype.add.call(this,w,e)}},n}(m.FE);const As=ks;var Na=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qe=function(){return Qe=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qe.apply(this,arguments)},Va=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},fn=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Io=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Xi=function(a){return!!(a!=null&&a.getConfig().avoidInlineStyle)},Si="component:drag",on="__symbols",Pn="__symbol",jo="__symbol_ovrd",Oi="component:update",Qn="".concat(Oi,"-inside"),Ls=function(a){Na(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t;return t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,locked:!1,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null},t[Pn]=0,t[on]=0,t[jo]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.updated=function(t,e,r){},n.prototype.removed=function(){},n.prototype.initialize=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,L.bindAll)(this,"__upSymbProps","__upSymbCls","__upSymbComps");var i=e.em,l=this.parent(),f=l==null?void 0:l.attributes,p=this.get("propagate");if(p&&this.set("propagate",(0,L.isArray)(p)?p:[p]),f&&f.propagate&&!p){var h={},g=f.propagate;g.forEach(function(vt){return h[vt]=l.get(vt)}),h.propagate=g,this.set(Qe(Qe({},h),t))}if(e&&e.config&&e.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),e.em=i,this.opt=e,this.em=i,this.frame=e.frame,this.config=e.config||{},this.set("attributes",Qe(Qe({},(0,L.result)(this,"defaults").attributes||{}),this.get("attributes")||{})),this.ccid=n.createId(this,e),this.initClasses(),this.initComponents(),this.initTraits(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.on("change:toolbar",this.__emitUpdateTlb),this.on("change",this.__onChange),this.on(Qn,this.__propToParent),this.set("status",""),this.views=[],["classes","traits","components"].forEach(function(vt){var _t="add remove ".concat(vt!=="components"?"change":"");r.listenTo(r.get(vt),_t.trim(),function(){for(var At=[],Zt=0;Zt<arguments.length;Zt++)At[Zt]=arguments[Zt];return r.emitUpdate.apply(r,fn([vt],At,!1))})}),!e.temporary){var w=i&&i.Css,M=this.attributes,Z=M.styles,nt=M.type;Z&&w&&w.addCollection(Z,{avoidUpdateStyle:!0},{group:"cmp:".concat(nt)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),i&&i.trigger("component:create",this)}},n.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,r=e==null?void 0:e.UndoManager,i=this.components();r&&!this.__hasUm&&(r.add(i),r.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&i.map(function(l){return l.__postAdd(t)})},n.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.get("UndoManager");e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},n.prototype.__onChange=function(t,e){var r=this,i=this.changedAttributes()||{};(0,L.keys)(i).forEach(function(l){return r.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete i[l]}),(0,ct.isEmptyObj)(i)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:i,options:e}))},n.prototype.__changesUp=function(t){var e=this,r=e.em,i=e.frame;[i,r].forEach(function(l){return l&&l.changesUp(t)})},n.prototype.__propSelfToParent=function(t){this.trigger(Oi,t),this.__propToParent(t)},n.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Qn,t)},n.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},n.prototype.is=function(t){return this.get("type")==t},n.prototype.props=function(){return this.attributes},n.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(){return this.get("dmode")||""},n.prototype.find=function(t){var e,r=[],i=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return i==null||i.each(function(l){var f=i.eq(l),p=f.data("model");p&&r.push(p)}),r},n.prototype.findType=function(t){var e=[],r=function(i){return i.forEach(function(l){l.is(t)&&e.push(l),r(l.components())})};return r(this.components()),e},n.prototype.closest=function(t){var e,r=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return r!=null&&r.length?r.data("model"):void 0},n.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},n.prototype.contains=function(t){var e=!1;if(!t)return e;var r=function(i){!e&&i.forEach(function(l){l===t&&(e=!0),!e&&r(l.components())})};return r(this.components()),e},n.prototype.tagUpdated=function(){this.trigger("rerender")},n.prototype.replaceWith=function(t){var e=this.collection,r=e.indexOf(this);return e.remove(this),e.add(t,{at:r})},n.prototype.attrUpdated=function(t,e,r){var i=this;r===void 0&&(r={});var l=this.get("attributes"),f=l.class;f&&this.setClass(f),delete l.class;var p=l.style;p&&this.setStyle(p),delete l.style;var h=Qe({},this.previous("attributes")),g=(0,ct.shallowDiff)(h,this.get("attributes"));(0,L.keys)(g).forEach(function(w){return i.trigger("change:attributes:".concat(w),i,g[w],r)})},n.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",Qe({},t),e),this},n.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(Qe(Qe({},this.getAttributes({noClass:!0})),t),e)},n.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=Array.isArray(t)?t:[t],i=this.getAttributes();return r.map(function(l){return delete i[l]}),this.setAttributes(i,e)},n.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=this.em,i=(0,L.isString)(t)?t:"",l=i?e:t;if(Xi(r)&&!l.inline){var f=r.get("state"),p=r.Css,h=p.getIdRule(this.getId(),Qe({state:f},l));if(this.rule=h,h)return h.getStyle(i)}return a.prototype.getStyle.call(this,i)},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={});var i=this,l=i.opt,f=i.em;if(Xi(f)&&!l.temporary&&!e.inline){var p=this.get("style")||{};t=(0,L.isString)(t)?this.parseStyle(t):t,t=Qe(Qe({},t),p);var h=f.get("state"),g=f.Css,w=this.getStyle(e);this.rule=g.setIdRule(this.getId(),t,Qe({state:h},e));var M=(0,ct.shallowDiff)(w,t);this.set("style","",{silent:!0}),(0,L.keys)(M).forEach(function(Z){return r.trigger("change:style:".concat(Z))})}else t=a.prototype.setStyle.apply(this,arguments);return t},n.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,r=[],i=Qe({},this.get("attributes")),l=e==null?void 0:e.Selectors,f=this.getId();if(t.noClass?delete i.class:(this.classes.forEach(function(g){return r.push((0,L.isString)(g)?g:g.get("name"))}),r.length&&(i.class=r.join(" "))),!t.noStyle){var p=this.get("style");(0,ct.isObject)(p)&&!(0,ct.isEmptyObj)(p)&&(i.style=this.styleToString({inline:1}))}if(!(0,L.has)(i,"id")){var h=!1;(Xi(e)||!(0,L.isEmpty)(this.getStyle()))&&(h=!!(l!=null&&l.get(f,l.Selector.TYPE_ID))),(this.__getSymbol()||this.__getSymbols())&&(h=!0),h&&(i.id=f)}return i},n.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},n.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},n.prototype.removeClass=function(t){var e=[];t=(0,L.isArray)(t)?t:[t];var r=this.classes,i=yr.TYPE_CLASS;return t.forEach(function(l){var f=l.split(" ");f.forEach(function(p){var h=r.where({name:p,type:i})[0];h&&e.push(r.remove(h))})}),e},n.prototype.getClasses=function(){var t=this.getAttributes(),e=t.class;return e?e.split(" "):[]},n.prototype.__logSymbol=function(t,e,r){r===void 0&&(r={});var i=this.__getSymbol(),l=this.__getSymbols();!i&&!l||this.em.log(t,{model:this,toUp:e,context:"symbols",opts:r})},n.prototype.__initSymb=function(){this.__symbReady||(this.on("change",this.__upSymbProps),this.__symbReady=!0)},n.prototype.__isSymbol=function(){return(0,L.isArray)(this.get(on))},n.prototype.__isSymbolOrInst=function(){return!!(this.__isSymbol()||this.get(Pn))},n.prototype.__isSymbolTop=function(){var t=this.parent(),e=this.__isSymbolOrInst();return e&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},n.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop(),r=e.__isSymbol()?e:e.__getSymbol();return r!==t},n.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},n.prototype.__getSymbol=function(){var t=this.get(Pn);if(t&&(0,L.isString)(t)){var e=this.__getAllById()[t];e?(t=e,this.set(Pn,e)):t=0}return t},n.prototype.__getSymbols=function(){var t=this,e=this.get(on);return e&&(0,L.isArray)(e)&&(e.forEach(function(r,i){r&&(0,L.isString)(r)&&(e[i]=t.__getAllById()[r])}),e=e.filter(function(r){return r&&!(0,L.isString)(r)})),e},n.prototype.__isSymbOvrd=function(t){t===void 0&&(t="");var e=this.get(jo),r=t.split(":")[0],i=t!==r?[t,r]:[t];return e===!0||(0,L.isArray)(e)&&i.some(function(l){return e.indexOf(l)>=0})},n.prototype.__getSymbToUp=function(t){var e=this;t===void 0&&(t={});var r=[],i=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||i&&this.__isSymbOvrd(i))return r;var l=this.__getSymbols()||[],f=this.__getSymbol(),p=f?fn([f],f.__getSymbols()||[],!0):l;return r=p.filter(function(h){return h!==e}).filter(function(h){return!(i&&h.__isSymbOvrd(i))}),r},n.prototype.__getSymbTop=function(t){for(var e=this,r=this.parent(t);r&&(r.__isSymbol()||r.__getSymbol());)e=r,r=r.parent(t);return e},n.prototype.__upSymbProps=function(t,e){var r=this;e===void 0&&(e={});var i=this.changedAttributes()||{},l=i.attributes||{};if(delete i.status,delete i.open,delete i[on],delete i[Pn],delete i[jo],delete i.attributes,delete l.id,(0,ct.isEmptyObj)(l)||(i.attributes=l),!(0,ct.isEmptyObj)(i)){var f=this.__getSymbToUp(e);(0,L.keys)(i).map(function(p){r.__isSymbOvrd(p)&&delete i[p]}),this.__logSymbol("props",f,{opts:e,changed:i}),f.forEach(function(p){var h=Qe({},i);(0,L.keys)(h).map(function(g){p.__isSymbOvrd(g)&&delete h[g]}),p.set(h,Qe({fromInstance:r},e))})}},n.prototype.__upSymbCls=function(t,e,r){var i=this;r===void 0&&(r={});var l=this.__getSymbToUp(r);this.__logSymbol("classes",l,{opts:r}),l.forEach(function(f){f.set("classes",i.get("classes"),{fromInstance:i})}),this.__changesUp(r)},n.prototype.__upSymbComps=function(t,e,r){var i=this,l=r||e||{},f=l.fromInstance,p=l.fromUndo,h={fromInstance:f,fromUndo:p},g=t.opt.temporary;if(r)if(r.add){var Z=[],nt=!!this.__getSymbols(),w=this.__getSymbToUp(Qe(Qe({},h),{changed:"components:add"}));if(w.length){var vt=t.__getSymbol();Z=(vt?vt.__getSymbols():t.__getSymbols())||[],Z=fn([],Z,!0),Z.push(vt||t)}!g&&this.__logSymbol("add",w,{opts:r,addedInstances:Z.map(function(ge){return ge.cid}),added:t.cid}),w.forEach(function(ge){var Ke=ge.__getSymbTop(),ar=Z.filter(function(ye){var vn=ye.__getSymbTop({prev:1});return Ke&&vn&&vn===Ke})[0],un=ar||t.clone({symbol:!0,symbolInv:nt});ge.append(un,Qe({fromInstance:i},r))})}else{var _t=t.__getSymbol();if(_t&&!r.temporary&&_t.set(on,_t.__getSymbols().filter(function(Ze){return Ze!==t})),!t.__isSymbolTop()){var At="components:remove",Zt=r.index,Kt=t.parent(),he=Qe({fromInstance:t},r),Ce=t.__isSymbolNested(),Re=function(ge){var Ke=ge.parent();Ke&&!Ke.__isSymbOvrd(At)&&ge.remove(he)},w=Kt!=null&&Kt.__isSymbOvrd(At)?[]:t.__getSymbToUp(h);Ce&&(w=Kt==null?void 0:Kt.__getSymbToUp(Qe(Qe({},h),{changed:At})),Re=function(ge){var Ke=ge.components().at(Zt);Ke&&Ke.remove(Qe({fromInstance:Kt},he))}),!g&&this.__logSymbol("remove",w,{opts:r,removed:t.cid,isSymbNested:Ce}),w.forEach(Re)}}else{var w=this.__getSymbToUp(Qe(Qe({},h),{changed:"components:reset"})),M=t.models;this.__logSymbol("reset",w,{components:M}),w.forEach(function(Ze){var ge=M.map(function(Ke){return Ke.clone({symbol:!0})});Ze.components().reset(ge,Qe({fromInstance:i},e))})}this.__changesUp(l)},n.prototype.initClasses=function(t,e,r){r===void 0&&(r={});var i="change:classes",l=this.get("attributes")||{},f=l.class,p=Va(l,["class"]),h=[this,i,this.initClasses],g=this.get("classes")||f||[],w=(0,L.isString)(g)?g.split(" "):g;this.stopListening.apply(this,h);var M=this.normalizeClasses(w),Z=new Jn([]);return this.set("classes",Z,r),Z.add(M),Z.on("add remove reset",this.__upSymbCls),f&&M.length&&this.set("attributes",p),this.listenTo.apply(this,h),this},n.prototype.initComponents=function(){var t="change:components",e=[this,t,this.initComponents];this.stopListening.apply(this,e);var r=new Zi([],this.opt);r.parent=this;var i=this.get("components"),l=!this.opt.avoidChildren;return this.set("components",r),l&&i&&r.add((0,L.isFunction)(i)?i(this):i,this.opt),r.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,e),this},n.prototype.initTraits=function(t){var e=this.em,r="change:traits";this.off(r,this.initTraits),this.__loadTraits();var i=Qe({},this.get("attributes")),l=this.traits;return l.each(function(f){if(!f.get("changeProp")){var p=f.get("name"),h=f.getInitValue();p&&h&&(i[p]=h)}}),l.length&&this.set("attributes",i),this.on(r,this.initTraits),t&&e&&e.trigger("component:toggled"),this},n.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var r=this.previous(t)||[],i=this.get(t)||[],l=r.map(function(p){return"change:".concat(p)}).join(" "),f=i.map(function(p){return"change:".concat(p)}).join(" ");l&&this.off(l,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,e)}},n.prototype.__scriptPropsChange=function(t,e,r){r===void 0&&(r={}),!r.avoidStore&&this.trigger("rerender")},n.prototype.append=function(t,e){e===void 0&&(e={});var r=(0,L.isArray)(t)?fn([],t,!0):[t],i=r.map(function(f){return(0,L.isString)(f)||f.collection&&f.collection.remove(f,{temporary:!0}),f}),l=this.components().add(i,e);return(0,L.isArray)(l)?l:[l]},n.prototype.components=function(t,e){e===void 0&&(e={});var r=this.get("components");return(0,L.isUndefined)(t)?r:(r.reset(void 0,e),t?this.append(t,e):[])},n.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},n.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},n.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},n.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},n.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},n.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},n.prototype.initToolbar=function(){var t=this.em,e=this,r=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var i=[];e.collection&&i.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&i.push({attributes:{class:"".concat(r,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&i.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&i.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",i)}},n.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var r=t||this.traits;if(!(r instanceof As)){r=(0,L.isFunction)(r)?r(this):r;var i=new As([],this.opt);i.setTarget(this),r.length&&(r.forEach(function(l){return l.attributes&&delete l.attributes.value}),i.add(r)),this.set({traits:i},e)}return this},n.prototype.getTraits=function(){return this.__loadTraits(),fn([],this.traits.models,!0)},n.prototype.setTraits=function(t){var e=(0,L.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},n.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},n.prototype.updateTrait=function(t,e){var r,i=this.getTrait(t);return i&&i.set(e),(r=this.em)===null||r===void 0||r.trigger("component:toggled"),this},n.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},n.prototype.removeTrait=function(t){var e=this,r,i=(0,L.isArray)(t)?t:[t],l=i.map(function(h){return e.getTrait(h)}),f=this.traits,p=l.length?f.remove(l):[];return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,L.isArray)(p)?p:[p]},n.prototype.addTrait=function(t,e){var r;e===void 0&&(e={}),this.__loadTraits();var i=this.traits.add(t,e);return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,L.isArray)(i)?i:[i]},n.prototype.normalizeClasses=function(t){var e=[],r=this.em,i=r==null?void 0:r.Selectors;return i?t.models?fn([],t.models,!0):(t.forEach(function(l){return e.push(i.add(l))}),e):[]},n.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,r=Qe({},this.attributes),i=Qe({},this.opt),l=this.getId(),f=e==null?void 0:e.Css;r.attributes=Qe({},r.attributes),delete r.attributes.id,r.components=[],r.classes=[],r.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get("components").each(function(nt,vt){r.components[vt]=nt.clone(Qe(Qe({},t),{_inner:1}))}),this.get("traits").each(function(nt,vt){r.traits[vt]=nt.clone()}),this.get("classes").each(function(nt,vt){r.classes[vt]=nt.get("name")}),r.status="",i.collection=null;var p=new this.constructor(r,i),h="#".concat(p.getId()),g=f?f.getRules("#".concat(l)):[];g.forEach(function(nt){var vt=nt.clone();vt.set("selectors",[h]),f.getAll().add(vt)}),p.set(on,0);var w=this.__getSymbol(),M=this.__getSymbols();!t.symbol&&(w||M)?(p.set(Pn,0),p.set(on,0)):w?(w.set(on,fn(fn([],w.__getSymbols(),!0),[p],!1)),p.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(on,fn(fn([],M,!0),[p],!1)),p.set(Pn,this),p.__initSymb()):t.symbolInv?(this.set(on,[p]),p.set(Pn,this),[this,p].map(function(nt){return nt.__initSymb()})):(p.set(on,[this]),[this,p].map(function(nt){return nt.__initSymb()}),this.set(Pn,p)));var Z="component:clone";return e&&e.trigger(Z,p),this.trigger(Z,p),p},n.prototype.getName=function(t){t===void 0&&(t={});var e=this.em,r=this.attributes,i=r.type,l=r.tagName,f=r.name,p=i||l,h=i?"":l,g="domComponents.names.",w=f&&(e==null?void 0:e.t("".concat(g).concat(f))),M=h&&(e==null?void 0:e.t("".concat(g).concat(h))),Z=e&&(e.t("".concat(g).concat(i))||e.t("".concat(g).concat(l))),nt=this.get("custom-name");return(t.noCustom?"":nt)||w||f||M||(0,ct.capitalize)(h)||Z||(0,ct.capitalize)(p)},n.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},n.prototype.toHTML=function(t){t===void 0&&(t={});var e=this,r=[],i=t.tag,l=i||e.get("tagName"),f=e.get("void"),p=t.attributes,h=this.getAttrToHTML();if(delete t.tag,p&&((0,L.isFunction)(p)?h=p(e,h)||{}:(0,ct.isObject)(p)&&(h=p)),t.withProps){var g=this.toJSON();(0,L.forEach)(g,function(Zt,Kt){var he=["classes","attributes","components"];Kt[0]!=="_"&&he.indexOf(Kt)<0&&(h["data-gjs-".concat(Kt)]=(0,L.isArray)(Zt)||(0,ct.isObject)(Zt)?JSON.stringify(Zt):Zt)})}for(var w in h){var M=h[w];if(!(0,L.isUndefined)(M)&&M!==null)if((0,L.isBoolean)(M))M&&r.push(w);else{var Z="";if(t.altQuoteAttr&&(0,L.isString)(M)&&M.indexOf('"')>=0)Z="'".concat(M.replace(/'/g,"&apos;"),"'");else{var nt=(0,L.isString)(M)?M.replace(/"/g,"&quot;"):M;Z='"'.concat(nt,'"')}r.push("".concat(w,"=").concat(Z))}}var vt=r.length?" ".concat(r.join(" ")):"",_t=e.getInnerHTML(t),At="<".concat(l).concat(vt).concat(f?"/":"",">").concat(_t);return!f&&(At+="</".concat(l,">")),At},n.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},n.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(r){return r.toHTML(t)}).join(""):this.content},n.prototype.getAttrToHTML=function(){var t=this.getAttributes();return Xi(this.em)&&delete t.style,t},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=gt.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,!t.fromUndo){var r=e[Pn],i=e[on];i&&(0,L.isArray)(i)&&(e[on]=i.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),r&&!(0,L.isString)(r)&&(e[Pn]=r.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},n.prototype.getChangedProps=function(t){var e=t||gt.Model.prototype.toJSON.apply(this),r=(0,L.result)(this,"defaults");return(0,L.forEach)(r,function(i,l){["type"].indexOf(l)===-1&&e[l]===i&&delete e[l]}),(0,L.isEmpty)(e.type)&&delete e.type,(0,L.forEach)(["attributes","style"],function(i){(0,L.isEmpty)(r[i])&&(0,L.isEmpty)(e[i])&&delete e[i]}),(0,L.forEach)(["classes","components"],function(i){(!e[i]||(0,L.isEmpty)(r[i])&&!e[i].length)&&delete e[i]}),e},n.prototype.getId=function(){var t=this.get("attributes")||{};return t.id||this.ccid||this.cid},n.prototype.setId=function(t,e){var r=Qe({},this.get("attributes"));return r.id=t,this.set("attributes",r,e),this},n.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},n.prototype.getView=function(t){var e=this,r=e.view,i=e.views,l=e.em,f=t||(l==null?void 0:l.getCurrentFrameModel());return f&&(r=i.filter(function(p){return p.frameView===f.view})[0]),r},n.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=t==null?void 0:t.model;return this.getView(e)},n.prototype.__getScriptProps=function(){var t=this.props(),e=this.get("script-props")||[];return e.reduce(function(r,i){return r[i]=t[i],r},{})},n.prototype.getScriptString=function(t){var e=this,r=t||this.get("script")||"";if(!r)return r;if(this.get("script-props"))r=r.toString().trim();else{if((0,L.isFunction)(r)){var i=r.toString().trim();i=i.slice(i.indexOf("{")+1,i.lastIndexOf("}")),r=i.trim()}var l=this.em.getConfig(),f=Io(l.tagVarStart||"{[ "),p=Io(l.tagVarEnd||" ]}"),h=new RegExp("".concat(f,"([\\w\\d-]*)").concat(p),"g");r=r.replace(h,function(g,w){e.scriptUpdated();var M=e.attributes[w]||"";return(0,L.isArray)(M)||typeof M=="object"?JSON.stringify(M):M})}return r},n.prototype.emitUpdate=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var l=this.em,f=Oi+(t?":".concat(t):""),p=t&&this.get(t);t&&this.updated.apply(this,fn([t,p,t&&this.previous(t)],r,!1)),this.trigger.apply(this,fn([f],r,!1)),l&&l.trigger.apply(l,fn([f,this],r,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=p,e),options:r[2]||r[1]||{}})},n.prototype.onAll=function(t){return(0,L.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},n.prototype.forEachChild=function(t){(0,L.isFunction)(t)&&this.components().forEach(function(e){t(e),e.forEachChild(t)})},n.prototype.remove=function(t){var e=this;t===void 0&&(t={});var r=this.em,i=this.collection,l=function(){i&&i.remove(e,Qe(Qe({},t),{action:"remove-component"})),i||(e.components("",t),e.components().removeChildren(e,void 0,t))},f=Qe({},t);return[this,r].map(function(p){return p.trigger("component:remove:before",e,l,f)}),!f.abort&&l(),this},n.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var r=e.at,i=this.index(),l=t===this.parent(),f=i===r||i===r-1;(!l||!f)&&(l&&r&&r>i&&(e.at=r-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},n.prototype.isInstanceOf=function(t){var e,r,i=(r=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||r===void 0?void 0:r.model;return i?this instanceof i:!1},n.prototype.isChildOf=function(t){for(var e=(0,L.isString)(t),r=this.parent();r;){if(e){if(r.isInstanceOf(t))return!0}else if(r===t)return!0;r=r.parent()}return!1},n.prototype.resetId=function(t){var e=this.em,r=this.getId();if(!r)return this;var i=n.createId(this);this.setId(i);var l=e==null?void 0:e.Css.getIdRule(r),f=l==null?void 0:l.get("selectors").at(0);return f==null||f.set("name",i),this},n.prototype._getStyleRule=function(t){var e=t===void 0?{}:t,r=e.id,i=this.em,l=r||this.getId();return i==null?void 0:i.Css.getIdRule(l)},n.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},n.prototype._idUpdated=function(t,e,r){if(r===void 0&&(r={}),!r.idUpdate){var i=this.ccid,l=(this.get("attributes")||{}).id,f=(this.previous("attributes")||{}).id||i,p=n.getList(this);if(p[l]||!l&&f)return this.setId(f,{idUpdate:!0});delete p[f],p[l]=this,this.ccid=l;var h=this._getStyleSelector({id:f});h&&h.set({name:l,label:l})}},n.getDefaults=function(){return(0,L.result)(this.prototype,"defaults")},n.isComponent=function(t){return{tagName:(0,ct.toLowerCase)(t.tagName)}},n.ensureInList=function(t){var e=n.getList(t),r=t.getId(),i=e[r];if(!i)e[r]=t;else if(i!==t){var l=n.getIncrementId(r,e);t.setId(l),e[l]=t}t.components().forEach(function(f){return n.ensureInList(f)})},n.createId=function(t,e){e===void 0&&(e={});var r=n.getList(t),i=e.idMap,l=i===void 0?{}:i,f=t.get("attributes").id,p;return f?(p=n.getIncrementId(f,r,e),t.setId(p),f!==p&&(l[f]=p)):p=n.getNewId(r),r[p]=t,p},n.getNewId=function(t){for(var e=Object.keys(t).length,r=e.toString().length+2,i=(Math.random()+1.1).toString(36).slice(-r),l="i".concat(i);t[l];)l=n.getNewId(t);return l},n.getIncrementId=function(t,e,r){r===void 0&&(r={});var i=r.keepIds,l=i===void 0?[]:i,f=1,p=t;if(l.indexOf(t)<0)for(;e[p];)f++,p="".concat(t,"-").concat(f);return p},n.getList=function(t){var e=t.opt,r=e===void 0?{}:e,i=r.domc,l=r.em,f=i||(l==null?void 0:l.Components);return f?f.componentsById:{}},n.checkId=function(t,e,r,i){e===void 0&&(e=[]),r===void 0&&(r={}),i===void 0&&(i={});var l=(0,L.isArray)(t)?t:[t],f=i.keepIds,p=f===void 0?[]:f;l.forEach(function(h){h.attributes;var g=h.attributes,w=g===void 0?{}:g,M=h.components,Z=w.id;if(Z&&r[Z]&&p.indexOf(Z)<0){var nt=n.getIncrementId(Z,r);w.id=nt,(0,L.isArray)(e)&&e.forEach(function(vt){var _t=vt.selectors;_t.forEach(function(At,Zt){At==="#".concat(Z)&&(_t[Zt]="#".concat(nt))})})}M&&n.checkId(M,e,r,i)})},n}(Lo);const Kr=Ls;var Ji=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dn=function(){return dn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},dn.apply(this,arguments)},Ir=function(a){Ji(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return dn(dn({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var t=this.content,e=this.parent();return e!=null&&e.is("script")?t:this.__escapeContent(t)},n.prototype.__escapeContent=function(t){return(0,ct.escapeNodeContent)(t)},n.isComponent=function(t){var e;if(t.nodeType===3)return{type:"textnode",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(Kr);const Ha=Ir;var Ba=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),li=function(){return li=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},li.apply(this,arguments)},Ms=function(a){Ba(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return li({},a.prototype.defaults)},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},n.isComponent=function(t){var e;if(t.nodeType==8)return{tagName:"NULL",type:"comment",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(Ha);const Qi=Ms;var Ds=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ti=function(){return Ti=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ti.apply(this,arguments)},mi="iframe",Is=function(a){Ds(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ti(Ti({},a.prototype.defaults),{type:mi,tagName:mi,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)===mi},n}(Kr);const js=Is;var za=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),to=function(){return to=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},to.apply(this,arguments)},fa='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',Ei=function(a){za(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return to(to({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(fa,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(fa,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("attributes").src;r&&(0,ct.buildBase64UrlFromSvg)((0,L.result)(this,"defaults").src)!==r&&this.set("src",r,{silent:!0})},n.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e=t.Commands,r="image-editor";if(e.has(r)){for(var i=!1,l=this.get("toolbar"),f=0;f<l.length;f++)if(l[f].command==="image-editor"){i=!0;break}i||(l.push({attributes:{class:"fa fa-pencil"},command:r}),this.set("toolbar",l))}}},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},n.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",r=e;return e&&e.substr(0,4)==="<svg"&&(r=(0,ct.buildBase64UrlFromSvg)(e)),r},n.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,L.result)(this,"defaults").src;return t===e||t===(0,ct.buildBase64UrlFromSvg)(e)},n.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),r=e.attributes;return r&&e.src===r.src&&delete e.src,e},n.prototype.parseUri=function(t){var e={},r=function(i){i===void 0&&(i="");for(var l={},f=i.substring(1).split("&"),p=0;p<f.length;p++){var h=f[p].split("="),g=decodeURIComponent(h[0]);g&&(l[g]=decodeURIComponent(h[1]||""))}return l};if((0,ct.hasWin)())e=document.createElement("a"),e.href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:r(e.search)}},n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)==="img"},n}(Kr);const Hn=Ei;var eo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ro=function(){return ro=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ro.apply(this,arguments)},D=function(a){eo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ro(ro({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e),this.__checkInnerChilds()},n.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var e=function(r){r.isInstanceOf("textnode")||r.set({locked:!0,layerable:!1})};(0,L.isFunction)(t)?this.forEachChild(function(r){t(r)&&e(r)}):this.forEachChild(e)}},n}(Kr);const tt=D;var wt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ot=function(){return Ot=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ot.apply(this,arguments)},Gt="label",Bt=function(a){wt(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ot(Ot({},a.prototype.defaults),{type:Gt,tagName:Gt,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)===Gt},n}(tt);const ie=Bt;var be=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ge=function(){return Ge=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ge.apply(this,arguments)},He="link",vr=function(a){be(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ge(Ge({},a.prototype.defaults),{type:He,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){e===void 0&&(e={});var r;if((0,ct.toLowerCase)(t.tagName)==="a"){var i=e.textTags||[];r={type:He,editable:!1};var l=t.childNodes,f=l.length;f||delete r.editable,(0,L.forEach)(l,function(p){var h=p.tagName;(p.nodeType==3&&p.textContent.trim()!==""||h&&i.indexOf((0,ct.toLowerCase)(h))>=0)&&delete r.editable})}return r},n}(tt);const Yr=vr;var Ua=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ro=function(){return Ro=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ro.apply(this,arguments)},bf=function(a){Ua(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return Ro(Ro({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){this.get("src")?this.parseFromSrc():this.updateSrc(),a.prototype.initialize.call(this,t,e),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},n.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},n.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),r=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",r=r?"&t="+r:"";var i=this.get("mapUrl")+"?"+t+e+r;return i+="&output=embed",i},n.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")),e=t.query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)},n.isComponent=function(t){if((0,ct.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},n}(Hn);const xf=bf;var Au=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wa=function(){return Wa=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Wa.apply(this,arguments)},no="script",Lu=function(a){Au(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Wa(Wa({},a.prototype.defaults),{type:no,tagName:no,droppable:!1,draggable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){if((0,ct.toLowerCase)(t.tagName)==no){var e={type:no};return t.src&&(e.src=t.src,e.onload=t.onload),e}},n}(Kr);const Mu=Lu;var Tl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fo=function(){return Fo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Fo.apply(this,arguments)},Rs="svg",Fs=function(a){Tl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Fo(Fo({},a.prototype.defaults),{type:Rs,tagName:Rs,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)===Rs},n}(Kr);const ti=Fs;var Du=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),da=function(){return da=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},da.apply(this,arguments)},El=function(a){Du(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return da(da({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},n}(ti);const Iu=El;var ju=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pa=function(){return pa=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pa.apply(this,arguments)},Pl="table",Cf=function(a){ju(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return pa(pa({},a.prototype.defaults),{type:Pl,tagName:Pl,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("components");!r.length&&r.add({type:"tbody"})},n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)===Pl},n}(Kr);const Sf=Cf;var No=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pi=function(){return Pi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Pi.apply(this,arguments)},io="tbody",kl=function(a){No(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Pi(Pi({},a.prototype.defaults),{type:io,tagName:io,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("components"),i=this.get("columns"),l=this.get("rows");if(!r.length){for(var f=[];l--;){for(var p=[],h=i;h--;)p.push({type:"cell",classes:["cell"]});f.push({type:"row",classes:["row"],components:p})}r.add(f)}},n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)===io},n}(Kr);const Ga=kl;var Ru=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ha=function(){return ha=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ha.apply(this,arguments)},Vo=function(a){Ru(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ha(ha({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return["td","th"].indexOf((0,ct.toLowerCase)(t.tagName))>=0},n}(Kr);const Ho=Vo;var _n=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ui=function(){return ui=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ui.apply(this,arguments)},yi="tfoot",Ns=function(a){_n(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ui(ui({},a.prototype.defaults),{type:yi,tagName:yi})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)===yi},n}(Ga);const Of=Ns;var Fu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oo=function(){return oo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},oo.apply(this,arguments)},Vs="thead",Al=function(a){Fu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return oo(oo({},a.prototype.defaults),{type:Vs,tagName:Vs})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)===Vs},n}(Ga);const Hs=Al;var Tf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),va=function(){return va=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},va.apply(this,arguments)},Ll="tr",Ml=function(a){Tf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return va(va({},a.prototype.defaults),{tagName:Ll,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,ct.toLowerCase)(t.tagName)===Ll},n}(Kr);const Dl=Ml;var ga=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bo=function(){return Bo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Bo.apply(this,arguments)},Bs="video",ki="yt",ma="vi",ya="ytnc",Nu="so",Ka=function(a){return a&&a!=="0"},Il=function(a){ga(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Bo(Bo({},a.prototype.defaults),{type:Bs,tagName:Bs,videoId:"",void:!1,provider:Nu,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){this.em=e.em,this.get("src")&&this.parseFromSrc(),this.updatePropsFromAttr(),this.updateTraits(),this.on("change:provider",this.updateTraits),this.on("change:videoId change:provider",this.updateSrc),a.prototype.initialize.call(this,t,e)},n.prototype.updatePropsFromAttr=function(){if(this.get("provider")===Nu){var t=this.get("attributes"),e=t.controls,r=t.autoplay,i=t.loop,l={};(0,ct.isDef)(e)&&(l.controls=!!e),(0,ct.isDef)(r)&&(l.autoplay=!!r),(0,ct.isDef)(i)&&(l.loop=!!i),(0,ct.isEmptyObj)(l)||this.set(l)}},n.prototype.updateTraits=function(){var t=this.em,e=this.get("provider"),r="iframe",i;switch(e){case ki:case ya:i=this.getYoutubeTraits();break;case ma:i=this.getVimeoTraits();break;default:r="video",i=this.getSourceTraits()}this.set({tagName:r},{silent:!0}),this.set({traits:i}),t.get("ready")&&t.trigger("component:toggled")},n.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),r=e.query;switch(t){case ki:case ya:case ma:this.set("videoId",e.pathname.split("/").pop()),r.list&&this.set("list",r.list),Ka(r.autoplay)&&this.set("autoplay",!0),Ka(r.loop)&&this.set("loop",!0),parseInt(r.controls)===0&&this.set("controls",!1),Ka(r.color)&&this.set("color",r.color),r.rel==="0"&&this.set("rel",0),r.modestbranding==="1"&&this.set("modestbranding",1);break}},n.prototype.updateSrc=function(){var t=this.get("provider"),e="";switch(t){case ki:e=this.getYoutubeSrc();break;case ya:e=this.getYoutubeNoCookieSrc();break;case ma:e=this.getVimeoSrc();break}this.set({src:e})},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.get("provider");switch(e){case ki:case ya:case ma:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls")}return t},n.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:ki,name:"Youtube"},{value:ya,name:"Youtube (no cookie)"},{value:ma,name:"Vimeo"}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},n.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},n.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),r=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=r?"&list=".concat(r):"",e+=this.get("autoplay")?"&autoplay=1&muted=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":"",e},n.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl")),t},n.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):"",t},n.isComponent=function(t){var e=t.tagName,r=t.src,i=/youtube\.com\/embed/.test(r),l=/youtube-nocookie\.com\/embed/.test(r),f=/player\.vimeo\.com\/video/.test(r),p=i||l||f;if((0,ct.toLowerCase)(e)==Bs||(0,ct.toLowerCase)(e)=="iframe"&&p){var h={type:"video"};return r&&(h.src=r),p&&(i?h.provider=ki:l?h.provider=ya:f&&(h.provider=ma)),h}},n}(Hn);const _a=Il;var Za=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zs=function(){return zs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zs.apply(this,arguments)},Us=function(a){Za(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return zs(zs({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),n.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},n.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},n.isComponent=function(){return!1},n}(Kr);const Vu=Us;var $a=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hu=function(a){$a(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=Tr,t}return n.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},n.prototype.removeChildren=function(t,e,r){var i=this;r===void 0&&(r={}),t.views.forEach(function(f){if(f){var p=f.childrenView,h=f.scriptContainer;p&&p.stopListening(),(0,pe.L_)(h),f.remove.apply(f)}});var l=t.components();l.forEach(function(f){return i.removeChildren(f,e,r)})},n.prototype.addTo=function(t,e,r){r===void 0&&(r={});var i=this.em,l=this.collection.indexOf(t);if(this.addToCollection(t,null,l),i&&!r.temporary){var f=function(p){i.trigger("component:add",p),p.components().forEach(function(h){return f(h)})};f(t)}},n.prototype.addToCollection=function(t,e,r){for(var i=this,l=i.config,f=i.opts,p=i.em,h=e||null,g=l.frameView,w=(g==null?void 0:g.model)&&t.getView(g.model),M=f.componentTypes||(p==null?void 0:p.Components.getTypes()),Z=t.get("type")||"default",nt=this.compView,vt=0;vt<M.length;vt++)if(M[vt].id==Z){nt=M[vt].view;break}var _t=w||new nt({model:t,config:l,componentTypes:M}),At;try{At=_t.render().el}catch(Ce){At=document.createTextNode(""),p.logError(Ce)}if(h)h.appendChild(At);else{var Zt=this.parentEl,Kt=Zt.childNodes;if((0,L.isUndefined)(r))Zt.appendChild(At);else{var he=Kt.length==r;he&&r--,he||!Kt.length?Zt.appendChild(At):Zt.insertBefore(At,Kt[r])}}return t.opt.temporary||p==null||p.trigger("component:mount",t),At},n.prototype.resetChildren=function(t,e){var r=this,i=e===void 0?{}:e,l=i.previousModels,f=l===void 0?[]:l;this.parentEl.innerHTML="",f.forEach(function(p){return r.removeChildren(p,r.collection)}),t.each(function(p){return r.addToCollection(p)})},n.prototype.render=function(t){var e=this,r=this.el,i=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,i)}),r.innerHTML="",r.appendChild(i),this},n}(m.G7);const ao=Hu;var qa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wn=function(){return wn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},wn.apply(this,arguments)},Ya=function(a){qa(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.className=function(){return this.getClasses()},n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{},i=r.em,l=e.opt||{},f=this,p=f.$el,h=f.el;this.opts=t,this.modelOpt=l,this.config=r,this.em=i,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),p.data("model",e),(0,ct.setViewEl)(h,this),e.view=this,this.frameView&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=wn(wn({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},Object.defineProperty(n.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),n.prototype.__isDraggable=function(){var t=this,e=t.model,r=t.config,i=e.attributes.draggable;return r.draggableComponents&&i},n.prototype._clbObj=function(){var t=this,e=t.em,r=t.model,i=t.el;return{editor:e==null?void 0:e.getEditor(),model:r,el:i}},n.prototype.init=function(t){},n.prototype.removed=function(t){},n.prototype.onRender=function(t){},n.prototype.onActive=function(t){},n.prototype.onDisable=function(){},n.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this,r=e.model,i=e.$el,l=r.views,f=this.frameView||{};return r.components().forEach(function(p){var h=p.getView(f.model);h==null||h.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),l.splice(l.indexOf(this),1),this.removed(this._clbObj()),i.data({model:"",collection:"",view:""}),this},n.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},n.prototype.initClasses=function(){var t=this.model,e=t.classes,r="change:classes";e instanceof Jn&&(this.stopListening(t,r,this.initClasses),this.listenTo(t,r,this.initClasses),this.listenTo(e,"add remove change reset",this.updateClasses),e.length&&this.importClasses())},n.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,r=e.model,i=e.$el,l=e.childrenView,f="change:components",p=r.get("components"),h=[r,f,this.initComponents];p instanceof Zi&&(i.data("collection",p),l&&l.remove(),this.stopListening.apply(this,h),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,h))},n.prototype.handleChange=function(){var t=this.model,e=(0,L.keys)(t.changed);if(!(e.length===1&&e[0]==="status")){t.emitUpdate();for(var r in t.changed)t.emitUpdate(r)}},n.prototype.importClasses=function(){var t=this,e=t.em,r=t.model,i=e.Selectors;i&&r.classes.forEach(function(l){return i.add(l.get("name"))})},n.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,r=e.em,i=e.el,l=e.ppfx,f=e.model,p=r==null?void 0:r.Canvas,h=p==null?void 0:p.config.extHl,g=f.get("status"),w="".concat(l,"selected"),M="".concat(w,"-parent"),Z="".concat(l,"freezed"),nt="".concat(l,"hovered"),vt="".concat(l,"no-pointer"),_t=[w,M,Z,nt,vt],At=h&&!t.noExtHl?"":w;this.$el.removeClass(_t.join(" "));var Zt=i.getAttribute("class")||"",Kt=[Zt],he=!(p!=null&&p.hasCustomSpot(lr.q.Select)),Ce=!(p!=null&&p.hasCustomSpot(lr.q.Target));switch(g){case"selected":he&&Kt.push(At);break;case"selected-parent":Ce&&Kt.push(M);break;case"freezed":Kt.push(Z);break;case"freezed-selected":Kt.push(Z),he&&Kt.push(At);break;case"hovered":!t.avoidHover&&Kt.push(nt);break}f.get("locked")&&Kt.push(vt);var Re=Kt.filter(Boolean).join(" ");Re&&i.setAttribute("class",Re)},n.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),r=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",r?!0:"")},n.prototype.updateStyle=function(t,e,r){r===void 0&&(r={});var i=this,l=i.model,f=i.em;if(Xi(f)&&!r.inline){var p=this.__cmpStyleOpts,h=l.getStyle(p);!(0,L.isEmpty)(h)&&l.setStyle(h,p)}else this.setAttribute("style",l.styleToString(r))},n.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},n.prototype.setAttribute=function(t,e){var r=this.$el;e?r.attr(t,e):r.removeAttr(t)},n.prototype.getClasses=function(){return this.model.getClasses().join(" ")},n.prototype.updateAttributes=function(){var t=[],e=this,r=e.model,i=e.$el,l=e.el,f=r.attributes,p=f.textable,h=f.type,g=wn(wn({id:r.getId(),"data-gjs-type":h||"default"},this.__isDraggable()&&{draggable:!0}),p&&{contenteditable:"false"});(0,L.each)(l.attributes,function(M){return t.push(M.nodeName)}),t.forEach(function(M){return i.removeAttr(M)}),this.updateStyle(),this.updateHighlight();var w=wn(wn({},g),r.getAttributes());(0,L.keys)(w).forEach(function(M){return w[M]===!1&&delete w[M]}),i.attr(w)},n.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},n.prototype.prevDef=function(t){t.preventDefault()},n.prototype.updateScript=function(){var t=this,e=t.model,r=t.em;e.get("script")&&(r==null||r.Canvas.getCanvasView().updateScript(this))},n.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},n.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,r=0,i=0,l=function(f){var p=f.offsetParent;p?(r+=p.offsetTop,i+=p.offsetLeft,l(p)):(t.top=e.offsetTop+r,t.left=e.offsetLeft+i,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},n.prototype.isInViewport=function(){var t=this,e=t.el,r=t.em,i=t.frameView,l=r.Canvas.getCanvasView(),f=l.getElBoxRect(e,{local:!0}),p=i.el,h=p.clientHeight,g=p.clientWidth,w=f.y,M=f.x,Z=w+f.height,nt=M+f.width,vt=w>=0&&w<h,_t=Z>0&&Z<h,At=nt>=0&&nt<g,Zt=M>0&&M<=g,Kt=(vt||_t)&&(At||Zt);return Kt},n.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var r=this.isInViewport();if(!r||t.force){var i=this.el;if(t.behavior!=="smooth"){var l=this.getOffsetRect();(e=i.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,l.top)}else i.scrollIntoView(wn({behavior:"smooth",block:"nearest"},t))}},n.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,pe.dL)(t,this.el),this.render()},n.prototype._setData=function(){var t=this.model,e=t.components(),r=this;this.$el.data({model:t,collection:e,view:r})},n.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new ao({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var r=Array.prototype.slice.call(e.el.childNodes),i=0,l=r.length;i<l;i++)t.appendChild(r.shift())},n.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},n.prototype.onAttrUpdate=function(){},n.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,ct.setViewEl)(this.el,this),this.postRender(),this)},n.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},n.getEvents=function(){return(0,L.result)(this.prototype,"events")},n}(m.G7);const Tr=Ya;var Bu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zu=function(a){Bu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._setAttributes=function(){},n.prototype.renderAttributes=function(){},n.prototype.updateStatus=function(){},n.prototype.updateClasses=function(){},n.prototype.setAttribute=function(){},n.prototype.updateAttributes=function(){},n.prototype.initClasses=function(){},n.prototype.initComponents=function(){},n.prototype.delegateEvents=function(){return this},n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this,e=t.model,r=t.el;return e.opt.temporary?this:(r.textContent=e.content,this)},n}(Tr);const jl=zu;var Ef=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zo=function(a){Ef(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createComment(this.model.content)},n}(jl);const Uo=zo;var Pf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kf=function(a){Pf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},n.prototype.updateSrc=function(){var t=(0,pe.sE)(this.el,"iframe")[0];t&&(0,pe.FW)(t,{src:this.__getSrc()})},n.prototype.render=function(){a.prototype.render.call(this);var t=(0,pe.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},n.prototype.__getSrc=function(){return this.model.getAttributes().src||""},n}(Tr);const Af=kf;var Lf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mf=function(a){Lf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"img"},n.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,r=t.em,i=e.get("file");if(i&&r){var l=r.Assets.FileUploader();l==null||l.uploadFile({dataTransfer:{files:[i]}},function(f){var p=f&&f.data&&f.data[0],h=p&&((0,L.isString)(p)?p:p.src);h&&e.set({src:h})}),e.set("file","")}}},n.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,r=t.classEmpty,i=t.model,l=i.getSrcResult()&&!i.isDefaultSrc(),f=l?"remove":"add";e.classList[f](r)},n.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this,r=e.em,i=e.model,l=r==null?void 0:r.Assets;l&&i.get("editable")&&l.open({select:function(f,p){i.set({src:f.getSrc()}),p&&l.close()},target:i,types:["image"],accept:"image/*"})},n.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},n.prototype.onLoad=function(){this.em.trigger("change:canvasOffset")},n.prototype.noDrag=function(t){return t.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this,e=t.$el,r=t.model,i=e.attr("class")||"";return!r.get("src")&&e.attr("class","".concat(i," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(Tr);const Ws=Mf;var kn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Er=function(){return Er=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Er.apply(this,arguments)},Zr=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(w){l(w)}}function p(g){try{h(e.throw(g))}catch(w){l(w)}}function h(g){g.done?i(g.value):r(g.value).then(f,p)}h((e=e.apply(a,n||[])).next())})},jr=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return p([h,g])}}function p(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Xa=function(a){kn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,L.bindAll)(this,"disableEditing","onDisable");var e=this.model,r=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=r==null?void 0:r.RichTextEditor},n.prototype.updateContentText=function(t,e,r){r===void 0&&(r={}),!r.fromDisable&&this.disableEditing()},n.prototype.canActivate=function(){var t=this,e=t.model,r=t.rteEnabled,i=t.em,l=i==null?void 0:i.getEditing(),f=l===e,p=!0,h=!1,g;if((r||!e.get("editable")||f||(h=e.isChildOf("text")))&&(p=!1,h&&!e.get("textable"))){for(var w=e.parent();w&&!w.isInstanceOf("text");)w=w.parent();w&&w.get("editable")?g=w:p=!0}return{result:p,delegate:g}},n.prototype.onActive=function(t){var e,r;return Zr(this,void 0,void 0,function(){var i,l,f,p,h,g,w,M,Z;return jr(this,function(nt){switch(nt.label){case 0:return i=this,l=i.rte,f=i.em,p=this.canActivate(),h=p.result,g=p.delegate,h?((r=t==null?void 0:t.stopPropagation)===null||r===void 0||r.call(t),w=this,[4,this.getContent()]):(g&&((e=t==null?void 0:t.stopPropagation)===null||e===void 0||e.call(t),f.setSelected(g),g.trigger("active",t)),[2]);case 1:if(w.lastContent=nt.sent(),!l)return[3,5];nt.label=2;case 2:return nt.trys.push([2,4,,5]),M=this,[4,l.enable(this,this.activeRte,{event:t})];case 3:return M.activeRte=nt.sent(),[3,5];case 4:return Z=nt.sent(),f.logError(Z),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},n.prototype.onDisable=function(){this.disableEditing()},n.prototype.disableEditing=function(t){return t===void 0&&(t={}),Zr(this,void 0,void 0,function(){var e,r,i,l,f,p,h,g;return jr(this,function(w){switch(w.label){case 0:if(e=this,r=e.model,i=e.rte,l=e.activeRte,f=e.em,p=r&&r.get("editable"),!i)return[3,8];w.label=1;case 1:return w.trys.push([1,3,,4]),[4,i.disable(this,l)];case 2:return w.sent(),[3,4];case 3:return h=w.sent(),f.logError(h),[3,4];case 4:return g=p,g?[4,this.getContent()]:[3,6];case 5:g=w.sent()!==this.lastContent,w.label=6;case 6:return g?[4,this.syncContent(t)]:[3,8];case 7:w.sent(),this.lastContent="",w.label=8;case 8:return this.toggleEvents(),[2]}})})},n.prototype.getContent=function(){return Zr(this,void 0,void 0,function(){var t,e,r,i;return jr(this,function(l){switch(l.label){case 0:return t=this,e=t.rte,r=t.activeRte,i="",e?[4,e.getContent(this,r)]:[3,2];case 1:i=l.sent(),l.label=2;case 2:return[2,i]}})})},n.prototype.syncContent=function(t){return t===void 0&&(t={}),Zr(this,void 0,void 0,function(){var e,r,i,l,f,p,h;return jr(this,function(g){switch(g.label){case 0:return e=this,r=e.model,i=e.rte,l=e.rteEnabled,!l&&!t.force?[2]:[4,this.getContent()];case 1:return f=g.sent(),p=r.components(),h=Er({fromDisable:1},t),r.set("content","",h),i!=null&&i.customRte&&!i.customRte.parseContent?(p.length&&p.reset(void 0,Er(Er({},t),{keepIds:Rn(p)})),r.set("content",f,h)):p.resetFromString(f,t),[2]}})})},n.prototype.insertComponent=function(t,e){var r;e===void 0&&(e={});var i=this,l=i.model,f=i.el,p=f.ownerDocument,h=p.getSelection();if(h!=null&&h.rangeCount){var g=h.getRangeAt(0),w=g.startContainer,M=g.startOffset,Z=(0,ct.getModel)(w),nt=[];if(Z&&(!((r=Z.is)===null||r===void 0)&&r.call(Z,"textnode"))){var vt=Z.collection;vt.forEach(function(Zt){if(Zt===Z){var Kt="textnode",he=Zt.content;nt.push({type:Kt,content:he.slice(0,M)}),nt.push(t),nt.push({type:Kt,content:he.slice(M)})}else nt.push(Zt)});var _t=nt.filter(Boolean),At=_t.indexOf(t);return vt.reset(_t,e),vt.at(At)}}return l.append(t,e)},n.prototype.onInput=function(){var t=this.em,e="component",r=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(r,this.model)},n.prototype.disablePropagation=function(t){t.stopPropagation()},n.prototype.toggleEvents=function(t){var e=this,r=e.em,i=e.model,l=e.$el,f={on:pe.on,off:pe.S1},p=t?"on":"off";r.setEditing(t?this:!1),this.rteEnabled=!!t;var h=[this.el.ownerDocument,document];if(f.off(h,"mousedown",this.onDisable),f[p](h,"mousedown",this.onDisable),r[p]("toolbar:run:before",this.onDisable),i&&(i[p]("removed",this.onDisable),i.trigger("rte:".concat(t?"enable":"disable"))),l==null||l.off("mousedown",this.disablePropagation),l&&l[p]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var g=this.el;g;)g.draggable=!t,g=g.parentNode,g&&g.tagName=="BODY"&&(g=0)},n}(Tr);const Uu=Xa;var Gs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Df=function(a){Gs(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},n}(Uu);const Wu=Df;var If=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rl=function(a){If(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Wu);const Gu=Rl;var Fl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jf=function(a){Fl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},n.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},n.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},n.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},n}(Ws);const Nl=jf;var Vl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ku=function(a){Vl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"script"},n.prototype.events=function(){return{}},n.prototype.render=function(){var t=this,e=t.model,r=t.em,i=e.get("src"),l=r&&r.get("scriptCount"),f=l||0,p="";if(i){var h=e.get("onload"),g="script".concat(f),w="script".concat(f+1),M="".concat(g,"Start"),Z="".concat(w,"Start");p=`
        var `.concat(g,` = document.createElement('script');
        `).concat(g,`.onload = function() {
          `).concat(h?"".concat(h,`();
`):"",`
          typeof `).concat(Z," == 'function' && ").concat(Z,`();
        };
        `).concat(g,".src = '").concat(i,`';
        function `).concat(M,"() { document.body.appendChild(").concat(g,`); };
        `).concat(f?"":"".concat(M,"();"),`
      `),r&&r.set("scriptCount",f+1)}else p=e.__innerHTML();return this.el.innerHTML=p,this.postRender(),this},n}(Ws);const Zu=Ku;var Hl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$u=function(a){Hl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},n}(Tr);const wa=$u;var Rf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ks=function(a){Rf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Tr);const Ai=Ks;var qu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ff=function(a){qu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Tr);const Yu=Ff;var Bn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cr=function(a){Bn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Tr);const ci=cr;var so=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lo=function(a){so(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Tr);const Xu=lo;var Bl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ju=function(a){Bl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Tr);const Nf=Ju,zl=Tr.extend({events:{}});var Ja=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qu=function(a){Ja(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(){Tr.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],r=e.map(function(i){return"change:".concat(i)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,r,this.updateVideo)},n.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},n.prototype.updateSrc=function(){var t=this,e=t.model,r=t.videoEl;if(r){var i=e.get("provider"),l=e.get("src");switch(i){case"yt":l=e.getYoutubeSrc();break;case"ytnc":l=e.getYoutubeNoCookieSrc();break;case"vi":l=e.getVimeoSrc();break}r.src=l}},n.prototype.updateVideo=function(){var t=this,e=t.model,r=t.videoEl,i=e.get("provider");switch(i){case"yt":case"ytnc":case"vi":e.trigger("change:videoId");break;default:if(r){var l=r;l.loop=e.get("loop"),l.autoplay=e.get("autoplay"),l.controls=e.get("controls"),l.poster=e.get("poster")}}},n.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},n.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},n.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},n.prototype.render=function(){Tr.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},n}(Ws);const Ul=Qu;var uo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tc=function(a){uo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n}(Tr);const ec=tc;var Vf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),an=function(){return an=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},an.apply(this,arguments)},Wl=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ba;(function(a){a[a.InvalidSource=0]="InvalidSource",a[a.SourceReject=1]="SourceReject",a[a.TargetReject=2]="TargetReject"})(ba||(ba={}));var Hf=function(a){Vf(n,a);function n(t){var e=a.call(this,t,"DomComponents",new Zi(void 0,{em:t}))||this;e.componentTypes=[{id:"cell",model:Ho,view:Yu},{id:"row",model:Dl,view:Nf},{id:"table",model:Sf,view:zl},{id:"thead",model:Hs,view:Xu},{id:"tbody",model:Ga,view:Ai},{id:"tfoot",model:Of,view:ci},{id:"map",model:xf,view:Nl},{id:"link",model:Yr,view:Wu},{id:"label",model:ie,view:Gu},{id:"video",model:_a,view:Ul},{id:"image",model:Hn,view:Ws},{id:"script",model:Mu,view:Zu},{id:"svg-in",model:Iu,view:wa},{id:"svg",model:ti,view:wa},{id:"iframe",model:js,view:Af},{id:"comment",model:Qi,view:Uo},{id:"textnode",model:Ha,view:jl},{id:"text",model:tt,view:Uu},{id:"wrapper",model:Vu,view:ec},{id:"default",model:Kr,view:Tr}],e.componentsById={},e.Component=Kr,e.Components=Zi,e.ComponentView=Tr,e.ComponentsView=ao,e.storageKey="components",t&&(e.config.components=t.config.components||e.config.components);for(var r in Ao)r in e.config||(e.config[r]=Ao[r]);var i=e.config.pStylePrefix;if(i&&(e.config.stylePrefix=i+e.config.stylePrefix),t){t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var l=t.get("selected");t.listenTo(l,"add",function(f,p,h){return e.selectAdd(l.getComponent(f),h)}),t.listenTo(l,"remove",function(f,p,h){return e.selectRemove(l.getComponent(f),h)})}return e}return n.prototype.load=function(t){var e=this;return this.loadProjectData(t,{onResult:function(r){var i=e.getWrapper();if(i||(e.em.Pages.add({},{select:!0}),i=e.getWrapper()),(0,L.isArray)(r))r.length&&i.components(r);else{var l=r.components,f=l===void 0?[]:l,p=Wl(r,["components"]);i.set(p),i.components(f)}}})},n.prototype.store=function(){return{}},n.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},n.prototype.getWrapper=function(){return this.getComponent()},n.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.components()},n.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},n.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(r){return r.remove(t)}),this},n.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},n.prototype.addType=function(t,e){var r=this.em,i=e.model,l=i===void 0?{}:i,f=e.view,p=f===void 0?{}:f,h=e.isComponent,g=e.extend,w=e.extendView,M=e.extendFn,Z=M===void 0?[]:M,nt=e.extendFnView,vt=nt===void 0?[]:nt,_t=this.getType(t),At=this.getType(g),Zt=this.getType(w),Kt=At||_t||this.getType("default"),he=Kt.model,Ce=Zt?Zt.view:Kt.view,Re=function(Ke,ar,un){return Ke.reduce(function(ye,vn){var wo=ar[vn],bo=un.prototype[vn];return wo&&bo&&(ye[vn]=function(){for(var xo=[],Fi=0;Fi<arguments.length;Fi++)xo[Fi]=arguments[Fi];bo.bind(this).apply(void 0,xo),wo.bind(this).apply(void 0,xo)}),ye},{})};if(typeof l=="object"){var Ze={defaults:l.defaults};delete l.defaults,e.model=he.extend(an(an({},l),Re(Z,l,he)),{isComponent:_t&&!At&&!h?he.isComponent:h||function(){return 0}}),Object.defineProperty(e.model.prototype,"defaults",{get:function(){return an(an({},(0,L.result)(he.prototype,"defaults")||{}),(0,L.result)(Ze,"defaults")||{})}})}typeof p=="object"&&(e.view=Ce.extend(an(an({},p),Re(vt,p,Ce)))),_t?(_t.model=e.model,_t.view=e.view):(e.id=t,this.componentTypes.unshift(e));var ge="component:type:".concat(_t?"update":"add");return r==null||r.trigger(ge,_t||e),this},n.prototype.getType=function(t){for(var e=this.componentTypes,r=0;r<e.length;r++){var i=e[r].id;if(i==t)return e[r]}},n.prototype.removeType=function(t){var e=this.componentTypes,r=this.getType(t);if(r){var i=e.indexOf(r);return e.splice(i,1),r}},n.prototype.getTypes=function(){return this.componentTypes},n.prototype.selectAdd=function(t,e){var r=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(i){return r.em.trigger(i,t,e)}))},n.prototype.selectRemove=function(t,e){var r=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(i){return r.em.trigger(i,t,e)}))},n.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),r=t.previous("componentHovered"),i="hovered";r&&r.get("status")==i&&r.set({status:"",state:""}),e&&(0,L.isEmpty)(e.get("status"))&&e.set("status",i)},n.prototype.getShallowWrapper=function(){var t=this,e=t.shallow,r=t.em;if(!e&&r){var i=r.shallow;if(!i)return;var l=i.Components;if(l.componentTypes=this.componentTypes,e=l.getWrapper(),e){var f=[Oi,Qn].join(" ");e.on(f,(0,L.debounce)(function(){return e==null?void 0:e.components("")},100))}this.shallow=e}return e},n.prototype.isComponent=function(t){return(0,ct.isComponent)(t)},n.prototype.canMove=function(t,e,r){var i={result:!1,reason:ba.InvalidSource,target:t,source:null};if(!e||!t)return i;var l=(0,ct.isComponent)(e)?e:null;if(!l){var f=this.getShallowWrapper();l=(f==null?void 0:f.append(e)[0])||null}if(i.source=l,!l)return i;var p=l.get("draggable");if((0,L.isFunction)(p))p=!!p(l,t,r);else{var h=t.getEl();p=(0,L.isArray)(p)?p.join(","):p,p=(0,L.isString)(p)?h==null?void 0:h.matches(p):p}if(!p)return an(an({},i),{reason:ba.SourceReject});var g=t.get("droppable");if((0,L.isFunction)(g))g=!!g(l,t,r);else if(g===!1&&t.isInstanceOf("text")&&l.get("textable"))g=!0;else{var h=l.getEl();g=(0,L.isArray)(g)?g.join(","):g,g=(0,L.isString)(g)?h==null?void 0:h.matches(g):g}var w=[t].concat(t.parents()).indexOf(l)>-1;return!g||w?an(an({},i),{reason:ba.TargetReject}):an(an({},i),{result:!0})},n.prototype.allById=function(){return this.componentsById},n.prototype.getById=function(t){return this.componentsById[t]||null},n.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(r){return e[r]&&e[r].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(r){return{}})},n}(W);const rc=Hf;var Bf={stylePrefix:"css-",rules:[]};const zf=Bf;var Zs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nc=Number.MAX_VALUE,Uf=function(a){var n=/(-?\d*\.?\d+)\w{0,}/.exec(a);return n?n[0]:""},Wf=function(a){Zs(n,a);function n(){var t=a.call(this)||this;return(0,L.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return n.prototype.buildFromModel=function(t,e){var r=this;e===void 0&&(e={});var i="",l=this.em,f=l&&l.getConfig().avoidInlineStyle,p=t.styleToString(),h=t.classes;this.ids.push("#".concat(t.getId())),h.forEach(function(w){return r.compCls.push(w.getFullName())}),!f&&p&&(i="#".concat(t.getId(),"{").concat(p,"}"));var g=t.components();return g.forEach(function(w){return i+=r.buildFromModel(w,e)}),i},n.prototype.build=function(t,e){var r=this;e===void 0&&(e={});var i=e.json,l=e.em,f=e.cssc||(l==null?void 0:l.Css);this.em=l,this.compCls=[],this.ids=[],this.model=t;var p=[],h=t?this.buildFromModel(t,e):"",g=(0,L.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(f){var w=e.rules||f.getAll(),M={},Z=[];e.onlyMatched&&t&&(0,ct.hasWin)()&&(w=this.matchedRules(t,w)),w.forEach(function(nt){var vt=nt.getAtRule();if(vt){var _t=M[vt];_t?_t.push(nt):M[vt]=[nt];return}var At=r.buildFromRule(nt,Z,e);i?p.push(At):h+=At}),this.sortMediaObject(M).forEach(function(nt){var vt="",_t=nt.key,At=nt.value;At.forEach(function(Zt){var Kt=r.buildFromRule(Zt,Z,e);Zt.get("singleAtRule")?h+="".concat(_t,"{").concat(Kt,"}"):vt+=Kt,i&&p.push(Kt)}),vt&&(h+="".concat(_t,"{").concat(vt,"}"))}),l&&g&&w.remove&&w.remove(Z)}return i?p.filter(function(nt){return nt}):h},n.prototype.buildFromRule=function(t,e,r){var i=this,l;r===void 0&&(r={});var f="",p=this.model,h=t.selectorsToString({skipAdd:1}),g=t.get("selectorsAdd"),w=t.get("singleAtRule"),M;if((l=t.get("selectors"))===null||l===void 0||l.forEach(function(nt){var vt=nt.getFullName();(i.compCls.indexOf(vt)>=0||i.ids.indexOf(vt)>=0||r.keepUnusedStyles)&&(M=1)}),h&&M||g||w||!p){var Z=t.getDeclaration({body:1});Z&&(r.json?f=t:f+=Z)}else e.push(t);return f},n.prototype.matchedRules=function(t,e){var r=this,i=t.getEl(),l=[];return e.forEach(function(f){try{f.selectorsToString().split(",").some(function(p){return i==null?void 0:i.matches(r.__cleanSelector(p))})&&l.push(f)}catch{}}),t.components().forEach(function(f){l=l.concat(r.matchedRules(f,e))}),l=l.filter(function(f,p){return l.indexOf(f)===p}),l},n.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):nc},n.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var r=[];return(0,L.each)(t,function(i,l){return r.push({key:l,value:i})}),r.sort(function(i,l){var f=[i.key,l.key].every(function(g){return g.indexOf("min-width")!==-1}),p=f?i.key:l.key,h=f?l.key:i.key;return e.getQueryLength(p)-e.getQueryLength(h)})},n.prototype.sortRules=function(t,e){var r=function(p){return p.get("mediaText")||""},i=[r(t),r(e)].every(function(p){return p.indexOf("min-width")!==-1}),l=r(i?t:e),f=r(i?e:t);return this.getQueryLength(l)-this.getQueryLength(f)},n.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},n}(m.Hn);const ic=Wf;var xa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wo=function(){return Wo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Wo.apply(this,arguments)},$s=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},qs=((0,ct.hasWin)()?window:{}).CSS,Gl=function(a){xa(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this;return r.config=t||{},r.opt=e,r.em=e.em,r.ensureSelectors(null,null,{}),r.on("change",r.__onChange),r}return n.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},n.prototype.__onChange=function(t,e){var r=this.em,i=this.changedAttributes();i&&!(0,ct.isEmptyObj)(i)&&(r==null||r.changesUp(e))},n.prototype.clone=function(){var t=Wo({},this.opt),e=Wo({},this.attributes);return e.selectors=this.get("selectors").map(function(r){return r.clone()}),new this.constructor(e,t)},n.prototype.ensureSelectors=function(t,e,r){var i=this.em,l=i==null?void 0:i.get("SelectorManager"),f=[this,"change:selectors",this.ensureSelectors],p=this.getSelectors();if(this.stopListening.apply(this,f),p.models&&(p=$s([],p.models,!0)),p=(0,L.isString)(p)?[p]:p,Array.isArray(p)){var h=p.filter(function(g){return g}).map(function(g){return l?l.add(g):g});p=new Jn(h)}this.set("selectors",p,r),this.listenTo.apply(this,f)},n.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),r=t?"@".concat(t):e?"@media":"";return r+(e&&r?" ".concat(e):"")},n.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],r=this.get("state"),i=this.get("selectorsAdd"),l={escape:function(h){return qs&&qs.escape?qs.escape(h):h}},f=this.get("selectors").getFullString(0,l),p=r&&!t.skipState?":".concat(r):"";return f&&e.push("".concat(f).concat(p)),i&&!t.skipAdd&&e.push(i),e.join(", ")},n.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",r=this.attributes.important,i=this.selectorsToString(t),l=this.styleToString(Wo({important:r},t)),f=this.get("singleAtRule");return(i||f)&&(l||t.allowEmpty)&&(e=f?l:"".concat(i,"{").concat(l,"}")),e},n.prototype.getDevice=function(){var t=this.em,e=this.attributes,r=e.atRuleType,i=e.mediaText,l=(t==null?void 0:t.get("DeviceManager").getDevices())||[],f=l.filter(function(p){return p.getWidthMedia()===""})[0];return r!=="media"||!i?f||null:l.filter(function(p){return p.getWidthMedia()===Uf(i)})[0]||null},n.prototype.getState=function(){var t=this.em,e=this.get("state"),r=(t==null?void 0:t.get("SelectorManager").getStates())||[];return r.filter(function(i){return i.getName()===e})[0]||null},n.prototype.getComponent=function(){var t,e=this.getSelectors(),r=e.length==1&&e.at(0),i=r&&r.isId()&&r.get("name");return i&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(i))||null},n.prototype.toCSS=function(t){t===void 0&&(t={});var e="",r=this.getAtRule(),i=this.getDeclaration(t);return(i||t.allowEmpty)&&(e=i),r&&e&&(e="".concat(r,"{").concat(e,"}")),e},n.prototype.toJSON=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=m.Hn.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,L.forEach)(l,function(f,p){i[p]===f&&delete i[p]}),delete i.style.__p,(0,L.isEmpty)(i.selectors)&&delete i.selectors,(0,L.isEmpty)(i.style)&&delete i.style}return i},n.prototype.compare=function(t,e,r,i){var l;i===void 0&&(i={});var f=e||"",p=r||"",h=i.selectorsAdd||"",g=i.atRuleType||"",w=!(0,L.isArray)(t)&&!t.models?[t]:t.models||t;p&&!g&&(g="media");var M=w.map(function(_t){return _t.getFullName()}),Z=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(_t){return _t.getFullName()}),nt=M.slice().sort(),vt=Z.slice().sort();return!(M.length!==Z.length||!nt.every(function(_t,At){return _t===vt[At]})||this.get("state")!==f||this.get("mediaText")!==p||this.get("selectorsAdd")!==h||this.get("atRuleType")!==g)},n}(Lo);const Kl=Gl;var Gf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zl=function(a){Gf(n,a);function n(t,e){var r=a.call(this,t)||this;return r.editor=e==null?void 0:e.em,setTimeout(function(){r.on("remove",r.onRemove),r.on("add",r.onAdd)}),r}return n.prototype.toJSON=function(t){var e=m.FE.prototype.toJSON.call(this,t);return e.filter(function(r){return r.style&&!r.shallow})},n.prototype.onAdd=function(t,e,r){t.ensureSelectors(t,e,r)},n.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,m.FE.prototype.add.apply(this,[t,e])},n}(m.FE);const sn=Zl;Zl.prototype.model=Kl;var Ys=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),co=function(){return co=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},co.apply(this,arguments)},oc=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},ac=function(a){Ys(n,a);function n(t){var e=a.call(this,t,"CssComposer",null,{},zf)||this;e.Selectors=Jn,e.storageKey="styles";var r=e.config,i=r.pStylePrefix;return i&&(r.stylePrefix=i+r.stylePrefix),r.rules=e.em.config.style||r.rules||"",e.rules=new sn([],r),e}return n.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},n.prototype.postLoad=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");e&&e.add(this.getAll())},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},n.prototype.add=function(t,e,r,i,l){i===void 0&&(i={}),l===void 0&&(l={});var f=e||"",p=r||"",h=co({},i),g=this.get(t,f,p,h);return g&&g.config&&!g.config.singleAtRule||(h.state=f,h.mediaText=p,h.selectors=[],p&&!h.atRuleType&&(h.atRuleType="media"),g=new Kl(h,this.config),g.get("selectors").add(t,l),this.rules.add(g,l)),g},n.prototype.get=function(t,e,r,i){var l=t;if((0,L.isString)(t)){var f=this.em.Selectors,p=t.split(",")[0].trim(),h=this.em.Parser.parserCss.checkNode({selectors:p})[0];l=f.get(h.selectors)}return this.rules.find(function(g){return g.compare(l,e,r,i)})||null},n.prototype.getAll=function(){return this.rules},n.prototype.addCollection=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=this.em,l=[];(0,L.isString)(t)&&(t=i.Parser.parseCss(t));for(var f=t instanceof Array?t:[t],p=0,h=f.length;p<h;p++){var g=f[p]||{};if(g.selectors){var w=i==null?void 0:i.Selectors;w||console.warn("Selector Manager not found");for(var M=g.selectors,Z=M instanceof Array?M:[M],nt=[],vt=0,_t=Z.length;vt<_t;vt++){var At=w.add(Z[vt]);nt.push(At)}var Zt=this.get(nt,g.state,g.mediaText,g),Kt=this.add(nt,g.state,g.mediaText,g,e),he=!Zt||!e.avoidUpdateStyle,Ce=g.style||{};if((0,ct.isObject)(r)&&Kt.set(r,e),he){var Re=e.extend?co(co({},Kt.get("style")),Ce):Ce;Kt.set("style",Re,e)}l.push(Kt)}}return l},n.prototype.addRules=function(t){return this.addCollection(t)},n.prototype.setRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=r.atRuleType,l=r.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],p=f.state,h=f.selectorsAdd,g=this.em.Selectors,w=g.add(f.selectors),M=this.add(w,p,l,{selectorsAdd:h,atRule:i});return r.addStyles?M.addStyle(e,r):M.setStyle(e,r),M},n.prototype.getRule=function(t,e){e===void 0&&(e={});var r=this.em,i=r.Selectors,l=r.Parser.parserCss.checkNode({selectors:t})[0],f=i.get(l.selectors),p=l.state,h=l.selectorsAdd,g=e.atRuleType,w=e.atRuleParams;return f?this.get(f,p,w,{selectorsAdd:h,atRuleType:g}):void 0},n.prototype.getRules=function(t){var e=this.getAll();if(!t)return oc([],e.models,!0);var r={sort:!0},i=(0,L.isString)(t)?t.split(",").map(function(f){return f.trim()}):t,l=e.filter(function(f){return i.indexOf(f.getSelectors().getFullString(null,r))>=0});return l},n.prototype.setIdRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=r.addOpts,l=i===void 0?{}:i,f=r.mediaText,p=r.state||"",h=(0,L.isUndefined)(f)?this.em.getCurrentMedia():f,g=this.em.Selectors,w=g.add({name:t,type:yr.TYPE_ID},l),M=this.add(w,p,h,{},l);return M.setStyle(e,co(co({},r),l)),M},n.prototype.getIdRule=function(t,e){e===void 0&&(e={});var r=e.mediaText,i=e.state||"",l=(0,L.isUndefined)(r)?this.em.getCurrentMedia():r,f=this.em.Selectors.get(t,yr.TYPE_ID);return f&&this.get(f,i,l)},n.prototype.setClassRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=r.state||"",l=r.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors,p=f.add({name:t,type:yr.TYPE_CLASS}),h=this.add(p,i,l);return h.setStyle(e,r),h},n.prototype.getClassRule=function(t,e){e===void 0&&(e={});var r=e.state||"",i=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,yr.TYPE_CLASS);return l&&this.get(l,r,i)},n.prototype.remove=function(t,e){var r=(0,L.isString)(t)?this.getRules(t):t,i=this.getAll().remove(r,e);return(0,L.isArray)(i)?i:[i]},n.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},n.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var r=e.state,i=e.mediaText,l=e.current;l&&(r=this.em.get("state")||"",i=this.em.getCurrentMedia());var f=t.getId(),p=this.getAll().filter(function(h){return!(0,L.isUndefined)(r)&&h.get("state")!==r||!(0,L.isUndefined)(i)&&h.get("mediaText")!==i?!1:h.getSelectorsString()==="#".concat(f)});return p},n.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new Or({collection:this.rules,config:this.config}),this.rulesView.render().el},n.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},n}(W);const Ca=ac;var Xs={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};const sc=Xs;var lc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),uc=function(a){lc(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get("label")},n.prototype.getMedia=function(){return this.get("media")},n.prototype.getContent=function(){return this.get("content")},n.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,L.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},n}(m.Hn);const Go=uc;var cc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qa=function(a){cc(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(m.FE);const ts=Qa;Qa.prototype.model=Go;var es=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kf=function(a){es(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},n}(m.Hn);const Ko=Kf;var fc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$l=function(a){fc(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(m.FE);const ql=$l;$l.prototype.model=Ko;var fo;(function(a){a.add="block:add",a.remove="block:remove",a.removeBefore="block:remove:before",a.update="block:update",a.dragStart="block:drag:start",a.drag="block:drag",a.dragEnd="block:drag:stop",a.custom="block:custom",a.all="block"})(fo||(fo={}));var rs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ns=function(a){rs(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,i=r.model;return r.em=e.em,r.config=e,r.endDrag=r.endDrag.bind(r),r.ppfx=e.pStylePrefix||"",r.listenTo(i,"destroy remove",r.remove),r.listenTo(i,"change",r.render),r}return n.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.handleClick=function(t){var e=this,r=e.config,i=e.model,l=e.em,f=i.get("onClick")||r.appendOnClick;if(l.trigger("block:click",i,t),f){if((0,L.isFunction)(f))return f(i,l==null?void 0:l.getEditor(),{event:t})}else return;var p=r.getSorter(),h=i.get("content"),g=l.getSelected();p.setDropContent(h);var w,M,Z;if(g)if(M=p.validTarget(g.getEl(),h),M.valid)w=g;else{var nt=g.parent();nt&&(M=p.validTarget(nt.getEl(),h),M.valid&&(w=nt,Z=nt.components().indexOf(g)+1))}if(!w){var vt=l.getWrapper();M=p.validTarget(vt.getEl(),h),M.valid&&(w=vt)}var _t=w&&w.append(h,{at:Z})[0];_t&&l.setSelected(_t,{scroll:1})},n.prototype.startDrag=function(t){var e=this,r=e.config,i=e.em,l=e.model,f=l.get("disable");if(!(t.button!==0||!r.getSorter||this.el.draggable||f)){i.refreshCanvas();var p=r.getSorter();p.__currentBlock=l,p.setDragHelper(this.el,t),p.setDropContent(this.model.get("content")),p.startSort(this.el),(0,pe.on)(document,"mouseup",this.endDrag)}},n.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},n.prototype.handleDrag=function(t){this.__getModule().__drag(t)},n.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},n.prototype.endDrag=function(){(0,pe.S1)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},n.prototype.render=function(){var t,e=this,r=e.em,i=e.el,l=e.$el,f=e.ppfx,p=e.model,h=p.get("disable"),g=p.get("attributes")||{},w=g.class||"",M="".concat(f,"block"),Z=r&&r.t("blockManager.labels.".concat(p.id))||p.get("label"),nt=p.get("render"),vt=p.get("media"),_t=h?"".concat(M,"--disable"):"".concat(f,"four-color-h");l.attr(g),i.className="".concat(w," ").concat(M," ").concat(f,"one-bg ").concat(_t).trim(),i.innerHTML=`
      `.concat(vt?'<div class="'.concat(M,'__media">').concat(vt,"</div>"):"",`
      <div class="`).concat(M,'-label">').concat(Z,`</div>
    `),i.title=g.title||((t=i.textContent)===null||t===void 0?void 0:t.trim()),i.setAttribute("draggable","".concat(!!((0,ct.hasDnd)(r)&&!h)));var At=nt&&nt({el:i,model:p,className:M,prefix:f});return At&&(i.innerHTML=At),this},n}(m.G7);const is=ns;var dc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zf=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},pc=function(a){dc(n,a);function n(t,e){var r=a.call(this,t)||this;r.config=e;var i=e.pStylePrefix||"";return r.em=e.em,r.pfx=i,r.caretR="fa fa-caret-right",r.caretD="fa fa-caret-down",r.iconClass="".concat(i,"caret-icon"),r.activeClass="".concat(i,"open"),r.className="".concat(i,"block-category"),r.listenTo(r.model,"change:open",r.updateVisibility),r.model.view=r,r}return n.prototype.events=function(){return{"click [data-title]":"toggle"}},n.prototype.template=function(t){var e=t.pfx,r=t.label;return kt(Zo||(Zo=Zf([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `])),e,e,r,e)},n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},n.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},n.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},n.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},n.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.pfx,"blocks-c"))),this.blocksEl},n.prototype.append=function(t){this.getBlocksEl().appendChild(t)},n.prototype.render=function(){var t=this,e=t.em,r=t.el,i=t.$el,l=t.model,f=t.pfx,p=e.t("blockManager.categories.".concat(l.id))||l.get("label");return r.innerHTML=this.template({pfx:f,label:p}),i.addClass(this.className),i.css({order:l.get("order")}),this.updateVisibility(),this},n}(m.G7);const po=pc;var Zo,os=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Js=function(){return Js=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Js.apply(this,arguments)},hc=function(a){os(n,a);function n(t,e){var r=a.call(this,t)||this;(0,L.bindAll)(r,"getSorter","onDrag","onDrop","onMove"),r.config=e||{},r.categories=t.categories||"",r.renderedCategories={};var i=r.config.pStylePrefix||"";r.ppfx=i,r.noCatClass="".concat(i,"blocks-no-cat"),r.blockContClass="".concat(i,"blocks-c"),r.catsClass="".concat(i,"block-categories");var l=r.collection;return r.listenTo(l,"add",r.addTo),r.listenTo(l,"reset",r.render),r.em=r.config.em,r.em&&(r.config.getSorter=r.getSorter),r}return n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=Js(Js({},this.config),t)},n.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,r=t.Canvas;this.sorter=new e.Sorter({container:r.getBody(),placer:r.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:r.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},n.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},n.prototype.onMove=function(t){this.__getModule().__drag(t)},n.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},n.prototype.addTo=function(t){this.add(t)},n.prototype.add=function(t,e){var r=this.config,i=new is({model:t,attributes:t.get("attributes")},r),l=i.render().el,f=t.get("category");if(f&&this.categories&&!r.ignoreCategories){(0,L.isString)(f)?f={id:f,label:f}:(0,L.isObject)(f)&&!f.id&&(f.id=f.label);var p=this.categories.add(f),h=p.get("id"),g=this.getCategoriesEl(),w=this.renderedCategories[h];t.set("category",p,{silent:!0}),!w&&g&&(w=new po({model:p},r).render(),this.renderedCategories[h]=w,g.appendChild(w.el)),w&&w.append(l);return}e?e.appendChild(l):this.append(l)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},n.prototype.render=function(){var t=this,e=this.ppfx,r=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories={},this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,r)}),this.append(r);var i="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(i),this.rendered=!0,this},n}(m.G7);const vc=hc;var $f=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ho=function(){return ho=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ho.apply(this,arguments)},bn=function(a){$f(n,a);function n(t){var e,r=a.call(this,t,"BlockManager",new ts(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[]),fo,sc)||this;return r.events=fo,r.Block=Go,r.Blocks=ts,r.Category=Ko,r.Categories=ql,r.storageKey="",r.blocks=r.all,r.blocksVisible=new ts(r.blocks.models),r.categories=new ql,r.blocks.on("add",function(i){return r.blocksVisible.add(i)}),r.blocks.on("remove",function(i){return r.blocksVisible.remove(i)}),r.blocks.on("reset",function(i){return r.blocksVisible.reset(i.models)}),r.__onAllEvent=(0,L.debounce)(function(){return r.__trgCustom()},0),r}return n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(r,i){return t.startDrag(r,i)},drag:function(r){return t.__drag(r)},dragStop:function(r){return t.endDrag(r)}}},n.prototype.__startDrag=function(t,e){var r=this,i=r.em,l=r.events,f=r.blocks,p=t.getContent?t.getContent():t;this._dragBlock=t,i.set({dragResult:null,dragContent:p}),[i,f].map(function(h){return h.trigger(l.dragStart,t,e)})},n.prototype.__drag=function(t){var e=this,r=e.em,i=e.events,l=e.blocks,f=this._dragBlock;[r,l].map(function(p){return p.trigger(i.drag,f,t)})},n.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,r=e.em,i=e.events,l=e.blocks,f=this._dragBlock,p=t.component||r.get("dragResult");if(delete this._dragBlock,p&&f){var h="activeOnRender",g=p.get&&p.get(h),w=f.get("activate")||g,M=f.get("select"),Z=(0,L.isArray)(p)?p[0]:p;(M||w&&M!==!1)&&r.setSelected(Z),w&&(Z.trigger("active"),g&&Z.unset(h)),f.get("resetId")&&Z.onAll(function(nt){return nt.resetId()})}r.set({dragResult:null,dragContent:null}),f&&[r,l].map(function(nt){return nt.trigger(i.dragEnd,p,f)})},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=ho(ho({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(r){var i;return(i=r.droppable)===null||i===void 0?void 0:i.startCustom()})},n.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){var r;return(r=e.droppable)===null||r===void 0?void 0:r.endCustom(t)}),this.__endDrag()},n.prototype.postRender=function(){var t=this,e=t.categories,r=t.config,i=t.em,l=this.blocksVisible;this.blocksView=new vc({collection:l,categories:e},ho(ho({},r),{em:i})),this.__appendTo(l.models),this.__trgCustom()},n.prototype.add=function(t,e,r){r===void 0&&(r={});var i=e||{};return i.id=t,this.blocks.add(i,r)},n.prototype.get=function(t){return this.blocks.get(t)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.render=function(t,e){e===void 0&&(e={});var r=this,i=r.categories,l=r.config,f=r.em,p=t||this.getAll().models;if(e.external){var h=new ts(p);return new vc({collection:h,categories:i},ho(ho({em:f},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(p),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(r){return r.stopListening()}),e.map(function(r){return r.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},n}(W);const gc=bn;var qf={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};const Yf=qf;var Xf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yl=function(a){Xf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",label:""}},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(){return this.get("label")||this.getName()},n}(m.Hn);const Qs=Yl;Yl.prototype.idAttribute="name";var mc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jf=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},yc="contentEditable",Qf=function(a){mc(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.config||{};return e.config=r,e.module=t.module,e.coll=t.coll||null,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return n.prototype.template=function(){var t=this,e=t.pfx,r=t.model,i=t.config,l=r.get("label")||"";return kt(Sa||(Sa=Jf([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,i.iconTagRemove)},n.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},n.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},n.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[yc]="true",e.focus(),t==null||t.setEditing(!0)},n.prototype.endEditTag=function(){var t=this,e=t.model,r=t.em,i=this.getInputEl(),l=i.textContent||"",f=r==null?void 0:r.Selectors;i[yc]="false",r==null||r.setEditing(!1),f&&f.rename(e,l)!==e&&(i.innerText=e.get("label"))},n.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.get("active"))},n.prototype.removeTag=function(){this.module.removeSelected(this.model)},n.prototype.updateStatus=function(){var t=this,e=t.model,r=t.$el,i=t.config,l=i.iconTagOn,f=i.iconTagOff,p=r.find("[data-tag-status]");e.get("active")?(p.html(l),r.removeClass("opac50")):(p.html(f),r.addClass("opac50"))},n.prototype.render=function(){var t=this.pfx,e=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(t,"tag ").concat(e,"three-bg")),this.updateStatus(),this},n}(m.G7);const vo=Qf;var Sa,tl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Li=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Mi=function(a){tl(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var r=e.config.em,i=e.collection;e.target=r;var l=r.Selectors;e.module=l,e.em=r,e.componentChanged=(0,L.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,L.debounce)(e.checkSync.bind(e),0);var f="component:toggled component:update:classes",p="component:update:classes change:state";return e.listenTo(r,f,e.componentChanged),e.listenTo(r,"styleManager:update",e.componentChanged),e.listenTo(r,p,e.__handleStateChange),e.listenTo(r,"styleable:change change:device",e.checkSync),e.listenTo(i,"add",e.addNew),e.listenTo(i,"reset",e.renderClasses),e.listenTo(i,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,L.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.labelInfo,r=t.labelHead,i=t.iconSync,l=t.iconAdd,f=t.pfx,p=t.ppfx;return kt(_c||(_c=Li([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),f,f,f,f,r,f,f,f,p,p,p,f,p,p,f,p,f,f,f,f,f,l,f,f,i,f,f,e,f)},n.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},n.prototype.syncStyle=function(){var t=this.em,e=this.getTarget(),r=t.Css,i={noDisabled:1},l=this.getCommonSelectors({opts:i}),f=t.get("state"),p=t.getCurrentMedia(),h=[],g=r.get(l,f,p)||r.add(l,f,p),w;this.getTargets().forEach(function(M){var Z=r.getIdRule(M.getId(),{state:f,mediaText:p});w=Z.getStyle(),Z.setStyle({}),h.push(Z)}),w&&g.addStyle(w),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:e,selectors:l,mediaText:p,rule:g,ruleComponents:h,state:f})},n.prototype.tagRemoved=function(t){this.updateStateVis()},n.prototype.addNew=function(t){this.addToClasses(t)},n.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},n.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},n.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},n.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},n.prototype.componentChanged=function(t){var e=t===void 0?{}:t,r=e.targets;this.updateSelection(r)},n.prototype.updateSelection=function(t){var e=t||this.getTargets();e=(0,L.isArray)(e)?e:[e];var r=[];return e&&e.length&&(r=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:r})),this.collection.reset(r),this.updateStateVis(e),this.module.__trgCustom(),r},n.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,r=e.targets,i=e.opts,l=i===void 0?{}:i,f=r||this.getTargets();return this.module.__getCommonSelectors(f,l)},n.prototype._commonSelectors=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.module).__common.apply(t,e)},n.prototype.checkSync=function(){var t=this,e=t.$btnSyncEl,r=t.config,i=t.collection,l=this.getTarget(),f;if(l&&r.componentFirst&&i.length){var p=l.getStyle();f=!(0,L.isEmpty)(p)}e&&e[f?"show":"hide"]()},n.prototype.getTarget=function(){return this.target.getSelected()},n.prototype.getTargets=function(){return this.target.getSelectedAll()},n.prototype.updateStateVis=function(t){var e=this.em,r=e&&e.getConfig().avoidInlineStyle,i=this.collection.length||r?"":"none";this.getStatesC().css("display",i),this.updateSelector(t)},n.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},n.prototype.updateSelector=function(t){var e=this,r=this.el.querySelector("[data-selected]"),i=[],l=t||this.getTargets();l=(0,L.isArray)(l)?l:[l],l.forEach(function(f){return i.push(e.__getName(f))}),r&&(r.innerHTML=i.join(", ")),this.checkStates()},n.prototype.__getName=function(t){var e=this,r=e.pfx,i=e.config,l=e.em,f=i.selectedName,p=i.componentFirst,h;if((0,L.isString)(t))h=kt($o||($o=Li(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),r,t);else{var g=t==null?void 0:t.getSelectors();if(!g)return"";var w=g.getStyleable(),M=l.get("state"),Z=t.getId?kt(Xl||(Xl=Li(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),r,t.getName(),r,t.getId()):"";h=this.collection.getFullString(w),h=h?kt(Jl||(Jl=Li(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),r,h):t.get("selectorsAdd")||Z,h=p&&Z?Z:h,h+=M?kt(Ql||(Ql=Li(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),r,M):"",h=f?f({result:h,state:M,target:t}):h}return h&&'<span class="'.concat(r,'sel">').concat(h,"</span>")},n.prototype.stateChanged=function(t){var e=this.em,r=t.target.value;e.set("state",r)},n.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},n.prototype.addToClasses=function(t,e){var r=e,i=this.getClasses(),l=new vo({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return r?r.appendChild(l):i.append(l),l},n.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),r=this.getClasses();r.empty(),this.collection.each(function(i){return t.addToClasses(i,e)}),r.append(e)},n.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},n.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},n.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},n.prototype.renderStates=function(){var t=this,e=t.module,r=t.em,i=r.t("selectorManager.emptyState"),l=e.getStates().map(function(p){var h=r.t("selectorManager.states.".concat(p.id))||p.getLabel()||p.id;return'<option value="'.concat(p.id,'">').concat(h,"</option>")}).join(""),f=this.getStates();f&&f.html('<option value="">'.concat(i,"</option>").concat(l)),this.checkStates()},n.prototype.render=function(){var t=this,e=t.em,r=t.pfx,i=t.ppfx,l=t.config,f=t.$el,p=t.el,h=l.render,g=l.iconSync,w=l.iconAdd,M={iconSync:g,iconAdd:w,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:i,pfx:r,el:p};f.html(this.template(M));var Z=h&&h(M);return Z&&Z!==p&&f.empty().append(Z),this.$input=f.find("[data-input]"),this.$addBtn=f.find("[data-add]"),this.$classes=f.find("#"+r+"tags-c"),this.$btnSyncEl=f.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),f.attr("class","".concat(this.className," ").concat(i,"one-bg ").concat(i,"two-color")),this},n}(m.G7);const td=Mi;var _c,$o,Xl,Jl,Ql,el=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_i=function(){return _i=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_i.apply(this,arguments)},as=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},rl=function(a){return(0,L.isString)(a)&&a[0]=="#"},nl=function(a){return(0,L.isString)(a)&&a[0]=="."},wc="selector",Di="".concat(wc,":"),bc="".concat(Di,"add"),ed="".concat(Di,"update"),tu="".concat(Di,"remove"),il="".concat(tu,":before"),rd="".concat(Di,"custom"),xc="".concat(Di,"state"),ss={all:wc,update:ed,add:bc,remove:tu,removeBefore:il,state:xc,custom:rd},Cc=function(a){el(n,a);function n(t){var e=a.call(this,t,"SelectorManager",new Jn([]),ss,Yf,{skipListen:!0})||this;e.Selector=yr,e.Selectors=Jn,e.storageKey="",(0,L.bindAll)(e,"__updateSelectedByComponents");var r=e.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),e.all=new Jn(r.selectors),e.selected=new Jn([],{em:t,config:r}),e.states=new m.FE(r.states.map(function(f){return new Qs(f)}),{model:Qs}),e.model=new m.Hn({cFirst:r.componentFirst,_undo:!0}),e.__update=(0,L.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(f,p){return t.trigger(xc,p)}),e.model.on("change:cFirst",function(f,p){return t.trigger("selector:type",p)}),t.on("component:toggled component:update:classes",e.__updateSelectedByComponents);var l="component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target";return e.model.listenTo(t,l,function(){return e.__update()}),e}return n.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},n.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?as([],this.all.models,!0):this.all:[]},n.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},n.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},n.prototype.select=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:[t],i=this.em.Styles.select(r,e);this.selected.reset(this.__getCommonSelectors(i));var l=this.selectorTags,f=i.filter(function(p){return p}).map(function(p){return(0,ct.isComponent)(p)||(0,ct.isRule)(p)&&!p.get("selectorsAdd")?p:p.getSelectorsString()});return l&&l.componentChanged({targets:f}),this},n.prototype.addSelector=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=_i({},e);(0,L.isObject)(t)?i=t:i.name=t,rl(i.name)?(i.name=i.name.substr(1),i.type=yr.TYPE_ID):nl(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var l=i.name,f=this.getConfig(),p=this,h=p.all,g=p.em,w=l?this.get(l,i.type):h.where(i)[0];if(!w){var M=i instanceof yr?i:new yr(i,_i(_i({},r),{config:f,em:g}));return h.add(M,r)}return w},n.prototype.getSelector=function(t,e){return e===void 0&&(e=yr.TYPE_CLASS),rl(t)?(t=t.substr(1),e=yr.TYPE_ID):nl(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var i=(0,L.isString)(t)?{}:e;return(0,L.isArray)(t)?t.map(function(l){return r.addSelector(l,e,i)}):this.addSelector(t,e,i)},n.prototype.addClass=function(t){var e=this,r=[];return(0,L.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(i){return r.push(e.addSelector(i))}),r},n.prototype.get=function(t,e){var r=this;if((0,L.isArray)(t)){var i=[],l=t.map(function(f){return r.getSelector(f)}).filter(Boolean);return l.forEach(function(f){return i.indexOf(f)<0&&i.push(f)}),i}else return this.getSelector(t,e)},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.rename=function(t,e,r){var i=this.escapeName(e),l=this.get(i);return l||t.set({name:i,label:e},r)},n.prototype.setState=function(t){return this.em.setState(t),this},n.prototype.getState=function(){return this.em.getState()},n.prototype.getStates=function(){return as([],this.states.models,!0)},n.prototype.setStates=function(t,e){return this.states.reset(t.map(function(r){return new Qs(r)}),e)},n.prototype.getSelected=function(){return this.__getCommon()},n.prototype.getSelectedAll=function(){return as([],this.selected.models,!0)},n.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(r){r.getSelectors().add(e)})},n.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},n.prototype.duplicateSelected=function(t,e){var r=this;e===void 0&&(e={});var i=this.em,l=this.getSelected();if(!(l.indexOf(t)<0)){var f=this.getState(),p=i.getCurrentMedia(),h=i.Css.get(l,f,p),g=h==null?void 0:h.getStyle();if(i.getSelectedAll().forEach(function(M){var Z=M.getSelectors();if(Z.includes(t)){var nt=e.suffix||" copy",vt=t.getLabel(),_t=r.addSelector("".concat(vt).concat(nt)),At=Z.indexOf(t);Z.remove(t),Z.add(_t,{at:At})}}),g){var w=i.Css.add(this.getSelected(),f,p);w.setStyle(g)}}},n.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},n.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},n.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},n.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):yr.escapeName(t)},n.prototype.render=function(t){var e=this.selectorTags,r=this.getConfig(),i=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new td({el:i,collection:this.selected,module:this,config:r}),this.selectorTags.render().el},n.prototype.destroy=function(){var t=this,e=t.selectorTags,r=t.model;r.stopListening(),this.__update.cancel(),this.__destroy(),e==null||e.remove(),this.selectorTags=void 0},n.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},n.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var r=t.map(function(i){return i.getSelectors&&i.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,r)},n.prototype.__common=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(i){return e[1].indexOf(i)>=0}):e.slice(1).reduce(function(i,l){return t.__common(i,l)},e[0]):[]},n.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},n}(W);const Sc=Cc;var nd={textTags:["br","b","i","u","a","ul","ol"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};const eu=nd;var ei,zn={STYLE_RULE:1,CHARSET_RULE:2,IMPORT_RULE:3,MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,KEYFRAME_RULE:8,NAMESPACE_RULE:10,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15,REGION_STYLE_RULE:16},qo=(ei={},ei[zn.MEDIA_RULE]="media",ei[zn.FONT_FACE_RULE]="font-face",ei[zn.PAGE_RULE]="page",ei[zn.KEYFRAMES_RULE]="keyframes",ei[zn.COUNTER_STYLE_RULE]="counter-style",ei[zn.SUPPORTS_RULE]="supports",ei[zn.DOCUMENT_RULE]="document",ei[zn.FONT_FEATURE_VALUES_RULE]="font-feature-values",ei[zn.VIEWPORT_RULE]="viewport",ei),ru=(0,L.keys)(qo),nu=[zn.FONT_FACE_RULE,zn.PAGE_RULE,zn.COUNTER_STYLE_RULE,zn.VIEWPORT_RULE],iu=ru.filter(function(a){return nu.indexOf(Number(a))<0}).map(function(a){return qo[a]}).concat(["container","layer"]),ls=nu.map(function(a){return qo[a]}),Oa=function(a){a===void 0&&(a="");for(var n=[],t=[],e=a.split(","),r=0,i=e.length;r<i;r++){var l=e[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var f=l.split(".").filter(Boolean);t.push(f)}else n.push(l)}return{result:t,add:n}},id=function(a){for(var n=a.style,t={},e=0,r=n.length;e<r;e++){var i=n[e],l=n.getPropertyValue(i),f=n.getPropertyPriority(i);t[i]="".concat(l).concat(f?" !".concat(f):"")}return t},ou=function(a){var n=a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"";return n.trim()},au=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={});var e={},r=a.length,i=a[r-1],l=i?i.split(/:(.+)/):[],f=l[1],p=t.atRule,h=t.selectorsAdd,g=t.mediaText,w=ls.indexOf(p)>=0;return w&&(e.singleAtRule=!0),p&&(e.atRuleType=p),h&&(e.selectorsAdd=h),g&&(e.mediaText=g),f&&(a[r-1]=l[0],e.state=f,l.splice(l.length-1,1)),e.selectors=a,e.style=n,e},Oc=function(a){var n=a.cssText,t=n===void 0?"":n;return iu.find(function(e){return t.indexOf("@".concat(e))===0})},Tc=function(a){for(var n=[],t=a.cssRules||[],e=0,r=t.length;e<r;e++){var i=t[e],l=i.type,f=!1,p="",h="",g=i.selectorText||i.keyText||"",w=nu.indexOf(l)>=0;if(w)f=!0,p=qo[l],h=ou(i);else if(ru.indexOf("".concat(l))>=0||!l&&Oc(i)){var M=Tc(i),Z=qo[l]||Oc(i);h=ou(i);for(var nt=0,vt=M.length;nt<vt;nt++){var _t=M[nt];h&&(_t.mediaText=h),_t.atRuleType=Z}n=n.concat(M)}if(!(!g&&!w)){for(var At=id(i),Zt=Oa(g),Kt=Zt.add,he=Zt.result,Ce=void 0,Re=0,Ze=he.length;Re<Ze;Re++){var ge=au(he[Re],At,{atRule:qo[l]});n.push(ge),Ce=ge}if(Kt.length){var Ke=Kt.join(", ");if(Ce)Ce.selectorsAdd=Ke;else{var ge={selectors:[],selectorsAdd:Ke,style:At};f&&(ge.singleAtRule=f),p&&(ge.atRuleType=p),h&&(ge.mediaText=h),n.push(ge)}}}}return n};const od=function(a){var n=document.createElement("style");n.innerHTML=a,document.head.appendChild(n);var t=n.sheet;return document.head.removeChild(n),t?Tc(t):[]};var Ec=function(a,n){return n===void 0&&(n={}),{parse:function(t){var e=this,r=[],i=n.parserCss,l=a==null?void 0:a.Editor,f=i?i(t,l):od(t);return f.forEach(function(p){return r=r.concat(e.checkNode(p))}),a==null||a.trigger("parse:css",{input:t,output:r,nodes:f}),r},checkNode:function(t){var e=t.selectors,r=t.style,i=[t];if((0,L.isString)(e)){var l=[],f=t,p=Oa(e),h=p.result,g=p.add.join(", "),w={atRule:f.atRule,mediaText:f.params};if(h.length?h.forEach(function(Z){l.push(au(Z,r,w))}):l.push(au([],r,w)),g){var M=l[l.length-1];M.selectorsAdd=g}i=l}return i}}};const ad=Ec;var sd=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pc=function(a){sd(n,a);function n(t){var e=a.call(this,t,"Parser",eu)||this,r=e.config;return e.parserCss=ad(t,r),e.parserHtml=zi(t,r),e}return n.prototype.parseHtml=function(t,e){e===void 0&&(e={});var r=this,i=r.em,l=r.parserHtml;return l.compTypes=i.Components.getTypes()||{},l.parse(t,this.parserCss,e)},n.prototype.parseCss=function(t){return this.parserCss.parse(t)},n.prototype.destroy=function(){},n}(q);const su=Pc;var kc={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}};const ld=kc;var lu=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(w){l(w)}}function p(g){try{h(e.throw(g))}catch(w){l(w)}}function h(g){g.done?i(g.value):r(g.value).then(f,p)}h((e=e.apply(a,n||[])).next())})},Yo=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return p([h,g])}}function p(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Ac=function(){function a(){}return a.prototype.store=function(n,t){return t===void 0&&(t={}),lu(this,void 0,void 0,function(){return Yo(this,function(e){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(n)),[2,n]})})},a.prototype.load=function(n){return n===void 0&&(n={}),lu(this,void 0,void 0,function(){var t;return Yo(this,function(e){return t={},this.hasLocal(n,!0)&&(t=JSON.parse(localStorage.getItem(n.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(n,t){if(n===void 0&&(n={}),n.checkLocal&&(!(0,ct.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();const ol=Ac;function Xo(a){"@babel/helpers - typeof";return Xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xo(a)}function ud(a){var n=this.constructor;return this.then(function(t){return n.resolve(a()).then(function(){return t})},function(t){return n.resolve(a()).then(function(){return n.reject(t)})})}const cd=ud;function br(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError(Xo(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(a);if(r.length===0)return t([]);var i=r.length;function l(p,h){if(h&&(Xo(h)==="object"||typeof h=="function")){var g=h.then;if(typeof g=="function"){g.call(h,function(w){l(p,w)},function(w){r[p]={status:"rejected",reason:w},--i===0&&t(r)});return}}r[p]={status:"fulfilled",value:h},--i===0&&t(r)}for(var f=0;f<r.length;f++)l(f,r[f])})}const fd=br;function al(a,n){this.name="AggregateError",this.errors=a,this.message=n||""}al.prototype=Error.prototype;function us(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError("Promise.any accepts an array"));var r=Array.prototype.slice.call(a);if(r.length===0)return e();for(var i=[],l=0;l<r.length;l++)try{n.resolve(r[l]).then(t).catch(function(f){i.push(f),i.length===r.length&&e(new al(i,"All promises were rejected"))})}catch(f){e(f)}})}const fi=us;var sl=setTimeout;function ll(a){return!!(a&&typeof a.length<"u")}function Lc(){}function Mc(a,n){return function(){a.apply(n,arguments)}}function Cr(a){if(!(this instanceof Cr))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],dr(a,this)}function ul(a,n){for(;a._state===3;)a=a._value;if(a._state===0){a._deferreds.push(n);return}a._handled=!0,Cr._immediateFn(function(){var t=a._state===1?n.onFulfilled:n.onRejected;if(t===null){(a._state===1?cl:cs)(n.promise,a._value);return}var e;try{e=t(a._value)}catch(r){cs(n.promise,r);return}cl(n.promise,e)})}function cl(a,n){try{if(n===a)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(Xo(n)==="object"||typeof n=="function")){var t=n.then;if(n instanceof Cr){a._state=3,a._value=n,fs(a);return}else if(typeof t=="function"){dr(Mc(t,n),a);return}}a._state=1,a._value=n,fs(a)}catch(e){cs(a,e)}}function cs(a,n){a._state=2,a._value=n,fs(a)}function fs(a){a._state===2&&a._deferreds.length===0&&Cr._immediateFn(function(){a._handled||Cr._unhandledRejectionFn(a._value)});for(var n=0,t=a._deferreds.length;n<t;n++)ul(a,a._deferreds[n]);a._deferreds=null}function Dc(a,n,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof n=="function"?n:null,this.promise=t}function dr(a,n){var t=!1;try{a(function(e){t||(t=!0,cl(n,e))},function(e){t||(t=!0,cs(n,e))})}catch(e){if(t)return;t=!0,cs(n,e)}}Cr.prototype.catch=function(a){return this.then(null,a)},Cr.prototype.then=function(a,n){var t=new this.constructor(Lc);return ul(this,new Dc(a,n,t)),t},Cr.prototype.finally=cd,Cr.all=function(a){return new Cr(function(n,t){if(!ll(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return n([]);var r=e.length;function i(f,p){try{if(p&&(Xo(p)==="object"||typeof p=="function")){var h=p.then;if(typeof h=="function"){h.call(p,function(g){i(f,g)},t);return}}e[f]=p,--r===0&&n(e)}catch(g){t(g)}}for(var l=0;l<e.length;l++)i(l,e[l])})},Cr.any=fi,Cr.allSettled=fd,Cr.resolve=function(a){return a&&Xo(a)==="object"&&a.constructor===Cr?a:new Cr(function(n){n(a)})},Cr.reject=function(a){return new Cr(function(n,t){t(a)})},Cr.race=function(a){return new Cr(function(n,t){if(!ll(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,r=a.length;e<r;e++)Cr.resolve(a[e]).then(n,t)})},Cr._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){sl(a,0)},Cr._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};const fl=Cr;(0,ct.hasWin)()&&(window.Promise=window.Promise||fl);const Ic=typeof fetch=="function"?fetch.bind():function(a,n){return new fl(function(t,e){var r=new XMLHttpRequest;r.open(n.method||"get",a),r.withCredentials=n.credentials=="include";for(var i in n.headers||{})r.setRequestHeader(i,n.headers[i]);r.onload=function(l){return t({status:r.status,statusText:r.statusText,text:function(){return fl.resolve(r.responseText)}})},r.onerror=e,r.upload&&n.onProgress&&(r.upload.onprogress=n.onProgress),n.body?r.send(n.body):r.send()})};var Ii=function(){return Ii=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ii.apply(this,arguments)},jc=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(w){l(w)}}function p(g){try{h(e.throw(g))}catch(w){l(w)}}function h(g){g.done?i(g.value):r(g.value).then(f,p)}h((e=e.apply(a,n||[])).next())})},ds=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return p([h,g])}}function p(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},dd=function(){function a(){}return a.prototype.store=function(n,t){return t===void 0&&(t={}),jc(this,void 0,void 0,function(){return ds(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlStore,this.__props(t,n),t)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(n){return n===void 0&&(n={}),jc(this,void 0,void 0,function(){return ds(this,function(t){switch(t.label){case 0:return[4,this.request(n.urlLoad,this.__props(n),n)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(n,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),Ic(n,t).then(function(r){var i=r.text(),l=(r.status/200|0)===1;return l?i:i.then(Promise.reject)}).then(function(r){var i=r&&(0,L.isString)(r);return e.contentTypeJson&&i?JSON.parse(r):r})},a.prototype.__props=function(n,t){n===void 0&&(n={});var e=n.contentTypeJson,r=n.headers||{},i=n.fetchOptions||{},l="X-Requested-With",f="Content-Type",p;if((0,L.isUndefined)(r[l])&&(r[l]="XMLHttpRequest"),(0,L.isUndefined)(r[f])&&e&&(r[f]="application/json; charset=utf-8"),t)if(e)p=JSON.stringify(t);else{p=new FormData;for(var h in t)p.append(h,t[h])}var g={method:p?"POST":"GET",credentials:n.credentials,headers:r,body:p};return Ii(Ii({},g),(0,L.isFunction)(i)?i(g):i)},a}();const Rr=dd;var pd=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ta=function(){return Ta=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ta.apply(this,arguments)},uu=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(w){l(w)}}function p(g){try{h(e.throw(g))}catch(w){l(w)}}function h(g){g.done?i(g.value):r(g.value).then(f,p)}h((e=e.apply(a,n||[])).next())})},Ea=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return p([h,g])}}function p(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},o="storage:start",s="storage:after",c="storage:end",u="storage:error",d="local",v="remote",y=function(a){pd(n,a);function n(t){var e=a.call(this,t,"StorageManager",ld)||this;e.storages={};var r=e.config;return r._disable&&(r.type=void 0),e.storages={},e.add(d,new ol),e.add(v,new Rr),e.setCurrent(r.type),e}return n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},n.prototype.add=function(t,e){return this.storages[t]=e,this},n.prototype.get=function(t){return this.storages[t]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},n.prototype.store=function(t,e){return e===void 0&&(e={}),uu(this,void 0,void 0,function(){var r,i,l,f,p,h;return Ea(this,function(g){switch(g.label){case 0:r=this.getCurrentStorage(),i=Ta(Ta({},this.getCurrentOptions()),e),l=this.getRecoveryStorage(),f=this.getCurrentOptions(d),g.label=1;case 1:return g.trys.push([1,5,,9]),[4,this.__exec(r,i,t)];case 2:return g.sent(),p=l,p?[4,this.__exec(l,f,{})]:[3,4];case 3:p=g.sent(),g.label=4;case 4:return[3,9];case 5:return h=g.sent(),l?[4,this.__exec(l,f,t)]:[3,7];case 6:return g.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,t]}})})},n.prototype.load=function(t){return t===void 0&&(t={}),uu(this,void 0,void 0,function(){var e,r,i,l,f;return Ea(this,function(p){switch(p.label){case 0:return e=this.getCurrentStorage(),r=Ta(Ta({},this.getCurrentOptions()),t),i=this.getRecoveryStorage(),i?[4,this.__exec(i,this.getCurrentOptions(d))]:[3,5];case 1:if(f=p.sent(),(0,L.isEmpty)(f))return[3,5];p.label=2;case 2:return p.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return p.sent(),l=f,[3,5];case 4:return p.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,r)];case 6:l=p.sent(),p.label=7;case 7:return[2,l||{}]}})})},n.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(r,i){(0,L.isFunction)(e)?e(r,i,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?r(null):i()})},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){var t=this.getRecovery();return t&&this.getCurrent()===v&&this.get(d)},n.prototype.__exec=function(t,e,r){var i;return uu(this,void 0,void 0,function(){var l,f,p,h,g,w,M,Z,nt,vt,_t,At,Zt;return Ea(this,function(Kt){switch(Kt.label){case 0:if(l=r?"store":"load",f=this.getConfig(),p=f.onStore,h=f.onLoad,this.onStart(l,r),!t)return[2,r||{}];Kt.label=1;case 1:return Kt.trys.push([1,14,,15]),w=(i=this.em)===null||i===void 0?void 0:i.getEditor(),M=void 0,r?(nt=p,nt?[4,p(r,w)]:[3,3]):[3,7];case 2:nt=Kt.sent(),Kt.label=3;case 3:return Z=nt||r,vt=e.onStore,vt?[4,e.onStore(Z,w)]:[3,5];case 4:vt=Kt.sent(),Kt.label=5;case 5:return Z=vt||Z,[4,t.store(Z,e)];case 6:return M=Kt.sent(),g=r,[3,13];case 7:return[4,t.load(e)];case 8:return M=Kt.sent(),g=this.__clearKeys(M),_t=e.onLoad,_t?[4,e.onLoad(g,w)]:[3,10];case 9:_t=Kt.sent(),Kt.label=10;case 10:return g=_t||g,At=h,At?[4,h(g,w)]:[3,12];case 11:At=Kt.sent(),Kt.label=12;case 12:g=At||g,Kt.label=13;case 13:return this.onAfter(l,g,M),this.onEnd(l,g),[3,15];case 14:throw Zt=Kt.sent(),this.onError(l,Zt),Zt;case 15:return[2,g]}})})},n.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),r=new RegExp("^".concat(e.id)),i={};for(var l in t){var f=l.replace(r,"");i[f]=t[l]}return i},n.prototype.getCurrentOptions=function(t){var e=this.getConfig(),r=t||this.getCurrent();return e.options[r]||{}},n.prototype.onStart=function(t,e){var r=this.em;r&&(r.trigger(o),t&&r.trigger("".concat(o,":").concat(t),e))},n.prototype.onAfter=function(t,e,r){var i=this.em;i&&(i.trigger(s),i.trigger("".concat(s,":").concat(t),e,r),i.trigger("storage:".concat(t),e,r))},n.prototype.onEnd=function(t,e){var r=this.em;r&&(r.trigger(c),t&&r.trigger("".concat(c,":").concat(t),e))},n.prototype.onError=function(t,e){var r=this.em;r&&(r.trigger(u,e),t&&r.trigger("".concat(u,":").concat(t),e),this.onEnd(t,e))},n.prototype.canAutoload=function(){var t=this.getCurrentStorage();return!!t&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}(q);const S=y;var P={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1};const z=P;var pt=wr(330),xt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zt=function(){return zt=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zt.apply(this,arguments)},Ft=function(a){xt(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var r=t.config,i=r===void 0?{}:r,l=e,f=l.model,p=l.eventCapture,h=f.target,g=f.attributes.type;e.config=i,e.em=i.em,e.ppfx=i.pStylePrefix||"",e.pfx=e.ppfx+i.stylePrefix||"",e.target=h;var w=e.ppfx;e.clsField="".concat(w,"field ").concat(w,"field-").concat(g);var M=[["change:value",e.onValueChange],["remove",e.removeView]];return M.forEach(function(Z){var nt=Z[0],vt=Z[1];f.off(nt,vt),e.listenTo(f,nt,vt)}),f.view=e,e.listenTo(f,"change:label",e.render),e.listenTo(f,"change:placeholder",e.rerender),e.events={},p.forEach(function(Z){return e.events[Z]="onChange"}),e.delegateEvents(),e.init(),e}return n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.templateLabel=function(t){var e=this.ppfx,r=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(r,'">').concat(r,"</div>")},n.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},n.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},n.prototype.removeView=function(){this.remove(),this.removed()},n.prototype.init=function(){},n.prototype.removed=function(){},n.prototype.onRender=function(t){},n.prototype.onUpdate=function(t){},n.prototype.onEvent=function(t){},n.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,L.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(zt(zt({},this.getClbOpts()),{event:t}))},n.prototype.getValueForTarget=function(){return this.model.get("value")},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},n.prototype.onValueChange=function(t,e,r){if(r===void 0&&(r={}),r.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var i=this.getValueForTarget();t.setTargetValue(i,r)}},n.prototype.renderLabel=function(){var t=this,e=t.$el,r=t.target,i=this.getLabel(),l=this.templateLabel(r);this.createLabel&&(l=this.createLabel({label:i,component:r,trait:this})||""),e.find("[data-label]").append(l)},n.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,r=e.label,i=e.name;return t.t("traitManager.traits.labels.".concat(i))||(0,ct.capitalize)(r||i).replace(/-/g," ")},n.prototype.getComponent=function(){return this.target},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.em,r=t.model,i=r,l=r.attributes.name,f=i.get("placeholder")||i.get("default")||"",p=i.get("type")||"text",h=i.get("min"),g=i.get("max"),w=this.getModelValue(),M=(0,K.default)('<input type="'.concat(p,'">')),Z=e.t("traitManager.traits.attributes.".concat(l))||{};M.attr(zt({placeholder:f},Z)),(0,L.isUndefined)(w)||(i.set({value:w},{silent:!0}),M.prop("value",w)),h&&M.prop("min",h),g&&M.prop("max",g),this.$input=M}return this.$input.get(0)},n.prototype.getInputElem=function(){var t=this,e=t.input,r=t.$input;return e||r&&r.get&&r.get(0)||this.getElInput()},n.prototype.getModelValue=function(){var t,e=this.model,r=this.target,i=e.getName();if(e.get("changeProp"))t=r.get(i);else{var l=r.get("attributes");t=e.get("value")||l[i]}return(0,L.isUndefined)(t)?"":t},n.prototype.getElInput=function(){return this.elInput},n.prototype.renderField=function(){var t=this,e=t.$el,r=t.appendInput,i=t.model,l=e.find("[data-input]"),f=l[l.length-1],p=i.el;p||(p=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,L.isString)(p)?(f.innerHTML=p,this.elInput=f.firstChild):(r?f.appendChild(p):f.insertBefore(p,f.firstChild),this.elInput=p),i.el=this.elInput},n.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},n.prototype.rerender=function(){delete this.model.el,this.render()},n.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,i=t.ppfx,l=t.model,f=l.attributes,p=f.type,h=f.id,g=this.hasLabel&&this.hasLabel(),w="".concat(r,"trait");delete this.$input;var M='<div class="'.concat(w," ").concat(w,"--").concat(p,`">
      `).concat(g?'<div class="'.concat(i,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(i,"field-wrp ").concat(i,"field-wrp--").concat(p,`" data-input>
        `).concat(this.templateInput?(0,L.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(M),g&&this.renderLabel(),this.renderField(),this.el.className="".concat(w,"__wrp ").concat(w,"__wrp-").concat(h),this.postUpdate(),this.onRender(this.getClbOpts()),this},n}(m.G7);const Jt=Ft;Ft.prototype.eventCapture=["change"];var oe=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),de=function(a){oe(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t)||this;r.reuseView=!0,r.itemsView=e;var i=t.config||{},l=t.editor;return r.config=i,r.em=l,r.ppfx=i.pStylePrefix||"",r.pfx=r.ppfx+i.stylePrefix||"",r.className="".concat(r.pfx,"traits"),r.listenTo(l,"component:toggled",r.updatedCollection),r.updatedCollection(),r}return n.prototype.updatedCollection=function(){var t=this,e=t.ppfx,r=t.className,i=t.em,l=i.getSelected();this.el.className="".concat(r," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=l?l.traits:[],this.render()},n}(pt.Z);const me=de;de.prototype.itemView=Jt;var Oe=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),we=function(a){Oe(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<div class="'.concat(r,`">
      <div data-input></div>
      <div class="`).concat(e,`sel-arrow">
        <div class="`).concat(e,`d-s-arrow"></div>
      </div>
    </div>`)},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.model,r=t.em,i=e.get("name"),l=e.get("options")||[],f=[],p="<select>";l.forEach(function(w){var M="",Z,nt,vt;(0,L.isString)(w)?(Z=w,nt=w):(Z=w.name||w.label||w.value,nt="".concat((0,L.isUndefined)(w.value)?w.id:w.value).replace(/"/g,"&quot;"),vt=w.style?w.style.replace(/"/g,"&quot;"):"",M+=vt?' style="'.concat(vt,'"'):"");var _t=r.t("traitManager.traits.options.".concat(i,".").concat(nt))||Z;p+='<option value="'.concat(nt,'"').concat(M,">").concat(_t,"</option>"),f.push(nt)}),p+="</select>",this.$input=(0,K.default)(p);var h=e.getTargetValue(),g=f.indexOf(h)>=0?h:e.get("default");!(0,L.isUndefined)(g)&&this.$input.val(g)}return this.$input.get(0)},n}(Jt);const Te=we;var Ne=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),je=function(a){Ne(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<label class="'.concat(r,`" data-input>
    <i class="`).concat(e,`chk-icon"></i>
  </label>`)},n.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.checked=!!t)},n.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!this.$input,i=Jt.prototype.getInputEl.apply(this,t);if(r){var l=void 0,f=void 0,p=this,h=p.model,g=p.target,w=h.attributes.valueFalse,M=h.getName();h.get("changeProp")?(l=g.get(M),f=l):(f=g.get("attributes")[M],l=!!(f||f==="")),!(0,L.isUndefined)(w)&&f===w&&(l=!1),i.checked=l}return i},n}(Jt);const tr=je;var gr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ur=function(a){gr(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.ppfx||"";return e.opts=t,e.ppfx=r,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return n.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},n.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.setValue=function(t,e){var r=this.model,i=t||r.get("defaults"),l=this.getInputEl();l&&(l.value=i)},n.prototype.handleModelChange=function(t,e,r){this.setValue(e,r)},n.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},n.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},n.prototype.getInputEl=function(){if(!this.inputEl){var t=this,e=t.model,r=t.opts,i=r.type||"text",l=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=(0,K.default)('<input type="'.concat(i,'" placeholder="').concat(l,'">'))}return this.inputEl.get(0)},n.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},n}(m.G7);const _r=Ur;Ur.prototype.events={change:"handleChange"};var An=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pn=function(a){An(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,L.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return n.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},n.prototype.setValue=function(t,e){var r=e||{},i=this.validateInputValue(t,{deepCheck:1}),l={value:i.value,unit:""};(i.unit||i.force)&&(l.unit=i.unit),this.model.set(l,r),r.silent&&this.handleModelChange()},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},n.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},n.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var r=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var f=l==t.get("unit")?"selected":"";r.push("<option ".concat(f,">").concat(l,"</option>"))});var i=document.createElement("div");i.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(r.join(""),"</select>"),this.unitEl=i.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(t.get("value"));this.setValue(this.normalizeValue(r+e)),this.elementUpdated()},n.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(t.get("value"));this.setValue(this.normalizeValue(r-e)),this.elementUpdated()},n.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,pe.on)(this.doc,"mousemove",this.moveIncrement),(0,pe.on)(this.doc,"mouseup",this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,r=e.get("step"),i=this.current,l=this.normalizeValue(i.val+(i.y-t.pageY)*r),f=this.validateInputValue(l),p=f.value,h=f.unit;return this.prValue=p,e.set({value:p,unit:h},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,pe.S1)(this.doc,"mouseup",this.upIncrement),(0,pe.S1)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var r=this.prValue-e;t.set("value",r,{avoidStore:1}).set("value",r+e),this.elementUpdated()}},n.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var r=this.model,i=r.get("step"),l=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var f=i.toString().split(".")[1];l=f?f.length:0}return l?parseFloat(t.toFixed(l)):t},n.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var r=0,i=e||{},l=this.model,f="",p=(0,L.isUndefined)(t)?f:t,h=e.units||l.get("units")||[],g=l.get("unit")||h.length&&h[0]||"",w=(0,L.isUndefined)(e.max)?l.get("max"):e.max,M=(0,L.isUndefined)(e.min)?l.get("min"):e.min,Z=!!l.get("limitlessMax"),nt=!!l.get("limitlessMin");if(i.deepCheck){var vt=l.get("fixedValues")||[];if(p===""&&(g=""),p){var _t=new RegExp("^"+vt.join("|"),"g");if(vt.length&&_t.test(p))p=p.match(_t)[0],g="",r=1;else{var At=p+"";p+="",p=parseFloat(p.replace(",",".")),p=isNaN(p)?f:p;var Zt=At.replace(p,"");(0,L.indexOf)(h,Zt)>=0&&(g=Zt)}}}return!Z&&!(0,L.isUndefined)(w)&&w!==""&&(p=p>w?w:p),!nt&&!(0,L.isUndefined)(M)&&M!==""&&(p=p<M?M:p),{force:r,value:p,unit:g}},n.prototype.render=function(){_r.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},n}(_r);const Fr=pn;pn.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var xn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xr=function(a){xn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,r=e.value,i=e.unit;return!(0,L.isUndefined)(r)&&r!==""?r+i:t.get("default")},n.prototype.getInputEl=function(){if(!this.input){var t=this,e=t.ppfx,r=t.model,i=this.getModelValue(),l=new Fr({contClass:"".concat(e,"field-int"),type:"number",model:r,ppfx:e});l.render(),this.$input=l.inputEl,this.$unit=l.unitEl,r.set("value",i,{fromTarget:!0}),this.$input.val(i),this.input=l.el}return this.input},n}(Jt);const Wr=Xr;function Vr(a,n){if(!(0,ct.hasWin)())return;var t={beforeShow:Z,move:Z,change:Z,show:Z,hide:Z,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],r=!!/msie/i.exec(window.navigator.userAgent),i=function(){function ht(le,ve){return!!~(""+le).indexOf(ve)}var Wt=document.createElement("div"),dt=Wt.style;return dt.cssText="background-color:rgba(0,0,0,.5)",ht(dt.backgroundColor,"rgba")||ht(dt.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),f=function(){var ht="";if(r)for(var Wt=1;Wt<=6;Wt++)ht+="<div class='sp-"+Wt+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",ht,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function p(ht,Wt,dt,le){for(var ve=[],Ee=0;Ee<ht.length;Ee++){var Ye=ht[Ee];if(Ye){var er=ye(Ye),rr=er.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";rr+=ye.equals(Wt,Ye)?" sp-thumb-active":"";var Ar=er.toString(le.preferredFormat||"rgb"),Gr=i?"background-color:"+er.toRgbString():"filter:"+er.toFilter();ve.push('<span title="'+Ar+'" data-color="'+er.toRgbString()+'" class="'+rr+'"><span class="sp-thumb-inner" style="'+Gr+';"></span></span>')}else{var Hr="sp-clear-display";ve.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="'+Hr+'"></span>').attr("title",le.noColorSelectedText)).html())}}return"<div class='sp-cf "+dt+"'>"+ve.join("")+"</div>"}function h(){for(var ht=0;ht<e.length;ht++)e[ht]&&e[ht].hide()}function g(ht,Wt){var dt=a.extend({},t,ht);return dt.callbacks={move:vt(dt.move,Wt),change:vt(dt.change,Wt),show:vt(dt.show,Wt),hide:vt(dt.hide,Wt),beforeShow:vt(dt.beforeShow,Wt)},dt}function w(ht,Wt){var dt=g(Wt,ht),le=dt.flat,ve=dt.showSelectionPalette,Ee=dt.localStorageKey,Ye=dt.theme,er=dt.callbacks,rr=At(Ss,10),Ar=!1,Gr=!1,Hr=!0,pi=0,ni=0,Qr=0,Lr=0,So=0,uf=0,cf=0,_s=0,ws=0,bu=0,Oo=1,ff=[],xu=[],df={},To=dt.selectionPalette.slice(0),l_=dt.maxSelectionSize,dh="sp-dragging",La=null,Cu=ht.ownerDocument;Cu.body;var tn=a(ht),Gd=!1,ir=a(f,Cu).addClass(Ye),u_=ir.find(".sp-picker-container"),pf=ir.find(".sp-color"),hf=ir.find(".sp-dragger"),Kd=ir.find(".sp-hue"),vf=ir.find(".sp-slider"),Su=ir.find(".sp-alpha-inner"),ph=ir.find(".sp-alpha"),gf=ir.find(".sp-alpha-handle"),Eo=ir.find(".sp-input"),hh=ir.find(".sp-palette"),vh=ir.find(".sp-initial"),gh=ir.find(".sp-cancel"),Zd=ir.find(".sp-clear"),mh=ir.find(".sp-choose"),$d=ir.find(".sp-palette-toggle"),mf=tn.is("input"),c_=mf&&tn.attr("type")==="color"&&Zt(),qd=mf&&!le,_l=qd?a(l).addClass(Ye).addClass(dt.className).addClass(dt.replacerClassName):a([]),Ou=qd?_l:tn,wl=_l.find(".sp-preview-inner"),Tu=dt.color||mf&&tn.val(),bl=!1,xl=dt.preferredFormat,f_=!dt.showButtons||dt.clickoutFiresChange,Ma=!Tu,bs=dt.allowEmpty&&!c_;function Yd(){if(dt.showPaletteOnly&&(dt.showPalette=!0),$d.text(dt.showPaletteOnly?dt.togglePaletteMoreText:dt.togglePaletteLessText),dt.palette){ff=dt.palette.slice(0),xu=a.isArray(ff[0])?ff:[ff],df={};for(var Be=0;Be<xu.length;Be++)for(var We=0;We<xu[Be].length;We++){var pr=ye(xu[Be][We]).toRgbString();df[pr]=!0}}ir.toggleClass("sp-flat",le),ir.toggleClass("sp-input-disabled",!dt.showInput),ir.toggleClass("sp-alpha-enabled",dt.showAlpha),ir.toggleClass("sp-clear-enabled",bs),ir.toggleClass("sp-buttons-disabled",!dt.showButtons),ir.toggleClass("sp-palette-buttons-disabled",!dt.togglePaletteOnly),ir.toggleClass("sp-palette-disabled",!dt.showPalette),ir.toggleClass("sp-palette-only",dt.showPaletteOnly),ir.toggleClass("sp-initial-disabled",!dt.showInitial),ir.addClass(dt.className).addClass(dt.containerClassName),Ss()}function d_(){if(r&&ir.find("*:not(input)").attr("unselectable","on"),Yd(),qd&&tn.after(_l).hide(),bs||Zd.hide(),le)tn.after(ir).hide();else{var Be=dt.appendTo==="parent"?tn.parent():a(dt.appendTo);Be.length!==1&&(Be=a("body")),Be.append(ir)}yh(),Ou.bind("click.spectrum touchstart.spectrum",function(Je){Gd||bh(),Je.stopPropagation(),a(Je.target).is("input")||Je.preventDefault()}),(tn.is(":disabled")||dt.disabled===!0)&&Th(),ir.click(nt),Eo.change(tp),Eo.bind("paste",function(){setTimeout(tp,1)}),Eo.keydown(function(Je){Je.keyCode==13&&tp()}),gh.text(dt.cancelText),gh.bind("click.spectrum",function(Je){Je.stopPropagation(),Je.preventDefault(),Sh(),Da()}),Zd.attr("title",dt.clearText),Zd.bind("click.spectrum",function(Je){Je.stopPropagation(),Je.preventDefault(),Ma=!0,Cl(),le&&Cs(!0)}),mh.text(dt.chooseText),mh.bind("click.spectrum",function(Je){Je.stopPropagation(),Je.preventDefault(),r&&Eo.is(":focus")&&Eo.trigger("change"),h_()&&(Cs(!0),Da())}),$d.text(dt.showPaletteOnly?dt.togglePaletteMoreText:dt.togglePaletteLessText),$d.bind("click.spectrum",function(Je){Je.stopPropagation(),Je.preventDefault(),dt.showPaletteOnly=!dt.showPaletteOnly,!dt.showPaletteOnly&&!le&&ir.css("left","-="+(u_.outerWidth(!0)+5)),Yd()}),_t(ph,function(Je,Ni,Os){Oo=Je/So,Ma=!1,Os.shiftKey&&(Oo=Math.round(Oo*10)/10),Cl()},Jd,Qd),_t(Kd,function(Je,Ni){_s=parseFloat(Ni/Lr),Ma=!1,dt.showAlpha||(Oo=1),Cl()},Jd,Qd),_t(pf,function(Je,Ni,Os){if(!Os.shiftKey)La=null;else if(!La){var _f=ws*pi,Eu=ni-bu*ni,Pu=Math.abs(Je-_f)>Math.abs(Ni-Eu);La=Pu?"x":"y"}var __=!La||La==="x",w_=!La||La==="y";__&&(ws=parseFloat(Je/pi)),w_&&(bu=parseFloat((ni-Ni)/ni)),Ma=!1,dt.showAlpha||(Oo=1),Cl()},Jd,Qd),Tu?(xs(Tu),Sl(),xl=dt.preferredFormat||ye(Tu).getFormat(),Xd(Tu)):Sl(),le&&ep();function We(Je){return Je.data&&Je.data.ignore?(xs(a(Je.target).closest(".sp-thumb-el").data("color")),Cl()):(xs(a(Je.target).closest(".sp-thumb-el").data("color")),Cl(),dt.hideAfterPaletteSelect&&(Cs(!0),Da())),!1}var pr=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";hh.delegate(".sp-thumb-el",pr,We),vh.delegate(".sp-thumb-el:nth-child(1)",pr,{ignore:!0},We)}function yh(){if(Ee&&window.localStorage){try{var Be=window.localStorage[Ee].split(",#");Be.length>1&&(delete window.localStorage[Ee],a.each(Be,function(We,pr){Xd(pr)}))}catch{}try{To=window.localStorage[Ee].split(";")}catch{}}}function Xd(Be){if(ve){var We=ye(Be).toRgbString();if(!df[We]&&a.inArray(We,To)===-1)for(To.push(We);To.length>l_;)To.shift();if(Ee&&window.localStorage)try{window.localStorage[Ee]=To.join(";")}catch{}}}function p_(){var Be=[];if(dt.showPalette)for(var We=0;We<To.length;We++){var pr=ye(To[We]).toRgbString();df[pr]||Be.push(To[We])}return Be.reverse().slice(0,dt.maxSelectionSize)}function _h(){var Be=Kn(),We=a.map(xu,function(pr,Je){return p(pr,Be,"sp-palette-row sp-palette-row-"+Je,dt)});yh(),To&&We.push(p(p_(),Be,"sp-palette-row sp-palette-row-selection",dt)),hh.html(We.join(""))}function wh(){if(dt.showInitial){var Be=bl,We=Kn();vh.html(p([Be,We],We,"sp-palette-row-initial",dt))}}function Jd(){(ni<=0||pi<=0||Lr<=0)&&Ss(),Gr=!0,ir.addClass(dh),La=null,tn.trigger("dragstart.spectrum",[Kn()])}function Qd(){Gr=!1,ir.removeClass(dh),tn.trigger("dragstop.spectrum",[Kn()])}function tp(){var Be=Eo.val();if((Be===null||Be==="")&&bs)xs(null),Cs(!0);else{var We=ye(Be);We.isValid()?(xs(We),Cs(!0)):Eo.addClass("sp-validation-error")}}function bh(){Ar?Da():ep()}function ep(){var Be=a.Event("beforeShow.spectrum");if(Ar){Ss();return}if(tn.trigger("beforeShow.spectrum",[Kn()]),!(er.beforeShow(Kn())===!1||Be.isDefaultPrevented())){h(),Ar=!0;var We=a(Cu);We.bind("keydown.spectrum",xh),We.bind("click.spectrum",Ch),a(window).bind("resize.spectrum",rr),_l.addClass("sp-active"),ir.removeClass("sp-hidden"),Ss(),Sl(),bl=Kn(),wh(),er.show(bl),tn.trigger("show.spectrum",[bl])}}function xh(Be){Be.keyCode===27&&Da()}function Ch(Be){Be.button!=2&&(Gr||(f_?Cs(!0):Sh(),Da()))}function Da(){!Ar||le||(Ar=!1,a(Cu).unbind("keydown.spectrum",xh),a(Cu).unbind("click.spectrum",Ch),a(window).unbind("resize.spectrum",rr),_l.removeClass("sp-active"),ir.addClass("sp-hidden"),er.hide(Kn()),tn.trigger("hide.spectrum",[Kn()]))}function Sh(){xs(bl,!0)}function xs(Be,We){if(ye.equals(Be,Kn())){Sl();return}var pr,Je;!Be&&bs?Ma=!0:(Ma=!1,Hr=!Be,pr=ye(Be),Je=pr.toHsv(),_s=Je.h%360/360,ws=Je.s,bu=Je.v,Oo=Je.a),Sl(),pr&&pr.isValid()&&!We&&(xl=dt.preferredFormat||pr.getFormat())}function Kn(Be){return Be=Be||{},bs&&Ma?null:ye.fromRatio({h:_s,s:ws,v:bu,a:Math.round(Oo*100)/100},{format:Be.format||xl})}function h_(){return!Eo.hasClass("sp-validation-error")}function Cl(){Sl(),er.move(Kn()),tn.trigger("move.spectrum",[Kn()])}function Sl(){Eo.removeClass("sp-validation-error"),Oh();var Be=ye.fromRatio({h:_s,s:1,v:1});pf.css("background-color",Be.toHexString());var We=xl;Oo<1&&!(Oo===0&&We==="name")&&(We==="hex"||We==="hex3"||We==="hex6"||We==="name")&&(We="rgb");var pr=Kn({format:We}),Je="";if(wl.removeClass("sp-clear-display"),wl.css("background-color","transparent"),!pr&&bs)wl.addClass("sp-clear-display");else{var Ni=pr.toHexString(),Os=pr.toRgbString();if(i||pr.alpha===1?wl.css("background-color",Os):(wl.css("background-color","transparent"),wl.css("filter",pr.toFilter())),dt.showAlpha){var _f=pr.toRgb();_f.a=0;var Eu=ye(_f).toRgbString(),Pu="linear-gradient(left, "+Eu+", "+Ni+")";r?Su.css("filter",ye(Eu).toFilter({gradientType:1},Ni)):(Su.css("background","-webkit-"+Pu),Su.css("background","-moz-"+Pu),Su.css("background","-ms-"+Pu),Su.css("background","linear-gradient(to right, "+Eu+", "+Ni+")"))}Je=pr.toString(We)}dt.showInput&&Eo.val(Je),dt.showPalette&&_h(),wh()}function Oh(){var Be=ws,We=bu;if(bs&&Ma)gf.hide(),vf.hide(),hf.hide();else{gf.show(),vf.show(),hf.show();var pr=Be*pi,Je=ni-We*ni;pr=Math.max(-Qr,Math.min(pi-Qr,pr-Qr)),Je=Math.max(-Qr,Math.min(ni-Qr,Je-Qr)),hf.css({top:Je+"px",left:pr+"px"});var Ni=Oo*So;gf.css({left:Ni-uf/2+"px"});var Os=_s*Lr;vf.css({top:Os-cf+"px"})}}function Cs(Be){var We=Kn(),pr="",Je=Hr?!0:!ye.equals(We,bl);We&&(pr=We.toString(xl),!Ar&&Xd(We)),mf&&tn.val(pr),Be&&Je&&(er.change(We),tn.trigger("change",[We]))}function Ss(){Ar&&(pi=pf.width(),ni=pf.height(),Qr=hf.height(),Kd.width(),Lr=Kd.height(),cf=vf.height(),So=ph.width(),uf=gf.width(),le||(ir.css("position","absolute"),dt.offset?ir.offset(dt.offset):ir.offset(M(ir,Ou))),Oh(),dt.showPalette&&_h(),tn.trigger("reflow.spectrum"))}function v_(){tn.show(),Ou.unbind("click.spectrum touchstart.spectrum"),ir.remove(),_l.remove(),e[yf.id]=null}function g_(Be,We){if(Be===n)return a.extend({},dt);if(We===n)return dt[Be];dt[Be]=We,Be==="preferredFormat"&&(xl=dt.preferredFormat),Yd()}function m_(){Gd=!1,tn.attr("disabled",!1),Ou.removeClass("sp-disabled")}function Th(){Da(),Gd=!0,tn.attr("disabled",!0),Ou.addClass("sp-disabled")}function y_(Be){dt.offset=Be,Ss()}d_();var yf={show:ep,hide:Da,toggle:bh,reflow:Ss,option:g_,enable:m_,disable:Th,offset:y_,set:function(Be){xs(Be),Cs()},get:Kn,destroy:v_,container:ir};return yf.id=e.push(yf)-1,yf}function M(ht,Wt){var dt=0,le=ht.outerWidth(),ve=ht.outerHeight(),Ee=Wt.outerHeight(),Ye=ht[0].ownerDocument,er=Ye.documentElement,rr=er.clientWidth,Ar=er.clientHeight,Gr=a(Ye).scrollLeft(),Hr=a(Ye).scrollTop(),pi=rr+Gr,ni=Ar+Hr,Qr=Wt.offset();return Qr.top+=Ee,Qr.left-=Math.min(Qr.left,Qr.left+le>pi&&pi>le?Math.abs(Qr.left+le-pi):0),Qr.top-=Math.min(Qr.top,Qr.top+ve>ni&&ni>ve?Math.abs(ve+Ee-dt):dt),Qr}function Z(){}function nt(ht){ht.stopPropagation()}function vt(ht,Wt){var dt=Array.prototype.slice,le=dt.call(arguments,2);return function(){return ht.apply(Wt,le.concat(dt.call(arguments)))}}function _t(ht,Wt,dt,le){Wt=Wt||function(){},dt=dt||function(){},le=le||function(){};var ve=document,Ee=!1,Ye={},er=0,rr=0,Ar="ontouchstart"in window,Gr={};Gr.selectstart=Hr,Gr.dragstart=Hr,Gr["touchmove mousemove"]=pi,Gr["touchend mouseup"]=Qr;function Hr(Lr){Lr.stopPropagation&&Lr.stopPropagation(),Lr.preventDefault&&Lr.preventDefault(),Lr.returnValue=!1}function pi(Lr){if(Ee){if(r&&ve.documentMode<9&&!Lr.button)return Qr();var So=Lr&&Lr.touches&&Lr.touches[0],uf=So&&So.pageX||Lr.pageX,cf=So&&So.pageY||Lr.pageY,_s=Math.max(0,Math.min(uf-Ye.left,rr)),ws=Math.max(0,Math.min(cf-Ye.top,er));Ar&&Hr(Lr),Wt.apply(ht,[_s,ws,Lr])}}function ni(Lr){var So=Lr.which?Lr.which==3:Lr.button==2;!So&&!Ee&&dt.apply(ht,arguments)!==!1&&(Ee=!0,er=a(ht).height(),rr=a(ht).width(),Ye=a(ht).offset(),a(ve).bind(Gr),a(ve.body).addClass("sp-dragging"),pi(Lr),Hr(Lr))}function Qr(){Ee&&(a(ve).unbind(Gr),a(ve.body).removeClass("sp-dragging"),setTimeout(function(){le.apply(ht,arguments)},0)),Ee=!1}a(ht).bind("touchstart mousedown",ni)}function At(ht,Wt,dt){var le;return function(){var ve=this,Ee=arguments,Ye=function(){le=null,ht.apply(ve,Ee)};dt&&clearTimeout(le),(dt||!le)&&(le=setTimeout(Ye,Wt))}}function Zt(){return a.fn.spectrum.inputTypeColorSupport()}var Kt="spectrum.id";a.fn.spectrum=function(ht,Wt){if(typeof ht=="string"){var dt=this,le=Array.prototype.slice.call(arguments,1);return this.each(function(){var ve=e[a(this).data(Kt)];if(ve){var Ee=ve[ht];if(!Ee)throw new Error("Spectrum: no such method: '"+ht+"'");ht=="get"?dt=ve.get():ht=="container"?dt=ve.container:ht=="option"?dt=ve.option.apply(ve,le):ht=="destroy"?(ve.destroy(),a(this).removeData(Kt)):Ee.apply(ve,le)}}),dt}return this.spectrum("destroy").each(function(){var ve=a.extend({},ht,a(this).data()),Ee=w(this,ve);a(this).data(Kt,Ee.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=_t,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function ht(){if(typeof ht._cachedResult>"u"){var Wt=a("<input type='color'/>")[0];ht._cachedResult=Wt.type==="color"&&Wt.value!==""}return ht._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var ht=a("input[type=color]");ht.length&&!Zt()&&ht.spectrum({preferredFormat:"hex6"})};var he=/^[\s,#]+/,Ce=/\s+$/,Re=0,Ze=Math,ge=Ze.round,Ke=Ze.min,ar=Ze.max,un=Ze.random,ye=function(ht,Wt){if(ht=ht||"",Wt=Wt||{},ht instanceof ye)return ht;if(!(this instanceof ye))return new ye(ht,Wt);var dt=vn(ht);this._originalInput=ht,this._r=dt.r,this._g=dt.g,this._b=dt.b,this._a=dt.a,this._roundA=ge(100*this._a)/100,this._format=Wt.format||dt.format,this._gradientType=Wt.gradientType,this._r<1&&(this._r=ge(this._r)),this._g<1&&(this._g=ge(this._g)),this._b<1&&(this._b=ge(this._b)),this._ok=dt.ok,this._tc_id=Re++};ye.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ht=this.toRgb();return(ht.r*299+ht.g*587+ht.b*114)/1e3},setAlpha:function(ht){return this._a=fh(ht),this._roundA=ge(100*this._a)/100,this},toHsv:function(){var ht=Fi(this._r,this._g,this._b);return{h:ht.h*360,s:ht.s,v:ht.v,a:this._a}},toHsvString:function(){var ht=Fi(this._r,this._g,this._b),Wt=ge(ht.h*360),dt=ge(ht.s*100),le=ge(ht.v*100);return this._a==1?"hsv("+Wt+", "+dt+"%, "+le+"%)":"hsva("+Wt+", "+dt+"%, "+le+"%, "+this._roundA+")"},toHsl:function(){var ht=bo(this._r,this._g,this._b);return{h:ht.h*360,s:ht.s,l:ht.l,a:this._a}},toHslString:function(){var ht=bo(this._r,this._g,this._b),Wt=ge(ht.h*360),dt=ge(ht.s*100),le=ge(ht.l*100);return this._a==1?"hsl("+Wt+", "+dt+"%, "+le+"%)":"hsla("+Wt+", "+dt+"%, "+le+"%, "+this._roundA+")"},toHex:function(ht){return af(this._r,this._g,this._b,ht)},toHexString:function(ht){return"#"+this.toHex(ht)},toHex8:function(){return sf(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:ge(this._r),g:ge(this._g),b:ge(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+ge(this._r)+", "+ge(this._g)+", "+ge(this._b)+")":"rgba("+ge(this._r)+", "+ge(this._g)+", "+ge(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:ge(Nr(this._r,255)*100)+"%",g:ge(Nr(this._g,255)*100)+"%",b:ge(Nr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+ge(Nr(this._r,255)*100)+"%, "+ge(Nr(this._g,255)*100)+"%, "+ge(Nr(this._b,255)*100)+"%)":"rgba("+ge(Nr(this._r,255)*100)+"%, "+ge(Nr(this._g,255)*100)+"%, "+ge(Nr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:e_[af(this._r,this._g,this._b,!0)]||!1},toFilter:function(ht){var Wt="#"+sf(this._r,this._g,this._b,this._a),dt=Wt,le=this._gradientType?"GradientType = 1, ":"";if(ht){var ve=ye(ht);dt=ve.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+le+"startColorstr="+Wt+",endColorstr="+dt+")"},toString:function(ht){var Wt=!!ht;ht=ht||this._format;var dt=!1,le=this._a<1&&this._a>=0,ve=!Wt&&le&&(ht==="hex"||ht==="hex6"||ht==="hex3"||ht==="name");return ve?ht==="name"&&this._a===0?this.toName():this.toRgbString():(ht==="rgb"&&(dt=this.toRgbString()),ht==="prgb"&&(dt=this.toPercentageRgbString()),(ht==="hex"||ht==="hex6")&&(dt=this.toHexString()),ht==="hex3"&&(dt=this.toHexString(!0)),ht==="hex8"&&(dt=this.toHex8String()),ht==="name"&&(dt=this.toName()),ht==="hsl"&&(dt=this.toHslString()),ht==="hsv"&&(dt=this.toHsvString()),dt||this.toHexString())},_applyModification:function(ht,Wt){var dt=ht.apply(null,[this].concat([].slice.call(Wt)));return this._r=dt._r,this._g=dt._g,this._b=dt._b,this.setAlpha(dt._a),this},lighten:function(){return this._applyModification(G0,arguments)},brighten:function(){return this._applyModification(K0,arguments)},darken:function(){return this._applyModification(Z0,arguments)},desaturate:function(){return this._applyModification(Ud,arguments)},saturate:function(){return this._applyModification(U0,arguments)},greyscale:function(){return this._applyModification(W0,arguments)},spin:function(){return this._applyModification($0,arguments)},_applyCombination:function(ht,Wt){return ht.apply(null,[this].concat([].slice.call(Wt)))},analogous:function(){return this._applyCombination(Q0,arguments)},complement:function(){return this._applyCombination(q0,arguments)},monochromatic:function(){return this._applyCombination(t_,arguments)},splitcomplement:function(){return this._applyCombination(J0,arguments)},triad:function(){return this._applyCombination(Y0,arguments)},tetrad:function(){return this._applyCombination(X0,arguments)}},ye.fromRatio=function(ht,Wt){if(typeof ht=="object"){var dt={};for(var le in ht)ht.hasOwnProperty(le)&&(le==="a"?dt[le]=ht[le]:dt[le]=wu(ht[le]));ht=dt}return ye(ht,Wt)};function vn(ht){var Wt={r:0,g:0,b:0},dt=1,le=!1,ve=!1;return typeof ht=="string"&&(ht=s_(ht)),typeof ht=="object"&&(ht.hasOwnProperty("r")&&ht.hasOwnProperty("g")&&ht.hasOwnProperty("b")?(Wt=wo(ht.r,ht.g,ht.b),le=!0,ve=String(ht.r).substr(-1)==="%"?"prgb":"rgb"):ht.hasOwnProperty("h")&&ht.hasOwnProperty("s")&&ht.hasOwnProperty("v")?(ht.s=wu(ht.s),ht.v=wu(ht.v),Wt=of(ht.h,ht.s,ht.v),le=!0,ve="hsv"):ht.hasOwnProperty("h")&&ht.hasOwnProperty("s")&&ht.hasOwnProperty("l")&&(ht.s=wu(ht.s),ht.l=wu(ht.l),Wt=xo(ht.h,ht.s,ht.l),le=!0,ve="hsl"),ht.hasOwnProperty("a")&&(dt=ht.a)),dt=fh(dt),{ok:le,format:ht.format||ve,r:Ke(255,ar(Wt.r,0)),g:Ke(255,ar(Wt.g,0)),b:Ke(255,ar(Wt.b,0)),a:dt}}function wo(ht,Wt,dt){return{r:Nr(ht,255)*255,g:Nr(Wt,255)*255,b:Nr(dt,255)*255}}function bo(ht,Wt,dt){ht=Nr(ht,255),Wt=Nr(Wt,255),dt=Nr(dt,255);var le=ar(ht,Wt,dt),ve=Ke(ht,Wt,dt),Ee,Ye,er=(le+ve)/2;if(le==ve)Ee=Ye=0;else{var rr=le-ve;switch(Ye=er>.5?rr/(2-le-ve):rr/(le+ve),le){case ht:Ee=(Wt-dt)/rr+(Wt<dt?6:0);break;case Wt:Ee=(dt-ht)/rr+2;break;case dt:Ee=(ht-Wt)/rr+4;break}Ee/=6}return{h:Ee,s:Ye,l:er}}function xo(ht,Wt,dt){var le,ve,Ee;ht=Nr(ht,360),Wt=Nr(Wt,100),dt=Nr(dt,100);function Ye(Ar,Gr,Hr){return Hr<0&&(Hr+=1),Hr>1&&(Hr-=1),Hr<1/6?Ar+(Gr-Ar)*6*Hr:Hr<1/2?Gr:Hr<2/3?Ar+(Gr-Ar)*(2/3-Hr)*6:Ar}if(Wt===0)le=ve=Ee=dt;else{var er=dt<.5?dt*(1+Wt):dt+Wt-dt*Wt,rr=2*dt-er;le=Ye(rr,er,ht+1/3),ve=Ye(rr,er,ht),Ee=Ye(rr,er,ht-1/3)}return{r:le*255,g:ve*255,b:Ee*255}}function Fi(ht,Wt,dt){ht=Nr(ht,255),Wt=Nr(Wt,255),dt=Nr(dt,255);var le=ar(ht,Wt,dt),ve=Ke(ht,Wt,dt),Ee,Ye,er=le,rr=le-ve;if(Ye=le===0?0:rr/le,le==ve)Ee=0;else{switch(le){case ht:Ee=(Wt-dt)/rr+(Wt<dt?6:0);break;case Wt:Ee=(dt-ht)/rr+2;break;case dt:Ee=(ht-Wt)/rr+4;break}Ee/=6}return{h:Ee,s:Ye,v:er}}function of(ht,Wt,dt){ht=Nr(ht,360)*6,Wt=Nr(Wt,100),dt=Nr(dt,100);var le=Ze.floor(ht),ve=ht-le,Ee=dt*(1-Wt),Ye=dt*(1-ve*Wt),er=dt*(1-(1-ve)*Wt),rr=le%6,Ar=[dt,Ye,Ee,Ee,er,dt][rr],Gr=[er,dt,dt,Ye,Ee,Ee][rr],Hr=[Ee,Ee,er,dt,dt,Ye][rr];return{r:Ar*255,g:Gr*255,b:Hr*255}}function af(ht,Wt,dt,le){var ve=[ys(ge(ht).toString(16)),ys(ge(Wt).toString(16)),ys(ge(dt).toString(16))];return le&&ve[0].charAt(0)==ve[0].charAt(1)&&ve[1].charAt(0)==ve[1].charAt(1)&&ve[2].charAt(0)==ve[2].charAt(1)?ve[0].charAt(0)+ve[1].charAt(0)+ve[2].charAt(0):ve.join("")}function sf(ht,Wt,dt,le){var ve=[ys(o_(le)),ys(ge(ht).toString(16)),ys(ge(Wt).toString(16)),ys(ge(dt).toString(16))];return ve.join("")}ye.equals=function(ht,Wt){return!ht||!Wt?!1:ye(ht).toRgbString()==ye(Wt).toRgbString()},ye.random=function(){return ye.fromRatio({r:un(),g:un(),b:un()})};function Ud(ht,Wt){Wt=Wt===0?0:Wt||10;var dt=ye(ht).toHsl();return dt.s-=Wt/100,dt.s=lf(dt.s),ye(dt)}function U0(ht,Wt){Wt=Wt===0?0:Wt||10;var dt=ye(ht).toHsl();return dt.s+=Wt/100,dt.s=lf(dt.s),ye(dt)}function W0(ht){return ye(ht).desaturate(100)}function G0(ht,Wt){Wt=Wt===0?0:Wt||10;var dt=ye(ht).toHsl();return dt.l+=Wt/100,dt.l=lf(dt.l),ye(dt)}function K0(ht,Wt){Wt=Wt===0?0:Wt||10;var dt=ye(ht).toRgb();return dt.r=ar(0,Ke(255,dt.r-ge(255*-(Wt/100)))),dt.g=ar(0,Ke(255,dt.g-ge(255*-(Wt/100)))),dt.b=ar(0,Ke(255,dt.b-ge(255*-(Wt/100)))),ye(dt)}function Z0(ht,Wt){Wt=Wt===0?0:Wt||10;var dt=ye(ht).toHsl();return dt.l-=Wt/100,dt.l=lf(dt.l),ye(dt)}function $0(ht,Wt){var dt=ye(ht).toHsl(),le=(ge(dt.h)+Wt)%360;return dt.h=le<0?360+le:le,ye(dt)}function q0(ht){var Wt=ye(ht).toHsl();return Wt.h=(Wt.h+180)%360,ye(Wt)}function Y0(ht){var Wt=ye(ht).toHsl(),dt=Wt.h;return[ye(ht),ye({h:(dt+120)%360,s:Wt.s,l:Wt.l}),ye({h:(dt+240)%360,s:Wt.s,l:Wt.l})]}function X0(ht){var Wt=ye(ht).toHsl(),dt=Wt.h;return[ye(ht),ye({h:(dt+90)%360,s:Wt.s,l:Wt.l}),ye({h:(dt+180)%360,s:Wt.s,l:Wt.l}),ye({h:(dt+270)%360,s:Wt.s,l:Wt.l})]}function J0(ht){var Wt=ye(ht).toHsl(),dt=Wt.h;return[ye(ht),ye({h:(dt+72)%360,s:Wt.s,l:Wt.l}),ye({h:(dt+216)%360,s:Wt.s,l:Wt.l})]}function Q0(ht,Wt,dt){Wt=Wt||6,dt=dt||30;var le=ye(ht).toHsl(),ve=360/dt,Ee=[ye(ht)];for(le.h=(le.h-(ve*Wt>>1)+720)%360;--Wt;)le.h=(le.h+ve)%360,Ee.push(ye(le));return Ee}function t_(ht,Wt){Wt=Wt||6;for(var dt=ye(ht).toHsv(),le=dt.h,ve=dt.s,Ee=dt.v,Ye=[],er=1/Wt;Wt--;)Ye.push(ye({h:le,s:ve,v:Ee})),Ee=(Ee+er)%1;return Ye}ye.mix=function(ht,Wt,dt){dt=dt===0?0:dt||50;var le=ye(ht).toRgb(),ve=ye(Wt).toRgb(),Ee=dt/100,Ye=Ee*2-1,er=ve.a-le.a,rr;Ye*er==-1?rr=Ye:rr=(Ye+er)/(1+Ye*er),rr=(rr+1)/2;var Ar=1-rr,Gr={r:ve.r*rr+le.r*Ar,g:ve.g*rr+le.g*Ar,b:ve.b*rr+le.b*Ar,a:ve.a*Ee+le.a*(1-Ee)};return ye(Gr)},ye.readability=function(ht,Wt){var dt=ye(ht),le=ye(Wt),ve=dt.toRgb(),Ee=le.toRgb(),Ye=dt.getBrightness(),er=le.getBrightness(),rr=Math.max(ve.r,Ee.r)-Math.min(ve.r,Ee.r)+Math.max(ve.g,Ee.g)-Math.min(ve.g,Ee.g)+Math.max(ve.b,Ee.b)-Math.min(ve.b,Ee.b);return{brightness:Math.abs(Ye-er),color:rr}},ye.isReadable=function(ht,Wt){var dt=ye.readability(ht,Wt);return dt.brightness>125&&dt.color>500},ye.mostReadable=function(ht,Wt){for(var dt=null,le=0,ve=!1,Ee=0;Ee<Wt.length;Ee++){var Ye=ye.readability(ht,Wt[Ee]),er=Ye.brightness>125&&Ye.color>500,rr=3*(Ye.brightness/125)+Ye.color/500;(er&&!ve||er&&ve&&rr>le||!er&&!ve&&rr>le)&&(ve=er,le=rr,dt=ye(Wt[Ee]))}return dt};var Wd=ye.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},e_=ye.hexNames=r_(Wd);function r_(ht){var Wt={};for(var dt in ht)ht.hasOwnProperty(dt)&&(Wt[ht[dt]]=dt);return Wt}function fh(ht){return ht=parseFloat(ht),(isNaN(ht)||ht<0||ht>1)&&(ht=1),ht}function Nr(ht,Wt){n_(ht)&&(ht="100%");var dt=i_(ht);return ht=Ke(Wt,ar(0,parseFloat(ht))),dt&&(ht=parseInt(ht*Wt,10)/100),Ze.abs(ht-Wt)<1e-6?1:ht%Wt/parseFloat(Wt)}function lf(ht){return Ke(1,ar(0,ht))}function Co(ht){return parseInt(ht,16)}function n_(ht){return typeof ht=="string"&&ht.indexOf(".")!=-1&&parseFloat(ht)===1}function i_(ht){return typeof ht=="string"&&ht.indexOf("%")!=-1}function ys(ht){return ht.length==1?"0"+ht:""+ht}function wu(ht){return ht<=1&&(ht=ht*100+"%"),ht}function o_(ht){return Math.round(parseFloat(ht)*255).toString(16)}function a_(ht){return Co(ht)/255}var na=function(){var ht="[-\\+]?\\d+%?",Wt="[-\\+]?\\d*\\.\\d+%?",dt="(?:"+Wt+")|(?:"+ht+")",le="[\\s|\\(]+("+dt+")[,|\\s]+("+dt+")[,|\\s]+("+dt+")\\s*\\)?",ve="[\\s|\\(]+("+dt+")[,|\\s]+("+dt+")[,|\\s]+("+dt+")[,|\\s]+("+dt+")\\s*\\)?";return{rgb:new RegExp("rgb"+le),rgba:new RegExp("rgba"+ve),hsl:new RegExp("hsl"+le),hsla:new RegExp("hsla"+ve),hsv:new RegExp("hsv"+le),hsva:new RegExp("hsva"+ve),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function s_(ht){ht=ht.replace(he,"").replace(Ce,"").toLowerCase();var Wt=!1;if(Wd[ht])ht=Wd[ht],Wt=!0;else if(ht=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var dt;return(dt=na.rgb.exec(ht))?{r:dt[1],g:dt[2],b:dt[3]}:(dt=na.rgba.exec(ht))?{r:dt[1],g:dt[2],b:dt[3],a:dt[4]}:(dt=na.hsl.exec(ht))?{h:dt[1],s:dt[2],l:dt[3]}:(dt=na.hsla.exec(ht))?{h:dt[1],s:dt[2],l:dt[3],a:dt[4]}:(dt=na.hsv.exec(ht))?{h:dt[1],s:dt[2],v:dt[3]}:(dt=na.hsva.exec(ht))?{h:dt[1],s:dt[2],v:dt[3],a:dt[4]}:(dt=na.hex8.exec(ht))?{a:a_(dt[1]),r:Co(dt[2]),g:Co(dt[3]),b:Co(dt[4]),format:Wt?"name":"hex8"}:(dt=na.hex6.exec(ht))?{r:Co(dt[1]),g:Co(dt[2]),b:Co(dt[3]),format:Wt?"name":"hex"}:(dt=na.hex3.exec(ht))?{r:Co(dt[1]+""+dt[1]),g:Co(dt[2]+""+dt[2]),b:Co(dt[3]+""+dt[3]),format:Wt?"name":"hex"}:!1}window.tinycolor=ye,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}var Pr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$r=function(){return $r=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},$r.apply(this,arguments)};K.default&&Vr(K.default);var ji=function(a){var n=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return n||t.replace(/ /g,"")},go=function(a){Pr(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},n.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,L.isUndefined)(e)||this.__onInputChange(e)},n.prototype.__onInputChange=function(t){var e=this,r=e.model,i=e.opts,l=i.onChange,f=t,p=this.getColorEl();if(p){p.spectrum("set",f);var h=p.spectrum("get"),g=f&&ji(h);g&&(f=g)}l?l(f):r.set({value:f},{fromInput:1})},n.prototype.setValue=function(t,e){e===void 0&&(e={});var r=this.model,i=(0,L.isUndefined)(e.def)?r.get("defaults"):e.def,l=(0,L.isUndefined)(t)?(0,L.isUndefined)(i)?"":i:t,f=this.getInputEl(),p=this.getColorEl(),h=l!="none"?l:"";f.value=l,p.get(0).style.backgroundColor=h,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(p.spectrum("set",h),this.noneColor=l=="none",this.movedColor=h)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,r=e.em,i=e.model,l=e.opts,f=this.ppfx,p=l.onChange,h=(0,K.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),g=h.get(0).style,w=r&&r.config?r.config.el:"",M=r&&r.getConfig&&r.getConfig().colorPicker||{};this.movedColor="";var Z=!1,nt;this.$el.find("[data-colorp-c]").append(h);var vt=function(_t,At){At===void 0&&(At=!0),p?p(_t,!At):(At&&i.setValueFromInput(0,!1),i.setValueFromInput(_t,At))};h.spectrum($r($r($r({color:i.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color"),appendTo:w||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},M),i.get("colorPicker")||{}),{move:function(_t){var At=ji(_t);t.movedColor=At,g.backgroundColor=At,vt(At,!1)},change:function(_t){Z=!0;var At=ji(_t);g.backgroundColor=At,vt(At),t.noneColor=!1},show:function(_t){Z=!1,t.movedColor="",nt=p?i.getValue({noDefault:!0}):ji(_t)},hide:function(){!Z&&(nt||p)&&(t.noneColor&&(nt=""),g.backgroundColor=nt,h.spectrum("set",nt),vt(nt,!1))}})),r&&r.on&&this.listenTo(r,"component:selected",function(){t.movedColor&&vt(t.movedColor),Z=!0,t.movedColor="",h.spectrum("hide")}),this.colorEl=h}return this.colorEl},n.prototype.render=function(){return _r.prototype.render.call(this),this.getColorEl(),this},n}(_r);const Jr=go;var wi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qr=function(a){wi(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),r=new Jr({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),i=r.render();i.setValue(e,{fromTarget:1}),this.input=i.el}return this.input},n}(Jt);const cu=qr;var Ri=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mo=function(a){Ri(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.onChange=function(){this.handleClick()},n.prototype.handleClick=function(){var t=this,e=t.model,r=t.em,i=e.get("command");i&&((0,L.isString)(i)?r.Commands.run(i):i(r.Editor,e))},n.prototype.renderLabel=function(){this.model.get("label")&&Jt.prototype.renderLabel.apply(this)},n.prototype.getInputEl=function(){var t=this,e=t.model,r=t.ppfx,i=e.props(),l=i.labelButton,f=i.text,p=i.full,h=l||f,g="".concat(r,"btn"),w='<button type="button" class="'.concat(g,"-prim").concat(p?" ".concat(g,"--full"):"",'">').concat(h,"</button>");return w},n}(Jt);const Jo=mo;mo.prototype.eventCapture=["click button"];var hn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qo="trait",fu="".concat(Qo,":"),Rh="".concat(fu,"custom"),Fh={text:Jt,number:Wr,select:Te,checkbox:tr,color:cu,button:Jo},Nh=function(a){hn(n,a);function n(t){var e=a.call(this,t,"TraitManager",z)||this;e.TraitsView=me,e.events={all:Qo,custom:Rh};var r=new m.Hn;e.model=r,e.types=Fh;var i=(0,L.debounce)(function(){return e.__upSel()},0);r.listenTo(t,"component:toggled",i);var l=(0,L.debounce)(function(){return e.__onUp()},0);return r.listenTo(t,"trait:update",l),e}return n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getSelected())},n.prototype.select=function(t){var e=t?t.getTraits():[];this.model.set({component:t,traits:e}),this.__trgCustom()},n.prototype.getSelected=function(){return this.model.get("component")},n.prototype.getCurrent=function(){return this.model.get("traits")||[]},n.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.addType=function(t,e){var r=this.getType("text");this.types[t]=r.extend(e)},n.prototype.getType=function(t){return this.getTypes()[t]},n.prototype.getTypes=function(){return this.types},n.prototype.render=function(){var t=this,e=t.view,r=t.em,i=this.getConfig(),l=e&&e.el;return e=new me({el:l,collection:[],editor:r,config:i},this.getTypes()),this.view=e,e.el},n.prototype.destroy=function(){this.model.stopListening(),this.model.clear()},n}(q);const Vh=Nh;var Hh={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};const Bh=Hh;var zh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uh=function(a){zh(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var r=t.config||{};e.config=r,e.parentView=t.parentView;var i=r.stylePrefix||"",l=r.pStylePrefix||"",f=e.collection;e.listenTo(f,"add",e.addTo),e.listenTo(f,"reset resetNavigator",e.render),e.listenTo(f,"remove",e.removeChildren),e.className="".concat(i,"layers");var p=r.em;if(r.sortable&&!e.opt.sorter){var h=p.Utils;e.opt.sorter=new h.Sorter({container:r.sortContainer||e.el,containerSel:".".concat(e.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,onEndMove:function(g,w,M){var Z=w.getSourceModel();p.setSelected(Z,{forceChange:1}),p.trigger("".concat(Si,":end"),M)},avoidSelectOnEnd:1,nested:1,ppfx:l,pfx:i,em:p})}return e.$el.data("collection",f),t.parent&&e.$el.data("model",t.parent),e}return n.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var i=this,l=i.parentView,f=i.opt,p=i.config,h=f.ItemView,g=f.opened,w=f.module,M=f.level,Z=f.sorter,nt=e||null,vt=new h({ItemView:h,level:M,model:t,parentView:l,config:p,sorter:Z,opened:g,module:w}),_t=vt.render().el;if(nt)nt.appendChild(_t);else if(typeof r<"u"){var At="before";this.$el.children().length==r&&(r--,At="after"),r<0?this.$el.append(_t):this.$el.children().eq(r)[At](_t)}else this.$el.append(_t);return this.items.push(vt),_t},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m.G7.prototype.remove.apply(this,t),this.items.map(function(r){return r.remove()}),this},n.prototype.render=function(){var t=this,e=document.createDocumentFragment(),r=this.el;return r.innerHTML="",this.collection.each(function(i){return t.addToCollection(i,e)}),r.appendChild(e),r.className=this.className,this},n}(m.G7);const Wh=Uh;var Gh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),op="contentEditable",Kh=function(a){Gh(n,a);function n(t){var e=a.call(this,t)||this;(0,L.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var r=e,i=r.model,l=r.pfx,f=r.ppfx,p=i.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(p," no-select ").concat(f,"two-color"),e.inputNameCls="".concat(f,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return n.prototype.events=function(){return{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-open]":"toggleOpening","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","mouseout [data-toggle-select]":"handleHoverOut","dblclick [data-name]":"handleEdit","keydown [data-name]":"handleEditKey","focusout [data-name]":"handleEditEnd"}},n.prototype.template=function(t){var e=this,r=e.pfx,i=e.ppfx,l=e.config,f=e.clsNoEdit,p=e.module,h=e.opt,g=e.em,w=l.hidable,M=p.getComponents(t).length,Z=M?"":this.clsNoChild,nt="".concat(this.clsTitle," ").concat(Z),vt="".concat(this.clsTitleC," ").concat(i,"one-bg"),_t="".concat(this.inputNameCls," ").concat(f," ").concat(i,"no-app"),At=h.level+1,Zt="".concat(30+At*10,"px"),Kt=t.getName(),he=t.getIcon(),Ce="".concat(r,"layer"),Re=(g==null?void 0:g.getConfig()).icons,Ze=Re,ge=Ze.move,Ke=Ze.eye,ar=Ze.eyeOff,un=Ze.chevron;return`
      `.concat(w?'<i class="'.concat(r,`layer-vis" data-toggle-visible>
            <i class="`).concat(r,'layer-vis-on">').concat(Ke,`</i>
            <i class="`).concat(r,'layer-vis-off">').concat(ar,`</i>
          </i>`):"",`
      <div class="`).concat(vt,`">
        <div class="`).concat(nt,'" style="padding-left: ').concat(Zt,`" data-toggle-select>
          <div class="`).concat(r,'layer-title-inn" title="').concat(Kt,`">
            <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(un,`</i>
            `).concat(he?'<span class="'.concat(Ce,'__icon">').concat(he,"</span>"):"",`
            <span class="`).concat(_t,'" data-name>').concat(Kt,`</span>
          </div>
        </div>
      </div>
      <div class="`).concat(this.clsCount,'" data-count>').concat(M||"",`</div>
      <div class="`).concat(this.clsMove,'" data-toggle-move>').concat(ge||"",`</div>
      <div class="`).concat(this.clsChildren,'"></div>')},Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),n.prototype.initComponent=function(){var t=this,e=this,r=e.model,i=e.config,l=i.onInit,f=r.components();this.listenTo(f,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(p){return t.listenTo(r,p[0],p[1])}),this.$el.data("model",r),this.$el.data("collection",f),r.viewLayer=this,l.bind(this)({component:r,render:this.__render,listenTo:this.listenTo})},n.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},n.prototype.getVisibilityEl=function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},n.prototype.updateVisibility=function(){var t=this,e=t.pfx,r=t.model,i=t.module,l="".concat(e,"layer-hidden"),f=!i.isVisible(r),p=f?"addClass":"removeClass";this.$el[p](l),this.getVisibilityEl()[p]("".concat(e,"layer-off"))},n.prototype.toggleVisibility=function(t){t==null||t.stopPropagation();var e=this,r=e.module,i=e.model;r.setVisible(i,!r.isVisible(i))},n.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,r=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,p=this.getInputName();p[op]="true",p.focus(),document.execCommand("selectAll",!1),r.setEditing(!0),i.find(".".concat(this.inputNameCls)).removeClass(l).addClass(f)},n.prototype.handleEditKey=function(t){t.stopPropagation(),((0,pe.kl)(t)||(0,pe.r$)(t))&&this.handleEditEnd(t)},n.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,r=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,p=this.getInputName(),h=p.textContent;p.scrollLeft=0,p[op]="false",this.setName(h,{component:this.model,propName:"custom-name"}),r.setEditing(!1),i.find(".".concat(this.inputNameCls)).addClass(l).removeClass(f),this.updateName()},n.prototype.setName=function(t,e){var r=e.propName;this.model.set(r,t)},n.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},n.prototype.updateOpening=function(){var t=this,e=t.$el,r=t.model,i=t.pfx,l="open",f="".concat(i,"layer-open"),p=this.getCaret();this.module.isOpen(r)?(e.addClass(l),p.addClass(f)):(e.removeClass(l),p.removeClass(f))},n.prototype.toggleOpening=function(t){var e=this,r=e.model,i=e.module;t==null||t.stopImmediatePropagation(),r.get("components").length&&i.setOpen(r,!i.isOpen(r))},n.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this,r=e.module,i=e.model;r.setLayerData(i,{selected:!0},{event:t})},n.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this,r=e.module,i=e.model;r.setLayerData(i,{hovered:!0})},n.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this,r=e.module,i=e.model;r.setLayerData(i,{hovered:!1})},n.prototype.startSort=function(t){t.stopPropagation();var e=this,r=e.em,i=e.sorter;t.button&&t.button!==0||i&&(i.onStart=function(l){return r.trigger("".concat(Si,":start"),l)},i.onMoveClb=function(l){return r.trigger(Si,l)},i.startSort(t.target))},n.prototype.updateStatus=function(){Tr.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},n.prototype.checkChildren=function(){var t=this,e=t.model,r=t.clsNoChild,i=t.$el,l=t.module,f=l.getComponents(e).length,p=i.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),h=this.cnt;h||(h=i.children("[data-count]").get(0),this.cnt=h),p[f?"removeClass":"addClass"](r),h&&(h.innerHTML=f||""),!f&&l.setOpen(e,!1)},n.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},n.prototype.setRoot=function(t){var e;t=(0,L.isString)(t)?(e=this.em.getWrapper())===null||e===void 0?void 0:e.find(t)[0]:t;var r=(0,ct.getModel)(t,0);r&&(this.stopListening(),this.model=r,this.initComponent(),this._rendered&&this.render())},n.prototype.updateLayerable=function(){var t=this.parentView,e=t||this;e.render()},n.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m.G7.prototype.remove.apply(this,t),this.__clearItems(),this},n.prototype.render=function(){var t=this,e=t.model,r=t.config,i=t.pfx,l=t.ppfx,f=t.opt,p=t.sorter;this.__clearItems();var h=f.opened,g=f.module,w=f.ItemView,M=!g.__isLayerable(e),Z=this.$el.empty(),nt=f.level+1;delete this.inputName,this.items=new Wh({ItemView:w,collection:e.get("components"),config:r,sorter:p,opened:h,parentView:this,parent:e,level:nt,module:g});var vt=this.items.render().$el;return!r.showWrapper&&nt===1?Z.append(vt):(Z.html(this.template(e)),Z.find(".".concat(this.clsChildren)).append(vt)),(!e.get("draggable")||!r.sortable)&&Z.children(".".concat(this.clsMove)).remove(),!g.isVisible(e)&&(this.className+=" ".concat(i,"hide")),M&&(this.className+=" ".concat(l,"hidden")),Z.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},n.prototype.__render=function(){var t=this,e=t.model,r=t.config,i=t.el,l=r.onRender,f={component:e,el:i};l.bind(this)(f),this.em.trigger("layer:render",f)},n}(m.G7);const Zh=Kh;var $h=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hd=function(){return hd=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},hd.apply(this,arguments)},ap="layer",vd="".concat(ap,":"),sp="".concat(vd,"root"),lp="".concat(vd,"component"),qh="".concat(vd,"custom"),Yh={all:ap,root:sp,component:lp,custom:qh},gd={mediaText:""},Xh=["open","status","locked","custom-name","components","classes"].map(function(a){return"component:update:".concat(a)}).join(" "),Jh=function(a){return a===void 0&&(a={}),(a.display||"").trim().indexOf("none")===0},Qh=function(a){$h(n,a);function n(t){var e=a.call(this,t,"LayerManager",Bh)||this;return e.events=Yh,(0,L.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new U.Z(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return n.prototype.onLoad=function(){var t=this,e=this,r=e.em,i=e.config,l=e.model;l.listenTo(r,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(r,Xh,this.__onComponent),this.componentChanged(),l.listenToOnce(r,"load",function(){t.setRoot(i.root),t.__appendTo()})},n.prototype.setRoot=function(t){var e=this.em.getWrapper(),r=(0,ct.isComponent)(t)?t:e;return t&&(0,L.isString)(t)&&(0,ct.hasWin)()&&(r=e.find(t)[0]||e),this.model.set("root",r),r},n.prototype.getRoot=function(){return this.model.get("root")},n.prototype.getComponents=function(t){var e=this;return t.components().filter(function(r){return e.__isLayerable(r)})},n.prototype.setOpen=function(t,e){t.set("open",e)},n.prototype.isOpen=function(t){return!!t.get("open")},n.prototype.setVisible=function(t,e){var r="__prev-display",i=t.getStyle(gd),l=i.display;if(e){var f=t.get(r);delete i.display,f&&(i.display=f,t.unset(r))}else l&&t.set(r,l),i.display="none";t.setStyle(i,gd),this.updateLayer(t),this.em.trigger("component:toggled")},n.prototype.isVisible=function(t){return!Jh(t.getStyle(gd))},n.prototype.setLocked=function(t,e){t.set("locked",e)},n.prototype.isLocked=function(t){return!!t.get("locked")},n.prototype.setName=function(t,e){t.set("custom-name",e)},n.prototype.getName=function(t){return t.getName()},n.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},n.prototype.setLayerData=function(t,e,r){var i;r===void 0&&(r={});var l=this,f=l.em,p=l.config,h=e.open,g=e.selected,w=e.hovered,M=e.visible,Z=e.locked,nt=e.name,vt=hd({fromLayers:!0},r);if((0,ct.isDef)(h)&&this.setOpen(t,h),(0,ct.isDef)(g))if(g){f.setSelected(t,vt);var _t=p.scrollCanvas;_t&&((i=t.views)===null||i===void 0||i.forEach(function(At){return At.scrollIntoView(_t)}))}else f.removeSelected(t,vt);(0,ct.isDef)(w)&&p.showHover&&(w?f.setHovered(t,vt):f.setHovered(null,vt)),(0,ct.isDef)(M)&&M!==this.isVisible(t)&&this.setVisible(t,M),(0,ct.isDef)(Z)&&this.setLocked(t,Z),(0,ct.isDef)(nt)&&this.setName(t,nt)},n.prototype.componentChanged=function(t,e){var r;if(e===void 0&&(e={}),!e.fromLayers){var i=this,l=i.em,f=i.config,p=f.scrollLayers,h=this.model.get("opened"),g=l.getSelected(),w=g==null?void 0:g.parent();for(var M in h)h[M].set("open",!1),delete h[M];for(;w;)w.set("open",!0),h[w.cid]=w,w=w.parent();if(g&&p){var Z=(r=g.viewLayer)===null||r===void 0?void 0:r.el;Z==null||Z.scrollIntoView(p)}}},n.prototype.getAll=function(){return this.view},n.prototype.render=function(){var t,e,r=this,i=r.config,l=r.model,f=Zh.extend(i.extend);return this.view=new f({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:f,level:0,config:i,opened:l.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},n.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},n.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(sp,e),this.__trgCustom()},n.prototype.__onComponent=function(t){this.updateLayer(t)},n.prototype.__isLayerable=function(t){var e=t.get("tagName"),r=this.config.hideTextnode,i=!r||!t.is("textnode")&&e!=="br";return i&&t.get("layerable")},n.prototype.__trgCustom=function(t){var e=this,r=e.__ctn,i=e.em,l=e.events;this.__ctn=r||(t==null?void 0:t.container),i.trigger(l.custom,{container:this.__ctn,root:this.getRoot()})},n.prototype.updateLayer=function(t,e){this.em.trigger(lp,t,e)},n}(q);const tv=Qh;var ev={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};const rv=ev;var nv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),up=function(a){nv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,L.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{type:"",src:""}},n.prototype.getType=function(){return this.get("type")},n.prototype.getSrc=function(){return this.get("src")},n.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},n.prototype.getExtension=function(){return this.getFilename().split(".").pop()},n}(m.Hn);const md=up;up.prototype.idAttribute="src";var iv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rc=function(){return Rc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Rc.apply(this,arguments)},ov=function(a){iv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Rc(Rc({},md.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},n}(md);const av=ov;var sv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lv=function(a){sv(n,a);function n(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var r=t.config||{};e.config=r,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var i=e.init&&e.init.bind(e);return i&&i(t),e}return n.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},n.prototype.template=function(t,e){var r=this.pfx;return`
      <div class="`.concat(r,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(r,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(r,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},n.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,L.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},n.prototype.getPreview=function(){return""},n.prototype.getInfo=function(){return""},n.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},n}(m.G7);const uv=lv;var cv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cp=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},fp=function(a){cv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getPreview=function(){var t=this,e=t.pfx,r=t.ppfx,i=t.model,l=i.get("src");return kt(dp||(dp=cp([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,l,e,r)},n.prototype.getInfo=function(){var t=this,e=t.pfx,r=t.model,i=r.get("name"),l=r.get("width"),f=r.get("height"),p=r.get("unitDim"),h=l&&f?"".concat(l,"x").concat(f).concat(p):"";return i=i||r.getFilename(),kt(pp||(pp=cp([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),e,i,e,h)},n.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},n.prototype.onClick=function(){var t=this,e=t.model,r=t.pfx,i=this.__getBhv().select,l=this.config.onClick,f=this.collection;f.trigger("deselectAll"),this.$el.addClass(r+"highlight"),(0,L.isFunction)(i)?i(e,!1):(0,L.isFunction)(l)?l(e):this.updateTarget(f.target)},n.prototype.onDblClick=function(){var t=this,e=t.em,r=t.model,i=this.__getBhv().select,l=this.config.onDblClick,f=this.collection,p=f.target,h=f.onSelect;(0,L.isFunction)(i)?i(r,!0):(0,L.isFunction)(l)?l(r):(this.updateTarget(p),e==null||e.Modal.close()),(0,L.isFunction)(h)&&h(r)},n.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},n}(uv);const fv=fp;fp.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var dp,pp,Fc=function(){return Fc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Fc.apply(this,arguments)},dv={types:[],initialize:function(a,n){var t=this;n===void 0&&(n={});var e=n.em;this.em=e,this.opts=n,this.model=function(i,l){i===void 0&&(i={}),l===void 0&&(l={});var f,p,h;if(i&&i.type){var g=t.getBaseType();h=t.getType(i.type),f=h?h.model:g.model,p=h?h.view:g.view}else{var w=t.recognizeType(i);h=w.type,f=h.model,p=h.view,i=w.attributes}var M=new f(i,Fc(Fc({},l),{em:e}));return M.typeView=p,M};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t],r=e.isType(a);if(r=typeof r=="boolean"&&r?{type:e.id}:r,r)return{type:e,attributes:r}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t];if(e.id===a)return e}},addType:function(a,n){var t=this.getType(a),e=this.getBaseType(),r=t?t.model:e.model,i=t?t.view:e.view,l=n.model,f=n.view,p=n.isType;l=l instanceof m.Hn||(0,L.isFunction)(l)?l:r.extend(l||{}),f=f instanceof m.G7||(0,L.isFunction)(f)?f:i.extend(f||{}),this.extendViewApi&&!n.model&&!n.view&&(f=f.extend(n)),t?(t.model=l,t.view=f,t.isType=p||t.isType):(n.id=a,n.model=l,n.view=f,n.isType=p||function(h){if(h&&h.type==a)return!0},this.getTypes().unshift(n))}};const hp=dv;var pv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hv=m.FE.extend(hp),vp=function(a){pv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(hv);const yd=vp;vp.prototype.types=[{id:"image",model:av,view:fv,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var vv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gp=function(a){vv(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var r=e.collection;return e.listenTo(r,"reset",e.renderAssets),e.listenTo(r,"add",e.addToAsset),e.listenTo(r,"remove",e.removedAsset),e.listenTo(r,"deselectAll",e.deselectAll),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,i=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(r,"field ").concat(e,`add-field">
              <input placeholder="`).concat(i==null?void 0:i.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(r,'btn-prim">').concat(i==null?void 0:i.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},n.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),r=e&&e.value.trim(),i=this.config.handleAdd;if(r){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),i?i.bind(this)(r):this.options.globalCollection.add(r,{at:0})}},n.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},n.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},n.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},n.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},n.prototype.addAsset=function(t,e){e===void 0&&(e=null);var r=e,i=this.collection,l=this.config,f=new t.typeView({model:t,collection:i,config:l}).render().el;if(r)r.appendChild(f);else{var p=this.getAssetsEl();p&&p.insertBefore(f,p.firstChild)}return f},n.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var r=this.config.noAssets;r&&e.append(r)}},n.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},n.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),r=this.$el.find(".".concat(this.pfx,"assets"));r.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(i){return t.addAsset(i,e)}),r.append(e)},n.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},n}(m.G7);const gv=gp;gp.prototype.events={submit:"handleSubmit"};var mv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yv=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},_v=function(a){mv(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var r=t.config||{};e.module=t.module,e.config=r,e.em=e.config.em,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=r.disableUpload!==void 0?r.disableUpload:!r.upload&&!r.embedAsBase64,e.multiUpload=r.multiUpload!==void 0?r.multiUpload:!0;var i=r.uploadFile;return i?e.uploadFile=i.bind(e):!r.upload&&r.embedAsBase64&&(e.uploadFile=n.embedAsBase64),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.pfx,r=t.title,i=t.uploadId,l=t.disabled,f=t.multiUpload;return kt(mp||(mp=yv([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,r,i,l?"disabled":"",f?"multiple":"")},n.prototype.events=function(){return{"change [data-input]":"uploadFile"}},n.prototype.onUploadStart=function(){var t=this.module;t&&t.__propEv("asset:upload:start")},n.prototype.onUploadEnd=function(t){var e=this,r=e.$el,i=e.module;i&&i.__propEv("asset:upload:end",t);var l=r.find("input");l&&l.val("")},n.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv("asset:upload:error",t)},n.prototype.onUploadResponse=function(t,e){var r=this,i=r.module,l=r.config,f=r.target,p;try{p=typeof t=="string"?JSON.parse(t):t}catch{p=t}i&&i.__propEv("asset:upload:response",p),l.autoAdd&&f&&f.add(p.data,{at:0}),this.onUploadEnd(t),e==null||e(p)},n.prototype.uploadFile=function(t,e){var r=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,f=l.beforeUpload,p=f&&f(i);if(p!==!1){var h=new FormData,g=l.params,w=l.customFetch,M=l.fetchOptions;for(var Z in g)h.append(Z,g[Z]);if(this.multiUpload)for(var nt=0;nt<i.length;nt++)h.append("".concat(l.uploadName,"[]"),i[nt]);else i.length&&h.append(l.uploadName,i[0]);var vt=l.upload,_t=l.headers,At="X-Requested-With";if(typeof _t[At]>"u"&&(_t[At]="XMLHttpRequest"),vt){this.onUploadStart();var Zt={method:"post",credentials:l.credentials||"include",headers:_t,body:h},Kt=(M==null?void 0:M(Zt))||Zt,he=w?w(vt,Kt):Ic(vt,Kt).then(function(Ce){return(Ce.status/200|0)==1?Ce.text():Ce.text().then(function(Re){return Promise.reject(Re)})});return he.then(function(Ce){return r.onUploadResponse(Ce,e)}).catch(function(Ce){return r.onUploadError(Ce)})}}},n.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(r){e.className="",r.preventDefault(),t.uploadFile(r)})}},n.prototype.initDropzone=function(t){var e=this,r=0,i=this.config,l=t.model,f=t.el,p=l.Editor,h=l.Canvas.getBody(),g=this.ppfx,w="".concat(g,"dropzone-active"),M="".concat(g,"dropzone"),Z=function(){f.className=f.className.replace(w,"").trim(),r=0},nt=function(){return r||(f.className+=" ".concat(w),r=1),!1},vt=function(){return Z(),!1},_t=function(At){if(Z(),At.preventDefault(),At.stopPropagation(),e.uploadFile(At),i.openAssetsOnDrop&&p){var Zt=p.getSelected();p.runCommand("open-assets",{target:Zt,onSelect:function(){p.Modal.close(),p.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(M,'">').concat(i.dropzoneContent,"</div>")),Z(),"draggable"in f&&[f,h].forEach(function(At){At.ondragover=nt,At.ondragleave=vt,At.ondrop=_t})},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,i=t.em;return e.html(this.template({title:i&&i.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:r})),this.initDrop(),e.attr("class",r+"file-uploader"),this},n.embedAsBase64=function(t,e){var r=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var f=[],p=/^(.+)\/(.+)$/,h=function(Z){var nt=new Promise(function(vt,_t){var At=new FileReader;At.addEventListener("load",function(Zt){var Kt,he=Z.name,Ce=p.exec(Z.type);if(Ce?Kt=Ce[1]:Kt=Z.type,Kt==="image"){var Re={src:At.result,name:he,type:Kt,height:0,width:0},Ze=new Image;Ze.addEventListener("error",function(ge){_t(ge)}),Ze.addEventListener("load",function(){Re.height=Ze.height,Re.width=Ze.width,vt(Re)}),Ze.src=Re.src}else vt(Kt?{src:At.result,name:he,type:Kt}:At.result)}),At.addEventListener("error",function(Zt){_t(Zt)}),At.addEventListener("abort",function(Zt){_t("Aborted")}),At.readAsDataURL(Z)});f.push(nt)},g=0,w=i;g<w.length;g++){var M=w[g];h(M)}return Promise.all(f).then(function(Z){l.data=Z,r.onUploadResponse(l,e)},function(Z){r.onUploadError(Z)})},n}(m.G7);const wv=_v;var mp,bv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dl=function(){return dl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},dl.apply(this,arguments)},yp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},_p="asset",Pa="".concat(_p,":"),xv="".concat(Pa,"select"),Cv="".concat(Pa,"update"),Sv="".concat(Pa,"add"),wp="".concat(Pa,"remove"),Ov="".concat(wp,":before"),Tv="".concat(Pa,"custom"),Ev="".concat(Pa,"open"),Pv="".concat(Pa,"close"),Nc="".concat(Pa,"upload"),kv="".concat(Nc,":start"),Av="".concat(Nc,":end"),Lv="".concat(Nc,":error"),Mv="".concat(Nc,":response"),du="open-assets",Dv={all:_p,select:xv,update:Cv,add:Sv,remove:wp,removeBefore:Ov,custom:Tv,open:Ev,close:Pv,uploadStart:kv,uploadEnd:Av,uploadError:Lv,uploadResponse:Mv},Iv=function(a){bv(n,a);function n(t){var e=a.call(this,t,"AssetManager",new yd([],t),Dv,rv)||this;e.storageKey="assets",e.Asset=md,e.Assets=yd;var r=e,i=r.all,l=r.config;e.assetsVis=new yd([]);var f=l.pStylePrefix;return f&&(l.stylePrefix="".concat(f).concat(l.stylePrefix)),i.on("add",function(p){return e.getAllVisible().add(p)}),i.on("remove",function(p){return e.getAllVisible().remove(p)}),e.__onAllEvent=(0,L.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.__propEv=function(t){for(var e,r,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];(e=this.em).trigger.apply(e,yp([t],i,!1)),(r=this.getAll()).trigger.apply(r,yp([t],i,!1))},n.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;!t.container&&!e.open||this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(r,i){return t.remove(r,i)},select:function(r,i){var l=t.add(r);(0,L.isFunction)(e.select)&&e.select(l,i)},options:e.options||{}}},n.prototype.open=function(t){t===void 0&&(t={});var e=this.em.Commands;e.run(du,dl({types:["image"],select:function(){}},t))},n.prototype.close=function(){var t=this.em.Commands;t.stop(du)},n.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(du))},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof e.at>"u"&&(e.at=0),this.all.add(t,e)},n.prototype.get=function(t){return this.all.where({src:t})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.getContainer=function(){var t,e=this.__getBehaviour();return e.container||((t=this.am)===null||t===void 0?void 0:t.el)},n.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},n.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var r=this.__viewParams();r.fu=this.FileUploader(),this.am=new gv(dl({},r)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(t,e){this.getAll().addType(t,e)},n.prototype.getType=function(t){return this.getAll().getType(t)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new wv(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this,r=e.em,i=e.events;r.on("run:".concat(du),function(){return t.__propEv(i.open)}),r.on("stop:".concat(du),function(){return t.__propEv(i.close)})},n.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},n.prototype.setTarget=function(t){this.assetsVis.target=t},n.prototype.onSelect=function(t){this.assetsVis.onSelect=t},n.prototype.onClick=function(t){this.config.onClick=t},n.prototype.onDblClick=function(t){this.config.onDblClick=t},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=dl(dl({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(t){return this._bhv||{}},n.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},n}(W);const jv=Iv;var _d={placeholder:"eg. Text here"},Rv={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:_d,alt:_d,title:_d,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};const Fv=Rv;var Nv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vv=function(a){Nv(n,a);function n(t){var e=a.call(this,t,"I18n",Fv)||this,r=e.config.messagesAdd;return r&&e.addMessages(r),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return n.prototype.setLocale=function(t){var e=this,r=e.em,i=e.config,l={value:t,valuePrev:i.locale};return r&&r.trigger("i18n:locale",l),i.locale=t,this},n.prototype.getLocale=function(){return this.config.locale},n.prototype.getMessages=function(t,e){e===void 0&&(e={});var r=this.config.messages;return t&&!r[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?r[t]:r},n.prototype.setMessages=function(t){var e=this,r=e.em,i=e.config;return i.messages=t,r&&r.trigger("i18n:update",t),this},n.prototype.addMessages=function(t){var e=this.em,r=this.config.messages;return e&&e.trigger("i18n:add",t),this.setMessages((0,ct.deepMerge)(r,t)),this},n.prototype.t=function(t,e){e===void 0&&(e={});var r=this.config,i=e.params||{},l=e.l||this.getLocale(),f=e.lFlb||r.localeFallback,p=this._getMsg(t,l,e);return p||(p=this._getMsg(t,f,e)),!p&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),p=p&&(0,L.isString)(p)?this._addParams(p,i):p,p},n.prototype._localLang=function(){var t=(0,ct.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},n.prototype._addParams=function(t,e){var r=new RegExp("{([\\w\\d-]*)}","g");return t.replace(r,function(i,l){return e[l]||""}).trim()},n.prototype._getMsg=function(t,e,r){r===void 0&&(r={});var i=this.getMessages(e,r);if(i){var l=i[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(f,p){if(!(0,L.isUndefined)(f))return f[p]},i)),l}},n.prototype._debug=function(t,e){e===void 0&&(e={});var r=this,i=r.em,l=r.config;(e.debug||l.debug)&&i&&i.logWarning(t)},n.prototype.destroy=function(){},n}(q);const Hv=Vv;var Bv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yo=function(){return yo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yo.apply(this,arguments)},zv=function(){},Uv=lr.q.Target,bp={id:"sorter-target",type:Uv},Wv=function(a){Bv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,L.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var r=e.container;this.el=typeof r=="string"?document.querySelector(r):r,this.$el=(0,K.default)(this.el),this.containerSel=e.containerSel||"div",this.itemSel=e.itemSel||"div",this.draggable=e.draggable||!0,this.nested=!!e.nested,this.pfx=e.pfx||"",this.ppfx=e.ppfx||"",this.freezeClass=e.freezeClass||this.pfx+"freezed",this.onStart=e.onStart||zv,this.onEndMove=e.onEndMove,this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||"v",this.onMoveClb=e.onMove,this.relative=e.relative||!1,this.ignoreViewChildren=!!e.ignoreViewChildren,this.plh=e.placer,this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.em=e.em,this.canvasRelative=!!e.canvasRelative,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},n.prototype.getScale=function(){return(0,L.result)(this,"scale")||1},n.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el=typeof e=="string"?document.querySelector(e):e,this.$el=(0,K.default)(this.el)}return this.el},n.prototype.getDocuments=function(t){var e=this.em,r=t?t.ownerDocument:e==null?void 0:e.Canvas.getBody().ownerDocument,i=[document];return r&&i.push(r),i},n.prototype.updateOffset=function(){var t,e=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=e.top,this.offLeft=e.left},n.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},n.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var r=e.Canvas,i=r.getDocument(),l=null;if(i.caretRangeFromPoint){var f=(0,pe.VB)(t);l=i.caretRangeFromPoint(f.clientX,f.clientY)}else t.rangeParent&&(l=i.createRange(),l.setStart(t.rangeParent,t.rangeOffset));var p=r.getWindow().getSelection();r.getFrameEl().focus(),p==null||p.removeAllRanges(),l&&(p==null||p.addRange(l)),this.setContentEditable(this.activeTextModel,!0)}},n.prototype.setContentEditable=function(t,e){if(t){var r=t.getEl();r.contentEditable!=e&&(r.contentEditable=e)}},n.prototype.toggleSortCursor=function(t){var e=this.em,r=e==null?void 0:e.Canvas;r&&(t?r.startAutoscroll():r.stopAutoscroll())},n.prototype.setDragHelper=function(t,e){for(var r=e||"",i=t.cloneNode(!0),l=t.getBoundingClientRect(),f=getComputedStyle(t),p="",h=0;h<f.length;h++){var g=f[h];p+="".concat(g,":").concat(f.getPropertyValue(g),";")}if(document.body.appendChild(i),i.className+=" ".concat(this.pfx,"bdrag"),i.setAttribute("style",p),this.dragHelper=i,i.style.width="".concat(l.width,"px"),i.style.height="".concat(l.height,"px"),r&&this.moveDragHelper(r),this.em){var w=(0,K.default)(this.em.Canvas.getBody().ownerDocument);w.off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)}(0,K.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},n.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(!(!this.dragHelper||!e)){var r=t.pageY,i=t.pageX,l=0,f=0,p=e.defaultView||e.parentWindow,h=p.frameElement,g=this.dragHelper.style;if(h){var w=h.getBoundingClientRect();l=w.top+document.documentElement.scrollTop,f=w.left+document.documentElement.scrollLeft,r=t.clientY,i=t.clientX}g.top=r+l+"px",g.left=i+f+"px"}},n.prototype.matches=function(t,e){return ct.matches.call(t,e)},n.prototype.closest=function(t,e){if(t)for(var r=t.parentNode;r&&r.nodeType===1;){if(this.matches(r,e))return r;r=r.parentNode}},n.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},n.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement("div"),r=document.createElement("div");return e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",r.className=t+"placeholder-int",e.appendChild(r),e},n.prototype.startSort=function(t,e){var r,i;e===void 0&&(e={});var l=this,f=l.em,p=l.itemSel,h=l.containerSel,g=l.plh,w=this.getContainerEl(e.container),M=this.getDocuments(t),Z;delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(p,", ").concat(h))&&(t=this.closest(t,p)),this.sourceEl=t,g||(this.plh=this.createPlaceholder(),w.appendChild(this.plh)),t&&(Z=this.getSourceModel(t),Z!=null&&Z.set&&Z.set("status","freezed"),this.srcModel=Z),(0,pe.on)(w,"mousemove dragover",this.onMove),(0,pe.on)(M,"mouseup dragend touchend",this.endMove),(0,pe.on)(M,"keydown",this.rollback),this.onStart({sorter:this,target:Z,parent:Z&&((r=Z.parent)===null||r===void 0?void 0:r.call(Z)),index:Z&&((i=Z.index)===null||i===void 0?void 0:i.call(Z))}),f==null||f.clearSelection(),this.toggleSortCursor(!0),f==null||f.trigger("sorter:drag:start",t,Z)},n.prototype.getTargetModel=function(t){var e=t||this.target;return(0,K.default)(e).data("model")},n.prototype.getSourceModel=function(t,e){var r=this,i=e===void 0?{}:e,l=i.target,f=i.avoidChildren,p=f===void 0?1:f,h=this,g=h.em,w=h.sourceEl,M=t||w,Z=this,nt=Z.dropModel,vt=Z.dropContent,_t=function(he){return he&&l&&he.opt&&he.opt.avoidChildren&&r.isTextableActive(he,l)};if(vt&&g){if(_t(nt)&&(nt=void 0),!nt){var At=g.Components.getComponents(),Zt={avoidChildren:p,avoidStore:1,avoidUpdateStyle:1},Kt=At.add(vt,yo(yo({},Zt),{temporary:!0}));if(nt=At.remove(Kt,Zt),nt=nt instanceof Array?nt[0]:nt,this.dropModel=nt,_t(nt))return this.getSourceModel(M,{target:l,avoidChildren:0})}return nt}return M&&(0,K.default)(M).data("model")},n.prototype.selectTargetModel=function(t,e){if(!(t instanceof m.FE)&&!(e&&e===t)){var r=this.targetModel;if(r&&r!==this.srcModel&&r.set("status",""),t!=null&&t.set){var i=this.em.Canvas,l=lr.q.Select,f=lr.q.Hover,p=lr.q.Spacing;[l,f,p].forEach(function(h){return i.removeSpots({type:h})}),i.addSpot(yo(yo({},bp),{component:t})),t.set("status","selected-parent"),this.targetModel=t}}},n.prototype.onMove=function(t){var e=t,r=this,i=r.em,l=r.onMoveClb,f=r.plh,p=r.customTarget;this.moved=!0;var h=f.style.display;(!h||h==="none")&&(f.style.display="block");var g=this.offset(this.el);this.elT=this.wmargin?Math.abs(g.top):g.top,this.elL=this.wmargin?Math.abs(g.left):g.left;var w=t.pageY-this.elT+this.el.scrollTop,M=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var Z=i.Canvas.getMouseRelativeCanvas(t,{noScroll:1});M=Z.x,w=Z.y}this.rX=M,this.rY=w,this.eventMove=t;var nt=this.getSourceModel(),vt=p?p({sorter:this,event:t}):t.target,_t=this.dimsFromTarget(vt,M,w),At=this.target,Zt=At&&this.getTargetModel(At);if(this.selectTargetModel(Zt,nt),Zt||(f.style.display="none"),!!At){this.lastDims=_t;var Kt=this.findPosition(_t,M,w);this.isTextableActive(nt,Zt)?(this.activeTextModel=Zt,f.style.display="none",this.lastPos=Kt,this.updateTextViewCursorPosition(e)):(this.disableTextable(),delete this.activeTextModel,(!this.lastPos||this.lastPos.index!=Kt.index||this.lastPos.method!=Kt.method)&&(this.movePlaceholder(this.plh,_t,Kt,this.prevTargetDim),this.$plh||(this.$plh=(0,K.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=Kt)),(0,L.isFunction)(l)&&l({event:t,target:nt,parent:Zt,index:Kt.index+(Kt.method=="after"?1:0)}),i&&i.trigger("sorter:drag",{target:At,targetModel:Zt,sourceModel:nt,dims:_t,pos:Kt,x:M,y:w})}},n.prototype.isTextableActive=function(t,e){var r;return((r=t==null?void 0:t.get)===null||r===void 0?void 0:r.call(t,"textable"))&&(e==null?void 0:e.isInstanceOf("text"))},n.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},n.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var r=t;return r.offsetHeight,!!this.styleInFlow(r,e)},n.prototype.styleInFlow=function(t,e){if(!(0,pe.BM)(t)){var r=t.style||{},i=(0,K.default)(t),l=e&&(0,K.default)(e);if(!(r.overflow&&r.overflow!=="visible")){var f=i.css("float");if(!(f&&f!=="none")&&!(l&&l.css("display")=="flex"&&l.css("flex-direction")!=="column")){switch(r.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(i.css("display")){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}}},n.prototype.validTarget=function(t,e){var r=this.getTargetModel(t),i=this.getSourceModel(e,{target:r});e=i&&i.view&&i.view.el,t=r&&r.view&&r.view.el;var l={valid:!0,src:e,srcModel:i,trg:t,trgModel:r,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!e||!t)return l.valid=!1,l;var f=i.get("draggable");if((0,L.isFunction)(f)){var p=f(i,r);l.dragInfo=p,l.draggable=p,f=p}else f=f instanceof Array?f.join(", "):f,l.dragInfo=f,f=(0,L.isString)(f)?this.matches(t,f):f,l.draggable=f;var h=r.get("droppable");if((0,L.isFunction)(h)){var p=h(i,r);l.droppable=p,l.dropInfo=p,h=p}else h=h instanceof m.FE?1:h,h=h instanceof Array?h.join(", "):h,l.dropInfo=h,h=(0,L.isString)(h)?this.matches(e,h):h,h=f&&this.isTextableActive(i,r)?1:h,l.droppable=h;return(!h||!f)&&(l.valid=!1),l},n.prototype.dimsFromTarget=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var i=this.em,l=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return l;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var f=this.validTarget(t);if(i&&i.trigger("sorter:drag:validation",f),!f.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,r);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(l=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,r)||!this.nested&&!this.cacheDims.length){var p=this.targetP;p&&this.validTarget(p).valid&&(l=this.cacheDimsP,this.target=p)}return delete this.lastPos,l},n.prototype.getTargetFromEl=function(t){var e=t,r,i=this.targetPrev,l=this.em,f=this.containerSel,p=this.itemSel;if(this.matches(e,"".concat(p,", ").concat(f))||(e=this.closest(e,p)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),i&&i!=e&&delete this.targetPrev,!this.targetPrev){r=this.closest(e,f);var h=this.validTarget(e);if(l&&l.trigger("sorter:drag:validation",h),!h.valid&&r)return this.getTargetFromEl(r);this.targetPrev=e}return this.nearElBorders(e)&&(r=this.closest(e,f),r&&this.validTarget(r).valid&&(e=r)),e},n.prototype.nearElBorders=function(t){var e=10,r=t.getBoundingClientRect(),i=t.ownerDocument.body,l=this.getCurrentPos(),f=l.x,p=l.y,h=r.top+i.scrollTop,g=r.left+i.scrollLeft,w=r.width,M=r.height;if(p<h+e||p>h+M-e||f<g+e||f>g+w-e)return 1},n.prototype.getCurrentPos=function(){var t=this.eventMove,e=(t==null?void 0:t.pageX)||0,r=(t==null?void 0:t.pageY)||0;return{x:e,y:r}},n.prototype.getDim=function(t){var e=this,r=e.em,i=e.canvasRelative,l=r==null?void 0:r.Canvas,f=l?l.getElementOffsets(t):{},p,h,g,w;if(i&&r){var M=l.getElementPos(t,{noScroll:1});p=M.top,h=M.left,g=M.height,w=M.width}else{var Z=this.offset(t);p=this.relative?t.offsetTop:Z.top-(this.wmargin?-1:1)*this.elT,h=this.relative?t.offsetLeft:Z.left-(this.wmargin?-1:1)*this.elL,g=t.offsetHeight,w=t.offsetWidth}return{top:p,left:h,height:g,width:w,offsets:f}},n.prototype.getChildrenDim=function(t){var e=this,r=[];if(!t)return r;var i=this.getTargetModel(t);if(i&&i.view&&!this.ignoreViewChildren){var l=i.getCurrentView?i.getCurrentView():i.view;t=l.getChildrenContainer()}return(0,L.each)(t.children,function(f,p){var h=f,g=(0,ct.getModel)(h,K.default),w=g&&g.index?g.index():p;if(!(!(0,pe.BM)(h)&&!e.matches(h,e.itemSel))){var M=e.getDim(h),Z=e.direction,nt;Z=="v"?nt=!0:Z=="h"?nt=!1:nt=e.isInFlow(h,t),M.dir=nt,M.el=h,M.indexEl=w,r.push(M)}}),r},n.prototype.nearBorders=function(t,e,r){var i=!1,l=this.borderOffset,f=e||0,p=r||0,h=t.top,g=t.left,w=t.height,M=t.width;return(h+l>p||p>h+w-l||g+l>f||f>g+M-l)&&(i=!0),i},n.prototype.findPosition=function(t,e,r){for(var i={index:0,indexEl:0,method:"before"},l=0,f=0,p=0,h=0,g=0,w=0,M=0,Z,nt=0,vt=t.length;nt<vt;nt++){Z=t[nt];var _t=Z.top,At=Z.left,Zt=Z.height,Kt=Z.width;if(p=At+Kt,M=_t+Zt,g=At+Kt/2,w=_t+Zt/2,!(f&&At>f||h&&w>=h||l&&p<l))if(i.index=nt,i.indexEl=Z.indexEl,!Z.dir)r<M&&(h=M),e<g?(f=g,i.method="before"):(l=g,i.method="after");else if(r<w){i.method="before";break}else i.method="after"}return i},n.prototype.movePlaceholder=function(t,e,r,i){var l=0,f=0,p=0,h="",g="",w="px",M=5,Z=r.method,nt=e[r.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),nt){var vt=nt.top,_t=nt.left,At=nt.height,Zt=nt.width;nt.dir?(h=Zt+w,g="auto",f=Z=="before"?vt-l:vt+At-l,p=_t):(h="auto",g=At-l*2+w,f=vt+l,p=Z=="before"?_t-l:_t+Zt-l,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested){t.style.display="none";return}if(i){var Kt=i.offsets||{},he=Kt.paddingTop||M,Ce=Kt.paddingLeft||M;f=i.top+he,p=i.left+Ce,h=parseInt("".concat(i.width))-Ce*2+w,g="auto"}}t.style.top=f+w,t.style.left=p+w,h&&(t.style.width=h),g&&(t.style.height=g)},n.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},n.prototype.sort=function(t,e){var r=t.parents.filter(function(p){return e.parents.includes(p)}),i=r[0];if(!i)return e.model.index()-t.model.index();var l=t.parents[t.parents.indexOf(i)-1],f=e.parents[e.parents.indexOf(i)-1];return f.index()-l.index()},n.prototype.endMove=function(){var t=this,e,r=this.sourceEl,i=[],l=this.getDocuments(),f=this.getContainerEl(),p=this.onEndMove,h=this.onEnd,g=this,w=g.target,M=g.lastPos,Z;if((0,pe.S1)(f,"mousemove dragover",this.onMove),(0,pe.S1)(l,"mouseup dragend touchend",this.endMove),(0,pe.S1)(l,"keydown",this.rollback),this.plh.style.display="none",r&&(Z=this.getSourceModel(),this.selectOnEnd&&Z&&Z.set&&(Z.set("status",""),Z.set("status","selected"))),this.moved&&w){var nt=this.toMove,vt=(0,L.isArray)(nt)?nt:nt?[nt]:[r],_t=0;vt.length===1?i.push(this.move(w,vt[0],M)):vt.map(function(Kt){return{model:Kt,parents:t.parents(Kt)}}).sort(this.sort).forEach(function(Kt){var he=Kt.model,Ce=he.index(),Re=he.parent().getEl();i.push(t.move(w,he,yo(yo({},M),{indexEl:M.indexEl-_t,index:M.index-_t}))),Re===w&&Ce<=M.index&&_t++})}this.plh&&(this.plh.style.display="none");var At=this.dragHelper;if(At&&(At.parentNode.removeChild(At),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),(e=this.em)===null||e===void 0||e.Canvas.removeSpots(bp),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,L.isFunction)(p)){var Zt={target:Z,parent:Z&&Z.parent(),index:Z&&Z.index()};i.length?i.forEach(function(Kt){return p(Kt,t,Zt)}):p(null,this,yo(yo({},Zt),{cancelled:1}))}(0,L.isFunction)(h)&&h({sorter:this})},n.prototype.move=function(t,e,r){var i=this,l=i.em,f=i.dropContent,p=(0,ct.getElement)(e),h=[],g=r.method==="after"?r.indexEl+1:r.indexEl,w=this.validTarget(t,p),M=(0,K.default)(t).data("collection"),Z=w.trgModel,nt=w.srcModel,vt=w.draggable,_t=Z instanceof m.FE?1:w.droppable,At,Zt;if(M&&_t&&vt){var Kt={at:g,action:"move-component"},he=this.isTextableActive(nt,Z);if(f)At=(0,L.isFunction)(f)?f():f,Kt.avoidUpdateStyle=!0,Kt.action="add-component";else{var Ce=nt.collection.indexOf(nt),Re=M===nt.collection,Ze=Ce===g||Ce===g-1,ge=!Re||!Ze||he;ge&&(At=nt.collection.remove(nt,{temporary:!0}),Re&&g>Ce&&(Kt.at=g-1))}At&&(he?(delete Kt.at,Zt=Z.getView().insertComponent(At,Kt)):Zt=M.add(At,Kt)),delete this.dropContent,delete this.prevTarget}else if(l){var Ke=w.dropInfo||(Z==null?void 0:Z.get("droppable")),ar=w.dragInfo||(nt==null?void 0:nt.get("draggable"));!M&&h.push("Target collection not found"),!_t&&Ke&&h.push("Target is not droppable, accepts [".concat(Ke,"]")),!vt&&ar&&h.push("Component not draggable, acceptable by [".concat(ar,"]")),l.logWarning("Invalid target position",{errors:h,model:nt,context:"sorter",target:Z})}return l==null||l.trigger("sorter:drag:end",{targetCollection:M,modelToDrop:At,warns:h,validResult:w,dst:t,srcEl:p}),Zt},n.prototype.rollback=function(t){(0,pe.S1)(this.getDocuments(),"keydown",this.rollback);var e=t.which||t.keyCode;e==27&&(this.moved=!1,this.endMove())},n}(m.G7);const Gv=Wv;var ps=function(){return ps=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ps.apply(this,arguments)},Kv=function(a,n){n===void 0&&(n={});var t=n.prefix||"",e=document.createElement("i");return e.className=t+"resizer-h "+t+"resizer-h-"+a,e.setAttribute("data-"+t+"handler",a),e},Zv=function(a,n){var t=n||window,e=a.getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:e.width,height:e.height}},$v=function(){function a(n){n===void 0&&(n={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=ps({},this.defOpts),this.setOptions(n),(0,L.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(n,t){n===void 0&&(n={}),this.opts=ps(ps({},t?this.defOpts:this.opts),n),this.setup()},a.prototype.setup=function(){var n=this.opts,t=n.prefix||"",e=n.appendTo||document.body,r=this.container;for(r||(r=document.createElement("div"),r.className="".concat(t,"resizer-c"),e.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var i={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(p){return i[p]=n[p]?Kv(p,n):null});for(var l in i){var f=i[l];f&&r.appendChild(f)}this.handlers=i,this.mousePosFetcher=n.mousePosFetcher,this.updateTarget=n.updateTarget,this.posFetcher=n.posFetcher,this.onStart=n.onStart,this.onMove=n.onMove,this.onEnd=n.onEnd,this.onUpdateContainer=n.onUpdateContainer},a.prototype.toggleFrames=function(n){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,L.each)(t,function(e){return e.style.pointerEvents=n?"none":""})}},a.prototype.isHandler=function(n){var t=this.handlers;for(var e in t)if(t[e]===n)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var n;return(n=this.el)===null||n===void 0?void 0:n.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(n,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(n,t):Zv(n)},a.prototype.focus=function(n){n&&n===this.el||(this.el=n,this.updateContainer({forceShow:!0}),(0,pe.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,pe.S1)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(n){var t=n;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,r=this.getParentEl(),i=this,l=this.opts||{},f=this.mousePosFetcher,p="data-"+l.prefix+"handler",h=this.getElementPos(e,{avoidFrameZoom:!0,avoidFrameOffset:!0}),g=this.getElementPos(r),w=t.target;this.handlerAttr=w.getAttribute(p),this.clickedHandler=w,this.startDim={t:h.top,l:h.left,w:h.width,h:h.height},this.rectDim={t:h.top,l:h.left,w:h.width,h:h.height},this.startPos=f?f(t):{x:t.clientX,y:t.clientY},this.parentDim={t:g.top,l:g.left,w:g.width,h:g.height};var M=this.getDocumentEl();this.docs=M,(0,pe.on)(M,"pointermove",this.move),(0,pe.on)(M,"keydown",this.handleKeyDown),(0,pe.on)(M,"pointerup",this.stop),(0,L.isFunction)(this.onStart)&&this.onStart(t,{docs:M,config:l,el:e,resizer:i}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(n){var t=n,e=this.onMove,r=this.mousePosFetcher,i=r?r(t):{x:t.clientX,y:t.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(n){var t=this.el,e=this.opts,r=this.docs||this.getDocumentEl();(0,pe.S1)(r,"pointermove",this.move),(0,pe.S1)(r,"keydown",this.handleKeyDown),(0,pe.S1)(r,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,L.isFunction)(this.onEnd)&&this.onEnd(n,{docs:r,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(n){var t=this.el,e=this,r=this.opts,i=this.rectDim,l=this.updateTarget,f=this.getSelectedHandler(),p=r.unitHeight,h=r.unitWidth,g=r.keyWidth,w=r.keyHeight;if((0,L.isFunction)(l))l(t,i,{store:n,selectedHandler:f,resizer:e,config:r});else{var M=t.style;M[g]=i.w+h,M[w]=i.h+p,M.top=i.t+p,M.left=i.l+h}this.updateContainer()},a.prototype.updateContainer=function(n){var t;n===void 0&&(n={});var e=this,r=e.opts,i=e.container,l=e.el,f=i.style;!r.avoidContainerUpdate&&l&&n.forceShow&&(f.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:i,resizer:this,opts:ps(ps({},r),n)})},a.prototype.getSelectedHandler=function(){var n=this.handlers;if(this.selectedHandler){for(var t in n)if(n[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(n){n.keyCode===27&&(this.rectDim=this.startDim,this.stop(n))},a.prototype.handleMouseDown=function(n){var t=n.target;this.isHandler(t)?(this.selectedHandler=t,this.start(n)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(n){var t,e=this.opts||{},r=e.step,i=this.startDim,l=e.minDim,f=e.maxDim,p=n.delta.x,h=n.delta.y,g=this.parentDim.w,w=this.parentDim.h,M=this.opts.unitWidth,Z=this.opts.unitHeight,nt=M==="%"?i.w/100*g:i.w,vt=Z==="%"?i.h/100*w:i.h,_t={t:i.t,l:i.l,w:nt,h:vt};if(n){var At=n.handlerAttr;~At.indexOf("r")&&(t=M==="%"?(0,ct.normalizeFloat)((nt+p*r)/g*100,.01):(0,ct.normalizeFloat)(nt+p*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),_t.w=t),~At.indexOf("b")&&(t=Z==="%"?(0,ct.normalizeFloat)((vt+h*r)/w*100,.01):(0,ct.normalizeFloat)(vt+h*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),_t.h=t),~At.indexOf("l")&&(t=M==="%"?(0,ct.normalizeFloat)((nt-p*r)/g*100,.01):(0,ct.normalizeFloat)(nt-p*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),_t.w=t),~At.indexOf("t")&&(t=Z==="%"?(0,ct.normalizeFloat)((vt-h*r)/w*100,.01):(0,ct.normalizeFloat)(vt-h*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),_t.h=t);var Zt=e.ratioDefault?!n.keys.shift:n.keys.shift;if(At.indexOf("c")<0&&Zt){var Kt=i.w/i.h;_t.w/_t.h>Kt?_t.h=Math.round(_t.w/Kt):_t.w=Math.round(_t.h*Kt)}~At.indexOf("l")&&(_t.l+=i.w-_t.w),~At.indexOf("t")&&(_t.t+=i.h-_t.h);for(var he in _t){var Ce=he;_t[Ce]=parseInt("".concat(_t[Ce]),10)}return _t}},a}();const qv=$v;var Yv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wd=function(){return wd=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},wd.apply(this,arguments)},Xv=function(a){Yv(n,a);function n(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=Gv,e.Resizer=qv,e.Dragger=fe.Z,e.helpers=wd({},ct),e}return n.prototype.destroy=function(){},n}(q);const Jv=Xv;var ri,di={},Un={16:!1,18:!1,17:!1,91:!1},xp="all",hs={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},Cp={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},bd=function(a){return Cp[a]||a.toUpperCase().charCodeAt(0)},pl=[];for(ri=1;ri<20;ri++)Cp["f"+ri]=111+ri;function pu(a,n){for(var t=a.length;t--;)if(a[t]===n)return t;return-1}function Qv(a,n){if(a.length!=n.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==n[t])return!1;return!0}var tg={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function eg(a){for(ri in Un)Un[ri]=a[tg[ri]]}function rg(a){var n,t,e,r,i,l;if(n=a.keyCode,pu(pl,n)==-1&&pl.push(n),(n==93||n==224)&&(n=91),n in Un){Un[n]=!0;for(e in hs)hs[e]==n&&(Wn[e]=!0);return}if(eg(a),!!Wn.filter.call(this,a)&&n in di){for(l=xd(),r=0;r<di[n].length;r++)if(t=di[n][r],t.scope==l||t.scope=="all"){i=t.mods.length>0;for(e in Un)(!Un[e]&&pu(t.mods,+e)>-1||Un[e]&&pu(t.mods,+e)==-1)&&(i=!1);(t.mods.length==0&&!Un[16]&&!Un[18]&&!Un[17]&&!Un[91]||i)&&t.method(a,t)===!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}function ng(a){var n=a.keyCode,t,e=pu(pl,n);if(e>=0&&pl.splice(e,1),(n==93||n==224)&&(n=91),n in Un){Un[n]=!1;for(t in hs)hs[t]==n&&(Wn[t]=!1)}}function ig(){for(ri in Un)Un[ri]=!1;for(ri in hs)Wn[ri]=!1}function Wn(a,n,t){var e,r;e=Sp(a),t===void 0&&(t=n,n="all");for(var i=0;i<e.length;i++)r=[],a=e[i].split("+"),a.length>1&&(r=Op(a),a=[a[a.length-1]]),a=a[0],a=bd(a),a in di||(di[a]=[]),di[a].push({shortcut:e[i],scope:n,method:t,key:e[i],mods:r})}function og(a,n){var t,e,r=[],i,l,f;for(t=Sp(a),l=0;l<t.length;l++){if(e=t[l].split("+"),e.length>1&&(r=Op(e)),a=e[e.length-1],a=bd(a),n===void 0&&(n=xd()),!di[a])return;for(i=0;i<di[a].length;i++)f=di[a][i],f.scope===n&&Qv(f.mods,r)&&(di[a][i]={})}}function ag(a){return typeof a=="string"&&(a=bd(a)),pu(pl,a)!=-1}function sg(){return pl.slice(0)}function lg(a){var n=(a.target||a.srcElement).tagName;return!(n=="INPUT"||n=="SELECT"||n=="TEXTAREA")}for(ri in hs)Wn[ri]=!1;function ug(a){xp=a||"all"}function xd(){return xp||"all"}function cg(a){var n,t,e;for(n in di)for(t=di[n],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++}function Sp(a){var n;return a=a.replace(/\s/g,""),n=a.split(","),n[n.length-1]==""&&(n[n.length-2]+=","),n}function Op(a){for(var n=a.slice(0,a.length-1),t=0;t<n.length;t++)n[t]=hs[n[t]];return n}function Cd(a,n,t){a.addEventListener?a.addEventListener(n,t,!1):a.attachEvent&&a.attachEvent("on"+n,function(){t(window.event)})}Wn.setScope=ug,Wn.getScope=xd,Wn.deleteScope=cg,Wn.filter=lg,Wn.isPressed=ag,Wn.getPressedKeyCodes=sg,Wn.unbind=og,Wn.handlers=di,Wn.init=function(a){Cd(a.document,"keydown",function(n){rg(n)}),Cd(a.document,"keyup",ng),Cd(a,"focus",ig)};const hu=Wn;var fg={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};const dg=fg;var pg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))};(0,ct.hasWin)()&&hu.init(window);var hg=function(a){pg(n,a);function n(t){var e=a.call(this,t,"Keymaps",dg)||this;return e.keymaster=hu,e.keymaps={},e}return n.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var r=t[e];this.add(e,r.keys,r.handler,r.opts||{})}},n.prototype.add=function(t,e,r,i){i===void 0&&(i={});var l=this.em,f=l.Commands,p=l.getEditor(),h=l.Canvas,g={id:t,keys:e,handler:r},w=this.keymaps[t];return w&&this.remove(t),this.keymaps[t]=g,hu(e,function(M,Z){var nt={event:M,h:Z},vt=(0,L.isString)(r)?f.get(r):r,_t=!l.isEditing()&&!p.Canvas.isInputFocused();if(_t||i.force){i.prevent&&h.getCanvasView().preventDefault(M),(0,L.isFunction)(vt)?vt(p,0,nt):f.runCommand(vt,nt);var At=[t,Z.shortcut,M];l.trigger.apply(l,Tp(["keymap:emit"],At,!1)),l.trigger.apply(l,Tp(["keymap:emit:".concat(t)],At,!1))}},void 0),l.trigger("keymap:add",g),g},n.prototype.get=function(t){return this.keymaps[t]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(t){var e=this.em,r=this.get(t);if(r)return delete this.keymaps[t],r.keys.split(", ").forEach(function(i){hu.unbind(i.trim())}),e==null||e.trigger("keymap:remove",r),r},n.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),hu.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}(q);const vg=hg;var gg={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};const mg=gg;var yg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_g=function(a){yg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},n.prototype.open=function(){this.set("open",!0)},n.prototype.close=function(){this.set("open",!1)},n}(U.Z);const wg=_g;var bg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vc=function(){return Vc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Vc.apply(this,arguments)},xg=function(a){bg(n,a);function n(t){var e=a.call(this,t)||this,r=e.model;return e.listenTo(r,"change:open",e.updateOpen),e.listenTo(r,"change:title",e.updateTitle),e.listenTo(r,"change:content",e.updateContent),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,i=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(r,"one-bg ").concat(r,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(i,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},n.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},n.prototype.onClick=function(t){var e=this.config.backdrop;e&&t.target===this.el&&this.hide()},n.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},n.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},n.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},n.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),r=this.getCollector(),i=this.model.get("content");e.length&&r.append(e),t.empty().append(i)},n.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},n.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},n.prototype.hide=function(){this.model.close()},n.prototype.show=function(){this.model.open()},n.prototype.updateAttr=function(t){var e=this,r=e.pfx,i=e.$el,l=e.el,f=[].slice.call(l.attributes).map(function(p){return p.name});i.removeAttr(f.join(" ")),i.attr(Vc(Vc({},t||{}),{class:"".concat(r,"container ").concat(t&&t.class||"").trim()}))},n.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},n}(fr);const Cg=xg;var Sg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Og=function(a){Sg(n,a);function n(t){var e=a.call(this,t,"Modal",mg)||this;return e.model=new wg(e),e.model.on("change:open",function(r,i){t.trigger("modal:".concat(i?"open":"close"))}),e.model.on("change",(0,L.debounce)(function(){var r=e._evData(),i=e.config.custom;(0,L.isFunction)(i)&&i(r),t.trigger("modal",r)},0)),e}return n.prototype._evData=function(){var t=this,e=this.getTitle(),r=this.getContent(),i=this.model.attributes,l=i.open,f=i.attributes;return{open:l,attributes:f,title:(0,L.isString)(e)?(0,pe.rw)(e):e,content:(0,L.isString)(r)?(0,pe.rw)(r):r.get?r.get(0):r,close:function(){t.close()}}},n.prototype.postRender=function(t){var e=t.model.config.el||t.el,r=this.render();r&&(e==null||e.appendChild(r))},n.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},n.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},n.prototype.isOpen=function(){return!!this.model.get("open")},n.prototype.setTitle=function(t){return this.model.set("title",t),this},n.prototype.getTitle=function(){return this.model.get("title")},n.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},n.prototype.getContent=function(){return this.model.get("content")},n.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var t;if(!this.config.custom){var e=Cg.extend(this.config.extend),r=this.modal&&this.modal.el;return this.modal=new e({el:r,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},n.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},n}(q);const Tg=Og;var Ep="sw-visibility",Pp="export-template",kp="open-sm",Ap="open-tm",Lp="open-layers",Mp="open-blocks",Sd="fullscreen",Od="preview",Eg={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Ep,className:"fa fa-square-o",command:"core:component-outline",context:Ep,attributes:{title:"View components"}},{id:Od,className:"fa fa-eye",command:Od,context:Od,attributes:{title:"Preview"}},{id:Sd,className:"fa fa-arrows-alt",command:Sd,context:Sd,attributes:{title:"Fullscreen"}},{id:Pp,className:"fa fa-code",command:Pp,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:kp,className:"fa fa-paint-brush",command:kp,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Ap,className:"fa fa-cog",command:Ap,togglable:!1,attributes:{title:"Settings"}},{id:Lp,className:"fa fa-bars",command:Lp,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Mp,className:"fa fa-th-large",command:Mp,togglable:!1,attributes:{title:"Open Blocks"}}]}]};const Td=Eg;var Pg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kg=function(a){Pg(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.get("buttons").length&&r.set("buttons",new jp(r.module,r.get("buttons"))),r}return n.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(n.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),n}(U.Z);const Dp=kg;var Ag=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ip=function(a){Ag(n,a);function n(t,e){return a.call(this,t,e,Dp)||this}return n.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(r,i){r!==t&&(r.set("active",!1),e&&r.get("buttons").length&&r.get("buttons").deactivateAllExceptOne(t,e))})},n.prototype.deactivateAll=function(t,e){var r=t||"";this.forEach(function(i){i.get("context")==r&&i!==e&&i.set("active",!1,{fromCollection:!0})})},n.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(r,i){r.get("context")==e&&r.set("disable",!0)})},n.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(r,i){r!==t&&(r.set("disable",!0),e&&r.get("buttons").length&&r.get("buttons").disableAllButtonsExceptOne(t,e))})},n}(Ie);const jp=Ip;Ip.prototype.model=Dp;var Lg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mg=function(a){Lg(n,a);function n(t,e){var r=a.call(this,t,e)||this,i=r.get("buttons")||[];return r.buttons=new jp(t,i),r}return n.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(n.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),n}(U.Z);const Rp=Mg;var Dg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fp=function(a){Dg(n,a);function n(t,e){return a.call(this,t,e,Rp)||this}return n}(Ie);const Ig=Fp;Fp.prototype.model=Rp;var jg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hl=function(){return hl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},hl.apply(this,arguments)},Rg=function(a){jg(n,a);function n(t){var e=a.call(this,t)||this,r=e,i=r.model,l=r.em,f=r.pfx,p=r.ppfx,h=i.className,g=i.attributes,w=g.command,M=g.listen;if(e.id=f+i.get("id"),e.activeCls="".concat(f,"active ").concat(p,"four-color"),e.disableCls="".concat(p,"disabled"),e.btnsVisCls="".concat(f,"visible"),e.className=f+"btn"+(h?" "+h:""),e.listenTo(i,"change",e.render),e.listenTo(i,"change:active updateActive",e.updateActive),e.listenTo(i,"checkActive",e.checkActive),e.listenTo(i,"change:bntsVis",e.updateBtnsVis),e.listenTo(i,"change:attributes",e.updateAttributes),e.listenTo(i,"change:className",e.updateClassName),e.listenTo(i,"change:disable",e.updateDisable),l&&(0,L.isString)(w)&&M){var Z={fromListen:!0};e.listenTo(l,"run:".concat(w),function(){return i.set("active",!0,Z)}),e.listenTo(l,"stop:".concat(w),function(){return i.set("active",!1,Z)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.events=function(){return{click:"clicked"}},n.prototype.updateClassName=function(){var t=this,e=t.model,r=t.pfx,i=e.className,l=e.get("attributes").class,f="".concat(l||""," ").concat(r,"btn ").concat(i||"");this.$el.attr("class",f.trim())},n.prototype.updateAttributes=function(){var t=this,e=t.em,r=t.model,i=t.$el,l=r.get("attributes")||{},f=e&&e.t&&e.t("panels.buttons.titles.".concat(r.id));i.attr(l),f&&i.attr({title:f}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(t,e,r){var i;r===void 0&&(r={});var l=this,f=l.model,p=l.commands,h=l.$el,g=l.activeCls,w=r.fromCollection,M=r.fromListen,Z=f.get("context"),nt=f.get("options"),vt=f.command,_t={};vt&&(p&&(0,L.isString)(vt)?_t=p.get(vt)||{}:(0,L.isFunction)(vt)?_t=p.create({run:vt}):vt!==null&&(0,L.isObject)(vt)&&(_t=p.create(vt)),f.active?(!w&&((i=f.collection)===null||i===void 0||i.deactivateAll(Z,f)),f.set("active",!0,{silent:!0}).trigger("checkActive"),!M&&p.runCommand(_t,hl(hl({},nt),{sender:f})),_t.noStop&&f.set("active",!1)):(h.removeClass(g),!M&&p.stopCommand(_t,hl(hl({},nt),{sender:f,force:1}))))},n.prototype.updateDisable=function(){var t=this,e=t.disableCls,r=t.model,i=r.disable;this.$el[i?"addClass":"removeClass"](e)},n.prototype.checkActive=function(){var t=this,e=t.model,r=t.$el,i=t.activeCls;e.active?r.addClass(i):r.removeClass(i)},n.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},n.prototype.toggleActive=function(){var t=this,e=t.model,r=t.em,i=e.active,l=e.togglable;i&&!l||(e.active=!i,i?e.runDefaultCommand&&r.runDefault():e.stopDefaultCommand&&r.stopDefault())},n.prototype.render=function(){var t=this.model,e=t.get("label"),r=this.$el;return!t.get("el")&&r.empty(),this.updateAttributes(),e&&r.append(e),this.checkActive(),this.updateDisable(),this},n}(fr);const Fg=Rg;var Ng=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vg=function(a){Ng(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,i=t.get("el"),l=new Fg({el:i,model:t}),f=l.render().el;return r?r.appendChild(f):this.$el.append(f),f},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(r){return t.addToCollection(r,e)}),this.$el.append(e),this.$el.attr("class",(0,L.result)(this,"className")),this},n}(fr);const Hg=Vg;var Bg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ed=function(){return Ed=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ed.apply(this,arguments)},zg=function(a){Bg(n,a);function n(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return n.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},n.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},n.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},n.prototype.attributes=function(){return this.model.get("attributes")},n.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,r=this.model.get("resizable");if(e&&r){var i=r===!0?[!0,!0,!0,!0]:r,l=i.length,f=void 0,p=void 0,h=void 0,g=!1;if(l==2){var w=i;f=w[0],h=w[0],p=w[1],g=w[1]}else if(l==4){var w=i;f=w[0],p=w[1],h=w[2],g=w[3]}var M=new e.Utils.Resizer(Ed({tc:f,cr:p,bc:h,cl:g,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger("change:canvasOffset")},posFetcher:function(Z,nt){var vt=nt.target,_t=Z.style,At=M.getConfig(),Zt=At.keyWidth,Kt=At.keyHeight,he=Z.getBoundingClientRect(),Ce=vt=="container",Re=_t[Zt],Ze=_t[Kt],ge=Re&&!Ce?parseFloat(Re):he.width,Ke=Ze&&!Ce?parseFloat(Ze):he.height;return{left:0,top:0,width:ge,height:Ke}}},r&&typeof r!="boolean"?r:{}));M.blur=function(){},M.focus(this.el)}},n.prototype.render=function(){var t=this.model.buttons,e=this.$el,r=this.ppfx,i="".concat(this.className," ").concat(this.id," ").concat(r,"one-bg ").concat(r,"two-color");if(e.addClass(i),this.toggleVisible(),t.length){var l=new Hg(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},n}(fr);const Ug=zg;var Wg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gg=function(a){Wg(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return n.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,i=t.get("el"),l=new Ug(t),f=l.render().el,p=t.get("appendTo");if(!i)if(p){var h=document.querySelector(p);h==null||h.appendChild(f)}else r?r.appendChild(f):this.$el.append(f);return l.initResize(),f},n.prototype.render=function(){var t=this,e=this.$el,r=document.createDocumentFragment();return e.empty(),this.collection.each(function(i){return t.addToCollection(i,r)}),e.append(r),e.attr("class",this.className),this},n}(fr);const Kg=Gg;var Zg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$g=function(a){Zg(n,a);function n(t){var e=a.call(this,t,"Panels",Td)||this;e.panels=new Ig(e,e.config.defaults);for(var r in Td)r in e.config||(e.config[r]=Td[r]);return e}return n.prototype.getPanels=function(){return this.panels},n.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},n.prototype.addPanel=function(t){return this.panels.add(t)},n.prototype.removePanel=function(t){return this.panels.remove(t)},n.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},n.prototype.addButton=function(t,e){var r=this.getPanel(t);return r?r.buttons.add(e):null},n.prototype.removeButton=function(t,e){var r=this.getPanel(t);return r&&r.buttons.remove(e)},n.prototype.getButton=function(t,e){var r=this.getPanel(t);if(r){var i=r.buttons.where({id:e});return i.length?i[0]:null}return null},n.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new Kg(this.panels),this.PanelsViewObj.render().el},n.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("active")&&e.trigger("updateActive")})})},n.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("disable")&&e.trigger("change:disable")})})},n.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},n}(q);const qg=$g;var Yg={stylePrefix:"cm-",optsCodeViewer:{}};const Xg=Yg;var Jg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qg=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},tm=function(a){Jg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t,e){e===void 0&&(e={});var r=e.em,i=Qg(e,["em"]),l=i;if(e.cleanId&&r){var f=r.Css.getAll(),p=f.toJSON().map(function(h){var g=h.selectors,w=g&&g.length===1&&g.models[0];return w&&w.isId()&&w.get("name")}).filter(Boolean);l.attributes||(l.attributes=function(h,g){var w=g.id;return w&&w[0]==="i"&&!h.get("script")&&!h.get("attributes").id&&p.indexOf(w)<0&&delete g.id,g})}return t.toHTML(l)},n}(m.Hn);const em=tm;var rm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nm=function(a){rm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t){var e=this,r=t.toJSON();return this.beforeEach(r),(0,L.each)(r,function(i,l){var f=r[l];if(f instanceof m.Hn)r[l]=e.build(f);else if(f instanceof m.FE){var p=f;r[l]=[],p.length&&p.forEach(function(h,g){r[l][g]=e.build(h)})}}),r},n.prototype.beforeEach=function(t){delete t.status},n}(m.Hn);const im=nm;var om=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();function am(a){var n,t=((n=a.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"";return t.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var sm=function(a){om(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.mapModel=function(t){var e,r=this,i="",l=t.get("script-export")||t.get("script"),f=t.get("type"),p=t.get("components"),h=t.getId();if(l){var g=t.get("attributes");g=(0,L.extend)({},g,{id:h}),t.set("attributes",g,{silent:!0});var w=t.getScriptString(l),M=t.get("script-props");if(t.get("scriptUpdated")&&!M)this.mapJs[f+"-"+h]={ids:[h],code:w};else{var Z=void 0,nt=this.mapJs[f];if(M&&(Z=t.__getScriptProps()),nt)nt.ids.push(h),Z&&(nt.props[h]=Z);else{var vt={ids:[h],code:w};Z&&(vt.props=(e={},e[h]=Z,e)),this.mapJs[f]=vt}}}return p.forEach(function(_t){i+=r.mapModel(_t)}),i},n.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e="";for(var r in this.mapJs){var i=this.mapJs[r];if(i.code)if(i.props){if(am(i.code))continue;e+=`
          var props = `.concat(JSON.stringify(i.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(i.code,`.bind(el))(props[el.id]);
          }`)}else{var l="#"+i.ids.join(", #");e+=`
          var items = document.querySelectorAll('`.concat(l,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(i.code,`
}.bind(items[i]))();
          }`)}}return e},n}(m.Hn);const lm=sm;var um=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pd=function(){return Pd=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Pd.apply(this,arguments)},vu;(0,ct.hasWin)()&&(vu=wr(631),wr(531),wr(629),wr(210));var Np=function(a){um(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},n.prototype.init=function(t){return(0,L.bindAll)(this,"onChange"),this.editor=vu.fromTextArea(t,Pd({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},n.prototype.onChange=function(){this.trigger("update",this)},n.prototype.getEditor=function(){return this.editor},n.prototype.getElement=function(){return this.element},n.prototype.setElement=function(t){return this.element=t,this},n.prototype.refresh=function(){return this.getEditor().refresh(),this},n.prototype.focus=function(){return this.getEditor().focus(),this},n.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},n.prototype.setContent=function(t,e){var r=this;e===void 0&&(e={});var i=this.editor;if(i){i.setValue(t);var l=this.get("autoFormat"),f=i.autoFormatRange&&(l===!0||Array.isArray(l)&&l.includes(this.get("codeName")));f&&(vu.commands.selectAll(i),i.autoFormatRange(i.getCursor(!0),i.getCursor(!1)),vu.commands.goDocStart(i)),!e.noRefresh&&setTimeout(function(){return r.refresh()})}},n}(m.Hn);const cm=Np;Np.prototype.CodeMirror=vu;var fm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dm=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},pm=function(a){fm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(t){var e=t.pfx,r=t.codeName,i=t.label;return kt(Vp||(Vp=dm([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,r,e,i,e)},n.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},n.prototype.render=function(){var t,e,r=this,i=r.model,l=r.pfx,f=r.$el,p=i.toJSON(),h=i.get("input")||((e=(t=i).getElement)===null||e===void 0?void 0:e.call(t));return p.pfx=l,f.html(this.template(p)),f.attr("class","".concat(l,"editor-c")),f.find("#".concat(l,"code")).append(h),this},n}(m.G7);const hm=pm;var Vp,vm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hc=function(){return Hc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Hc.apply(this,arguments)},gm="CodeMirror",mm=function(a){vm(n,a);function n(t){var e=a.call(this,t,"CodeManager",Xg)||this;e.EditorView=hm;var r=e.config,i=r.pStylePrefix;return i&&(r.stylePrefix=i+r.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new em,css:new ic,json:new im,js:new lm},e.defViewers={CodeMirror:new cm},e.loadDefaultGenerators().loadDefaultViewers(),e}return n.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},n.prototype.getGenerator=function(t){return this.generators[t]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},n.prototype.getViewer=function(t){return this.viewers[t]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,L.isUndefined)(t.type)?gm:t.type,r=this.getViewer(e)&&this.getViewer(e).clone(),i=document.createElement("div"),l=document.createElement("textarea");return i.appendChild(l),r.set(Hc(Hc({},this.config.optsCodeViewer),t)),r.init(l),r.setElement(i),r},n.prototype.updateViewer=function(t,e){t.setContent(e)},n.prototype.getCode=function(t,e,r){r===void 0&&(r={}),r.em=this.em;var i=this.getGenerator(e);return i?i.build(t,r):""},n.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},n.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},n.prototype.destroy=function(){},n}(q);const ym=mm;var _m=wr(410),wm=wr.n(_m),bm={maximumStackLength:500,trackSelection:!0};const xm=bm;var Cm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ta=function(){return ta=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ta.apply(this,arguments)},Sm=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Bc=function(a){return a.avoidStore||a.noUndo},Hp=function(a){return Object.keys(a.changedAttributes())},Om=function(a){Cm(n,a);function n(t){var e=a.call(this,t,"UndoManager",xm)||this;e.config._disable&&(e.config.maximumStackLength=0);var r=!0;return e.um=new(wm())(ta({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(i){var l=i.get("_undo");if(l){var f=i.get("_undoexc");if((0,L.isArray)(f)&&Hp(i).some(function(p){return f.indexOf(p)>=0}))return!1;if((0,L.isBoolean)(l)||(0,L.isArray)(l)&&Hp(i).some(function(p){return l.indexOf(p)>=0}))return!0}return!1},on:function(i,l,f){var p=this;!this.beforeCache&&(this.beforeCache=i.previousAttributes());var h=f||l||{};if(h.noUndo&&setTimeout(function(){p.beforeCache=null}),!Bc(h)){var g=i.toJSON({fromUndo:r}),w={object:i,before:this.beforeCache,after:g};return this.beforeCache=null,(0,L.isEmpty)(g)?void 0:w}}}),e.um.changeUndoType("add",{on:function(i,l,f){if(f===void 0&&(f={}),!(Bc(f)||!e.isRegistered(l)))return{object:l,before:void 0,after:i,options:ta(ta({},f),{fromUndo:r})}}}),e.um.changeUndoType("remove",{on:function(i,l,f){if(f===void 0&&(f={}),!(Bc(f)||!e.isRegistered(l)))return{object:l,before:i,after:void 0,options:ta(ta({},f),{fromUndo:r})}}}),e.um.changeUndoType("reset",{undo:function(i,l){i.reset(l,{fromUndo:r})},redo:function(i,l,f){i.reset(f,{fromUndo:r})},on:function(i,l){if(l===void 0&&(l={}),!(Bc(l)||!e.isRegistered(i)))return{object:i,before:l.previousModels,after:Sm([],i.models,!0),options:ta(ta({},l),{fromUndo:r})}}}),e.um.on("undo redo",function(){t.trigger("change:canvasOffset"),t.getSelectedAll().map(function(i){return i.trigger("rerender:layer")})}),["undo","redo"].forEach(function(i){return e.um.on(i,function(){return t.trigger(i)})}),e}return n.prototype.postLoad=function(){var t=this,e=t.config,r=t.em;e.trackSelection&&r&&this.add(r.get("selected"))},n.prototype.add=function(t){return this.um.register(t),this},n.prototype.remove=function(t){return this.um.unregister(t),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,i=e.um;return!r.isEditing()&&i.undo(t),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,i=e.um;return!r.isEditing()&&i.redo(t),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},n.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},n.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(r){var i=r.get("magicFusionIndex");e.indexOf(i)<0&&(e.push(i),t.push(r))}),t},n.prototype.skip=function(t){this.stop(),t(),this.start()},n.prototype.getGroupedStack=function(){var t={},e=this.getStack(),r=function(i,l){var f=i.attributes,p=f.type,h=f.after,g=f.before,w=f.object,M=f.options,Z=M===void 0?{}:M;return{index:l,type:p,after:h,before:g,object:w,options:Z}};return e.forEach(function(i,l){var f=i.get("magicFusionIndex"),p=r(i,l);t[f]?t[f].push(p):t[f]=[p]}),Object.keys(t).map(function(i){var l=t[i];return{index:l[l.length-1].index,actions:l,labels:(0,L.unique)(l.reduce(function(f,p){var h,g=(h=p.options)===null||h===void 0?void 0:h.action;return g&&f.push(g),f},[]))}})},n.prototype.goToGroup=function(t){var e=this;if(t){var r=this.getPointer(),i=t.index-r;(0,L.times)(Math.abs(i),function(){e[i<0?"undo":"redo"](!1)})}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}(q);const Tm=Om;var Em={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1};const Pm=Em;var vl=function(){return vl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},vl.apply(this,arguments)},zc;(function(a){a[a.ACTIVE=1]="ACTIVE",a[a.INACTIVE=0]="INACTIVE",a[a.DISABLED=-1]="DISABLED"})(zc||(zc={}));var kd="_rte",vs={ACTIVE:1,INACTIVE:0,DISABLED:-1},Uc=function(a,n){n===void 0&&(n="A");var t=a.selection()||{},e=t.anchorNode,r=t.focusNode,i=e==null?void 0:e.parentNode,l=r==null?void 0:r.parentNode;return(i==null?void 0:i.nodeName)==n||(l==null?void 0:l.nodeName)==n},Wc="data-selectme",gu={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&Uc(a)?vs.ACTIVE:vs.INACTIVE},result:function(a){Uc(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(Wc,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a!=null&&a.selection()&&Uc(a,"SPAN")?vs.DISABLED:vs.INACTIVE},result:function(a){!Uc(a,"SPAN")&&a.insertHTML("<span ".concat(Wc,">").concat(a.selection(),"</span>"),{select:!0})}}},km=function(){function a(n,t,e){var r=this;if(e===void 0&&(e={}),this.em=n,this.settings=e,t[kd])return t[kd];t[kd]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var i=(e.actions||[]).map(function(g){var w=g;return(0,L.isString)(g)?w=vl({},gu[g]):gu[g.name]&&(w=vl(vl({},gu[g.name]),g)),w}),l=i.length?i:Object.keys(gu).map(function(g){return gu[g]});e.classes=vl({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var f=e.classes,p=e.actionbar;if(this.actionbar=p,this.classes=f,this.actions=l,!p){if(!this.isCustom(e.module)){var h=e.actionbarContainer;p=document.createElement("div"),p.className=f.actionbar,h==null||h.appendChild(p),this.actionbar=p}l.forEach(function(g){return r.addAction(g)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.isCustom=function(n){var t=n||this.em.RichTextEditor;return!!(t!=null&&t.config.custom||t!=null&&t.customRte)},a.prototype.destroy=function(){},a.prototype.setEl=function(n){this.el=n,this.doc=n.ownerDocument},a.prototype.updateActiveActions=function(){var n=this,t=this.getActions();t.forEach(function(e){var r=e.update,i=e.btn,l=n.classes,f=l.active,p=l.inactive,h=l.disabled,g=e.state,w=e.name,M=n.doc,Z=zc.INACTIVE;if(i&&(i.className=i.className.replace(f,"").trim(),i.className=i.className.replace(p,"").trim(),i.className=i.className.replace(h,"").trim()),g){var nt=g(n,M);if(Z=nt,i)switch(nt){case vs.ACTIVE:i.className+=" ".concat(f);break;case vs.INACTIVE:i.className+=" ".concat(p);break;case vs.DISABLED:i.className+=" ".concat(h);break}}else M.queryCommandSupported(w)&&M.queryCommandState(w)&&(i&&(i.className+=" ".concat(f)),Z=zc.ACTIVE);e.currentState=Z,r==null||r(n,e)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},a.prototype.enable=function(n){return this.enabled?this:this.__toggleEffects(!0,n)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(n,t){n===void 0&&(n=!1),t===void 0&&(t={});var e=n?pe.on:pe.S1,r=this,i=r.el,l=r.doc,f=this.actionbarEl();if(f&&(f.style.display=n?"":"none"),i.contentEditable="".concat(!!n),e(i,"mouseup keyup",this.updateActiveActions),e(l,"keydown",this.__onKeydown),e(l,"paste",this.__onPaste),this.enabled=n,n){var p=t.event;if(this.syncActions(),this.updateActiveActions(),p){var h=null;if(l.caretRangeFromPoint){var g=(0,pe.VB)(p);h=l.caretRangeFromPoint(g.clientX,g.clientY)}else p.rangeParent&&(h=l.createRange(),h.setStart(p.rangeParent,p.rangeOffset));var w=l.getSelection();w==null||w.removeAllRanges(),h&&(w==null||w.addRange(h))}i.focus()}return this},a.prototype.__onKeydown=function(n){var t=n,e=this.doc,r=["insertOrderedList","insertUnorderedList"];t.key==="Enter"&&!r.some(function(i){return e.queryCommandState(i)})&&(e.execCommand("insertLineBreak"),t.preventDefault())},a.prototype.__onPaste=function(n){var t=n.clipboardData||window.clipboardData,e=t.getData("text"),r=t.getData("text/html");if(e&&!r){n.preventDefault();var i=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,i)}},a.prototype.syncActions=function(){var n=this;this.getActions().forEach(function(t){if(n.actionbar&&(!t.state||t.state&&t.state(n,n.doc)>=0)){var e=t.event||"click",r=t.btn;r&&(r["on".concat(e)]=function(){t.result(n,t),n.updateActiveActions()})}})},a.prototype.addAction=function(n,t){t===void 0&&(t={});var e=t.sync,r=this.actionbarEl();if(r){var i=n.icon,l=n.attributes,f=l===void 0?{}:l,p=document.createElement("span");p.className=this.classes.button,n.btn=p;for(var h in f)p.setAttribute(h,f[h]);typeof i=="string"?p.innerHTML=i:p.appendChild(i),r.appendChild(p)}e&&(this.actions.push(n),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(n,t){this.doc.execCommand(n,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(n,t){var e=t===void 0?{}:t,r=e.select,i=this,l=i.em,f=i.doc,p=i.el,h=f.getSelection();if(h&&h.rangeCount){var g=(0,ct.getModel)(p),w=f.createElement("div"),M=h.getRangeAt(0);M.deleteContents(),(0,L.isString)(n)?w.innerHTML=n:n&&w.appendChild(n),Array.prototype.slice.call(w.childNodes).forEach(function(Z){M.insertNode(Z)}),h.removeAllRanges(),h.addRange(M),p.focus(),r&&g&&(g.once("rte:disable",function(){var Z=g.find("[".concat(Wc,"]"))[0];Z&&(l.setSelected(Z),Z.removeAttributes(Wc))}),g.trigger("disable"))}},a}();const Am=km;var Lm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bp=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(w){l(w)}}function p(g){try{h(e.throw(g))}catch(w){l(w)}}function h(g){g.done?i(g.value):r(g.value).then(f,p)}h((e=e.apply(a,n||[])).next())})},zp=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return p([h,g])}}function p(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Mm=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Ad="change:canvasOffset frame:scroll component:update",Dm="rte:enable",Im="rte:disable",jm="rte:custom",Rm={enable:Dm,disable:Im,custom:jm},Fm=function(a){Lm(n,a);function n(t){var e=a.call(this,t,"RichTextEditor",Pm)||this;e.events=Rm;var r=e.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),e.pfx=r.stylePrefix,e.actions=r.actions||[];var l=new m.Hn;return e.model=l,l.on("change:currentView",e.__trgCustom,e),e.__dbdTrgCustom=(0,L.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.onLoad=function(){if((0,ct.hasWin)()){var t=this.config,e=t.pStylePrefix,r=t.custom,i=(0,pe.ut)("div",{class:(0,pe.cx)("".concat(e,"rte-toolbar"),!r&&"".concat(e,"one-bg ").concat(e,"rte-toolbar-ui"))});this.toolbar=i,this.initRte((0,pe.ut)("div")),(0,pe.on)(i,"mousedown",function(l){return l.stopPropagation()})}},n.prototype.__trgCustom=function(){var t=this,e=t.model,r=t.em,i=t.events;r.trigger(i.custom,{enabled:!!e.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},n.prototype.destroy=function(){var t,e,r;(t=this.globalRte)===null||t===void 0||t.destroy(),(r=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||r===void 0||r.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,pe.L_)(this.toolbar)},n.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},n.prototype.initRte=function(t){var e=this.globalRte,r=this,i=r.em,l=r.pfx,f=r.actionbar,p=r.config,h=this.actions||Mm([],p.actions,!0),g={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=i,e.setEl(t)):(e=new Am(i,t,{classes:g,actions:h,actionbar:f,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},n.prototype.add=function(t,e){var r;e===void 0&&(e={}),e.name=t,(r=this.globalRte)===null||r===void 0||r.addAction(e,{sync:!0})},n.prototype.get=function(t){var e,r;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(i){i.name==t&&(r=i)}),r},n.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},n.prototype.remove=function(t){var e,r=this.getAll(),i=this.get(t);if(i){var l=i.btn,f=r.indexOf(i);(e=l==null?void 0:l.parentNode)===null||e===void 0||e.removeChild(l),r.splice(f,1)}return i},n.prototype.run=function(t){var e=this.globalRte,r=(0,L.isString)(t)?this.get(t):t;e&&r&&(r.result(e,r),e.updateActiveActions())},n.prototype.getToolbarEl=function(){return this.toolbar},n.prototype.updatePosition=function(){var t=this,e=t.em,r=t.toolbar,i="px",l=e.Canvas,f=r.style,p=l.getTargetToElementFixed(this.lastEl,r,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(h){var g=p[h];(0,ct.isDef)(g)&&(f[h]=(0,L.isString)(g)?g:(g||0)+i)})},n.prototype.enable=function(t,e,r){return r===void 0&&(r={}),Bp(this,void 0,void 0,function(){var i,l,f,p,h;return zp(this,function(g){switch(g.label){case 0:return this.lastEl=t.el,i=this,l=i.customRte,f=i.em,p=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(p,e):this.initRte(p).enable(r)];case 1:return h=g.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(Ad,this.updatePosition,this),f.on(Ad,this.updatePosition,this),f.trigger("rte:enable",t,h)),this.model.set({currentView:t}),[2,h]}})})},n.prototype.getContent=function(t,e){return Bp(this,void 0,void 0,function(){var r;return zp(this,function(i){switch(i.label){case 0:return r=this.customRte,r&&e&&(0,L.isFunction)(r.getContent)?[4,r.getContent(t.el,e)]:[3,2];case 1:return[2,i.sent()];case 2:return[2,t.getChildrenContainer().innerHTML]}})})},n.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},n.prototype.disable=function(t,e){var r=this.em,i=this.customRte,l=t.getChildrenContainer();i?i.disable(l,e):e&&e.disable(),this.hideToolbar(),r&&(r.off(Ad,this.updatePosition,this),r.trigger("rte:disable",t,e)),this.model.unset("currentView")},n}(q);const Nm=Fm;var Ld=wr(790),Vm={stylePrefix:"com-",defaults:{},strict:!0};const Hm=Vm;var Bm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gc=function(){return Gc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gc.apply(this,arguments)},Up=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Wp=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],zm=function(a){Bm(n,a);function n(t){var e=a.call(this,t,"Commands",Hm)||this;e.CommandAbstract=Ld.default,e.defaultCommands={},e.commands={},e.active={};var r=e.config,i=r.pStylePrefix,l=e.defaultCommands;i&&(r.stylePrefix=i+r.stylePrefix),Object.keys(r.defaults).forEach(function(p){var h=r.defaults[p];h.id&&e.add(h.id,h)}),l["tlb-delete"]={run:function(p){return p.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(p){p.runCommand("core:copy"),p.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(p,h,g){g===void 0&&(g={});var w=p.getModel(),M=g&&g.event,Z=g.target,nt=Z||p.getSelected(),vt=Z?[Z]:Up([],p.getSelectedAll(),!0),_t=M&&M.type=="dragstart",At={preserveSelected:1},Zt=["absolute","translate"];if(!nt||!nt.get("draggable"))return w.logWarning("The element is not draggable");var Kt=nt.get("dmode")||w.get("dmode"),he=function(){return w.stopDefault(At)},Ce=(0,L.includes)(Zt,Kt);vt.forEach(function(ar){return ar.trigger("disable")}),_t?setTimeout(he,0):he();var Re=function(ar){w.trigger("".concat(Si,":start"),ar)},Ze=function(ar){w.trigger(Si,ar)},ge=function(ar,un,ye){vt.forEach(function(vn){return vn.set("status","selected")}),p.select(vt),nt.emitUpdate(),w.trigger("".concat(Si,":end"),ye),setTimeout(function(){return w.runDefault(At)}),(Ce||ye.cancelled)&&w.set("_cmpDrag",1)};if(Ce)p.runCommand("core:component-drag",{guidesInfo:1,mode:Kt,target:nt,onStart:Re,onDrag:Ze,onEnd:ge,event:M});else{_t&&M.dataTransfer.setDragImage(nt.view.el,0,0);var Ke=p.Commands.get("move-comp");Ke.onStart=Re,Ke.onDrag=Ze,Ke.onEndMoveFromModel=ge,Ke.initSorterFromModels(vt)}vt.forEach(function(ar){return ar.set("status","freezed-selected")})}},l["core:undo"]=function(p){return p.UndoManager.undo()},l["core:redo"]=function(p){return p.UndoManager.redo()},Wp.forEach(function(p){var h=p[2],g=wr(828)("./".concat(p[1])).default,w="core:".concat(p[0]);l[w]=g,h&&(l[h]=g,["run","stop"].forEach(function(M){t.on("".concat(M,":").concat(h),function(){for(var Z=[],nt=0;nt<arguments.length;nt++)Z[nt]=arguments[nt];return t.trigger.apply(t,Up(["".concat(M,":").concat(w)],Z,!1))})}))}),r.model=t.Canvas;for(var f in l)e.add(f,l[f]);return e}return n.prototype.add=function(t,e){var r=(0,L.isFunction)(e)?{run:e}:e;return r.stop||(r.noStop=!0),delete r.initialize,r.id=t,this.commands[t]=Ld.default.extend(r),this},n.prototype.get=function(t){var e=this.commands[t];return(0,L.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},n.prototype.extend=function(t,e){e===void 0&&(e={});var r=this.get(t);if(r){var i=Gc(Gc({},r.constructor.prototype),e);this.add(t,i);var l=Wp.filter(function(f){return"core:".concat(f[0])===t&&f[2]})[0];l&&this.add(l[2],i)}return this},n.prototype.has=function(t){return!!this.commands[t]},n.prototype.getAll=function(){return this.commands},n.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},n.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},n.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},n.prototype.getActive=function(){return this.active},n.prototype.runCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var i=this,l=i.em,f=i.config,p=t.id,h=l.Editor;(!this.isActive(p)||e.force||!f.strict)&&(r=h&&t.callRun(h,e),p&&t.stop&&!t.noStop&&!e.abort&&(this.active[p]=r))}return r},n.prototype.stopCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var i=this,l=i.em,f=i.config,p=t.id,h=l.Editor;(this.isActive(p)||e.force||!f.strict)&&(p&&delete this.active[p],r=t.callStop(h,e))}return r},n.prototype.create=function(t){t.stop||(t.noStop=!0);var e=Ld.default.extend(t);return new e(this.config)},n.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},n}(q);const Um=zm,Wm={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var Gm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gn=function(){return Gn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gn.apply(this,arguments)},Km=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Gp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Md=function(a){Gm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,L.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var r=this.getId()||"",i=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(i||r).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!i&&this.set("name",(0,ct.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),n.callInit(this,t,e)},n.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},n.prototype.__upTargets=function(t,e){var r,i=this;e===void 0&&(e={});var l=this.em,f=l.Styles,p=this.getName(),h=e.__clear,g=h?"":this.__getFullValue(e),w=this.__getParentProp(),M=this.changedAttributes(),Z=(0,L.keys)(M).reduce(function(Kt,he){return Kt[he]=i.previous(he),Kt},{}),nt=Gp(Gp([],(0,L.keys)(this.__getClearProps()),!0),["__p"],!1),vt=(0,L.keys)(M),_t=!e.__up&&!w&&(h||nt.some(function(Kt){return vt.indexOf(Kt)>=0})),At=this.get("onChange"),Zt={property:this,from:Z,to:M,value:g,opts:e};f.__trgEv(f.events.propertyUpdate,Zt),At&&At(Zt),_t&&this.__upTargetsStyle((r={},r[p]=g,r),e)},n.prototype.__upTargetsStyle=function(t,e){var r,i=(r=this.em)===null||r===void 0?void 0:r.get("StyleManager");i==null||i.addStyleTargets(Gn(Gn({},t),{__p:!!e.avoidStore}),e)},n.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var r=e.partial,i=Km(e,["partial"]);return t.__p=!!(i.avoidStore||r),this.set(t,Gn(Gn({},i),{avoidStore:t.__p}))},n.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,Gn(Gn({},e),{__up:!0}))},n.prototype.init=function(){},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("property")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,i=r===void 0?!0:r,l=this.getId(),f=this.get("name")||this.get("label");return i&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||f},n.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,r=this.get("value");return!this.hasValue()&&!e?this.getDefaultValue():r},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget(),i=this.get("value");return!(0,L.isUndefined)(i)&&i!==""&&!r},n.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},n.prototype.getStyle=function(t){var e;t===void 0&&(t={});var r=this.getName(),i=t.camelCase?(0,ct.camelCase)(r):r;return e={},e[i]=this.__getFullValue(t),e},n.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,L.isUndefined)(t)?this.get("defaults"):t)},n.prototype.upValue=function(t,e){e===void 0&&(e={});var r=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(r,e)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Gn(Gn({},t),{__clear:!0})),this},n.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},n.prototype.getParent=function(){return this.__getParentProp()},n.prototype.isFull=function(){return!!this.get("full")},n.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},n.prototype.__getClearProps=function(){return{value:""}},n.prototype.setValue=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var i=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(i,Gn({avoidStore:l},r))},n.prototype.setValueFromInput=function(t,e,r){r===void 0&&(r={}),this.setValue(t,e,Gn(Gn({},r),{fromInput:1}))},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r={value:t},i="!important";if((0,L.isString)(t)&&t.indexOf(i)!==-1&&(r.value=t.replace(i,"").trim(),r.important=!0),!this.get("functionName")&&!e.complete)return r;var l=[],f="".concat(r.value),p=f.indexOf("(")+1,h=f.lastIndexOf(")"),g=f.substring(0,p-1);if(g&&(r.functionName=g),l.push(p),h>=0&&l.push(h),r.value=String.prototype.substring.apply(f,l),e.numeric){var w=parseFloat(r.value);r.unit=r.value.replace(w,""),r.value=w}return r},n.prototype.__getFullValue=function(t){var e=t===void 0?{}:t,r=e.withDefault;return!this.hasValue()&&r?this.getDefaultValue():this.getFullValue()},n.prototype.getFullValue=function(t,e){e===void 0&&(e={});var r=this.get("functionName"),i=this.getDefaultValue(),l=(0,L.isUndefined)(t)?this.get("value"):t,f=!(0,L.isUndefined)(l)&&l!=="";if(l&&i&&l===i)return i;if(r&&f){var p=r==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(r,"(").concat(p,")")}return f&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},n.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},n.prototype.getParentTarget=function(){return this.get("parentTarget")||null},n.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,r=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,r>=0?r:void 0]).trim()}},n.prototype.__checkVisibility=function(t){var e=t.target,r=t.component,i=t.sectors,l=r||e;if(!l)return!1;var f=this.getId(),p=this.getName(),h=this.get("toRequire"),g=this.get("requires"),w=this.get("requiresParent"),M=l.get("unstylable"),Z=l.get("stylable-require"),nt=l.get("stylable");if((0,L.isArray)(nt)&&(nt=nt.indexOf(p)>=0),(0,L.isArray)(M)&&(nt=M.indexOf(p)<0),h&&(nt=!e||Z&&(Z.indexOf(f)>=0||Z.indexOf(p)>=0)),i&&g){var vt=(0,L.keys)(g);i.forEach(function(Kt){Kt.getProperties().forEach(function(he){if((0,L.includes)(vt,he.id)){var Ce=g[he.id];nt=nt&&(0,L.includes)(Ce,he.get("value"))}})})}if(w){var _t=r&&r.parent(),At=_t&&_t.getEl();if(At){var Zt=(0,ct.hasWin)()?window.getComputedStyle(At):{};(0,L.each)(w,function(Kt,he){nt=nt&&Zt[he]&&(0,L.includes)(Kt,Zt[he])})}else nt=!1}return!!nt},n}(m.Hn);const kr=Md;Md.callParentInit=function(a,n,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(n,[t,Gn(Gn({},e),{skipInit:1})])},Md.callInit=function(a,n,t){t===void 0&&(t={}),!t.skipInit&&a.init(n,t)};var Zm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kc=function(){return Kc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Kc.apply(this,arguments)},$m=function(a){Zm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},n.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(r,i){return r[(0,ct.camelCase)(i)]=e[i],r},{}):e},n.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},n.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},n.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},n.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},n.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},n.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},n.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},n.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",Kc(Kc({},this.getValues()),t))},n}(m.Hn);const qm=$m;var Ym=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kp=function(a){Ym(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},n}(m.FE);const Xm=Kp;Kp.prototype.model=qm;var Jm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gl=function(){return gl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},gl.apply(this,arguments)},Zp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},$p=function(a){return a==="integer"||a==="number"},Qm=function(a){Jm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return gl(gl({},kr.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),kr.callParentInit(kr,this,t,e);var r=this.em,i=new Rd(this.get("properties")||[],{em:r,parentProp:this});this.set("properties",i,{silent:!0}),this.listenTo(i,"change",this.__upProperties),kr.callInit(this,t,e)},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),n.prototype.getProperties=function(){return Zp([],this.get("properties").models,!0)},n.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},n.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},n.prototype.isDetached=function(){return!!this.get("detached")},n.prototype.getValues=function(t){var e=t===void 0?{}:t,r=e.byName;return this.getProperties().reduce(function(i,l){var f=r?l.getName():l.getId();return i[f]="".concat(l.__getFullValue()),i},{})},n.prototype.getSeparator=function(){return this.getSplitSeparator()},n.prototype.getJoin=function(){return this.__getJoin()},n.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var r=this.getName(),i=this.__getJoin(),l=this.get("toStyle"),f=this.getValues(),p={};if(l)p=l(f,{join:i,name:r,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())p=f;else{var h=this.getProperties().map(function(g){return g.__getFullValue({withDefault:1})}).filter(Boolean).join(i);p=(e={},e[r]=h,e)}return this.isDetached()?p[r]="":(p[r]=p[r]||"",p=gl(gl({},p),this.getProperties().reduce(function(g,w){return g[w.getName()]="",g},{}))),t.camelCase?Object.keys(p).reduce(function(g,w){return g[(0,ct.camelCase)(w)]=p[w],g},{}):p},n.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},n.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!(e.__up||e.__clearIn)){var r=this.__getParentProp();if(r)return r.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},n.prototype.__upTargetsStyleProps=function(t,e){var r;t===void 0&&(t={});var i=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();i=(r={},r[l]=i[l],r)}this.__upTargetsStyle(i,t)},n.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),kr.prototype._up.call(this,t,e),this},n.prototype.getStyle=function(t){return this.getStyleFromProps(t)},n.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var e=this.getStyleFromProps()[this.getName()]||"";return ua(e)},n.prototype.__getJoin=function(){var t=this.get("join");return(0,L.isString)(t)?t:this.get("separator")},n.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),r=this.getProperties(),i=r.map(function(f){return f.getName()}),l=Zp([e],i,!0);return l.some(function(f){return!(0,L.isUndefined)(t[f])&&t[f]!==""})},n.prototype.__splitValue=function(t,e){return ua(t).split(e).map(function(r){return r.trim()}).filter(Boolean)},n.prototype.__splitStyleName=function(t,e,r){return this.__splitValue(t[e]||"",r)},n.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var r=e===void 0?{}:e,i=r.byName,l=this.getProperties(),f=l.length===4&&l.every(function(g){return $p(g.getType())}),p=this.__splitValue(t,this.getSplitSeparator()),h={};return l.forEach(function(g,w){var M=p[w],Z=(0,L.isUndefined)(M)?"":M;if(f){var nt=p.length;Z=p[w]||p[w%nt+(nt!=1&&nt%2?1:0)]||Z}var vt=i?g.getName():g.getId();h[vt]=Z||""}),h},n.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var r=e.byName,i=this.getName(),l=this.getProperties(),f=this.getSplitSeparator(),p=this.get("fromStyle"),h=p?p(t,{property:this,name:i,separator:f}):{};return p||(h=this.__getSplitValue(t[i]||"",{byName:r}),l.forEach(function(g){var w=t[g.getName()],M=r?g.getName():g.getId();!(0,L.isUndefined)(w)&&w!==""&&(h[M]=w)})),h},n.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(i){var l=t[i.getId()];i.__getFullValue()!==l&&i.upValue(l,e)});var r=(0,L.keys)(t).map(function(i){return t[i]}).join(" ");this.set("value",r,{silent:!0})},n.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),kr.prototype.clear.call(this),this},n.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},n.prototype.getFullValue=function(){return this.__getFullValue()},n.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},n}(kr);const ml=Qm;var ty=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_o=function(){return _o=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_o.apply(this,arguments)},ey=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ry=/,(?![^\(]*\))/,ny=/\s(?![^(]*\))/,iy=function(a){ty(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return _o(_o({},ml.getDefaults()),{layers:[],layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),ml.callParentInit(ml,this,t,e);var r=this.get("layers"),i=new Xm(r,{prop:this});i.property=this,i.properties=this.get("properties"),this.set("layers",i,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(i,"add remove",this.__upLayers),ml.callInit(this,t,e)},n.prototype.getLayers=function(){return this.__getLayers().models},n.prototype.__getLayers=function(){return this.get("layers")},n.prototype.getLayer=function(t){return t===void 0&&(t=0),this.__getLayers().at(t)||void 0},n.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},n.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},n.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},n.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var r=t?t.getIndex():-1;r>=0&&(0,L.isNumber)(e)&&e>=0&&e<this.getLayers().length&&r!==e&&(this.removeLayer(t),this.__getLayers().add(t,{at:e}))},n.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r={};this.getProperties().forEach(function(l){var f=l.getId(),p=t[f];r[f]=(0,L.isUndefined)(p)?l.getDefaultValue():p});var i=this.__getLayers().push({values:r},e);return i},n.prototype.removeLayer=function(t){return this.__getLayers().remove(t)},n.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},n.prototype.getLayerLabel=function(t){var e="";if(t){var r=this.get("layerLabel"),i=t.getValues(),l=t.getIndex();if(r)e=r(t,{index:l,values:i,property:this});else{var f=[];this.getProperties().map(function(p){f.push(i[p.getId()])}),e=f.filter(Boolean).join(" ")}}return e},n.prototype.getStyleFromLayer=function(t,e){var r;e===void 0&&(e={});var i=this.__getJoin(),l=this.__getJoinLayers(),f=this.get("toStyle"),p=this.getName(),h=t.getValues(),g;if(f)g=f(h,{join:i,joinLayers:l,name:p,layer:t,property:this});else{var w=this.getProperties().map(function(M){var Z=M.getName(),nt=h[M.getId()],vt=(0,L.isUndefined)(nt)?M.getDefaultValue():nt;if(e.number&&$p(M.getType())){var _t=M.parseValue(nt,e.number);vt="".concat(_t.value).concat(_t.unit)}return{name:Z,value:vt}});g=this.isDetached()?w.reduce(function(M,Z){return M[Z.name]=Z.value,M},{}):(r={},r[this.getName()]=w.map(function(M){return M.value}).join(i),r)}return e.camelCase?Object.keys(g).reduce(function(M,Z){return M[(0,ct.camelCase)(Z)]=g[Z],M},{}):g},n.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var r={},i=this.get("preview");return i&&(r=this.getStyleFromLayer(t,e)),r},n.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,L.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},n.prototype.__upProperties=function(t,e){var r;e===void 0&&(e={});var i=this.getSelectedLayer();i&&(i.upValues((r={},r[t.getId()]=t.__getFullValue(),r)),!e.__up&&this.__upTargetsStyleProps(e))},n.prototype.__upLayers=function(t,e,r){this.__upTargetsStyleProps(r||e)},n.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return kr.prototype.__upTargets.call(this,t,e)},n.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(),t)},n.prototype.__upTargetsStyle=function(t,e){return kr.prototype.__upTargetsStyle.call(this,t,e)},n.prototype.__upSelected=function(t,e){var r=t===void 0?{}:t,i=r.noEvent;e===void 0&&(e={});var l=this.em.Styles,f=this.getSelectedLayer(),p=f==null?void 0:f.getValues();p&&this.getProperties().forEach(function(h){var g,w=(g=p[h.getId()])!==null&&g!==void 0?g:"";h.__getFullValue()!==w&&h.upValue(w,_o(_o({},e),{__up:!0}))}),!i&&l.__trgEv(l.events.layerSelect,{property:this})},n.prototype._up=function(t,e){e===void 0&&(e={});var r=t.__layers,i=r===void 0?[]:r,l=ey(t,["__layers"]);return!this.isDetached()&&this.__setLayers(i),this.__upSelected({noEvent:!0},e),kr.prototype._up.call(this,l,e),this},n.prototype.__setLayers=function(t){t===void 0&&(t=[]);var e=this.__getLayers(),r=t.map(function(i){return{values:i}});e.length===r.length?r.map(function(i,l){var f;return(f=e.at(l))===null||f===void 0?void 0:f.upValues(i.values)}):this.__getLayers().reset(r),this.__upSelected({noEvent:!0})},n.prototype.__parseValue=function(t){var e=this,r=this.parseValue(t);return r.__layers=t.split(ry).map(function(i){return i.trim()}).map(function(i){return e.__parseLayer(i)}).filter(Boolean),r},n.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),r=t.split(ny),i=this.getProperties();return e?e({value:t,values:r}):i.reduce(function(l,f,p){var h=r[p];return l[f.getId()]=(0,L.isUndefined)(h)?f.getDefaultValue():h,l},{})},n.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;var r=this.getName(),i=this.getProperties(),l=this.getLayerSeparator(),f=this.get("fromStyle"),p=f?f(t,{property:this,name:r,separatorLayers:l}):[];if(!f){var h=this.__splitStyleName(t,r,l).map(function(g){return g.split(e.getSplitSeparator())}).map(function(g){var w={};return i.forEach(function(M,Z){var nt=g[Z];w[M.getId()]=(0,L.isUndefined)(nt)?M.getDefaultValue():nt}),w});i.forEach(function(g){var w=g.getId();e.__splitStyleName(t,g.getName(),l).map(function(M){var Z;return Z={},Z[w]=M||g.getDefaultValue(),Z}).forEach(function(M,Z){h[Z]=h[Z]?_o(_o({},h[Z]),M):M})}),p=h}return(0,L.isArray)(p)?p:[p]},n.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},n.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var r={},i=this.getName(),l=this.getLayers(),f=this.getProperties(),p=l.map(function(g){return e.getStyleFromLayer(g,t)});if(p.forEach(function(g){(0,L.keys)(g).map(function(w){r[w]||(r[w]=[]),r[w].push(g[w])})}),(0,L.keys)(r).map(function(g){r[g]=r[g].join(e.__getJoinLayers())}),this.isDetached())r[i]="",!l.length&&f.map(function(g){r[g.getName()]=""});else{var h=f.reduce(function(g,w){return g[w.getName()]="",g},{});r[i]=r[i]||"",r=_o(_o({},r),h)}return r},n.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,L.isString)(e)?e:t)},n.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return ua(t[this.getName()])},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget();return this.getLayers().length>0&&!r},n.prototype.clear=function(t){return t===void 0&&(t={}),this.__getLayers().reset(),this.__upTargetsStyleProps(t),kr.prototype.clear.call(this),this},n.prototype.__canClearProp=function(){return!1},n}(ml);const oy=iy;var ay=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zc=function(){return Zc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Zc.apply(this,arguments)},sy=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ly=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Dd="data-clear-style",uy=function(a){ay(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,L.bindAll)(e,"__change","__updateStyle");var r=t.config||{},i=r.em;e.config=r,e.em=i,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,L.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,L.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(i,"change:device",e.onValueChange);var f=e.init&&e.init.bind(e);return f&&f(),e}return n.prototype.events=function(){var t;return t={change:"inputValueChanged"},t["click [".concat(Dd,"]")]="clear",t},n.prototype.template=function(t){var e=this,r=e.pfx,i=e.ppfx;return`
      <div class="`.concat(r,`label" data-sm-label></div>
      <div class="`).concat(i,`fields" data-sm-fields></div>
    `)},n.prototype.templateLabel=function(t){var e=this,r=e.pfx,i=e.em,l=t.parent,f=t.attributes,p=f.icon,h=p===void 0?"":p,g=f.info,w=g===void 0?"":g,M=i==null?void 0:i.getConfig().icons,Z=(M==null?void 0:M.close)||"";return`
      <span class="`.concat(r,"icon ").concat(h,'" title="').concat(w,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(l?"":'<div class="'.concat(r,'clear" style="display: none" ').concat(Dd,">").concat(Z,"</div>"),`
    `)},n.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},n.prototype.remove=function(){var t=this;return m.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},n.prototype.updateStatus=function(){var t,e=this,r=e.model,i=e.pfx,l=e.ppfx,f=e.config,p="".concat(l,"four-color"),h="".concat(l,"color-warn"),g=this.$el.children(".".concat(i,"label")),w=this.getClearEl(),M=w?w.style:{};g.removeClass("".concat(p," ").concat(h)),M.display="none",r.hasValue({noParent:!0})&&f.highlightChanged?(g.addClass(p),f.clearProperties&&(M.display="")):r.hasValue()&&f.highlightComputed&&g.addClass(h),(t=this.parent)===null||t===void 0||t.updateStatus()},n.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},n.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(Dd,"]"))),this.clearEl},n.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),!this.emit&&this.model.upValue(t.target.value)},n.prototype.onValueChange=function(t,e,r){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},n.prototype.setValue=function(t){var e=this.model,r=(0,L.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(r);this.__setValueInput(r)},n.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},n.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},n.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},n.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(Zc(Zc({},this._getClbOpts()),{value:t}))},n.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.emit&&this.emit.bind(this);r&&r.apply(void 0,ly([this._getClbOpts()],t,!1))},n.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var r=e.complete,i=e.partial;sy(e,["complete","partial"]);var l=this.model,f=r!==!1&&i!==!0;(0,ct.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!f}):l.upValue(t,{partial:!f})},n.prototype._getClbOpts=function(){var t=this,e=t.model,r=t.el,i=t.createdEl;return{el:r,createdEl:i,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},n.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,r=t.model,i=t.el,l=t.$el,f=r.getName(),p=r.getType(),h=r.get("className")||"",g="".concat(e,"property"),w=p==="number"?"".concat(e).concat(p," ").concat(e,"integer"):"".concat(e).concat(p);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(r)),l.find("[data-sm-label]").append(this.templateLabel(r));var M=this.create&&this.create.bind(this);this.createdEl=M&&M(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(r)),i.className="".concat(g," ").concat(w," ").concat(g,"__").concat(f," ").concat(h).trim(),i.className+=r.isFull()?" ".concat(g,"--full"):"";var Z=this.onRender&&this.onRender.bind(this);return Z&&Z(),this.setValue(r.getValue()),this},n.prototype.onRender=function(){},n}(m.G7);const ea=uy;var cy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fy=function(a){cy(n,a);function n(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var r=e.collection;return e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.render),e}return n.prototype.addTo=function(t,e,r){this.add(t,null,r)},n.prototype.add=function(t,e,r){r===void 0&&(r={});var i=this,l=i.parent,f=i.config,p=e||this.el,h=new t.typeView({model:t,config:f});l&&(h.parent=l),h.render();var g=h.el;this.properties.push(h),(0,pe.$Q)(p,g,r.at)},n.prototype.remove=function(){return m.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},n.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,i=e.pfx;this.clearItems();var l=document.createDocumentFragment();return this.collection.forEach(function(f){return t.add(f,l)}),r.empty(),r.append(l),r.attr("class","".concat(i,"properties")),this},n}(m.G7);const Id=fy;var dy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$c=function(){return $c=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},$c.apply(this,arguments)},py=function(a){dy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},n.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),ea.prototype.remove.apply(this,arguments),this},n.prototype.onValueChange=function(){},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.get("properties");if(r.length&&!this.props){var i=e.isDetached(),l=new Id({config:$c($c({},this.config),{highlightComputed:i,highlightChanged:i}),collection:r,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},n.prototype.clearCached=function(){ea.prototype.clearCached.apply(this,arguments),delete this.props},n}(ea);const mu=py;var hy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vy=function(a){hy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},n.prototype.template=function(){var t=this,e=t.pfx,r=t.ppfx,i=t.em,l=i==null?void 0:i.getConfig().icons,f=(l==null?void 0:l.close)||"",p=(l==null?void 0:l.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(r,`no-touch-actions" data-move-layer>
          `).concat(p,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(f,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{};this.em=r.em,this.config=r,this.sorter=t.sorter,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.propertyView=t.propertyView;var i=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(i,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},n.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},n.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},n.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var r=this.getPreviewEl(),i=t.getStylePreview({number:{min:-3,max:3}}),l=(0,L.keys)(i).map(function(f){return"".concat(f,":").concat(i[f])}).join(";");r.setAttribute("style",l)}},n.prototype.updateVisibility=function(){var t,e=this,r=e.pfx,i=e.model,l=e.propertyView,f=this.getPropertiesWrapper(),p=i.isSelected();f.style.display=p?"":"none",this.$el[p?"addClass":"removeClass"]("".concat(r,"active")),p&&f.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},n.prototype.render=function(){var t=this,e=t.el,r=t.pfx,i=t.model;return e.innerHTML=this.template(),e.className="".concat(r,"layer"),i.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},n}(m.G7);const gy=vy;var my=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yy=function(a){my(n,a);function n(t){var e=a.call(this,t)||this,r=e.collection,i=t.config||{},l=i.em,f=i.stylePrefix||"",p=i.pStylePrefix||"";e.config=i,e.pfx=f,e.ppfx=p,e.propertyView=t.propertyView,e.className="".concat(f,"layers ").concat(p,"field"),e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.reset),e.items=[];var h=l==null?void 0:l.Utils;return e.sorter=h?new h.Sorter({container:e.el,ignoreViewChildren:1,containerSel:".".concat(f,"layers"),itemSel:".".concat(f,"layer"),pfx:i.pStylePrefix,em:l}):"",r.view=e,e.$el.data("model",r),e.$el.data("collection",r),e}return n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var i=e||null,l=this,f=l.propertyView,p=l.config,h=l.sorter,g=l.$el,w=new gy({model:t,config:p,sorter:h,propertyView:f}),M=w.render().el;if(this.items.push(w),i)i.appendChild(M);else if(typeof r<"u"){var Z="before";g.children().length===r&&(r--,Z="after"),r<0?g.append(M):g.children().eq(r)[Z](M)}else g.append(M);return M},n.prototype.reset=function(t,e){this.clearItems(),this.render()},n.prototype.remove=function(){return this.clearItems(),m.G7.prototype.remove.apply(this,arguments),this},n.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,i=e.sorter,l=document.createDocumentFragment();return r.empty(),this.collection.forEach(function(f){return t.addToCollection(f,l)}),r.append(l),r.attr("class",this.className),i&&(i.plh=null),this},n}(m.G7);const _y=yy;var wy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yl=function(){return yl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yl.apply(this,arguments)},by=function(a){wy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return yl(yl({},mu.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.em,i=r==null?void 0:r.getConfig().icons,l=(i==null?void 0:i.plus)||"+";return`
      <div class="`.concat(e,"field ").concat(e,`stack">
        <button type="button" id="`).concat(e,`add" data-add-layer>
          `).concat(l,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},n.prototype.init=function(){var t=this.model;this.listenTo(t.__getLayers(),"change reset",this.updateStatus)},n.prototype.addLayer=function(){this.model.addLayer({},{at:0})},n.prototype.setValue=function(){},n.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),mu.prototype.remove.apply(this,arguments),this},n.prototype.clearCached=function(){mu.prototype.clearCached.apply(this,arguments),delete this.layersView},n.prototype.onRender=function(){var t=this,e=t.model,r=t.el,i=t.config,l=e.get("properties");if(l.length&&!this.props){var f=new Id({config:yl(yl({},i),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});f.render();var p=new _y({collection:e.__getLayers(),config:i,propertyView:this});p.render();var h=r.querySelector("[data-layers-wrapper]");h.appendChild(p.el),this.props=f,this.layersView=p}},n}(mu);const xy=by;var Cy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qc=function(){return qc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qc.apply(this,arguments)},Sy=function(a){Cy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return qc(qc({},ea.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},n.prototype.templateInput=function(){var t,e=this,r=e.pfx,i=e.em,l=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,f=l==null?void 0:l.close;return`
      <div class="`.concat(r,"field ").concat(r,`file">
        <div id='`).concat(r,`input-holder'>
          <div class="`).concat(r,`btn-c">
            <button class="`).concat(r,'btn" id="').concat(r,`images" type="button" data-open-assets>
              `).concat(i.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(r,'preview-box" class="').concat(r,`preview-file" data-preview-box>
          <div id="`).concat(r,'preview-file" class="').concat(r,`preview-file-cnt" data-preview></div>
          <div id="`).concat(r,'close" class="').concat(r,'preview-file-close" data-clear-asset>').concat(f,`</div>
        </div>
      </div>
    `)},n.prototype.__setValueInput=function(t){var e=this,r=e.model,i=e.el,l=r.getDefaultValue(),f=i.querySelector("[data-preview-box]"),p=i.querySelector("[data-preview]");f.style.display=!t||t===l?"none":"",p.style.backgroundImage=t||r.getDefaultValue()},n.prototype.openAssetManager=function(){var t=this,e,r=(e=this.em)===null||e===void 0?void 0:e.Assets;r==null||r.open({select:function(i,l){var f=(0,L.isString)(i)?i:i.get("src");t.model.upValue(f,{partial:!l}),l&&r.close()},types:["image"],accept:"image/*"})},n}(ea);const Oy=Sy;var Ty=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ey=function(a){Ty(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(t){return""},n.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},n.prototype.setValue=function(t){},n.prototype.onRender=function(){var t=this,e=t.ppfx,r=t.model,i=t.el;if(!this.inputInst){var l=r.input;l.ppfx=e,l.render();var f=i.querySelector(".".concat(e,"fields"));f.appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},n.prototype.clearCached=function(){ea.prototype.clearCached.apply(this,arguments),this.inputInst=null},n}(ea);const ra=Ey;var Py=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ky=function(a){Py(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},n.prototype.remove=function(){var t=this;ra.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(r){return t[r]=null}),this},n.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},n.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,r=e.ppfx,i=e.model,l=e.em,f=e.el,p=new Jr({target:l,model:i,ppfx:r,onChange:this.__handleChange}),h=p.render();f.querySelector(".".concat(r,"fields")).appendChild(h.el),this.input=(t=h.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=h}},n}(ra);const Ay=ky;var Ly=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yc=function(){return Yc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yc.apply(this,arguments)},qp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},My=function(a){Ly(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Yc(Yc({},kr.getDefaults()),{options:[],full:0})},n.prototype.getOptions=function(){var t=this.attributes,e=t.options,r=t.list;return(e&&e.length?e:r)||[]},n.prototype.getOption=function(t){var e=this,r=(0,ct.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(i){return e.getOptionId(i)===r})[0]||null},n.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},n.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(qp(qp([],e,!0),[t],!1))}return this},n.prototype.getOptionId=function(t){return(0,ct.isDef)(t.id)?t.id:t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var i=e.locale,l=i===void 0?!0:i,f=((0,L.isString)(t)?this.getOption(t):t)||{},p=this.getOptionId(f),h=f.label||f.name||p,g=e.property||this.getId();return l&&((r=this.em)===null||r===void 0?void 0:r.t("styleManager.options.".concat(g,".").concat(p)))||h},n.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];kr.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},n.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},n}(kr);const jd=My;var Dy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Iy=function(a){Dy(n,a);function n(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.ppfx;return`
      <div class="`.concat(r,"field ").concat(r,`select">
        <span id="`).concat(e,`input-holder"></span>
        <div class="`).concat(r,`sel-arrow">
          <div class="`).concat(r,`d-s-arrow"></div>
        </div>
      </div>
    `)},n.prototype.updateOptions=function(){delete this.input,this.onRender()},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.getOptions();if(!this.input){var i=[];r.forEach(function(f){var p=e.getOptionId(f),h=e.getOptionLabel(p),g=f.style?f.style.replace(/"/g,"&quot;"):"",w=g?'style="'.concat(g,'"'):"",M=p.replace(/"/g,"&quot;");i.push('<option value="'.concat(M,'" ').concat(w,">").concat(h,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(i.join(""),"</select>"),this.input=l.firstChild}},n.prototype.__setValueInput=function(t){var e=this.model,r=this.getInputEl(),i=e.getOptions()[0],l=i?e.getOptionId(i):"";r&&(r.value=t||l)},n}(ea);const Yp=Iy;var jy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xc=function(){return Xc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Xc.apply(this,arguments)},Ry=function(a){jy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Xc(Xc({},jd.getDefaults()),{full:1})},n}(jd);const Fy=Ry;var Ny=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vy=function(a){Ny(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},n.prototype.onRender=function(){var t=this,e=t.pfx,r=t.ppfx,i=this.model,l="".concat(r,"radio-item-label"),f=i.getName(),p=i.getOptions(),h="".concat(e,"radio ").concat(e,"radio-").concat(f),g=i.cid;if(!this.input){var w=[];p.forEach(function(Z){var nt=Z.className?"".concat(Z.className," ").concat(e,"icon ").concat(l):"",vt=i.getOptionId(Z),_t="".concat(f,"-").concat(vt,"-").concat(g),At=nt?"":i.getOptionLabel(vt),Zt=Z.title?'title="'.concat(Z.title,'"'):"",Kt=i.getValue()===vt?"checked":"";w.push(`
          <div class="`.concat(r,`radio-item">
            <input type="radio" class="`).concat(h,'" id="').concat(_t,'" name="').concat(f,"-").concat(g,'" value="').concat(vt,'" ').concat(Kt,`/>
            <label class="`).concat(nt||l,'" ').concat(Zt,' for="').concat(_t,'">').concat(At,`</label>
          </div>
        `))});var M=this.el.querySelector(".".concat(r,"field"));M.innerHTML='<div class="'.concat(r,'radio-items">').concat(w.join(""),"</div>"),this.input=M.firstChild}},n.prototype.__setValueInput=function(t){var e,r=this.model,i=t||r.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(i,'"]'));l&&(l.checked=!0)},n}(Yp);const Hy=Vy;var By=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gs=function(){return gs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},gs.apply(this,arguments)},zy=function(a){By(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return gs(gs({},kr.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},n.prototype.getUnits=function(){return this.get("units")||[]},n.prototype.getUnit=function(){return this.get("unit")},n.prototype.getMin=function(){return this.get("min")},n.prototype.getMax=function(){return this.get("max")},n.prototype.getStep=function(){return this.get("step")},n.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),kr.callParentInit(kr,this,t,e);var r=this.get("unit"),i=this.getUnits();this.input=(0,ct.hasWin)()?new Fr({model:this}):void 0,i.length&&!r&&this.set("unit",i[0],{silent:!0}),kr.callInit(this,t,e)},n.prototype.__getClearProps=function(){return gs(gs({},kr.prototype.__getClearProps()),{unit:""})},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r=kr.prototype.parseValue.apply(this,arguments),i=this.input.validateInputValue(r.value,gs({deepCheck:1},e)),l=i.value,f=i.unit;return r.value=l,r.unit=f,r},n.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),r=(0,L.isUndefined)(t)?"":"".concat(t),i=!(0,L.isUndefined)(e)&&r?e:"",l="".concat(r).concat(i);return kr.prototype.getFullValue.apply(this,[l])},n}(kr);const Jc=zy;var Uy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qc=function(){return Qc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qc.apply(this,arguments)},Wy=function(a){Uy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Qc(Qc({},Jc.getDefaults()),{showInput:1})},n}(Jc);const Gy=Wy;var Ky=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tf=function(){return tf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},tf.apply(this,arguments)},Zy=function(a){Ky(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return tf(tf({},ra.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},n.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},n.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},n.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},n.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},n.prototype.setValue=function(t){var e=this.model,r=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(r.value),ra.prototype.setValue.apply(this,arguments)},n.prototype.onRender=function(){ra.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},n.prototype.clearCached=function(){ra.prototype.clearCached.apply(this,arguments),delete this.slider},n}(ra);const $y=Zy;var qy=m.FE.extend(hp),Yy=qy.extend({extendViewApi:1,init:function(){var a=this,n=a.opts,t=a.em,e=n.module||(t==null?void 0:t.get("StyleManager"));e&&(e.__listenAdd(this,e.events.propertyAdd),e.__listenRemove(this,e.events.propertyRemove))},types:[{id:"stack",model:oy,view:xy,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:ml,view:mu,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:kr,view:Oy,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:kr,view:Ay,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:jd,view:Yp,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:Fy,view:Hy,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:Gy,view:$y,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:Jc,view:ra,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:Jc,view:ra,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:kr,view:ea,isType:function(a){return a.type="base",a}}]});const Rd=Yy;var Xy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ef=function(){return ef=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ef.apply(this,arguments)},Jy=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Qy=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},t0=function(a){Xy(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,i=e.em;r.em=i;var l=t||{},f=r.buildProperties(l.buildProps),p=r.get("name")||"",h=[];!r.get("id")&&r.set("id",p.replace(/ /g,"_").toLowerCase()),f?h=r.extendProperties(f):h=r.get("properties").map(function(w){return(0,L.isString)(w)?r.buildProperties(w)[0]:w}).filter(Boolean),h=h.map(function(w){return r.checkExtend(w)});var g=new Rd(h,{em:i});return g.sector=r,r.set("properties",g),r}return n.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get("id")},n.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},n.prototype.setName=function(t){return this.set("name",t)},n.prototype.isOpen=function(){return!!this.get("open")},n.prototype.setOpen=function(t){return this.set("open",t)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.get("properties"),r=e.models?Qy([],e.models,!0):e;return r.filter(function(i){var l=!0;if(t.withValue&&(l=i.hasValue({noParent:!0})),t.withParentValue){var f=i.hasValue({noParent:!0});l=!f&&i.hasValue()}return l})},n.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},n.prototype.addProperty=function(t,e){return this.get("properties").add(this.checkExtend(t),e)},n.prototype.extendProperties=function(t,e,r){r===void 0&&(r=!1);for(var i=t.length,l=e||this.get("properties"),f=this.get("extendBuilded"),p=[],h=0,g=l.length;h<g;h++){for(var w=l[h],M=0,Z=0;Z<i;Z++){var nt=t[Z];if(w.property==nt.property||w.id==nt.property){var vt=w.properties;vt&&vt.length&&(w.properties=this.extendProperties(nt.properties||[],vt,1)),t[Z]=f?(0,L.extend)(nt,w):w,p[Z]=t[Z],M=1;continue}}M||(t.push(w),p.push(w))}return r?p.filter(function(_t){return _t}):t},n.prototype.checkExtend=function(t){var e=((0,L.isString)(t)?{extend:t}:t)||{},r=e.extend,i=Jy(e,["extend"]);return r?ef(ef({},this.buildProperties([r])[0]||{}),i):t},n.prototype.buildProperties=function(t){var e,r=t||[];if(!r.length)return[];var i=(e=this.em)===null||e===void 0?void 0:e.get("StyleManager").builtIn;return i==null?void 0:i.build(r)},n}(m.Hn);const Xp=t0;var e0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rf=function(){return rf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},rf.apply(this,arguments)},r0=function(a){e0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={});var r=e.module,i=e.em;this.em=i,this.module=r,this.listenTo(this,"reset",this.onReset)},n.prototype.model=function(t,e){e===void 0&&(e={});var r=e.collection.em;return new Xp(t,rf(rf({},e),{em:r}))},n.prototype.onReset=function(t,e){e===void 0&&(e={});var r=e.previousModels||[];r.forEach(function(i){return i.get("properties").reset()})},n}(m.FE);const n0=r0;var ka=function(){return ka=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ka.apply(this,arguments)},i0=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ms=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},ln=function(a){return a.map(function(n){return{id:n}})},o0=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var n=", sans-serif",t=["flex-start","flex-end","center"],e=ms(ms([],t,!0),["baseline","stretch"],!1);this.optsBgSize=ln(["auto","cover","contain"]),this.optsBgAttach=ln(["scroll","fixed","local"]),this.optsBgRepeat=ln(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=ln(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=ln(["visible","hidden","scroll","auto"]),this.optsDir=ln(["row","row-reverse","column","column-reverse"]),this.opstDisplay=ln(["block","inline","inline-block","flex","none"]),this.optsTransitFn=ln(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=ln(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=ln(["none","left","right"]),this.optsPos=ln(["static","relative","absolute","fixed"]),this.optsTextAlign=ln(["left","center","right","justify"]),this.optsFlexAlign=ln(e),this.optsJustCont=ln(ms(ms([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=ln(ms(ms([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=ln(ms(["auto"],e,!0)),this.optsTransitProp=ln(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=ln(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=ln(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+n,"Arial Black, Gadget"+n,"Brush Script MT"+n,"Comic Sans MS, cursive"+n,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+n,"Impact, Charcoal"+n,"Lucida Sans Unicode, Lucida Grande"+n,"Tahoma, Geneva"+n,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+n,"Verdana, Geneva"+n].map(function(r){return{id:r,label:r.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(n){var t=this;return function(){return n.map(function(e){if((0,L.isString)(e))return t.get(e);var r=e.extend,i=i0(e,["extend"]);return ka(ka({},t.get(r)),i)})}},a.prototype.init=function(){var n=this,t=this,e=t.fixedValues,r=t.requireFlex,i=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:i,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:r},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:i,default:"0",requiresParent:r}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:r},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:r},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(f,p){var h=p.values,g=h["box-shadow-h"],w=h["box-shadow-v"],M=h["box-shadow-blur"],Z=h["box-shadow-spread"];return"".concat(g," ").concat(w," ").concat(M," ").concat(Z)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(f,p){var h=p.values,g=h["text-shadow-h"],w=h["text-shadow-v"],M=h["text-shadow-blur"];return"".concat(g," ").concat(w," ").concat(M)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(f,p){var h=p.values,g=h["background-repeat-sub"]||"",w=h["background-position-sub"]||"",M=h["background-attachment-sub"]||"",Z=h["background-size-sub"]||"";return[g,w,M,Z].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(f,p){var h=p.property,g=p.name,w=f[g]||"",M=h.getLayerSeparator();return w?w.split(M).map(function(Z){var nt=h.__parseFn(Z),vt=nt.name,_t=nt.value;return{"transform-type":vt,"transform-value":_t}}):[]},toStyle:function(f,p){var h,g=p.name;return h={},h[g]="".concat(f["transform-type"],"(").concat(f["transform-value"],")"),h},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(f){var p=f.property,h=f.to;if(h.value){var g=p.getOption(),w=ka({},g.propValue||{}),M=p.getParent().getProperty("transform-value"),Z=M.getUnit();(!Z||(w==null?void 0:w.units.indexOf(Z))<0)&&(w.unit=(w==null?void 0:w.units[0])||""),M.up(w)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(f){var p=f[0],h=f[1],g=f[2];n.add(p,h||{},{from:g})}),this},a.prototype.add=function(n,t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.from||"",i=this.props[r||n]||{},l=ka(ka(ka({},i),{property:n}),t);return l.properties&&(0,L.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[n]=l,l},a.prototype.get=function(n){return this.props[n]},a.prototype.build=function(n){var t=this,e=[],r=(0,L.isString)(n)?[n]:n;return r.forEach(function(i){e.push(t.get(i)||{property:i})}),e},a}();const a0=o0;var s0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),l0=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},u0=function(a){s0(n,a);function n(t){var e=a.call(this,t)||this,r=t.config||{},i=e.model,l=r.em;return e.config=r,e.em=l,e.pfx=r.stylePrefix||"",e.listenTo(i,"destroy remove",e.remove),e.listenTo(i,"change:open",e.updateOpen),e.listenTo(i,"change:visible",e.updateVisibility),e}return n.prototype.template=function(t){var e,r=t.pfx,i=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,f=(l==null?void 0:l.caret)||"",p="".concat(r,"sector-");return kt(Jp||(Jp=l0([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),p,p,f,p,i)},n.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},n.prototype.updateOpen=function(){var t=this,e=t.$el,r=t.model,i=t.pfx,l=r.isOpen();e[l?"addClass":"removeClass"]("".concat(i,"open")),this.getPropertiesEl().style.display=l?"":"none"},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.getPropertiesEl=function(){var t=this,e=t.$el,r=t.pfx;return e.find(".".concat(r,"properties")).get(0)},n.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},n.prototype.renderProperties=function(){var t=this,e=t.model,r=t.config,i=e.get("properties");if(i){var l=new Id({collection:i,config:r});this.$el.append(l.render().el)}},n.prototype.render=function(){var t=this,e=t.pfx,r=t.model,i=t.$el,l=r.getId(),f=r.getName();return i.html(this.template({pfx:e,label:f})),this.renderProperties(),i.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},n}(m.G7);const c0=u0;var Jp,f0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),d0=function(a){f0(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.module,i=t.config,l=e.collection;return e.pfx=(i==null?void 0:i.stylePrefix)||"",e.ppfx=(i==null?void 0:i.pStylePrefix)||"",e.config=i,e.module=r,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return n.prototype.remove=function(){var t=this;return m.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},n.prototype.addTo=function(t,e,r){r===void 0&&(r={}),this.addToCollection(t,null,r)},n.prototype.addToCollection=function(t,e,r){r===void 0&&(r={});var i=this,l=i.config,f=i.el,p=e||f,h=new c0({model:t,config:l}).render().el;return(0,pe.$Q)(p,h,r.at),h},n.prototype.render=function(){var t=this,e=this,r=e.$el,i=e.pfx,l=e.ppfx;r.empty();var f=document.createDocumentFragment();return this.collection.each(function(p){return t.addToCollection(p,f)}),r.append(f),r.addClass("".concat(i,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},n}(m.G7);const p0=d0;var h0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Aa=function(){return Aa=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Aa.apply(this,arguments)},Qp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},th="style",yu="".concat(th,":"),Fd="".concat(yu,"sector"),v0="".concat(Fd,":add"),g0="".concat(Fd,":remove"),m0="".concat(Fd,":update"),Nd="".concat(yu,"property"),y0="".concat(Nd,":add"),_0="".concat(Nd,":remove"),w0="".concat(Nd,":update"),eh="".concat(yu,"layer:select"),Vd="".concat(yu,"target"),b0="".concat(yu,"custom"),rh=function(a){return a||a===0},x0={all:th,sectorAdd:v0,sectorRemove:g0,sectorUpdate:m0,propertyAdd:y0,propertyRemove:_0,propertyUpdate:w0,layerSelect:eh,target:Vd,custom:b0},C0=function(a){h0(n,a);function n(t){var e=a.call(this,t,"StyleManager",new n0([],{em:t}),x0,Wm)||this;e.Sector=Xp,e.storageKey="",(0,L.bindAll)(e,"__clearStateTarget");var r=e.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),e.builtIn=new a0,e.properties=new Rd([],{em:t,module:e}),e.sectors=e.all;var l=new m.Hn({targets:[]});e.model=l;var f="component:toggled component:update:classes change:state change:device frame:resized selector:type";e.upAll=(0,L.debounce)(function(){return e.__upSel()},0),l.listenTo(t,f,e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var p=(0,L.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",p);var h=(0,L.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(eh," ").concat(Vd),h),l.on("change:lastTarget",function(){return t.trigger(Vd,e.getSelected())}),e}return n.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},n.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.__trgEv=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];(e=this.em).trigger.apply(e,Qp([t],r,!1))},n.prototype.__clearStateTarget=function(){var t=this,e=this.em,r=this.__getStateTarget();r&&(e==null||e.skip(function(){e.Css.remove(r),t.model.set({stateTarget:null})}))},n.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.addSector=function(t,e,r){r===void 0&&(r={});var i=this.getSector(t);return i||(e.id=t,i=this.sectors.add(e,r)),i},n.prototype.getSector=function(t,e){e===void 0&&(e={});var r=this.sectors.where({id:t})[0];return!r&&e.warn&&this._logNoSector(t),r||null},n.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,r=e&&e.models?t.array?Qp([],e.models,!0):e:[];return t.visible?r.filter(function(i){return i.isVisible()}):r},n.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},n.prototype.addProperty=function(t,e,r){r===void 0&&(r={});var i=this.getSector(t,{warn:!0}),l=null;return i&&(l=i.addProperty(e,r)),l},n.prototype.getProperty=function(t,e){var r=this.getSector(t,{warn:!0}),i;return r&&(i=r.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),i},n.prototype.getProperties=function(t){var e,r=this.getSector(t,{warn:!0});return r&&(e=r.properties),e},n.prototype.removeProperty=function(t,e){var r=this.getProperties(t);return r?r.remove(this.getProperty(t,e)):null},n.prototype.select=function(t,e){var r=this;e===void 0&&(e={});var i=this.em,l=(0,L.isArray)(t)?t:[t],f=e.stylable,p=i.Css,h=[];l.filter(Boolean).forEach(function(vt){var _t=vt;if((0,L.isString)(vt)){var At=p.getRule(vt)||p.setRule(vt);!(0,L.isUndefined)(f)&&At.set({stylable:f}),_t=At}h.push(_t)});var g=e.component||h.filter(function(vt){return(0,ct.isComponent)(vt)}).reverse()[0];h=h.map(function(vt){return r.getModelToStyle(vt)});var w=i.getState(),M=h.slice().reverse()[0],Z=this.getParentRules(M,{state:w,component:g}),nt=this.__getStateTarget();return i.skip(function(){var vt;if(w&&(!((vt=M==null?void 0:M.getState)===null||vt===void 0)&&vt.call(M))){var _t=M.getStyle();nt?nt.setStyle(_t):nt=p.getAll().add({selectors:"gjs-selected",style:_t,shallow:!0,important:!0})}else nt&&(p.remove(nt),nt=void 0)}),this.model.set({targets:h,lastTarget:M,lastTargetParents:Z,stateTarget:nt,component:g}),this.__upProps(e),h},n.prototype.getSelected=function(){return this.model.get("lastTarget")},n.prototype.getSelectedAll=function(){return this.model.get("targets")},n.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},n.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},n.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var r=this.getSelected();r&&this.__emitCmpStyleUpdate(t);var i=this.__getStateTarget();r&&(i==null||i.setStyle(r.getStyle(),e))},n.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},n.prototype.getBuiltInAll=function(){return this.builtIn.props},n.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},n.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var r=this.em,i=e.skipAdd;if(r&&(t!=null&&t.toHTML)){var l=r.getConfig(),f=r.UndoManager,p=r.Css,h=r.Selectors,g=h?h.getConfig():{},w=l.devicePreviewMode?"":r.get("state"),M=t.get("classes"),Z=M.getStyleable(),nt=Z.length,vt=!g.componentFirst||e.useClasses,_t={noCount:1},At={state:w,addOpts:_t},Zt=void 0;if(f.stop(),nt&&vt){var Kt=r.getCurrentMedia();Zt=p.get(Z,w,Kt),!Zt&&!i&&(Zt=p.add(Z,w,Kt,{},_t))}else if(l.avoidInlineStyle){var he=t.getId();Zt=p.getIdRule(he,At),!Zt&&!i&&(Zt=p.setIdRule(he,{},At)),t.is("wrapper")&&Zt.set("wrapper",1,_t)}Zt&&(t=Zt),f.start()}return t},n.prototype.getParentRules=function(t,e){var r=e===void 0?{}:e,i=r.state,l=r.component,f=this.em,p=[];if(f&&t){var h=l,g=f.Css,w=f.CodeManager.getGenerator("css"),M=t.toHTML?t:t.getComponent(),Z={combination:!0,array:!0},nt=[],vt=[],_t=[];M?(nt=g.getRules("#".concat(M.getId())),vt=h?g.getRules(h.getSelectors().getFullName(Z)):[],_t=vt.concat(nt)):(nt=h?g.getRules("#".concat(h.getId())):[],vt=g.getRules(t.getSelectors().getFullName(Z)),_t=nt.concat(vt));var At=_t.filter(function(Zt){return(0,L.isUndefined)(i)?1:Zt.get("state")===i}).sort(w.sortRules).reverse();p=At.slice(At.indexOf(t)+1)}return p},n.prototype.addType=function(t,e){this.properties.addType(t,e)},n.prototype.getType=function(t){return this.properties.getType(t)},n.prototype.getTypes=function(){return this.properties.getTypes()},n.prototype.createType=function(t,e){var r=e===void 0?{}:e,i=r.model,l=i===void 0?{}:i,f=r.view,p=f===void 0?{}:f,h=this.config,g=this.getType(t);if(g)return new g.view(Aa({model:new g.model(l),config:h},p))},n.prototype.render=function(){var t=this,e=t.config,r=t.em,i=t.SectView,l=i&&i.el;return this.SectView=new p0({el:l,em:r,config:e,module:this,collection:this.sectors}),this.SectView.render().el},n.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},n.prototype.__emitCmpStyleUpdate=function(t,e){e===void 0&&(e={});var r=this.em,i="component:styleUpdate";if(!t.__p){var l=e.components||r.getSelectedAll(),f=Array.isArray(l)?l:[l],p=Aa({},t);delete p.__p;var h=Object.keys(p),g={style:p};f.forEach(function(w){r.trigger(i,w,g),h.forEach(function(M){return r.trigger("".concat(i,":").concat(M),w,g)})})}},n.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var r=this.getSelected();if(r){var i=this.sectors,l=this.model.get("component"),f=this.getSelectedParents(),p=r.getStyle(),h=f.map(function(g){return{target:g,style:g.getStyle()}});i.map(function(g){g.getProperties().map(function(w){e.__upProp(w,p,h,t)})}),i.forEach(function(g){var w=g.getProperties();w.forEach(function(Z){var nt=Z.__checkVisibility({target:r,component:l,sectors:i});Z.set("visible",nt)});var M=w.some(function(Z){return Z.isVisible()});g.set("visible",M)})}},n.prototype.__upProp=function(t,e,r,i){var l=this,f=t.getName(),p=e[f],h=rh(p),g=t.getType()==="stack",w=t.getType()==="composite",M=Aa(Aa({},i),{__up:!0}),Z=!w&&!g,nt=g?t.__getLayersFromStyle(e):[],vt=w?t.__getPropsFromStyle(e):{},_t=h?p:null,At=null;if(g&&nt===null||w&&vt===null){var Zt=g?"__getLayersFromStyle":"__getPropsFromStyle",Kt=r.filter(function(ge){return t[Zt](ge.style)!==null})[0];if(Kt){_t=Kt.style[f],At=Kt.target;var he=t[Zt](Kt.style);g?nt=he:vt=he}}else if(!h){_t=null;var Kt=r.filter(function(Ke){return rh(Ke.style[f])})[0];Kt&&(_t=Kt.style[f],At=Kt.target)}if(t.__setParentTarget(At),Z&&t.__getFullValue()!==_t&&t.upValue(_t,M),g&&t.__setLayers(nt||[]),w){var Ce=t.getProperties();if(t.isDetached()){var Re=t.__getPropsFromStyle(e,{byName:!0})||{},Ze=r.map(function(ge){return Aa(Aa({},ge),{style:t.__getPropsFromStyle(ge.style,{byName:!0})||{}})});Ce.map(function(ge){return l.__upProp(ge,Re,Ze,i)})}else t.__setProperties(vt||{},M),t.getProperties().map(function(ge){return ge.__setParentTarget(At)})}},n.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},n}(W);const S0=C0;var O0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ln=function(){return Ln=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ln.apply(this,arguments)},Hd=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(w){l(w)}}function p(g){try{h(e.throw(g))}catch(w){l(w)}}function h(g){g.done?i(g.value):r(g.value).then(f,p)}h((e=e.apply(a,n||[])).next())})},Bd=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return p([h,g])}}function p(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},T0=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},E0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))};lt().$=K.default;var P0=[Jv,Hv,vg,Tm,S,Xt,su,S0,Sc,Tg,ym,qg,Nm,Vh,tv,Bi,Um,gc],k0=[jv,Ca,Fe,rc];et({$:K.default});var nh={debug:console.log,info:console.info,warning:console.warn,error:console.error},A0=function(a){O0(n,a);function n(t){t===void 0&&(t={});var e=a.call(this)||this;e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var r=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new E),e.set("dmode",r.dragMode);var i=r.el,l=r.log,f=l===!0?(0,L.keys)(nh):(0,L.isArray)(l)?l:[];return(0,L.bindAll)(e,"initBaseColorPicker"),i&&r.fromElement&&(r.components=i.innerHTML),e.attrsOrig=i?(0,L.toArray)(i.attributes).reduce(function(p,h){return p[h.nodeName]=h.nodeValue,p},{}):"",r.components&&!r.pageManager&&(r.pageManager={pages:[{component:r.components}]}),P0.forEach(function(p){return e.loadModule(p)}),k0.forEach(function(p){return e.loadStorableModule(p)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),f.forEach(function(p){return e.listenLog(p)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(p){var h=p.from,g=p.to;e.listenTo(e,h,function(){for(var w=[],M=0;M<arguments.length;M++)w[M]=arguments[M];e.trigger.apply(e,E0([g],w,!1)),e.logWarning("The event '".concat(h,"' is deprecated, replace it with '").concat(g,"'"))})}),e}return n.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(n.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),n.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},n.prototype.getContainer=function(){return this.config.el},n.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),nh[t])},Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),n.prototype.getConfig=function(t){var e=this.config;return(0,L.isUndefined)(t)?e:e[t]},n.prototype.loadOnStart=function(){var t=this,e=this.config,r=e.projectData,i=e.headless,l=this.get("StorageManager");this.toLoad.reverse().forEach(function(h){return h.onLoad()});var f=function(){t.modules.forEach(function(h){return h.postLoad&&h.postLoad(t)}),t.set("readyLoad",1)};i?(r&&this.loadData(r),f()):this._storageTimeout=setTimeout(function(){return Hd(t,void 0,void 0,function(){var h;return Bd(this,function(g){switch(g.label){case 0:return r?(this.loadData(r),[3,5]):[3,1];case 1:if(!(l!=null&&l.canAutoload()))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.load()];case 3:return g.sent(),[3,5];case 4:return h=g.sent(),this.logError(h),[3,5];case 5:return f(),[2]}})})});var p=new n({noticeOnUnload:!1,storageManager:!1,undoManager:!1});p.Pages.onLoad(),p.Canvas.postLoad(),this.set("shallow",p)},n.prototype.updateChanges=function(){var t=this,e=this.get("StorageManager"),r=this.getDirtyCount();this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return t.trigger("update")}),this.config.noticeOnUnload&&(window.onbeforeunload=r?function(){return!0}:null),e.isAutosave()&&r>=e.getStepsBeforeSave()&&this.store().catch(function(i){return t.logError(i)})},n.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},n.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},n.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},n.prototype.getEditor=function(){return this.get("Editor")},n.prototype.handleUpdates=function(t,e,r){var i=this;r===void 0&&(r={}),!(this.__skip||r.temporary||r.noCount||r.avoidStore||!this.get("ready"))&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=i.getDirtyCount()||0;r.unset;var f=T0(r,["unset"]);i.set("changesCount",l+1,f)},0))},n.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},n.prototype.componentHovered=function(t,e,r){var i=this.previous("componentHovered");i&&this.trigger("component:unhovered",i,r),e&&this.trigger("component:hovered",e,r)},n.prototype.getSelected=function(){return this.selected.lastComponent()},n.prototype.getSelectedAll=function(){return this.selected.allComponents()},n.prototype.setSelected=function(t,e){var r=this;e===void 0&&(e={});var i=e.event,l=i&&(i.ctrlKey||i.metaKey),f=(i||{}).shiftKey,p=((0,L.isArray)(t)?t:[t]).map(function(M){return(0,ct.getModel)(M,K.default)}),h=this.getSelectedAll(),g=this.getConfig().multipleSelection,w=(0,L.isArray)(t);w&&this.removeSelected(h.filter(function(M){return!(0,L.contains)(p,M)})),p.forEach(function(M){var Z=(0,ct.getModel)(M,void 0);if(Z&&(r.trigger("component:select:before",Z,e),!Z.get("selectable")||e.abort))if(e.useValid){for(var nt=Z.parent();nt&&!nt.get("selectable");)nt=nt.parent();Z=nt}else return;if(l&&g)return r.toggleSelected(Z);if(f&&g){r.clearSelection(r.get("Canvas").getWindow());var vt=Z.collection,_t=Z.index(),At,Zt;if(r.getSelectedAll().forEach(function(Kt){var he=Kt.collection,Ce=Kt.index();he===vt&&(Ce<_t?At=(0,L.isUndefined)(At)?Ce:Math.max(At,Ce):Ce>_t&&(Zt=(0,L.isUndefined)(Zt)?Ce:Math.min(Zt,Ce)))}),!(0,L.isUndefined)(At))for(;At!==_t;)r.addSelected(vt.at(At)),At++;if(!(0,L.isUndefined)(Zt))for(;Zt!==_t;)r.addSelected(vt.at(Zt)),Zt--;return r.addSelected(Z)}!w&&r.removeSelected(h.filter(function(Kt){return Kt!==Z})),r.addSelected(Z,e)})},n.prototype.addSelected=function(t,e){var r=this;e===void 0&&(e={});var i=(0,ct.getModel)(t,K.default),l=(0,L.isArray)(i)?i:[i];l.forEach(function(f){var p=r.selected;if(!(!f||!f.get("selectable")||f.parents().some(function(g){return p.hasComponent(g)}))){e.forceChange&&r.removeSelected(f,e);var h=p.allComponents().filter(function(g){return(0,L.contains)(g.parents(),f)});h.forEach(function(g){return r.removeSelected(g,e)}),p.addComponent(f,e),r.trigger("component:select",f,e),r.Canvas.addSpot({type:lr.q.Select,component:f})}})},n.prototype.removeSelected=function(t,e){var r=this;e===void 0&&(e={});var i=(0,ct.getModel)(t,K.default);this.selected.removeComponent(i,e);var l=(0,L.isArray)(i)?i:[i];l.forEach(function(f){return r.Canvas.removeSpots({type:lr.q.Select,component:f})})},n.prototype.toggleSelected=function(t,e){var r=this;e===void 0&&(e={});var i=(0,ct.getModel)(t,K.default),l=(0,L.isArray)(i)?i:[i];l.forEach(function(f){r.selected.hasComponent(f)?r.removeSelected(f,e):r.addSelected(f,e)})},n.prototype.setHovered=function(t,e){var r=this;e===void 0&&(e={});var i=function(h,g){var w=r,M=w.config,Z=w.Canvas,nt=r.getHovered(),vt=r.getSelectedAll(),_t=lr.q.Hover,At=lr.q.Spacing;r.set("componentHovered",h||null,g),nt&&(Z.removeSpots({type:_t,component:nt}),Z.removeSpots({type:At,component:nt})),h&&(Z.addSpot({type:_t,component:h}),(!vt.includes(h)||M.showOffsetsSelected)&&Z.addSpot({type:At,component:h}))};if(!t)return i();var l="component:hover",f=(0,ct.getModel)(t,void 0);if(f){if(e.forceChange&&i(),this.trigger("".concat(l,":before"),f,e),!f.get("hoverable"))if(e.useValid&&!e.abort){for(var p=f.parent();p&&!p.get("hoverable");)p=p.parent();f=p}else return;e.abort||(i(f,e),this.trigger(l,f,e))}},n.prototype.getHovered=function(){return this.get("componentHovered")},n.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.Components.setComponents(t,e)},n.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(!(!t||!e)){var r=t.getComponents();return e.getCode(r,"json")}},n.prototype.setStyle=function(t,e){e===void 0&&(e={});var r=this.Css;return r.clear(e),r.getAll().add(t,e),this},n.prototype.addStyle=function(t,e){e===void 0&&(e={});var r=this.getStyle().add(t,e);return(0,L.isArray)(r)?r:[r]},n.prototype.getStyle=function(){return this.Css.getAll()},n.prototype.setState=function(t){return this.set("state",t),this},n.prototype.getState=function(){return this.get("state")||""},n.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,r=e.optsHtml,i=e.jsInHtml?this.getJs(t):"",l=t.component||this.Components.getComponent(),f=l?this.CodeManager.getCode(l,"html",Ln(Ln({},r),t)):"";return f+=i?"<script>".concat(i,"<\/script>"):"",f},n.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,r=e.optsCss,i=t.avoidProtected,l=(0,L.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,f=this.Css,p=t.component||this.Components.getComponent(),h=i?"":e.protectedCss,g=p&&this.CodeManager.getCode(p,"css",Ln(Ln({cssc:f,keepUnusedStyles:l},r),t));return p?t.json?g:h+g:""},n.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},n.prototype.store=function(t){return Hd(this,void 0,void 0,function(){var e;return Bd(this,function(r){switch(r.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return r.sent(),this.clearDirtyCount(),[2,e]}})})},n.prototype.load=function(t,e){return e===void 0&&(e={}),Hd(this,void 0,void 0,function(){var r;return Bd(this,function(i){switch(i.label){case 0:return[4,this.Storage.load(t)];case 1:return r=i.sent(),this.loadData(r),[4,(0,ct.wait)()];case 2:return i.sent(),e.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,r]}})})},n.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(r){t=Ln(Ln({},t),r.store(1))}),JSON.parse(JSON.stringify(t))},n.prototype.loadData=function(t){return t===void 0&&(t={}),(0,ct.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},n.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},n.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);!e||this.defaultRunning||(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},n.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands"),r=e.get(this.config.defaultCommand);!r||!this.defaultRunning||(r.stop(this,this,t),this.defaultRunning=!1)},n.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.set("canvasOffset",null),this.set("canvasOffset",this.Canvas.getOffset()),t.tools&&this.trigger("canvas:updateTools")},n.prototype.clearSelection=function(t){var e,r=t||window;(e=r.getSelection())===null||e===void 0||e.removeAllRanges()},n.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),r=t.mediaCondition,i=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!i?"(".concat(r,": ").concat(l,")"):""},n.prototype.getWrapper=function(){return this.Components.getWrapper()},n.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},n.prototype.getCurrentFrame=function(){return this.get("currentFrame")},n.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},n.prototype.getIcon=function(t){var e=this.config.icons||{};return e[t]||""},n.prototype.getDirtyCount=function(){return this.get("changesCount")},n.prototype.clearDirtyCount=function(){return this.set("changesCount",0)},n.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},n.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(t){var e=(t==null?void 0:t.getDragMode())||this.get("dmode");return e||""},n.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.get("I18n");return r==null?void 0:r.t.apply(r,t)},n.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},n.prototype.destroyAll=function(){var t=this,e=this,r=e.config,i=e.view,l=this.getEditor(),f=(r.grapesjs||{}).editors,p=f===void 0?[]:f,h=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),h==null||h.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(g){return g.destroy()}),i&&i.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(g){return t[g]={}}),p.splice(p.indexOf(l),1),(0,ct.hasWin)()&&(0,K.default)(r.el).empty().attr(this.attrsOrig)},n.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},n.prototype.setEditing=function(t){return this.set("editing",t),this},n.prototype.isEditing=function(){return!!this.get("editing")},n.prototype.log=function(t,e){e===void 0&&(e={});var r=e.ns,i=e.level,l=i===void 0?"debug":i;if(this.trigger("log",t,e),l&&this.trigger("log:".concat(l),t,e),r){var f="log-".concat(r);this.trigger(f,t,e),l&&this.trigger("".concat(f,":").concat(l),t,e)}},n.prototype.logInfo=function(t,e){this.log(t,Ln(Ln({},e),{level:"info"}))},n.prototype.logWarning=function(t,e){this.log(t,Ln(Ln({},e),{level:"warning"}))},n.prototype.logError=function(t,e){this.log(t,Ln(Ln({},e),{level:"error"}))},n.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var r=this.config,i=r.colorPicker,l=i===void 0?{}:i,f=r.el,p=r.stylePrefix;return(0,K.default)(t).spectrum(Ln(Ln({containerClassName:"".concat(p,"one-bg ").concat(p,"two-color"),appendTo:f||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),l))},n.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},n.prototype.data=function(t,e,r){var i="_gjs-data";if(t[i]||(t[i]={}),(0,L.isUndefined)(r))return t[i][e];t[i][e]=r},n}(m.Hn);const L0=A0;var M0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),D0=function(a){M0(n,a);function n(t){var e=a.call(this,{model:t})||this,r=t.attributes,i=r.Panels,l=r.UndoManager;return t.view=e,t.once("change:ready",function(){i.active(),i.disableButtons(),l.clear(),setTimeout(function(){t.trigger("load",t.get("Editor")),t.clearDirtyCount()})}),e}return n.prototype.render=function(){var t=this,e=this,r=e.$el,i=e.model,l=i.attributes,f=l.Panels,p=l.Canvas,h=i.config,g=i.modules,w=h.stylePrefix,M=["".concat(w,"editor")];!h.customUI&&M.push("".concat(w,"one-bg ").concat(w,"two-color"));var Z=(0,K.default)(h.el||"body ".concat(h.container));h.cssIcons&&(0,ct.appendStyles)(h.cssIcons,{unique:!0,prepand:!0}),r.empty(),h.width&&Z.css("width",h.width),h.height&&Z.css("height",h.height),r.append(p.render()),r.append(f.render());var nt=i.get("shallow"),vt=nt.get("Canvas").render();return vt.style.display="none",r.append(vt),r.attr("class",M.join(" ")),Z.addClass("".concat(w,"editor-cont")).empty().append(r),g.forEach(function(_t){return _t.postRender&&_t.postRender(t)}),this},n}(m.G7);const I0=D0;var _u=function(){return _u=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_u.apply(this,arguments)},ih=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(w){l(w)}}function p(g){try{h(e.throw(g))}catch(w){l(w)}}function h(g){g.done?i(g.value):r(g.value).then(f,p)}h((e=e.apply(a,n||[])).next())})},oh=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return p([h,g])}}function p(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},j0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},R0=function(){function a(n,t){n===void 0&&(n={}),t===void 0&&(t={});var e;this.html=kt,this.config=_u(_u(_u({},Rt),n),{pStylePrefix:(e=n.stylePrefix)!==null&&e!==void 0?e:Rt.stylePrefix}),this.em=new L0(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return this.em.getConfig(n)},a.prototype.getHtml=function(n){return this.em.getHtml(n)},a.prototype.getCss=function(n){return this.em.getCss(n)},a.prototype.getJs=function(n){return this.em.getJs(n)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(n,t){return t===void 0&&(t={}),this.em.setComponents(n,t),this},a.prototype.addComponents=function(n,t){return this.getWrapper().append(n,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(n,t){return t===void 0&&(t={}),this.em.setStyle(n,t),this},a.prototype.addStyle=function(n,t){return t===void 0&&(t={}),this.em.addStyle(n,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var n=this.em.getSelected();if(n)return this.StyleManager.getModelToStyle(n)},a.prototype.select=function(n,t){return this.em.setSelected(n,t),this},a.prototype.selectAdd=function(n){return this.em.addSelected(n),this},a.prototype.selectRemove=function(n){return this.em.removeSelected(n),this},a.prototype.selectToggle=function(n){return this.em.toggleSelected(n),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(n){return this.em.set("device",n),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(n,t){return t===void 0&&(t={}),this.Commands.run(n,t)},a.prototype.stopCommand=function(n,t){return t===void 0&&(t={}),this.Commands.stop(n,t)},a.prototype.store=function(n){return ih(this,void 0,void 0,function(){return oh(this,function(t){switch(t.label){case 0:return[4,this.em.store(n)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(n,t){return t===void 0&&(t={}),ih(this,void 0,void 0,function(){return oh(this,function(e){switch(e.label){case 0:return[4,this.em.load(n,t)];case 1:return[2,e.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(n){return this.em.loadData(n)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(n){return this.em.loadData(n)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(n){this.em.refreshCanvas(n)},a.prototype.setCustomRte=function(n){this.RichTextEditor.customRte=n},a.prototype.setCustomParserCss=function(n){return this.Parser.getConfig().parserCss=n,this},a.prototype.setDragMode=function(n){return this.em.setDragMode(n),this},a.prototype.log=function(n,t){return t===void 0&&(t={}),this.em.log(n,t),this},a.prototype.t=function(){for(var n,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.em).t.apply(n,t)},a.prototype.on=function(n,t){return this.em.on(n,t),this},a.prototype.once=function(n,t){return this.em.once(n,t),this},a.prototype.off=function(n,t){return this.em.off(n,t),this},a.prototype.trigger=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,j0([n],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var n;return(n=this.editorView)===null||n===void 0?void 0:n.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var n;return(n=this.editorView)===null||n===void 0||n.remove(),this.editorView=new I0(this.em),this.editorView.render().el},a.prototype.onReady=function(n){this.em.get("ready")?n(this):this.em.on("load",n)},a}();const F0=R0;var N0=function(a,n){var t=n.get(a);if(!t){var e=(0,ct.getGlobal)()[a];t=(e==null?void 0:e.default)||e}return t},ah=function(a,n){return(0,L.isString)(a)?N0(a,n):(a==null?void 0:a.default)||a},sh=function(a,n){a.getModel().logWarning("Plugin ".concat(n," not found"),{context:"plugins",plugin:n})},V0=function(){function a(){this.plugins={}}return a.prototype.add=function(n,t){var e=this.get(n);return e||(this.plugins[n]=t,t)},a.prototype.get=function(n){return this.plugins[n]},a.prototype.getAll=function(){return this.plugins},a}();const H0=V0,B0=function(){var a=function(){for(var t,e=window.navigator.userAgent,r=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],i=0;i<r.length;i++){var l=r[i];if(t=l[1].exec(e),t)break}return!!t};if((0,ct.hasWin)()&&a()){var n=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),n.apply(document.implementation,[t])}}};var nf=function(){return nf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},nf.apply(this,arguments)};B0();var zd=new H0,lh=[],uh=function(a,n){var t=ah(a,zd);return function(e){t?t(e,n||{}):sh(e,a)}},ch={$:K.default,editors:lh,plugins:zd,usePlugin:uh,version:"0.21.6",init:function(a){a===void 0&&(a={});var n=a.headless,t=a.container;if(!t&&!n)throw new Error("'container' is required");var e=nf(nf({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:n?void 0:(0,L.isElement)(t)?t:document.querySelector(t)}),r=new F0(e,{$:K.default}),i=r.getModel();return e.plugins.forEach(function(l){var f=ah(l,zd),p=e.pluginsOpts[l]||{};f?f(r,p):sh(r,l)}),i.loadOnStart(),e.autorender&&!n&&r.render(),lh.push(r),r}};const z0=ch})();var x_=Ah.ZP;var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function np(L){return L&&L.__esModule&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L}var Lh={exports:{}};/*! grapesjs-preset-webpage - 1.0.3 */(function(L,ct){(function(kt,St){L.exports=St()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:rp,()=>(()=>{var kt={d:(x,F)=>{for(var Q in F)kt.o(F,Q)&&!kt.o(x,Q)&&Object.defineProperty(x,Q,{enumerable:!0,get:F[Q]})},o:(x,F)=>Object.prototype.hasOwnProperty.call(x,F),r:x=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})}},St={};kt.r(St),kt.d(St,{default:()=>E});var Rt=function(){return Rt=Object.assign||function(x){for(var F,Q=1,st=arguments.length;Q<st;Q++)for(var q in F=arguments[Q])Object.prototype.hasOwnProperty.call(F,q)&&(x[q]=F[q]);return x},Rt.apply(this,arguments)},gt="gjs-open-import-webpage",lt="set-device-desktop",K="set-device-tablet",et="set-device-mobile",m="canvas-clear",k=function(){return k=Object.assign||function(x){for(var F,Q=1,st=arguments.length;Q<st;Q++)for(var q in F=arguments[Q])Object.prototype.hasOwnProperty.call(F,q)&&(x[q]=F[q]);return x},k.apply(this,arguments)};const b=function(x,F){var Q=x.Commands,st=F.textCleanCanvas;(function(q,W){var T=q.getConfig("stylePrefix"),it=W.modalImportLabel,U=W.modalImportContent;q.Commands.add(gt,{codeViewer:null,container:null,run:function(rt){var $=typeof U=="function"?U(rt):U,O=this.getCodeViewer();rt.Modal.open({title:W.modalImportTitle,content:this.getContainer()}).onceClose(function(){return rt.stopCommand(gt)}),O.setContent($??""),O.refresh(),setTimeout(function(){return O.focus()},0)},stop:function(){q.Modal.close()},getContainer:function(){if(!this.container){var rt=this.getCodeViewer(),$=document.createElement("div");if($.className="".concat(T,"import-container"),it){var O=document.createElement("div");O.className="".concat(T,"import-label"),O.innerHTML=it,$.appendChild(O)}$.appendChild(rt.getElement());var N=document.createElement("button");N.type="button",N.innerHTML=W.modalImportButton,N.className="".concat(T,"btn-prim ").concat(T,"btn-import"),N.onclick=function(){q.Css.clear(),q.setComponents(rt.getContent().trim()),q.Modal.close()},$.appendChild(N),this.container=$}return this.container},getCodeViewer:function(){return this.codeViewer||(this.codeViewer=q.CodeManager.createViewer(k({codeName:"htmlmixed",theme:"hopscotch",readOnly:!1},W.importViewerOptions))),this.codeViewer}})})(x,F),Q.add(lt,{run:function(q){return q.setDevice("Desktop")},stop:function(){}}),Q.add(K,{run:function(q){return q.setDevice("Tablet")},stop:function(){}}),Q.add(et,{run:function(q){return q.setDevice("Mobile portrait")},stop:function(){}}),Q.add(m,function(q){return confirm(st)&&q.runCommand("core:canvas-clear")})};var C=function(){return C=Object.assign||function(x){for(var F,Q=1,st=arguments.length;Q<st;Q++)for(var q in F=arguments[Q])Object.prototype.hasOwnProperty.call(F,q)&&(x[q]=F[q]);return x},C.apply(this,arguments)};const E=function(x,F){F===void 0&&(F={});var Q=C({blocks:["link-block","quote","text-basic"],block:function(){return{}},modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure you want to clear the canvas?",showStylesOnChange:!0,useCustomTheme:!0},F);if(Q.useCustomTheme&&typeof window<"u"){var st="gjs-",q="";[["one","#463a3c"],["two","#b9a5a6"],["three","#804f7b"],["four","#d97aa6"]].forEach(function(T){var it=T[0],U=T[1];q+=`
        .`.concat(st).concat(it,`-bg {
          background-color: `).concat(U,`;
        }

        .`).concat(st).concat(it,`-color {
          color: `).concat(U,`;
        }

        .`).concat(st).concat(it,`-color-h:hover {
          color: `).concat(U,`;
        }
      `)});var W=document.createElement("style");W.innerText=q,document.head.appendChild(W)}(function(T,it){var U=function(rt,$){it.blocks.indexOf(rt)>=0&&T.Blocks.add(rt,Rt(Rt({select:!0,category:"Basic"},$),it.block(rt)))};U("link-block",{label:"Link Block",media:`<svg viewBox="0 0 24 24">
      <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path>
    </svg>`,content:{type:"link",editable:!1,droppable:!0,style:{display:"inline-block",padding:"5px","min-height":"50px","min-width":"50px"}}}),U("quote",{label:"Quote",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z" />
    </svg>`,content:`<blockquote class="quote">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit
      </blockquote>`}),U("text-basic",{label:"Text section",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" />
    </svg>`,content:`<section class="bdg-sect">
      <h1 class="heading">Insert title here</h1>
      <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
      </section>`})})(x,Q),b(x,Q),function(T,it){var U=T.Panels,rt=T.getConfig(),$="sw-visibility",O="export-template",N="open-sm",I="open-tm",G="open-layers",ut="open-blocks",B="fullscreen",mt="preview",A='style="display: block; max-width:22px"';rt.showDevices=!1,U.getPanels().reset([{id:"commands",buttons:[{}]},{id:"devices-c",buttons:[{id:lt,command:lt,active:!0,label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" />
        </svg>`)},{id:K,command:K,label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />
        </svg>`)},{id:et,command:et,label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
        </svg>`)}]},{id:"options",buttons:[{id:$,command:$,context:$,label:"<svg ".concat(A,` viewBox="0 0 24 24">
        <path fill="currentColor" d="M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z" />
    </svg>`)},{id:mt,context:mt,command:function(){return T.runCommand(mt)},label:"<svg ".concat(A,' viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"></path></svg>')},{id:B,command:B,context:B,label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
        </svg>`)},{id:O,command:function(){return T.runCommand(O)},label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z" />
        </svg>`)},{id:"undo",command:function(){return T.runCommand("core:undo")},label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z" />
        </svg>`)},{id:"redo",command:function(){return T.runCommand("core:redo")},label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z" />
        </svg>`)},{id:gt,command:function(){return T.runCommand(gt)},label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
        </svg>`)},{id:m,command:function(){return T.runCommand(m)},label:"<svg ".concat(A,` viewBox="0 0 24 24">
              <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
          </svg>`)}]},{id:"views",buttons:[{id:N,command:N,active:!0,label:"<svg ".concat(A,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`)},{id:I,command:I,label:"<svg ".concat(A,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
      </svg>`)},{id:G,command:G,label:"<svg ".concat(A,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" />
      </svg>`)},{id:ut,command:ut,label:"<svg ".concat(A,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z" />
      </svg>`)}]}]);var Mt=U.getButton("views",ut);T.on("load",function(){return Mt==null?void 0:Mt.set("active",!0)}),it.showStylesOnChange&&T.on("component:selected",function(){var Dt=U.getButton("views",N),X=U.getButton("views",G);X&&X.get("active")||!T.getSelected()||Dt==null||Dt.set("active",!0)})}(x,Q)};return St})())})(Lh);var C_=Lh.exports;const S_=np(C_);var Mh={exports:{}};/*! grapesjs-blocks-basic - 1.0.2 */(function(L,ct){(function(kt,St){L.exports=St()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:rp,()=>(()=>{var kt={d:(K,et)=>{for(var m in et)kt.o(et,m)&&!kt.o(K,m)&&Object.defineProperty(K,m,{enumerable:!0,get:et[m]})},o:(K,et)=>Object.prototype.hasOwnProperty.call(K,et),r:K=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})}},St={};kt.r(St),kt.d(St,{default:()=>lt});var Rt=function(){return Rt=Object.assign||function(K){for(var et,m=1,k=arguments.length;m<k;m++)for(var b in et=arguments[m])Object.prototype.hasOwnProperty.call(et,b)&&(K[b]=et[b]);return K},Rt.apply(this,arguments)},gt=function(){return gt=Object.assign||function(K){for(var et,m=1,k=arguments.length;m<k;m++)for(var b in et=arguments[m])Object.prototype.hasOwnProperty.call(et,b)&&(K[b]=et[b]);return K},gt.apply(this,arguments)};const lt=function(K,et){et===void 0&&(et={}),function(m,k){var b=m.BlockManager,C=k.category,E=k.blocks,x=k.stylePrefix,F=k.flexGrid,Q=k.rowHeight,st=k.addBasicStyle,q="".concat(x,"row"),W="".concat(x,"cell"),T=F?`
    .`.concat(q,` {
      display: flex;
      justify-content: flex-start;
      align-items: stretch;
      flex-wrap: nowrap;
      padding: 10px;
    }
    @media (max-width: 768px) {
      .`).concat(q,` {
        flex-wrap: wrap;
      }
    }`):`
    .`.concat(q,` {
      display: table;
      padding: 10px;
      width: 100%;
    }
    @media (max-width: 768px) {
      .`).concat(x,"cell, .").concat(x,"cell30, .").concat(x,`cell70 {
        width: 100%;
        display: block;
      }
    }`),it=F?`
    .`.concat(W,` {
      min-height: `).concat(Q,`px;
      flex-grow: 1;
      flex-basis: 100%;
    }`):`
    .`.concat(W,` {
      width: 8%;
      display: table-cell;
      height: `).concat(Q,`px;
    }`),U=`
  .`.concat(x,`cell30 {
    width: 30%;
  }`),rt=`
  .`.concat(x,`cell70 {
    width: 70%;
  }`),$=1,O={tl:0,tc:0,tr:0,cl:0,cr:0,bl:0,br:0,minDim:$},N=Rt(Rt({},O),{cr:1,bc:0,currentUnit:1,minDim:$,step:.2});F&&(N.keyWidth="flex-basis");var I={class:q,"data-gjs-droppable":".".concat(W),"data-gjs-resizable":O,"data-gjs-name":"Row"},G={class:W,"data-gjs-draggable":".".concat(q),"data-gjs-resizable":N,"data-gjs-name":"Cell"};F&&(G["data-gjs-unstylable"]=["width"],G["data-gjs-stylable-require"]=["flex-basis"]);var ut=[".".concat(q),".".concat(W)];m.on("selector:add",function(X){return ut.indexOf(X.getFullName())>=0&&X.set("private",1)});var B=function(X){var Et=[];for(var V in X){var Nt=X[V];Nt=Nt instanceof Array||Nt instanceof Object?JSON.stringify(Nt):Nt,Et.push("".concat(V,"=").concat("'".concat(Nt,"'")))}return Et.length?" ".concat(Et.join(" ")):""},mt=function(X){return E.indexOf(X)>=0},A=B(I),Mt=B(G),Dt={category:C,select:!0};mt("column1")&&b.add("column1",Rt(Rt({},Dt),{label:k.labelColumn1,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M2 20h20V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(A,`>
        <div `).concat(Mt,`></div>
      </div>
      `).concat(st?`<style>
          `.concat(T,`
          `).concat(it,`
        </style>`):"")})),mt("column2")&&b.add("column2",Rt(Rt({},Dt),{label:k.labelColumn2,media:`<svg viewBox="0 0 23 24">
        <path fill="currentColor" d="M2 20h8V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM13 20h8V4h-8v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(A,`>
        <div `).concat(Mt,`></div>
        <div `).concat(Mt,`></div>
      </div>
      `).concat(st?`<style>
          `.concat(T,`
          `).concat(it,`
        </style>`):"")})),mt("column3")&&b.add("column3",Rt(Rt({},Dt),{label:k.labelColumn3,media:`<svg viewBox="0 0 23 24">
        <path fill="currentColor" d="M2 20h4V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM17 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1ZM9.5 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(A,`>
        <div `).concat(Mt,`></div>
        <div `).concat(Mt,`></div>
        <div `).concat(Mt,`></div>
      </div>
      `).concat(st?`<style>
          `.concat(T,`
          `).concat(it,`
        </style>`):"")})),mt("column3-7")&&b.add("column3-7",Rt(Rt({},Dt),{label:k.labelColumn37,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M2 20h5V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM10 20h12V4H10v16Zm-1 0V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(A,`>
        <div `).concat(Mt," style='").concat(F?"flex-basis":"width",`: 30%;'></div>
        <div `).concat(Mt," style='").concat(F?"flex-basis":"width",`: 70%;'></div>
      </div>
      `).concat(st?`<style>
          `.concat(T,`
          `).concat(it,`
          `).concat(U,`
          `).concat(rt,`
        </style>`):"")})),mt("text")&&b.add("text",Rt(Rt({},Dt),{activate:!0,label:k.labelText,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z" />
      </svg>`,content:{type:"text",content:"Insert your text here",style:{padding:"10px"}}})),mt("link")&&b.add("link",Rt(Rt({},Dt),{label:k.labelLink,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
      </svg>`,content:{type:"link",content:"Link",style:{color:"#d983a6"}}})),mt("image")&&b.add("image",Rt(Rt({},Dt),{activate:!0,label:k.labelImage,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M21,3H3C2,3 1,4 1,5V19A2,2 0 0,0 3,21H21C22,21 23,20 23,19V5C23,4 22,3 21,3M5,17L8.5,12.5L11,15.5L14.5,11L19,17H5Z" />
      </svg>`,content:{style:{color:"black"},type:"image"}})),mt("video")&&b.add("video",Rt(Rt({},Dt),{label:k.labelVideo,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
      </svg>`,content:{type:"video",src:"img/video2.webm",style:{height:"350px",width:"615px"}}})),mt("map")&&b.add("map",Rt(Rt({},Dt),{label:k.labelMap,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M20.5,3L20.34,3.03L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21L3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19.03 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3M10,5.47L14,6.87V18.53L10,17.13V5.47M5,6.46L8,5.45V17.15L5,18.31V6.46M19,17.54L16,18.55V6.86L19,5.7V17.54Z" />
      </svg>`,content:{type:"map",style:{height:"350px"}}}))}(K,gt({blocks:["column1","column2","column3","column3-7","text","link","image","video","map"],flexGrid:!1,stylePrefix:"gjs-",addBasicStyle:!0,category:"Basic",labelColumn1:"1 Column",labelColumn2:"2 Columns",labelColumn3:"3 Columns",labelColumn37:"2 Columns 3/7",labelText:"Text",labelLink:"Link",labelImage:"Image",labelVideo:"Video",labelMap:"Map",rowHeight:75},et))};return St})())})(Mh);var O_=Mh.exports;const T_=np(O_);var Dh={exports:{}};/*! grapesjs-plugin-export - 1.0.12 */(function(L,ct){(function(kt,St){L.exports=St()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:rp,()=>(()=>{var kt={162:function(lt,K,et){var m,k,b;k=[],(b=typeof(m=function(){function C(W,T){return T===void 0?T={autoBom:!1}:typeof T!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),T={autoBom:!T}),T.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(W.type)?new Blob(["\uFEFF",W],{type:W.type}):W}function E(W,T,it){var U=new XMLHttpRequest;U.open("GET",W),U.responseType="blob",U.onload=function(){q(U.response,T,it)},U.onerror=function(){console.error("could not download file")},U.send()}function x(W){var T=new XMLHttpRequest;T.open("HEAD",W,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function F(W){try{W.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),W.dispatchEvent(T)}}var Q=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof et.g=="object"&&et.g.global===et.g?et.g:void 0,st=Q.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),q=Q.saveAs||(typeof window!="object"||window!==Q?function(){}:"download"in HTMLAnchorElement.prototype&&!st?function(W,T,it){var U=Q.URL||Q.webkitURL,rt=document.createElement("a");T=T||W.name||"download",rt.download=T,rt.rel="noopener",typeof W=="string"?(rt.href=W,rt.origin===location.origin?F(rt):x(rt.href)?E(W,T,it):F(rt,rt.target="_blank")):(rt.href=U.createObjectURL(W),setTimeout(function(){U.revokeObjectURL(rt.href)},4e4),setTimeout(function(){F(rt)},0))}:"msSaveOrOpenBlob"in navigator?function(W,T,it){if(T=T||W.name||"download",typeof W!="string")navigator.msSaveOrOpenBlob(C(W,it),T);else if(x(W))E(W,T,it);else{var U=document.createElement("a");U.href=W,U.target="_blank",setTimeout(function(){F(U)})}}:function(W,T,it,U){if((U=U||open("","_blank"))&&(U.document.title=U.document.body.innerText="downloading..."),typeof W=="string")return E(W,T,it);var rt=W.type==="application/octet-stream",$=/constructor/i.test(Q.HTMLElement)||Q.safari,O=/CriOS\/[\d]+/.test(navigator.userAgent);if((O||rt&&$||st)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var ut=N.result;ut=O?ut:ut.replace(/^data:[^;]*;/,"data:attachment/file;"),U?U.location.href=ut:location=ut,U=null},N.readAsDataURL(W)}else{var I=Q.URL||Q.webkitURL,G=I.createObjectURL(W);U?U.location=G:location.href=G,U=null,setTimeout(function(){I.revokeObjectURL(G)},4e4)}});Q.saveAs=q.saveAs=q,lt.exports=q})=="function"?m.apply(K,k):m)===void 0||(lt.exports=b)},733:(lt,K,et)=>{lt.exports=function m(k,b,C){function E(Q,st){if(!b[Q]){if(!k[Q]){if(x)return x(Q,!0);var q=new Error("Cannot find module '"+Q+"'");throw q.code="MODULE_NOT_FOUND",q}var W=b[Q]={exports:{}};k[Q][0].call(W.exports,function(T){return E(k[Q][1][T]||T)},W,W.exports,m,k,b,C)}return b[Q].exports}for(var x=void 0,F=0;F<C.length;F++)E(C[F]);return E}({1:[function(m,k,b){var C=m("./utils"),E=m("./support"),x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b.encode=function(F){for(var Q,st,q,W,T,it,U,rt=[],$=0,O=F.length,N=O,I=C.getTypeOf(F)!=="string";$<F.length;)N=O-$,q=I?(Q=F[$++],st=$<O?F[$++]:0,$<O?F[$++]:0):(Q=F.charCodeAt($++),st=$<O?F.charCodeAt($++):0,$<O?F.charCodeAt($++):0),W=Q>>2,T=(3&Q)<<4|st>>4,it=1<N?(15&st)<<2|q>>6:64,U=2<N?63&q:64,rt.push(x.charAt(W)+x.charAt(T)+x.charAt(it)+x.charAt(U));return rt.join("")},b.decode=function(F){var Q,st,q,W,T,it,U=0,rt=0,$="data:";if(F.substr(0,$.length)===$)throw new Error("Invalid base64 input, it looks like a data url.");var O,N=3*(F=F.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(F.charAt(F.length-1)===x.charAt(64)&&N--,F.charAt(F.length-2)===x.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(O=E.uint8array?new Uint8Array(0|N):new Array(0|N);U<F.length;)Q=x.indexOf(F.charAt(U++))<<2|(W=x.indexOf(F.charAt(U++)))>>4,st=(15&W)<<4|(T=x.indexOf(F.charAt(U++)))>>2,q=(3&T)<<6|(it=x.indexOf(F.charAt(U++))),O[rt++]=Q,T!==64&&(O[rt++]=st),it!==64&&(O[rt++]=q);return O}},{"./support":30,"./utils":32}],2:[function(m,k,b){var C=m("./external"),E=m("./stream/DataWorker"),x=m("./stream/Crc32Probe"),F=m("./stream/DataLengthProbe");function Q(st,q,W,T,it){this.compressedSize=st,this.uncompressedSize=q,this.crc32=W,this.compression=T,this.compressedContent=it}Q.prototype={getContentWorker:function(){var st=new E(C.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new F("data_length")),q=this;return st.on("end",function(){if(this.streamInfo.data_length!==q.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),st},getCompressedWorker:function(){return new E(C.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Q.createWorkerFrom=function(st,q,W){return st.pipe(new x).pipe(new F("uncompressedSize")).pipe(q.compressWorker(W)).pipe(new F("compressedSize")).withStreamInfo("compression",q)},k.exports=Q},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(m,k,b){var C=m("./stream/GenericWorker");b.STORE={magic:"\0\0",compressWorker:function(){return new C("STORE compression")},uncompressWorker:function(){return new C("STORE decompression")}},b.DEFLATE=m("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(m,k,b){var C=m("./utils"),E=function(){for(var x,F=[],Q=0;Q<256;Q++){x=Q;for(var st=0;st<8;st++)x=1&x?3988292384^x>>>1:x>>>1;F[Q]=x}return F}();k.exports=function(x,F){return x!==void 0&&x.length?C.getTypeOf(x)!=="string"?function(Q,st,q,W){var T=E,it=W+q;Q^=-1;for(var U=W;U<it;U++)Q=Q>>>8^T[255&(Q^st[U])];return-1^Q}(0|F,x,x.length,0):function(Q,st,q,W){var T=E,it=W+q;Q^=-1;for(var U=W;U<it;U++)Q=Q>>>8^T[255&(Q^st.charCodeAt(U))];return-1^Q}(0|F,x,x.length,0):0}},{"./utils":32}],5:[function(m,k,b){b.base64=!1,b.binary=!1,b.dir=!1,b.createFolders=!0,b.date=null,b.compression=null,b.compressionOptions=null,b.comment=null,b.unixPermissions=null,b.dosPermissions=null},{}],6:[function(m,k,b){var C=null;C=typeof Promise<"u"?Promise:m("lie"),k.exports={Promise:C}},{lie:37}],7:[function(m,k,b){var C=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",E=m("pako"),x=m("./utils"),F=m("./stream/GenericWorker"),Q=C?"uint8array":"array";function st(q,W){F.call(this,"FlateWorker/"+q),this._pako=null,this._pakoAction=q,this._pakoOptions=W,this.meta={}}b.magic="\b\0",x.inherits(st,F),st.prototype.processChunk=function(q){this.meta=q.meta,this._pako===null&&this._createPako(),this._pako.push(x.transformTo(Q,q.data),!1)},st.prototype.flush=function(){F.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},st.prototype.cleanUp=function(){F.prototype.cleanUp.call(this),this._pako=null},st.prototype._createPako=function(){this._pako=new E[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var q=this;this._pako.onData=function(W){q.push({data:W,meta:q.meta})}},b.compressWorker=function(q){return new st("Deflate",q)},b.uncompressWorker=function(){return new st("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(m,k,b){function C(T,it){var U,rt="";for(U=0;U<it;U++)rt+=String.fromCharCode(255&T),T>>>=8;return rt}function E(T,it,U,rt,$,O){var N,I,G=T.file,ut=T.compression,B=O!==Q.utf8encode,mt=x.transformTo("string",O(G.name)),A=x.transformTo("string",Q.utf8encode(G.name)),Mt=G.comment,Dt=x.transformTo("string",O(Mt)),X=x.transformTo("string",Q.utf8encode(Mt)),Et=A.length!==G.name.length,V=X.length!==Mt.length,Nt="",jt="",Lt="",qt=G.dir,Vt=G.date,$t={crc32:0,compressedSize:0,uncompressedSize:0};it&&!U||($t.crc32=T.crc32,$t.compressedSize=T.compressedSize,$t.uncompressedSize=T.uncompressedSize);var Ct=0;it&&(Ct|=8),B||!Et&&!V||(Ct|=2048);var It=0,ae=0;qt&&(It|=16),$==="UNIX"?(ae=798,It|=function(Xt,De){var Xe=Xt;return Xt||(Xe=De?16893:33204),(65535&Xe)<<16}(G.unixPermissions,qt)):(ae=20,It|=function(Xt){return 63&(Xt||0)}(G.dosPermissions)),N=Vt.getUTCHours(),N<<=6,N|=Vt.getUTCMinutes(),N<<=5,N|=Vt.getUTCSeconds()/2,I=Vt.getUTCFullYear()-1980,I<<=4,I|=Vt.getUTCMonth()+1,I<<=5,I|=Vt.getUTCDate(),Et&&(jt=C(1,1)+C(st(mt),4)+A,Nt+="up"+C(jt.length,2)+jt),V&&(Lt=C(1,1)+C(st(Dt),4)+X,Nt+="uc"+C(Lt.length,2)+Lt);var Yt="";return Yt+=`
\0`,Yt+=C(Ct,2),Yt+=ut.magic,Yt+=C(N,2),Yt+=C(I,2),Yt+=C($t.crc32,4),Yt+=C($t.compressedSize,4),Yt+=C($t.uncompressedSize,4),Yt+=C(mt.length,2),Yt+=C(Nt.length,2),{fileRecord:q.LOCAL_FILE_HEADER+Yt+mt+Nt,dirRecord:q.CENTRAL_FILE_HEADER+C(ae,2)+Yt+C(Dt.length,2)+"\0\0\0\0"+C(It,4)+C(rt,4)+mt+Nt+Dt}}var x=m("../utils"),F=m("../stream/GenericWorker"),Q=m("../utf8"),st=m("../crc32"),q=m("../signature");function W(T,it,U,rt){F.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=it,this.zipPlatform=U,this.encodeFileName=rt,this.streamFiles=T,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}x.inherits(W,F),W.prototype.push=function(T){var it=T.meta.percent||0,U=this.entriesCount,rt=this._sources.length;this.accumulate?this.contentBuffer.push(T):(this.bytesWritten+=T.data.length,F.prototype.push.call(this,{data:T.data,meta:{currentFile:this.currentFile,percent:U?(it+100*(U-rt-1))/U:100}}))},W.prototype.openedSource=function(T){this.currentSourceOffset=this.bytesWritten,this.currentFile=T.file.name;var it=this.streamFiles&&!T.file.dir;if(it){var U=E(T,it,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:U.fileRecord,meta:{percent:0}})}else this.accumulate=!0},W.prototype.closedSource=function(T){this.accumulate=!1;var it=this.streamFiles&&!T.file.dir,U=E(T,it,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(U.dirRecord),it)this.push({data:function(rt){return q.DATA_DESCRIPTOR+C(rt.crc32,4)+C(rt.compressedSize,4)+C(rt.uncompressedSize,4)}(T),meta:{percent:100}});else for(this.push({data:U.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},W.prototype.flush=function(){for(var T=this.bytesWritten,it=0;it<this.dirRecords.length;it++)this.push({data:this.dirRecords[it],meta:{percent:100}});var U=this.bytesWritten-T,rt=function($,O,N,I,G){var ut=x.transformTo("string",G(I));return q.CENTRAL_DIRECTORY_END+"\0\0\0\0"+C($,2)+C($,2)+C(O,4)+C(N,4)+C(ut.length,2)+ut}(this.dirRecords.length,U,T,this.zipComment,this.encodeFileName);this.push({data:rt,meta:{percent:100}})},W.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},W.prototype.registerPrevious=function(T){this._sources.push(T);var it=this;return T.on("data",function(U){it.processChunk(U)}),T.on("end",function(){it.closedSource(it.previous.streamInfo),it._sources.length?it.prepareNextSource():it.end()}),T.on("error",function(U){it.error(U)}),this},W.prototype.resume=function(){return!!F.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},W.prototype.error=function(T){var it=this._sources;if(!F.prototype.error.call(this,T))return!1;for(var U=0;U<it.length;U++)try{it[U].error(T)}catch{}return!0},W.prototype.lock=function(){F.prototype.lock.call(this);for(var T=this._sources,it=0;it<T.length;it++)T[it].lock()},k.exports=W},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(m,k,b){var C=m("../compressions"),E=m("./ZipFileWorker");b.generateWorker=function(x,F,Q){var st=new E(F.streamFiles,Q,F.platform,F.encodeFileName),q=0;try{x.forEach(function(W,T){q++;var it=function(O,N){var I=O||N,G=C[I];if(!G)throw new Error(I+" is not a valid compression method !");return G}(T.options.compression,F.compression),U=T.options.compressionOptions||F.compressionOptions||{},rt=T.dir,$=T.date;T._compressWorker(it,U).withStreamInfo("file",{name:W,dir:rt,date:$,comment:T.comment||"",unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions}).pipe(st)}),st.entriesCount=q}catch(W){st.error(W)}return st}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(m,k,b){function C(){if(!(this instanceof C))return new C;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var E=new C;for(var x in this)typeof this[x]!="function"&&(E[x]=this[x]);return E}}(C.prototype=m("./object")).loadAsync=m("./load"),C.support=m("./support"),C.defaults=m("./defaults"),C.version="3.10.1",C.loadAsync=function(E,x){return new C().loadAsync(E,x)},C.external=m("./external"),k.exports=C},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(m,k,b){var C=m("./utils"),E=m("./external"),x=m("./utf8"),F=m("./zipEntries"),Q=m("./stream/Crc32Probe"),st=m("./nodejsUtils");function q(W){return new E.Promise(function(T,it){var U=W.decompressed.getContentWorker().pipe(new Q);U.on("error",function(rt){it(rt)}).on("end",function(){U.streamInfo.crc32!==W.decompressed.crc32?it(new Error("Corrupted zip : CRC32 mismatch")):T()}).resume()})}k.exports=function(W,T){var it=this;return T=C.extend(T||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:x.utf8decode}),st.isNode&&st.isStream(W)?E.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):C.prepareContent("the loaded zip file",W,!0,T.optimizedBinaryString,T.base64).then(function(U){var rt=new F(T);return rt.load(U),rt}).then(function(U){var rt=[E.Promise.resolve(U)],$=U.files;if(T.checkCRC32)for(var O=0;O<$.length;O++)rt.push(q($[O]));return E.Promise.all(rt)}).then(function(U){for(var rt=U.shift(),$=rt.files,O=0;O<$.length;O++){var N=$[O],I=N.fileNameStr,G=C.resolve(N.fileNameStr);it.file(G,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:T.createFolders}),N.dir||(it.file(G).unsafeOriginalName=I)}return rt.zipComment.length&&(it.comment=rt.zipComment),it})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(m,k,b){var C=m("../utils"),E=m("../stream/GenericWorker");function x(F,Q){E.call(this,"Nodejs stream input adapter for "+F),this._upstreamEnded=!1,this._bindStream(Q)}C.inherits(x,E),x.prototype._bindStream=function(F){var Q=this;(this._stream=F).pause(),F.on("data",function(st){Q.push({data:st,meta:{percent:0}})}).on("error",function(st){Q.isPaused?this.generatedError=st:Q.error(st)}).on("end",function(){Q.isPaused?Q._upstreamEnded=!0:Q.end()})},x.prototype.pause=function(){return!!E.prototype.pause.call(this)&&(this._stream.pause(),!0)},x.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},k.exports=x},{"../stream/GenericWorker":28,"../utils":32}],13:[function(m,k,b){var C=m("readable-stream").Readable;function E(x,F,Q){C.call(this,F),this._helper=x;var st=this;x.on("data",function(q,W){st.push(q)||st._helper.pause(),Q&&Q(W)}).on("error",function(q){st.emit("error",q)}).on("end",function(){st.push(null)})}m("../utils").inherits(E,C),E.prototype._read=function(){this._helper.resume()},k.exports=E},{"../utils":32,"readable-stream":16}],14:[function(m,k,b){k.exports={isNode:typeof Buffer<"u",newBufferFrom:function(C,E){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(C,E);if(typeof C=="number")throw new Error('The "data" argument must not be a number');return new Buffer(C,E)},allocBuffer:function(C){if(Buffer.alloc)return Buffer.alloc(C);var E=new Buffer(C);return E.fill(0),E},isBuffer:function(C){return Buffer.isBuffer(C)},isStream:function(C){return C&&typeof C.on=="function"&&typeof C.pause=="function"&&typeof C.resume=="function"}}},{}],15:[function(m,k,b){function C(G,ut,B){var mt,A=x.getTypeOf(ut),Mt=x.extend(B||{},st);Mt.date=Mt.date||new Date,Mt.compression!==null&&(Mt.compression=Mt.compression.toUpperCase()),typeof Mt.unixPermissions=="string"&&(Mt.unixPermissions=parseInt(Mt.unixPermissions,8)),Mt.unixPermissions&&16384&Mt.unixPermissions&&(Mt.dir=!0),Mt.dosPermissions&&16&Mt.dosPermissions&&(Mt.dir=!0),Mt.dir&&(G=$(G)),Mt.createFolders&&(mt=rt(G))&&O.call(this,mt,!0);var Dt=A==="string"&&Mt.binary===!1&&Mt.base64===!1;B&&B.binary!==void 0||(Mt.binary=!Dt),(ut instanceof q&&ut.uncompressedSize===0||Mt.dir||!ut||ut.length===0)&&(Mt.base64=!1,Mt.binary=!0,ut="",Mt.compression="STORE",A="string");var X=null;X=ut instanceof q||ut instanceof F?ut:it.isNode&&it.isStream(ut)?new U(G,ut):x.prepareContent(G,ut,Mt.binary,Mt.optimizedBinaryString,Mt.base64);var Et=new W(G,X,Mt);this.files[G]=Et}var E=m("./utf8"),x=m("./utils"),F=m("./stream/GenericWorker"),Q=m("./stream/StreamHelper"),st=m("./defaults"),q=m("./compressedObject"),W=m("./zipObject"),T=m("./generate"),it=m("./nodejsUtils"),U=m("./nodejs/NodejsStreamInputAdapter"),rt=function(G){G.slice(-1)==="/"&&(G=G.substring(0,G.length-1));var ut=G.lastIndexOf("/");return 0<ut?G.substring(0,ut):""},$=function(G){return G.slice(-1)!=="/"&&(G+="/"),G},O=function(G,ut){return ut=ut!==void 0?ut:st.createFolders,G=$(G),this.files[G]||C.call(this,G,null,{dir:!0,createFolders:ut}),this.files[G]};function N(G){return Object.prototype.toString.call(G)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(G){var ut,B,mt;for(ut in this.files)mt=this.files[ut],(B=ut.slice(this.root.length,ut.length))&&ut.slice(0,this.root.length)===this.root&&G(B,mt)},filter:function(G){var ut=[];return this.forEach(function(B,mt){G(B,mt)&&ut.push(mt)}),ut},file:function(G,ut,B){if(arguments.length!==1)return G=this.root+G,C.call(this,G,ut,B),this;if(N(G)){var mt=G;return this.filter(function(Mt,Dt){return!Dt.dir&&mt.test(Mt)})}var A=this.files[this.root+G];return A&&!A.dir?A:null},folder:function(G){if(!G)return this;if(N(G))return this.filter(function(A,Mt){return Mt.dir&&G.test(A)});var ut=this.root+G,B=O.call(this,ut),mt=this.clone();return mt.root=B.name,mt},remove:function(G){G=this.root+G;var ut=this.files[G];if(ut||(G.slice(-1)!=="/"&&(G+="/"),ut=this.files[G]),ut&&!ut.dir)delete this.files[G];else for(var B=this.filter(function(A,Mt){return Mt.name.slice(0,G.length)===G}),mt=0;mt<B.length;mt++)delete this.files[B[mt].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(G){var ut,B={};try{if((B=x.extend(G||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:E.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");x.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var mt=B.comment||this.comment||"";ut=T.generateWorker(this,B,mt)}catch(A){(ut=new F("error")).error(A)}return new Q(ut,B.type||"string",B.mimeType)},generateAsync:function(G,ut){return this.generateInternalStream(G).accumulate(ut)},generateNodeStream:function(G,ut){return(G=G||{}).type||(G.type="nodebuffer"),this.generateInternalStream(G).toNodejsStream(ut)}};k.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(m,k,b){k.exports=m("stream")},{stream:void 0}],17:[function(m,k,b){var C=m("./DataReader");function E(x){C.call(this,x);for(var F=0;F<this.data.length;F++)x[F]=255&x[F]}m("../utils").inherits(E,C),E.prototype.byteAt=function(x){return this.data[this.zero+x]},E.prototype.lastIndexOfSignature=function(x){for(var F=x.charCodeAt(0),Q=x.charCodeAt(1),st=x.charCodeAt(2),q=x.charCodeAt(3),W=this.length-4;0<=W;--W)if(this.data[W]===F&&this.data[W+1]===Q&&this.data[W+2]===st&&this.data[W+3]===q)return W-this.zero;return-1},E.prototype.readAndCheckSignature=function(x){var F=x.charCodeAt(0),Q=x.charCodeAt(1),st=x.charCodeAt(2),q=x.charCodeAt(3),W=this.readData(4);return F===W[0]&&Q===W[1]&&st===W[2]&&q===W[3]},E.prototype.readData=function(x){if(this.checkOffset(x),x===0)return[];var F=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,F},k.exports=E},{"../utils":32,"./DataReader":18}],18:[function(m,k,b){var C=m("../utils");function E(x){this.data=x,this.length=x.length,this.index=0,this.zero=0}E.prototype={checkOffset:function(x){this.checkIndex(this.index+x)},checkIndex:function(x){if(this.length<this.zero+x||x<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+x+"). Corrupted zip ?")},setIndex:function(x){this.checkIndex(x),this.index=x},skip:function(x){this.setIndex(this.index+x)},byteAt:function(){},readInt:function(x){var F,Q=0;for(this.checkOffset(x),F=this.index+x-1;F>=this.index;F--)Q=(Q<<8)+this.byteAt(F);return this.index+=x,Q},readString:function(x){return C.transformTo("string",this.readData(x))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var x=this.readInt(4);return new Date(Date.UTC(1980+(x>>25&127),(x>>21&15)-1,x>>16&31,x>>11&31,x>>5&63,(31&x)<<1))}},k.exports=E},{"../utils":32}],19:[function(m,k,b){var C=m("./Uint8ArrayReader");function E(x){C.call(this,x)}m("../utils").inherits(E,C),E.prototype.readData=function(x){this.checkOffset(x);var F=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,F},k.exports=E},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(m,k,b){var C=m("./DataReader");function E(x){C.call(this,x)}m("../utils").inherits(E,C),E.prototype.byteAt=function(x){return this.data.charCodeAt(this.zero+x)},E.prototype.lastIndexOfSignature=function(x){return this.data.lastIndexOf(x)-this.zero},E.prototype.readAndCheckSignature=function(x){return x===this.readData(4)},E.prototype.readData=function(x){this.checkOffset(x);var F=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,F},k.exports=E},{"../utils":32,"./DataReader":18}],21:[function(m,k,b){var C=m("./ArrayReader");function E(x){C.call(this,x)}m("../utils").inherits(E,C),E.prototype.readData=function(x){if(this.checkOffset(x),x===0)return new Uint8Array(0);var F=this.data.subarray(this.zero+this.index,this.zero+this.index+x);return this.index+=x,F},k.exports=E},{"../utils":32,"./ArrayReader":17}],22:[function(m,k,b){var C=m("../utils"),E=m("../support"),x=m("./ArrayReader"),F=m("./StringReader"),Q=m("./NodeBufferReader"),st=m("./Uint8ArrayReader");k.exports=function(q){var W=C.getTypeOf(q);return C.checkSupport(W),W!=="string"||E.uint8array?W==="nodebuffer"?new Q(q):E.uint8array?new st(C.transformTo("uint8array",q)):new x(C.transformTo("array",q)):new F(q)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(m,k,b){b.LOCAL_FILE_HEADER="PK",b.CENTRAL_FILE_HEADER="PK",b.CENTRAL_DIRECTORY_END="PK",b.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",b.ZIP64_CENTRAL_DIRECTORY_END="PK",b.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(m,k,b){var C=m("./GenericWorker"),E=m("../utils");function x(F){C.call(this,"ConvertWorker to "+F),this.destType=F}E.inherits(x,C),x.prototype.processChunk=function(F){this.push({data:E.transformTo(this.destType,F.data),meta:F.meta})},k.exports=x},{"../utils":32,"./GenericWorker":28}],25:[function(m,k,b){var C=m("./GenericWorker"),E=m("../crc32");function x(){C.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}m("../utils").inherits(x,C),x.prototype.processChunk=function(F){this.streamInfo.crc32=E(F.data,this.streamInfo.crc32||0),this.push(F)},k.exports=x},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(m,k,b){var C=m("../utils"),E=m("./GenericWorker");function x(F){E.call(this,"DataLengthProbe for "+F),this.propName=F,this.withStreamInfo(F,0)}C.inherits(x,E),x.prototype.processChunk=function(F){if(F){var Q=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=Q+F.data.length}E.prototype.processChunk.call(this,F)},k.exports=x},{"../utils":32,"./GenericWorker":28}],27:[function(m,k,b){var C=m("../utils"),E=m("./GenericWorker");function x(F){E.call(this,"DataWorker");var Q=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,F.then(function(st){Q.dataIsReady=!0,Q.data=st,Q.max=st&&st.length||0,Q.type=C.getTypeOf(st),Q.isPaused||Q._tickAndRepeat()},function(st){Q.error(st)})}C.inherits(x,E),x.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this.data=null},x.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,C.delay(this._tickAndRepeat,[],this)),!0)},x.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(C.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},x.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var F=null,Q=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":F=this.data.substring(this.index,Q);break;case"uint8array":F=this.data.subarray(this.index,Q);break;case"array":case"nodebuffer":F=this.data.slice(this.index,Q)}return this.index=Q,this.push({data:F,meta:{percent:this.max?this.index/this.max*100:0}})},k.exports=x},{"../utils":32,"./GenericWorker":28}],28:[function(m,k,b){function C(E){this.name=E||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}C.prototype={push:function(E){this.emit("data",E)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(E){this.emit("error",E)}return!0},error:function(E){return!this.isFinished&&(this.isPaused?this.generatedError=E:(this.isFinished=!0,this.emit("error",E),this.previous&&this.previous.error(E),this.cleanUp()),!0)},on:function(E,x){return this._listeners[E].push(x),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(E,x){if(this._listeners[E])for(var F=0;F<this._listeners[E].length;F++)this._listeners[E][F].call(this,x)},pipe:function(E){return E.registerPrevious(this)},registerPrevious:function(E){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=E.streamInfo,this.mergeStreamInfo(),this.previous=E;var x=this;return E.on("data",function(F){x.processChunk(F)}),E.on("end",function(){x.end()}),E.on("error",function(F){x.error(F)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var E=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),E=!0),this.previous&&this.previous.resume(),!E},flush:function(){},processChunk:function(E){this.push(E)},withStreamInfo:function(E,x){return this.extraStreamInfo[E]=x,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var E in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,E)&&(this.streamInfo[E]=this.extraStreamInfo[E])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var E="Worker "+this.name;return this.previous?this.previous+" -> "+E:E}},k.exports=C},{}],29:[function(m,k,b){var C=m("../utils"),E=m("./ConvertWorker"),x=m("./GenericWorker"),F=m("../base64"),Q=m("../support"),st=m("../external"),q=null;if(Q.nodestream)try{q=m("../nodejs/NodejsStreamOutputAdapter")}catch{}function W(it,U){return new st.Promise(function(rt,$){var O=[],N=it._internalType,I=it._outputType,G=it._mimeType;it.on("data",function(ut,B){O.push(ut),U&&U(B)}).on("error",function(ut){O=[],$(ut)}).on("end",function(){try{var ut=function(B,mt,A){switch(B){case"blob":return C.newBlob(C.transformTo("arraybuffer",mt),A);case"base64":return F.encode(mt);default:return C.transformTo(B,mt)}}(I,function(B,mt){var A,Mt=0,Dt=null,X=0;for(A=0;A<mt.length;A++)X+=mt[A].length;switch(B){case"string":return mt.join("");case"array":return Array.prototype.concat.apply([],mt);case"uint8array":for(Dt=new Uint8Array(X),A=0;A<mt.length;A++)Dt.set(mt[A],Mt),Mt+=mt[A].length;return Dt;case"nodebuffer":return Buffer.concat(mt);default:throw new Error("concat : unsupported type '"+B+"'")}}(N,O),G);rt(ut)}catch(B){$(B)}O=[]}).resume()})}function T(it,U,rt){var $=U;switch(U){case"blob":case"arraybuffer":$="uint8array";break;case"base64":$="string"}try{this._internalType=$,this._outputType=U,this._mimeType=rt,C.checkSupport($),this._worker=it.pipe(new E($)),it.lock()}catch(O){this._worker=new x("error"),this._worker.error(O)}}T.prototype={accumulate:function(it){return W(this,it)},on:function(it,U){var rt=this;return it==="data"?this._worker.on(it,function($){U.call(rt,$.data,$.meta)}):this._worker.on(it,function(){C.delay(U,arguments,rt)}),this},resume:function(){return C.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(it){if(C.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new q(this,{objectMode:this._outputType!=="nodebuffer"},it)}},k.exports=T},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(m,k,b){if(b.base64=!0,b.array=!0,b.string=!0,b.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",b.nodebuffer=typeof Buffer<"u",b.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")b.blob=!1;else{var C=new ArrayBuffer(0);try{b.blob=new Blob([C],{type:"application/zip"}).size===0}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);E.append(C),b.blob=E.getBlob("application/zip").size===0}catch{b.blob=!1}}}try{b.nodestream=!!m("readable-stream").Readable}catch{b.nodestream=!1}},{"readable-stream":16}],31:[function(m,k,b){for(var C=m("./utils"),E=m("./support"),x=m("./nodejsUtils"),F=m("./stream/GenericWorker"),Q=new Array(256),st=0;st<256;st++)Q[st]=252<=st?6:248<=st?5:240<=st?4:224<=st?3:192<=st?2:1;function q(){F.call(this,"utf-8 decode"),this.leftOver=null}function W(){F.call(this,"utf-8 encode")}Q[254]=Q[254]=1,b.utf8encode=function(T){return E.nodebuffer?x.newBufferFrom(T,"utf-8"):function(it){var U,rt,$,O,N,I=it.length,G=0;for(O=0;O<I;O++)(64512&(rt=it.charCodeAt(O)))==55296&&O+1<I&&(64512&($=it.charCodeAt(O+1)))==56320&&(rt=65536+(rt-55296<<10)+($-56320),O++),G+=rt<128?1:rt<2048?2:rt<65536?3:4;for(U=E.uint8array?new Uint8Array(G):new Array(G),O=N=0;N<G;O++)(64512&(rt=it.charCodeAt(O)))==55296&&O+1<I&&(64512&($=it.charCodeAt(O+1)))==56320&&(rt=65536+(rt-55296<<10)+($-56320),O++),rt<128?U[N++]=rt:(rt<2048?U[N++]=192|rt>>>6:(rt<65536?U[N++]=224|rt>>>12:(U[N++]=240|rt>>>18,U[N++]=128|rt>>>12&63),U[N++]=128|rt>>>6&63),U[N++]=128|63&rt);return U}(T)},b.utf8decode=function(T){return E.nodebuffer?C.transformTo("nodebuffer",T).toString("utf-8"):function(it){var U,rt,$,O,N=it.length,I=new Array(2*N);for(U=rt=0;U<N;)if(($=it[U++])<128)I[rt++]=$;else if(4<(O=Q[$]))I[rt++]=65533,U+=O-1;else{for($&=O===2?31:O===3?15:7;1<O&&U<N;)$=$<<6|63&it[U++],O--;1<O?I[rt++]=65533:$<65536?I[rt++]=$:($-=65536,I[rt++]=55296|$>>10&1023,I[rt++]=56320|1023&$)}return I.length!==rt&&(I.subarray?I=I.subarray(0,rt):I.length=rt),C.applyFromCharCode(I)}(T=C.transformTo(E.uint8array?"uint8array":"array",T))},C.inherits(q,F),q.prototype.processChunk=function(T){var it=C.transformTo(E.uint8array?"uint8array":"array",T.data);if(this.leftOver&&this.leftOver.length){if(E.uint8array){var U=it;(it=new Uint8Array(U.length+this.leftOver.length)).set(this.leftOver,0),it.set(U,this.leftOver.length)}else it=this.leftOver.concat(it);this.leftOver=null}var rt=function(O,N){var I;for((N=N||O.length)>O.length&&(N=O.length),I=N-1;0<=I&&(192&O[I])==128;)I--;return I<0||I===0?N:I+Q[O[I]]>N?I:N}(it),$=it;rt!==it.length&&(E.uint8array?($=it.subarray(0,rt),this.leftOver=it.subarray(rt,it.length)):($=it.slice(0,rt),this.leftOver=it.slice(rt,it.length))),this.push({data:b.utf8decode($),meta:T.meta})},q.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:b.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},b.Utf8DecodeWorker=q,C.inherits(W,F),W.prototype.processChunk=function(T){this.push({data:b.utf8encode(T.data),meta:T.meta})},b.Utf8EncodeWorker=W},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(m,k,b){var C=m("./support"),E=m("./base64"),x=m("./nodejsUtils"),F=m("./external");function Q(U){return U}function st(U,rt){for(var $=0;$<U.length;++$)rt[$]=255&U.charCodeAt($);return rt}m("setimmediate"),b.newBlob=function(U,rt){b.checkSupport("blob");try{return new Blob([U],{type:rt})}catch{try{var $=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return $.append(U),$.getBlob(rt)}catch{throw new Error("Bug : can't construct the Blob.")}}};var q={stringifyByChunk:function(U,rt,$){var O=[],N=0,I=U.length;if(I<=$)return String.fromCharCode.apply(null,U);for(;N<I;)rt==="array"||rt==="nodebuffer"?O.push(String.fromCharCode.apply(null,U.slice(N,Math.min(N+$,I)))):O.push(String.fromCharCode.apply(null,U.subarray(N,Math.min(N+$,I)))),N+=$;return O.join("")},stringifyByChar:function(U){for(var rt="",$=0;$<U.length;$++)rt+=String.fromCharCode(U[$]);return rt},applyCanBeUsed:{uint8array:function(){try{return C.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return C.nodebuffer&&String.fromCharCode.apply(null,x.allocBuffer(1)).length===1}catch{return!1}}()}};function W(U){var rt=65536,$=b.getTypeOf(U),O=!0;if($==="uint8array"?O=q.applyCanBeUsed.uint8array:$==="nodebuffer"&&(O=q.applyCanBeUsed.nodebuffer),O)for(;1<rt;)try{return q.stringifyByChunk(U,$,rt)}catch{rt=Math.floor(rt/2)}return q.stringifyByChar(U)}function T(U,rt){for(var $=0;$<U.length;$++)rt[$]=U[$];return rt}b.applyFromCharCode=W;var it={};it.string={string:Q,array:function(U){return st(U,new Array(U.length))},arraybuffer:function(U){return it.string.uint8array(U).buffer},uint8array:function(U){return st(U,new Uint8Array(U.length))},nodebuffer:function(U){return st(U,x.allocBuffer(U.length))}},it.array={string:W,array:Q,arraybuffer:function(U){return new Uint8Array(U).buffer},uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return x.newBufferFrom(U)}},it.arraybuffer={string:function(U){return W(new Uint8Array(U))},array:function(U){return T(new Uint8Array(U),new Array(U.byteLength))},arraybuffer:Q,uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return x.newBufferFrom(new Uint8Array(U))}},it.uint8array={string:W,array:function(U){return T(U,new Array(U.length))},arraybuffer:function(U){return U.buffer},uint8array:Q,nodebuffer:function(U){return x.newBufferFrom(U)}},it.nodebuffer={string:W,array:function(U){return T(U,new Array(U.length))},arraybuffer:function(U){return it.nodebuffer.uint8array(U).buffer},uint8array:function(U){return T(U,new Uint8Array(U.length))},nodebuffer:Q},b.transformTo=function(U,rt){if(rt=rt||"",!U)return rt;b.checkSupport(U);var $=b.getTypeOf(rt);return it[$][U](rt)},b.resolve=function(U){for(var rt=U.split("/"),$=[],O=0;O<rt.length;O++){var N=rt[O];N==="."||N===""&&O!==0&&O!==rt.length-1||(N===".."?$.pop():$.push(N))}return $.join("/")},b.getTypeOf=function(U){return typeof U=="string"?"string":Object.prototype.toString.call(U)==="[object Array]"?"array":C.nodebuffer&&x.isBuffer(U)?"nodebuffer":C.uint8array&&U instanceof Uint8Array?"uint8array":C.arraybuffer&&U instanceof ArrayBuffer?"arraybuffer":void 0},b.checkSupport=function(U){if(!C[U.toLowerCase()])throw new Error(U+" is not supported by this platform")},b.MAX_VALUE_16BITS=65535,b.MAX_VALUE_32BITS=-1,b.pretty=function(U){var rt,$,O="";for($=0;$<(U||"").length;$++)O+="\\x"+((rt=U.charCodeAt($))<16?"0":"")+rt.toString(16).toUpperCase();return O},b.delay=function(U,rt,$){setImmediate(function(){U.apply($||null,rt||[])})},b.inherits=function(U,rt){function $(){}$.prototype=rt.prototype,U.prototype=new $},b.extend=function(){var U,rt,$={};for(U=0;U<arguments.length;U++)for(rt in arguments[U])Object.prototype.hasOwnProperty.call(arguments[U],rt)&&$[rt]===void 0&&($[rt]=arguments[U][rt]);return $},b.prepareContent=function(U,rt,$,O,N){return F.Promise.resolve(rt).then(function(I){return C.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new F.Promise(function(G,ut){var B=new FileReader;B.onload=function(mt){G(mt.target.result)},B.onerror=function(mt){ut(mt.target.error)},B.readAsArrayBuffer(I)}):I}).then(function(I){var G=b.getTypeOf(I);return G?(G==="arraybuffer"?I=b.transformTo("uint8array",I):G==="string"&&(N?I=E.decode(I):$&&O!==!0&&(I=function(ut){return st(ut,C.uint8array?new Uint8Array(ut.length):new Array(ut.length))}(I))),I):F.Promise.reject(new Error("Can't read the data of '"+U+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(m,k,b){var C=m("./reader/readerFor"),E=m("./utils"),x=m("./signature"),F=m("./zipEntry"),Q=m("./support");function st(q){this.files=[],this.loadOptions=q}st.prototype={checkSignature:function(q){if(!this.reader.readAndCheckSignature(q)){this.reader.index-=4;var W=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+E.pretty(W)+", expected "+E.pretty(q)+")")}},isSignature:function(q,W){var T=this.reader.index;this.reader.setIndex(q);var it=this.reader.readString(4)===W;return this.reader.setIndex(T),it},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var q=this.reader.readData(this.zipCommentLength),W=Q.uint8array?"uint8array":"array",T=E.transformTo(W,q);this.zipComment=this.loadOptions.decodeFileName(T)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var q,W,T,it=this.zip64EndOfCentralSize-44;0<it;)q=this.reader.readInt(2),W=this.reader.readInt(4),T=this.reader.readData(W),this.zip64ExtensibleData[q]={id:q,length:W,value:T}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var q,W;for(q=0;q<this.files.length;q++)W=this.files[q],this.reader.setIndex(W.localHeaderOffset),this.checkSignature(x.LOCAL_FILE_HEADER),W.readLocalPart(this.reader),W.handleUTF8(),W.processAttributes()},readCentralDir:function(){var q;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(x.CENTRAL_FILE_HEADER);)(q=new F({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(q);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var q=this.reader.lastIndexOfSignature(x.CENTRAL_DIRECTORY_END);if(q<0)throw this.isSignature(0,x.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(q);var W=q;if(this.checkSignature(x.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===E.MAX_VALUE_16BITS||this.diskWithCentralDirStart===E.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===E.MAX_VALUE_16BITS||this.centralDirRecords===E.MAX_VALUE_16BITS||this.centralDirSize===E.MAX_VALUE_32BITS||this.centralDirOffset===E.MAX_VALUE_32BITS){if(this.zip64=!0,(q=this.reader.lastIndexOfSignature(x.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(q),this.checkSignature(x.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,x.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(x.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(x.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var T=this.centralDirOffset+this.centralDirSize;this.zip64&&(T+=20,T+=12+this.zip64EndOfCentralSize);var it=W-T;if(0<it)this.isSignature(W,x.CENTRAL_FILE_HEADER)||(this.reader.zero=it);else if(it<0)throw new Error("Corrupted zip: missing "+Math.abs(it)+" bytes.")},prepareReader:function(q){this.reader=C(q)},load:function(q){this.prepareReader(q),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},k.exports=st},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(m,k,b){var C=m("./reader/readerFor"),E=m("./utils"),x=m("./compressedObject"),F=m("./crc32"),Q=m("./utf8"),st=m("./compressions"),q=m("./support");function W(T,it){this.options=T,this.loadOptions=it}W.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(T){var it,U;if(T.skip(22),this.fileNameLength=T.readInt(2),U=T.readInt(2),this.fileName=T.readData(this.fileNameLength),T.skip(U),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((it=function(rt){for(var $ in st)if(Object.prototype.hasOwnProperty.call(st,$)&&st[$].magic===rt)return st[$];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+E.pretty(this.compressionMethod)+" unknown (inner file : "+E.transformTo("string",this.fileName)+")");this.decompressed=new x(this.compressedSize,this.uncompressedSize,this.crc32,it,T.readData(this.compressedSize))},readCentralPart:function(T){this.versionMadeBy=T.readInt(2),T.skip(2),this.bitFlag=T.readInt(2),this.compressionMethod=T.readString(2),this.date=T.readDate(),this.crc32=T.readInt(4),this.compressedSize=T.readInt(4),this.uncompressedSize=T.readInt(4);var it=T.readInt(2);if(this.extraFieldsLength=T.readInt(2),this.fileCommentLength=T.readInt(2),this.diskNumberStart=T.readInt(2),this.internalFileAttributes=T.readInt(2),this.externalFileAttributes=T.readInt(4),this.localHeaderOffset=T.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");T.skip(it),this.readExtraFields(T),this.parseZIP64ExtraField(T),this.fileComment=T.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var T=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),T==0&&(this.dosPermissions=63&this.externalFileAttributes),T==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var T=C(this.extraFields[1].value);this.uncompressedSize===E.MAX_VALUE_32BITS&&(this.uncompressedSize=T.readInt(8)),this.compressedSize===E.MAX_VALUE_32BITS&&(this.compressedSize=T.readInt(8)),this.localHeaderOffset===E.MAX_VALUE_32BITS&&(this.localHeaderOffset=T.readInt(8)),this.diskNumberStart===E.MAX_VALUE_32BITS&&(this.diskNumberStart=T.readInt(4))}},readExtraFields:function(T){var it,U,rt,$=T.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});T.index+4<$;)it=T.readInt(2),U=T.readInt(2),rt=T.readData(U),this.extraFields[it]={id:it,length:U,value:rt};T.setIndex($)},handleUTF8:function(){var T=q.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Q.utf8decode(this.fileName),this.fileCommentStr=Q.utf8decode(this.fileComment);else{var it=this.findExtraFieldUnicodePath();if(it!==null)this.fileNameStr=it;else{var U=E.transformTo(T,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(U)}var rt=this.findExtraFieldUnicodeComment();if(rt!==null)this.fileCommentStr=rt;else{var $=E.transformTo(T,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName($)}}},findExtraFieldUnicodePath:function(){var T=this.extraFields[28789];if(T){var it=C(T.value);return it.readInt(1)!==1||F(this.fileName)!==it.readInt(4)?null:Q.utf8decode(it.readData(T.length-5))}return null},findExtraFieldUnicodeComment:function(){var T=this.extraFields[25461];if(T){var it=C(T.value);return it.readInt(1)!==1||F(this.fileComment)!==it.readInt(4)?null:Q.utf8decode(it.readData(T.length-5))}return null}},k.exports=W},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(m,k,b){function C(it,U,rt){this.name=it,this.dir=rt.dir,this.date=rt.date,this.comment=rt.comment,this.unixPermissions=rt.unixPermissions,this.dosPermissions=rt.dosPermissions,this._data=U,this._dataBinary=rt.binary,this.options={compression:rt.compression,compressionOptions:rt.compressionOptions}}var E=m("./stream/StreamHelper"),x=m("./stream/DataWorker"),F=m("./utf8"),Q=m("./compressedObject"),st=m("./stream/GenericWorker");C.prototype={internalStream:function(it){var U=null,rt="string";try{if(!it)throw new Error("No output type specified.");var $=(rt=it.toLowerCase())==="string"||rt==="text";rt!=="binarystring"&&rt!=="text"||(rt="string"),U=this._decompressWorker();var O=!this._dataBinary;O&&!$&&(U=U.pipe(new F.Utf8EncodeWorker)),!O&&$&&(U=U.pipe(new F.Utf8DecodeWorker))}catch(N){(U=new st("error")).error(N)}return new E(U,rt,"")},async:function(it,U){return this.internalStream(it).accumulate(U)},nodeStream:function(it,U){return this.internalStream(it||"nodebuffer").toNodejsStream(U)},_compressWorker:function(it,U){if(this._data instanceof Q&&this._data.compression.magic===it.magic)return this._data.getCompressedWorker();var rt=this._decompressWorker();return this._dataBinary||(rt=rt.pipe(new F.Utf8EncodeWorker)),Q.createWorkerFrom(rt,it,U)},_decompressWorker:function(){return this._data instanceof Q?this._data.getContentWorker():this._data instanceof st?this._data:new x(this._data)}};for(var q=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],W=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},T=0;T<q.length;T++)C.prototype[q[T]]=W;k.exports=C},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(m,k,b){(function(C){var E,x,F=C.MutationObserver||C.WebKitMutationObserver;if(F){var Q=0,st=new F(it),q=C.document.createTextNode("");st.observe(q,{characterData:!0}),E=function(){q.data=Q=++Q%2}}else if(C.setImmediate||C.MessageChannel===void 0)E="document"in C&&"onreadystatechange"in C.document.createElement("script")?function(){var U=C.document.createElement("script");U.onreadystatechange=function(){it(),U.onreadystatechange=null,U.parentNode.removeChild(U),U=null},C.document.documentElement.appendChild(U)}:function(){setTimeout(it,0)};else{var W=new C.MessageChannel;W.port1.onmessage=it,E=function(){W.port2.postMessage(0)}}var T=[];function it(){var U,rt;x=!0;for(var $=T.length;$;){for(rt=T,T=[],U=-1;++U<$;)rt[U]();$=T.length}x=!1}k.exports=function(U){T.push(U)!==1||x||E()}}).call(this,et.g!==void 0?et.g:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(m,k,b){var C=m("immediate");function E(){}var x={},F=["REJECTED"],Q=["FULFILLED"],st=["PENDING"];function q($){if(typeof $!="function")throw new TypeError("resolver must be a function");this.state=st,this.queue=[],this.outcome=void 0,$!==E&&U(this,$)}function W($,O,N){this.promise=$,typeof O=="function"&&(this.onFulfilled=O,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function T($,O,N){C(function(){var I;try{I=O(N)}catch(G){return x.reject($,G)}I===$?x.reject($,new TypeError("Cannot resolve promise with itself")):x.resolve($,I)})}function it($){var O=$&&$.then;if($&&(typeof $=="object"||typeof $=="function")&&typeof O=="function")return function(){O.apply($,arguments)}}function U($,O){var N=!1;function I(B){N||(N=!0,x.reject($,B))}function G(B){N||(N=!0,x.resolve($,B))}var ut=rt(function(){O(G,I)});ut.status==="error"&&I(ut.value)}function rt($,O){var N={};try{N.value=$(O),N.status="success"}catch(I){N.status="error",N.value=I}return N}(k.exports=q).prototype.finally=function($){if(typeof $!="function")return this;var O=this.constructor;return this.then(function(N){return O.resolve($()).then(function(){return N})},function(N){return O.resolve($()).then(function(){throw N})})},q.prototype.catch=function($){return this.then(null,$)},q.prototype.then=function($,O){if(typeof $!="function"&&this.state===Q||typeof O!="function"&&this.state===F)return this;var N=new this.constructor(E);return this.state!==st?T(N,this.state===Q?$:O,this.outcome):this.queue.push(new W(N,$,O)),N},W.prototype.callFulfilled=function($){x.resolve(this.promise,$)},W.prototype.otherCallFulfilled=function($){T(this.promise,this.onFulfilled,$)},W.prototype.callRejected=function($){x.reject(this.promise,$)},W.prototype.otherCallRejected=function($){T(this.promise,this.onRejected,$)},x.resolve=function($,O){var N=rt(it,O);if(N.status==="error")return x.reject($,N.value);var I=N.value;if(I)U($,I);else{$.state=Q,$.outcome=O;for(var G=-1,ut=$.queue.length;++G<ut;)$.queue[G].callFulfilled(O)}return $},x.reject=function($,O){$.state=F,$.outcome=O;for(var N=-1,I=$.queue.length;++N<I;)$.queue[N].callRejected(O);return $},q.resolve=function($){return $ instanceof this?$:x.resolve(new this(E),$)},q.reject=function($){var O=new this(E);return x.reject(O,$)},q.all=function($){var O=this;if(Object.prototype.toString.call($)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=$.length,I=!1;if(!N)return this.resolve([]);for(var G=new Array(N),ut=0,B=-1,mt=new this(E);++B<N;)A($[B],B);return mt;function A(Mt,Dt){O.resolve(Mt).then(function(X){G[Dt]=X,++ut!==N||I||(I=!0,x.resolve(mt,G))},function(X){I||(I=!0,x.reject(mt,X))})}},q.race=function($){var O=this;if(Object.prototype.toString.call($)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=$.length,I=!1;if(!N)return this.resolve([]);for(var G,ut=-1,B=new this(E);++ut<N;)G=$[ut],O.resolve(G).then(function(mt){I||(I=!0,x.resolve(B,mt))},function(mt){I||(I=!0,x.reject(B,mt))});return B}},{immediate:36}],38:[function(m,k,b){var C={};(0,m("./lib/utils/common").assign)(C,m("./lib/deflate"),m("./lib/inflate"),m("./lib/zlib/constants")),k.exports=C},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(m,k,b){var C=m("./zlib/deflate"),E=m("./utils/common"),x=m("./utils/strings"),F=m("./zlib/messages"),Q=m("./zlib/zstream"),st=Object.prototype.toString,q=0,W=-1,T=0,it=8;function U($){if(!(this instanceof U))return new U($);this.options=E.assign({level:W,method:it,chunkSize:16384,windowBits:15,memLevel:8,strategy:T,to:""},$||{});var O=this.options;O.raw&&0<O.windowBits?O.windowBits=-O.windowBits:O.gzip&&0<O.windowBits&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Q,this.strm.avail_out=0;var N=C.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(N!==q)throw new Error(F[N]);if(O.header&&C.deflateSetHeader(this.strm,O.header),O.dictionary){var I;if(I=typeof O.dictionary=="string"?x.string2buf(O.dictionary):st.call(O.dictionary)==="[object ArrayBuffer]"?new Uint8Array(O.dictionary):O.dictionary,(N=C.deflateSetDictionary(this.strm,I))!==q)throw new Error(F[N]);this._dict_set=!0}}function rt($,O){var N=new U(O);if(N.push($,!0),N.err)throw N.msg||F[N.err];return N.result}U.prototype.push=function($,O){var N,I,G=this.strm,ut=this.options.chunkSize;if(this.ended)return!1;I=O===~~O?O:O===!0?4:0,typeof $=="string"?G.input=x.string2buf($):st.call($)==="[object ArrayBuffer]"?G.input=new Uint8Array($):G.input=$,G.next_in=0,G.avail_in=G.input.length;do{if(G.avail_out===0&&(G.output=new E.Buf8(ut),G.next_out=0,G.avail_out=ut),(N=C.deflate(G,I))!==1&&N!==q)return this.onEnd(N),!(this.ended=!0);G.avail_out!==0&&(G.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(x.buf2binstring(E.shrinkBuf(G.output,G.next_out))):this.onData(E.shrinkBuf(G.output,G.next_out)))}while((0<G.avail_in||G.avail_out===0)&&N!==1);return I===4?(N=C.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===q):I!==2||(this.onEnd(q),!(G.avail_out=0))},U.prototype.onData=function($){this.chunks.push($)},U.prototype.onEnd=function($){$===q&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=$,this.msg=this.strm.msg},b.Deflate=U,b.deflate=rt,b.deflateRaw=function($,O){return(O=O||{}).raw=!0,rt($,O)},b.gzip=function($,O){return(O=O||{}).gzip=!0,rt($,O)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(m,k,b){var C=m("./zlib/inflate"),E=m("./utils/common"),x=m("./utils/strings"),F=m("./zlib/constants"),Q=m("./zlib/messages"),st=m("./zlib/zstream"),q=m("./zlib/gzheader"),W=Object.prototype.toString;function T(U){if(!(this instanceof T))return new T(U);this.options=E.assign({chunkSize:16384,windowBits:0,to:""},U||{});var rt=this.options;rt.raw&&0<=rt.windowBits&&rt.windowBits<16&&(rt.windowBits=-rt.windowBits,rt.windowBits===0&&(rt.windowBits=-15)),!(0<=rt.windowBits&&rt.windowBits<16)||U&&U.windowBits||(rt.windowBits+=32),15<rt.windowBits&&rt.windowBits<48&&!(15&rt.windowBits)&&(rt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new st,this.strm.avail_out=0;var $=C.inflateInit2(this.strm,rt.windowBits);if($!==F.Z_OK)throw new Error(Q[$]);this.header=new q,C.inflateGetHeader(this.strm,this.header)}function it(U,rt){var $=new T(rt);if($.push(U,!0),$.err)throw $.msg||Q[$.err];return $.result}T.prototype.push=function(U,rt){var $,O,N,I,G,ut,B=this.strm,mt=this.options.chunkSize,A=this.options.dictionary,Mt=!1;if(this.ended)return!1;O=rt===~~rt?rt:rt===!0?F.Z_FINISH:F.Z_NO_FLUSH,typeof U=="string"?B.input=x.binstring2buf(U):W.call(U)==="[object ArrayBuffer]"?B.input=new Uint8Array(U):B.input=U,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new E.Buf8(mt),B.next_out=0,B.avail_out=mt),($=C.inflate(B,F.Z_NO_FLUSH))===F.Z_NEED_DICT&&A&&(ut=typeof A=="string"?x.string2buf(A):W.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,$=C.inflateSetDictionary(this.strm,ut)),$===F.Z_BUF_ERROR&&Mt===!0&&($=F.Z_OK,Mt=!1),$!==F.Z_STREAM_END&&$!==F.Z_OK)return this.onEnd($),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&$!==F.Z_STREAM_END&&(B.avail_in!==0||O!==F.Z_FINISH&&O!==F.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=x.utf8border(B.output,B.next_out),I=B.next_out-N,G=x.buf2string(B.output,N),B.next_out=I,B.avail_out=mt-I,I&&E.arraySet(B.output,B.output,N,I,0),this.onData(G)):this.onData(E.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(Mt=!0)}while((0<B.avail_in||B.avail_out===0)&&$!==F.Z_STREAM_END);return $===F.Z_STREAM_END&&(O=F.Z_FINISH),O===F.Z_FINISH?($=C.inflateEnd(this.strm),this.onEnd($),this.ended=!0,$===F.Z_OK):O!==F.Z_SYNC_FLUSH||(this.onEnd(F.Z_OK),!(B.avail_out=0))},T.prototype.onData=function(U){this.chunks.push(U)},T.prototype.onEnd=function(U){U===F.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=U,this.msg=this.strm.msg},b.Inflate=T,b.inflate=it,b.inflateRaw=function(U,rt){return(rt=rt||{}).raw=!0,it(U,rt)},b.ungzip=it},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(m,k,b){var C=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";b.assign=function(F){for(var Q=Array.prototype.slice.call(arguments,1);Q.length;){var st=Q.shift();if(st){if(typeof st!="object")throw new TypeError(st+"must be non-object");for(var q in st)st.hasOwnProperty(q)&&(F[q]=st[q])}}return F},b.shrinkBuf=function(F,Q){return F.length===Q?F:F.subarray?F.subarray(0,Q):(F.length=Q,F)};var E={arraySet:function(F,Q,st,q,W){if(Q.subarray&&F.subarray)F.set(Q.subarray(st,st+q),W);else for(var T=0;T<q;T++)F[W+T]=Q[st+T]},flattenChunks:function(F){var Q,st,q,W,T,it;for(Q=q=0,st=F.length;Q<st;Q++)q+=F[Q].length;for(it=new Uint8Array(q),Q=W=0,st=F.length;Q<st;Q++)T=F[Q],it.set(T,W),W+=T.length;return it}},x={arraySet:function(F,Q,st,q,W){for(var T=0;T<q;T++)F[W+T]=Q[st+T]},flattenChunks:function(F){return[].concat.apply([],F)}};b.setTyped=function(F){F?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,E)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,x))},b.setTyped(C)},{}],42:[function(m,k,b){var C=m("./common"),E=!0,x=!0;try{String.fromCharCode.apply(null,[0])}catch{E=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{x=!1}for(var F=new C.Buf8(256),Q=0;Q<256;Q++)F[Q]=252<=Q?6:248<=Q?5:240<=Q?4:224<=Q?3:192<=Q?2:1;function st(q,W){if(W<65537&&(q.subarray&&x||!q.subarray&&E))return String.fromCharCode.apply(null,C.shrinkBuf(q,W));for(var T="",it=0;it<W;it++)T+=String.fromCharCode(q[it]);return T}F[254]=F[254]=1,b.string2buf=function(q){var W,T,it,U,rt,$=q.length,O=0;for(U=0;U<$;U++)(64512&(T=q.charCodeAt(U)))==55296&&U+1<$&&(64512&(it=q.charCodeAt(U+1)))==56320&&(T=65536+(T-55296<<10)+(it-56320),U++),O+=T<128?1:T<2048?2:T<65536?3:4;for(W=new C.Buf8(O),U=rt=0;rt<O;U++)(64512&(T=q.charCodeAt(U)))==55296&&U+1<$&&(64512&(it=q.charCodeAt(U+1)))==56320&&(T=65536+(T-55296<<10)+(it-56320),U++),T<128?W[rt++]=T:(T<2048?W[rt++]=192|T>>>6:(T<65536?W[rt++]=224|T>>>12:(W[rt++]=240|T>>>18,W[rt++]=128|T>>>12&63),W[rt++]=128|T>>>6&63),W[rt++]=128|63&T);return W},b.buf2binstring=function(q){return st(q,q.length)},b.binstring2buf=function(q){for(var W=new C.Buf8(q.length),T=0,it=W.length;T<it;T++)W[T]=q.charCodeAt(T);return W},b.buf2string=function(q,W){var T,it,U,rt,$=W||q.length,O=new Array(2*$);for(T=it=0;T<$;)if((U=q[T++])<128)O[it++]=U;else if(4<(rt=F[U]))O[it++]=65533,T+=rt-1;else{for(U&=rt===2?31:rt===3?15:7;1<rt&&T<$;)U=U<<6|63&q[T++],rt--;1<rt?O[it++]=65533:U<65536?O[it++]=U:(U-=65536,O[it++]=55296|U>>10&1023,O[it++]=56320|1023&U)}return st(O,it)},b.utf8border=function(q,W){var T;for((W=W||q.length)>q.length&&(W=q.length),T=W-1;0<=T&&(192&q[T])==128;)T--;return T<0||T===0?W:T+F[q[T]]>W?T:W}},{"./common":41}],43:[function(m,k,b){k.exports=function(C,E,x,F){for(var Q=65535&C|0,st=C>>>16&65535|0,q=0;x!==0;){for(x-=q=2e3<x?2e3:x;st=st+(Q=Q+E[F++]|0)|0,--q;);Q%=65521,st%=65521}return Q|st<<16|0}},{}],44:[function(m,k,b){k.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(m,k,b){var C=function(){for(var E,x=[],F=0;F<256;F++){E=F;for(var Q=0;Q<8;Q++)E=1&E?3988292384^E>>>1:E>>>1;x[F]=E}return x}();k.exports=function(E,x,F,Q){var st=C,q=Q+F;E^=-1;for(var W=Q;W<q;W++)E=E>>>8^st[255&(E^x[W])];return-1^E}},{}],46:[function(m,k,b){var C,E=m("../utils/common"),x=m("./trees"),F=m("./adler32"),Q=m("./crc32"),st=m("./messages"),q=0,W=4,T=0,it=-2,U=-1,rt=4,$=2,O=8,N=9,I=286,G=30,ut=19,B=2*I+1,mt=15,A=3,Mt=258,Dt=Mt+A+1,X=42,Et=113,V=1,Nt=2,jt=3,Lt=4;function qt(_,bt){return _.msg=st[bt],bt}function Vt(_){return(_<<1)-(4<_?9:0)}function $t(_){for(var bt=_.length;0<=--bt;)_[bt]=0}function Ct(_){var bt=_.state,J=bt.pending;J>_.avail_out&&(J=_.avail_out),J!==0&&(E.arraySet(_.output,bt.pending_buf,bt.pending_out,J,_.next_out),_.next_out+=J,bt.pending_out+=J,_.total_out+=J,_.avail_out-=J,bt.pending-=J,bt.pending===0&&(bt.pending_out=0))}function It(_,bt){x._tr_flush_block(_,0<=_.block_start?_.block_start:-1,_.strstart-_.block_start,bt),_.block_start=_.strstart,Ct(_.strm)}function ae(_,bt){_.pending_buf[_.pending++]=bt}function Yt(_,bt){_.pending_buf[_.pending++]=bt>>>8&255,_.pending_buf[_.pending++]=255&bt}function Xt(_,bt){var J,Y,H=_.max_chain_length,Tt=_.strstart,te=_.prev_length,Qt=_.nice_match,Ut=_.strstart>_.w_size-Dt?_.strstart-(_.w_size-Dt):0,se=_.window,ee=_.w_mask,ce=_.prev,xe=_.strstart+Mt,Ae=se[Tt+te-1],Ve=se[Tt+te];_.prev_length>=_.good_match&&(H>>=2),Qt>_.lookahead&&(Qt=_.lookahead);do if(se[(J=bt)+te]===Ve&&se[J+te-1]===Ae&&se[J]===se[Tt]&&se[++J]===se[Tt+1]){Tt+=2,J++;do;while(se[++Tt]===se[++J]&&se[++Tt]===se[++J]&&se[++Tt]===se[++J]&&se[++Tt]===se[++J]&&se[++Tt]===se[++J]&&se[++Tt]===se[++J]&&se[++Tt]===se[++J]&&se[++Tt]===se[++J]&&Tt<xe);if(Y=Mt-(xe-Tt),Tt=xe-Mt,te<Y){if(_.match_start=bt,Qt<=(te=Y))break;Ae=se[Tt+te-1],Ve=se[Tt+te]}}while((bt=ce[bt&ee])>Ut&&--H!=0);return te<=_.lookahead?te:_.lookahead}function De(_){var bt,J,Y,H,Tt,te,Qt,Ut,se,ee,ce=_.w_size;do{if(H=_.window_size-_.lookahead-_.strstart,_.strstart>=ce+(ce-Dt)){for(E.arraySet(_.window,_.window,ce,ce,0),_.match_start-=ce,_.strstart-=ce,_.block_start-=ce,bt=J=_.hash_size;Y=_.head[--bt],_.head[bt]=ce<=Y?Y-ce:0,--J;);for(bt=J=ce;Y=_.prev[--bt],_.prev[bt]=ce<=Y?Y-ce:0,--J;);H+=ce}if(_.strm.avail_in===0)break;if(te=_.strm,Qt=_.window,Ut=_.strstart+_.lookahead,ee=void 0,(se=H)<(ee=te.avail_in)&&(ee=se),J=ee===0?0:(te.avail_in-=ee,E.arraySet(Qt,te.input,te.next_in,ee,Ut),te.state.wrap===1?te.adler=F(te.adler,Qt,ee,Ut):te.state.wrap===2&&(te.adler=Q(te.adler,Qt,ee,Ut)),te.next_in+=ee,te.total_in+=ee,ee),_.lookahead+=J,_.lookahead+_.insert>=A)for(Tt=_.strstart-_.insert,_.ins_h=_.window[Tt],_.ins_h=(_.ins_h<<_.hash_shift^_.window[Tt+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[Tt+A-1])&_.hash_mask,_.prev[Tt&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=Tt,Tt++,_.insert--,!(_.lookahead+_.insert<A)););}while(_.lookahead<Dt&&_.strm.avail_in!==0)}function Xe(_,bt){for(var J,Y;;){if(_.lookahead<Dt){if(De(_),_.lookahead<Dt&&bt===q)return V;if(_.lookahead===0)break}if(J=0,_.lookahead>=A&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+A-1])&_.hash_mask,J=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),J!==0&&_.strstart-J<=_.w_size-Dt&&(_.match_length=Xt(_,J)),_.match_length>=A)if(Y=x._tr_tally(_,_.strstart-_.match_start,_.match_length-A),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=A){for(_.match_length--;_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+A-1])&_.hash_mask,J=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart,--_.match_length!=0;);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else Y=x._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(Y&&(It(_,!1),_.strm.avail_out===0))return V}return _.insert=_.strstart<A-1?_.strstart:A-1,bt===W?(It(_,!0),_.strm.avail_out===0?jt:Lt):_.last_lit&&(It(_,!1),_.strm.avail_out===0)?V:Nt}function Ie(_,bt){for(var J,Y,H;;){if(_.lookahead<Dt){if(De(_),_.lookahead<Dt&&bt===q)return V;if(_.lookahead===0)break}if(J=0,_.lookahead>=A&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+A-1])&_.hash_mask,J=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=A-1,J!==0&&_.prev_length<_.max_lazy_match&&_.strstart-J<=_.w_size-Dt&&(_.match_length=Xt(_,J),_.match_length<=5&&(_.strategy===1||_.match_length===A&&4096<_.strstart-_.match_start)&&(_.match_length=A-1)),_.prev_length>=A&&_.match_length<=_.prev_length){for(H=_.strstart+_.lookahead-A,Y=x._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-A),_.lookahead-=_.prev_length-1,_.prev_length-=2;++_.strstart<=H&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+A-1])&_.hash_mask,J=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),--_.prev_length!=0;);if(_.match_available=0,_.match_length=A-1,_.strstart++,Y&&(It(_,!1),_.strm.avail_out===0))return V}else if(_.match_available){if((Y=x._tr_tally(_,0,_.window[_.strstart-1]))&&It(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return V}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(Y=x._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<A-1?_.strstart:A-1,bt===W?(It(_,!0),_.strm.avail_out===0?jt:Lt):_.last_lit&&(It(_,!1),_.strm.avail_out===0)?V:Nt}function Me(_,bt,J,Y,H){this.good_length=_,this.max_lazy=bt,this.nice_length=J,this.max_chain=Y,this.func=H}function ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*B),this.dyn_dtree=new E.Buf16(2*(2*G+1)),this.bl_tree=new E.Buf16(2*(2*ut+1)),$t(this.dyn_ltree),$t(this.dyn_dtree),$t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(mt+1),this.heap=new E.Buf16(2*I+1),$t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*I+1),$t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(_){var bt;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=$,(bt=_.state).pending=0,bt.pending_out=0,bt.wrap<0&&(bt.wrap=-bt.wrap),bt.status=bt.wrap?X:Et,_.adler=bt.wrap===2?0:1,bt.last_flush=q,x._tr_init(bt),T):qt(_,it)}function at(_){var bt=R(_);return bt===T&&function(J){J.window_size=2*J.w_size,$t(J.head),J.max_lazy_match=C[J.level].max_lazy,J.good_match=C[J.level].good_length,J.nice_match=C[J.level].nice_length,J.max_chain_length=C[J.level].max_chain,J.strstart=0,J.block_start=0,J.lookahead=0,J.insert=0,J.match_length=J.prev_length=A-1,J.match_available=0,J.ins_h=0}(_.state),bt}function yt(_,bt,J,Y,H,Tt){if(!_)return it;var te=1;if(bt===U&&(bt=6),Y<0?(te=0,Y=-Y):15<Y&&(te=2,Y-=16),H<1||N<H||J!==O||Y<8||15<Y||bt<0||9<bt||Tt<0||rt<Tt)return qt(_,it);Y===8&&(Y=9);var Qt=new ue;return(_.state=Qt).strm=_,Qt.wrap=te,Qt.gzhead=null,Qt.w_bits=Y,Qt.w_size=1<<Qt.w_bits,Qt.w_mask=Qt.w_size-1,Qt.hash_bits=H+7,Qt.hash_size=1<<Qt.hash_bits,Qt.hash_mask=Qt.hash_size-1,Qt.hash_shift=~~((Qt.hash_bits+A-1)/A),Qt.window=new E.Buf8(2*Qt.w_size),Qt.head=new E.Buf16(Qt.hash_size),Qt.prev=new E.Buf16(Qt.w_size),Qt.lit_bufsize=1<<H+6,Qt.pending_buf_size=4*Qt.lit_bufsize,Qt.pending_buf=new E.Buf8(Qt.pending_buf_size),Qt.d_buf=1*Qt.lit_bufsize,Qt.l_buf=3*Qt.lit_bufsize,Qt.level=bt,Qt.strategy=Tt,Qt.method=J,at(_)}C=[new Me(0,0,0,0,function(_,bt){var J=65535;for(J>_.pending_buf_size-5&&(J=_.pending_buf_size-5);;){if(_.lookahead<=1){if(De(_),_.lookahead===0&&bt===q)return V;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var Y=_.block_start+J;if((_.strstart===0||_.strstart>=Y)&&(_.lookahead=_.strstart-Y,_.strstart=Y,It(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-Dt&&(It(_,!1),_.strm.avail_out===0))return V}return _.insert=0,bt===W?(It(_,!0),_.strm.avail_out===0?jt:Lt):(_.strstart>_.block_start&&(It(_,!1),_.strm.avail_out),V)}),new Me(4,4,8,4,Xe),new Me(4,5,16,8,Xe),new Me(4,6,32,32,Xe),new Me(4,4,16,16,Ie),new Me(8,16,32,32,Ie),new Me(8,16,128,128,Ie),new Me(8,32,128,256,Ie),new Me(32,128,258,1024,Ie),new Me(32,258,258,4096,Ie)],b.deflateInit=function(_,bt){return yt(_,bt,O,15,8,0)},b.deflateInit2=yt,b.deflateReset=at,b.deflateResetKeep=R,b.deflateSetHeader=function(_,bt){return _&&_.state?_.state.wrap!==2?it:(_.state.gzhead=bt,T):it},b.deflate=function(_,bt){var J,Y,H,Tt;if(!_||!_.state||5<bt||bt<0)return _?qt(_,it):it;if(Y=_.state,!_.output||!_.input&&_.avail_in!==0||Y.status===666&&bt!==W)return qt(_,_.avail_out===0?-5:it);if(Y.strm=_,J=Y.last_flush,Y.last_flush=bt,Y.status===X)if(Y.wrap===2)_.adler=0,ae(Y,31),ae(Y,139),ae(Y,8),Y.gzhead?(ae(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),ae(Y,255&Y.gzhead.time),ae(Y,Y.gzhead.time>>8&255),ae(Y,Y.gzhead.time>>16&255),ae(Y,Y.gzhead.time>>24&255),ae(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),ae(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(ae(Y,255&Y.gzhead.extra.length),ae(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&(_.adler=Q(_.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(ae(Y,0),ae(Y,0),ae(Y,0),ae(Y,0),ae(Y,0),ae(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),ae(Y,3),Y.status=Et);else{var te=O+(Y.w_bits-8<<4)<<8;te|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(te|=32),te+=31-te%31,Y.status=Et,Yt(Y,te),Y.strstart!==0&&(Yt(Y,_.adler>>>16),Yt(Y,65535&_.adler)),_.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(H=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>H&&(_.adler=Q(_.adler,Y.pending_buf,Y.pending-H,H)),Ct(_),H=Y.pending,Y.pending!==Y.pending_buf_size));)ae(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>H&&(_.adler=Q(_.adler,Y.pending_buf,Y.pending-H,H)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){H=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>H&&(_.adler=Q(_.adler,Y.pending_buf,Y.pending-H,H)),Ct(_),H=Y.pending,Y.pending===Y.pending_buf_size)){Tt=1;break}Tt=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,ae(Y,Tt)}while(Tt!==0);Y.gzhead.hcrc&&Y.pending>H&&(_.adler=Q(_.adler,Y.pending_buf,Y.pending-H,H)),Tt===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){H=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>H&&(_.adler=Q(_.adler,Y.pending_buf,Y.pending-H,H)),Ct(_),H=Y.pending,Y.pending===Y.pending_buf_size)){Tt=1;break}Tt=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,ae(Y,Tt)}while(Tt!==0);Y.gzhead.hcrc&&Y.pending>H&&(_.adler=Q(_.adler,Y.pending_buf,Y.pending-H,H)),Tt===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&Ct(_),Y.pending+2<=Y.pending_buf_size&&(ae(Y,255&_.adler),ae(Y,_.adler>>8&255),_.adler=0,Y.status=Et)):Y.status=Et),Y.pending!==0){if(Ct(_),_.avail_out===0)return Y.last_flush=-1,T}else if(_.avail_in===0&&Vt(bt)<=Vt(J)&&bt!==W)return qt(_,-5);if(Y.status===666&&_.avail_in!==0)return qt(_,-5);if(_.avail_in!==0||Y.lookahead!==0||bt!==q&&Y.status!==666){var Qt=Y.strategy===2?function(Ut,se){for(var ee;;){if(Ut.lookahead===0&&(De(Ut),Ut.lookahead===0)){if(se===q)return V;break}if(Ut.match_length=0,ee=x._tr_tally(Ut,0,Ut.window[Ut.strstart]),Ut.lookahead--,Ut.strstart++,ee&&(It(Ut,!1),Ut.strm.avail_out===0))return V}return Ut.insert=0,se===W?(It(Ut,!0),Ut.strm.avail_out===0?jt:Lt):Ut.last_lit&&(It(Ut,!1),Ut.strm.avail_out===0)?V:Nt}(Y,bt):Y.strategy===3?function(Ut,se){for(var ee,ce,xe,Ae,Ve=Ut.window;;){if(Ut.lookahead<=Mt){if(De(Ut),Ut.lookahead<=Mt&&se===q)return V;if(Ut.lookahead===0)break}if(Ut.match_length=0,Ut.lookahead>=A&&0<Ut.strstart&&(ce=Ve[xe=Ut.strstart-1])===Ve[++xe]&&ce===Ve[++xe]&&ce===Ve[++xe]){Ae=Ut.strstart+Mt;do;while(ce===Ve[++xe]&&ce===Ve[++xe]&&ce===Ve[++xe]&&ce===Ve[++xe]&&ce===Ve[++xe]&&ce===Ve[++xe]&&ce===Ve[++xe]&&ce===Ve[++xe]&&xe<Ae);Ut.match_length=Mt-(Ae-xe),Ut.match_length>Ut.lookahead&&(Ut.match_length=Ut.lookahead)}if(Ut.match_length>=A?(ee=x._tr_tally(Ut,1,Ut.match_length-A),Ut.lookahead-=Ut.match_length,Ut.strstart+=Ut.match_length,Ut.match_length=0):(ee=x._tr_tally(Ut,0,Ut.window[Ut.strstart]),Ut.lookahead--,Ut.strstart++),ee&&(It(Ut,!1),Ut.strm.avail_out===0))return V}return Ut.insert=0,se===W?(It(Ut,!0),Ut.strm.avail_out===0?jt:Lt):Ut.last_lit&&(It(Ut,!1),Ut.strm.avail_out===0)?V:Nt}(Y,bt):C[Y.level].func(Y,bt);if(Qt!==jt&&Qt!==Lt||(Y.status=666),Qt===V||Qt===jt)return _.avail_out===0&&(Y.last_flush=-1),T;if(Qt===Nt&&(bt===1?x._tr_align(Y):bt!==5&&(x._tr_stored_block(Y,0,0,!1),bt===3&&($t(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),Ct(_),_.avail_out===0))return Y.last_flush=-1,T}return bt!==W?T:Y.wrap<=0?1:(Y.wrap===2?(ae(Y,255&_.adler),ae(Y,_.adler>>8&255),ae(Y,_.adler>>16&255),ae(Y,_.adler>>24&255),ae(Y,255&_.total_in),ae(Y,_.total_in>>8&255),ae(Y,_.total_in>>16&255),ae(Y,_.total_in>>24&255)):(Yt(Y,_.adler>>>16),Yt(Y,65535&_.adler)),Ct(_),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?T:1)},b.deflateEnd=function(_){var bt;return _&&_.state?(bt=_.state.status)!==X&&bt!==69&&bt!==73&&bt!==91&&bt!==103&&bt!==Et&&bt!==666?qt(_,it):(_.state=null,bt===Et?qt(_,-3):T):it},b.deflateSetDictionary=function(_,bt){var J,Y,H,Tt,te,Qt,Ut,se,ee=bt.length;if(!_||!_.state||(Tt=(J=_.state).wrap)===2||Tt===1&&J.status!==X||J.lookahead)return it;for(Tt===1&&(_.adler=F(_.adler,bt,ee,0)),J.wrap=0,ee>=J.w_size&&(Tt===0&&($t(J.head),J.strstart=0,J.block_start=0,J.insert=0),se=new E.Buf8(J.w_size),E.arraySet(se,bt,ee-J.w_size,J.w_size,0),bt=se,ee=J.w_size),te=_.avail_in,Qt=_.next_in,Ut=_.input,_.avail_in=ee,_.next_in=0,_.input=bt,De(J);J.lookahead>=A;){for(Y=J.strstart,H=J.lookahead-(A-1);J.ins_h=(J.ins_h<<J.hash_shift^J.window[Y+A-1])&J.hash_mask,J.prev[Y&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=Y,Y++,--H;);J.strstart=Y,J.lookahead=A-1,De(J)}return J.strstart+=J.lookahead,J.block_start=J.strstart,J.insert=J.lookahead,J.lookahead=0,J.match_length=J.prev_length=A-1,J.match_available=0,_.next_in=Qt,_.input=Ut,_.avail_in=te,J.wrap=Tt,T},b.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(m,k,b){k.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(m,k,b){k.exports=function(C,E){var x,F,Q,st,q,W,T,it,U,rt,$,O,N,I,G,ut,B,mt,A,Mt,Dt,X,Et,V,Nt;x=C.state,F=C.next_in,V=C.input,Q=F+(C.avail_in-5),st=C.next_out,Nt=C.output,q=st-(E-C.avail_out),W=st+(C.avail_out-257),T=x.dmax,it=x.wsize,U=x.whave,rt=x.wnext,$=x.window,O=x.hold,N=x.bits,I=x.lencode,G=x.distcode,ut=(1<<x.lenbits)-1,B=(1<<x.distbits)-1;t:do{N<15&&(O+=V[F++]<<N,N+=8,O+=V[F++]<<N,N+=8),mt=I[O&ut];e:for(;;){if(O>>>=A=mt>>>24,N-=A,(A=mt>>>16&255)==0)Nt[st++]=65535&mt;else{if(!(16&A)){if(!(64&A)){mt=I[(65535&mt)+(O&(1<<A)-1)];continue e}if(32&A){x.mode=12;break t}C.msg="invalid literal/length code",x.mode=30;break t}Mt=65535&mt,(A&=15)&&(N<A&&(O+=V[F++]<<N,N+=8),Mt+=O&(1<<A)-1,O>>>=A,N-=A),N<15&&(O+=V[F++]<<N,N+=8,O+=V[F++]<<N,N+=8),mt=G[O&B];r:for(;;){if(O>>>=A=mt>>>24,N-=A,!(16&(A=mt>>>16&255))){if(!(64&A)){mt=G[(65535&mt)+(O&(1<<A)-1)];continue r}C.msg="invalid distance code",x.mode=30;break t}if(Dt=65535&mt,N<(A&=15)&&(O+=V[F++]<<N,(N+=8)<A&&(O+=V[F++]<<N,N+=8)),T<(Dt+=O&(1<<A)-1)){C.msg="invalid distance too far back",x.mode=30;break t}if(O>>>=A,N-=A,(A=st-q)<Dt){if(U<(A=Dt-A)&&x.sane){C.msg="invalid distance too far back",x.mode=30;break t}if(Et=$,(X=0)===rt){if(X+=it-A,A<Mt){for(Mt-=A;Nt[st++]=$[X++],--A;);X=st-Dt,Et=Nt}}else if(rt<A){if(X+=it+rt-A,(A-=rt)<Mt){for(Mt-=A;Nt[st++]=$[X++],--A;);if(X=0,rt<Mt){for(Mt-=A=rt;Nt[st++]=$[X++],--A;);X=st-Dt,Et=Nt}}}else if(X+=rt-A,A<Mt){for(Mt-=A;Nt[st++]=$[X++],--A;);X=st-Dt,Et=Nt}for(;2<Mt;)Nt[st++]=Et[X++],Nt[st++]=Et[X++],Nt[st++]=Et[X++],Mt-=3;Mt&&(Nt[st++]=Et[X++],1<Mt&&(Nt[st++]=Et[X++]))}else{for(X=st-Dt;Nt[st++]=Nt[X++],Nt[st++]=Nt[X++],Nt[st++]=Nt[X++],2<(Mt-=3););Mt&&(Nt[st++]=Nt[X++],1<Mt&&(Nt[st++]=Nt[X++]))}break}}break}}while(F<Q&&st<W);F-=Mt=N>>3,O&=(1<<(N-=Mt<<3))-1,C.next_in=F,C.next_out=st,C.avail_in=F<Q?Q-F+5:5-(F-Q),C.avail_out=st<W?W-st+257:257-(st-W),x.hold=O,x.bits=N}},{}],49:[function(m,k,b){var C=m("../utils/common"),E=m("./adler32"),x=m("./crc32"),F=m("./inffast"),Q=m("./inftrees"),st=1,q=2,W=0,T=-2,it=1,U=852,rt=592;function $(X){return(X>>>24&255)+(X>>>8&65280)+((65280&X)<<8)+((255&X)<<24)}function O(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new C.Buf16(320),this.work=new C.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(X){var Et;return X&&X.state?(Et=X.state,X.total_in=X.total_out=Et.total=0,X.msg="",Et.wrap&&(X.adler=1&Et.wrap),Et.mode=it,Et.last=0,Et.havedict=0,Et.dmax=32768,Et.head=null,Et.hold=0,Et.bits=0,Et.lencode=Et.lendyn=new C.Buf32(U),Et.distcode=Et.distdyn=new C.Buf32(rt),Et.sane=1,Et.back=-1,W):T}function I(X){var Et;return X&&X.state?((Et=X.state).wsize=0,Et.whave=0,Et.wnext=0,N(X)):T}function G(X,Et){var V,Nt;return X&&X.state?(Nt=X.state,Et<0?(V=0,Et=-Et):(V=1+(Et>>4),Et<48&&(Et&=15)),Et&&(Et<8||15<Et)?T:(Nt.window!==null&&Nt.wbits!==Et&&(Nt.window=null),Nt.wrap=V,Nt.wbits=Et,I(X))):T}function ut(X,Et){var V,Nt;return X?(Nt=new O,(X.state=Nt).window=null,(V=G(X,Et))!==W&&(X.state=null),V):T}var B,mt,A=!0;function Mt(X){if(A){var Et;for(B=new C.Buf32(512),mt=new C.Buf32(32),Et=0;Et<144;)X.lens[Et++]=8;for(;Et<256;)X.lens[Et++]=9;for(;Et<280;)X.lens[Et++]=7;for(;Et<288;)X.lens[Et++]=8;for(Q(st,X.lens,0,288,B,0,X.work,{bits:9}),Et=0;Et<32;)X.lens[Et++]=5;Q(q,X.lens,0,32,mt,0,X.work,{bits:5}),A=!1}X.lencode=B,X.lenbits=9,X.distcode=mt,X.distbits=5}function Dt(X,Et,V,Nt){var jt,Lt=X.state;return Lt.window===null&&(Lt.wsize=1<<Lt.wbits,Lt.wnext=0,Lt.whave=0,Lt.window=new C.Buf8(Lt.wsize)),Nt>=Lt.wsize?(C.arraySet(Lt.window,Et,V-Lt.wsize,Lt.wsize,0),Lt.wnext=0,Lt.whave=Lt.wsize):(Nt<(jt=Lt.wsize-Lt.wnext)&&(jt=Nt),C.arraySet(Lt.window,Et,V-Nt,jt,Lt.wnext),(Nt-=jt)?(C.arraySet(Lt.window,Et,V-Nt,Nt,0),Lt.wnext=Nt,Lt.whave=Lt.wsize):(Lt.wnext+=jt,Lt.wnext===Lt.wsize&&(Lt.wnext=0),Lt.whave<Lt.wsize&&(Lt.whave+=jt))),0}b.inflateReset=I,b.inflateReset2=G,b.inflateResetKeep=N,b.inflateInit=function(X){return ut(X,15)},b.inflateInit2=ut,b.inflate=function(X,Et){var V,Nt,jt,Lt,qt,Vt,$t,Ct,It,ae,Yt,Xt,De,Xe,Ie,Me,ue,R,at,yt,_,bt,J,Y,H=0,Tt=new C.Buf8(4),te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!X||!X.state||!X.output||!X.input&&X.avail_in!==0)return T;(V=X.state).mode===12&&(V.mode=13),qt=X.next_out,jt=X.output,$t=X.avail_out,Lt=X.next_in,Nt=X.input,Vt=X.avail_in,Ct=V.hold,It=V.bits,ae=Vt,Yt=$t,bt=W;t:for(;;)switch(V.mode){case it:if(V.wrap===0){V.mode=13;break}for(;It<16;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(2&V.wrap&&Ct===35615){Tt[V.check=0]=255&Ct,Tt[1]=Ct>>>8&255,V.check=x(V.check,Tt,2,0),It=Ct=0,V.mode=2;break}if(V.flags=0,V.head&&(V.head.done=!1),!(1&V.wrap)||(((255&Ct)<<8)+(Ct>>8))%31){X.msg="incorrect header check",V.mode=30;break}if((15&Ct)!=8){X.msg="unknown compression method",V.mode=30;break}if(It-=4,_=8+(15&(Ct>>>=4)),V.wbits===0)V.wbits=_;else if(_>V.wbits){X.msg="invalid window size",V.mode=30;break}V.dmax=1<<_,X.adler=V.check=1,V.mode=512&Ct?10:12,It=Ct=0;break;case 2:for(;It<16;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(V.flags=Ct,(255&V.flags)!=8){X.msg="unknown compression method",V.mode=30;break}if(57344&V.flags){X.msg="unknown header flags set",V.mode=30;break}V.head&&(V.head.text=Ct>>8&1),512&V.flags&&(Tt[0]=255&Ct,Tt[1]=Ct>>>8&255,V.check=x(V.check,Tt,2,0)),It=Ct=0,V.mode=3;case 3:for(;It<32;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}V.head&&(V.head.time=Ct),512&V.flags&&(Tt[0]=255&Ct,Tt[1]=Ct>>>8&255,Tt[2]=Ct>>>16&255,Tt[3]=Ct>>>24&255,V.check=x(V.check,Tt,4,0)),It=Ct=0,V.mode=4;case 4:for(;It<16;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}V.head&&(V.head.xflags=255&Ct,V.head.os=Ct>>8),512&V.flags&&(Tt[0]=255&Ct,Tt[1]=Ct>>>8&255,V.check=x(V.check,Tt,2,0)),It=Ct=0,V.mode=5;case 5:if(1024&V.flags){for(;It<16;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}V.length=Ct,V.head&&(V.head.extra_len=Ct),512&V.flags&&(Tt[0]=255&Ct,Tt[1]=Ct>>>8&255,V.check=x(V.check,Tt,2,0)),It=Ct=0}else V.head&&(V.head.extra=null);V.mode=6;case 6:if(1024&V.flags&&(Vt<(Xt=V.length)&&(Xt=Vt),Xt&&(V.head&&(_=V.head.extra_len-V.length,V.head.extra||(V.head.extra=new Array(V.head.extra_len)),C.arraySet(V.head.extra,Nt,Lt,Xt,_)),512&V.flags&&(V.check=x(V.check,Nt,Xt,Lt)),Vt-=Xt,Lt+=Xt,V.length-=Xt),V.length))break t;V.length=0,V.mode=7;case 7:if(2048&V.flags){if(Vt===0)break t;for(Xt=0;_=Nt[Lt+Xt++],V.head&&_&&V.length<65536&&(V.head.name+=String.fromCharCode(_)),_&&Xt<Vt;);if(512&V.flags&&(V.check=x(V.check,Nt,Xt,Lt)),Vt-=Xt,Lt+=Xt,_)break t}else V.head&&(V.head.name=null);V.length=0,V.mode=8;case 8:if(4096&V.flags){if(Vt===0)break t;for(Xt=0;_=Nt[Lt+Xt++],V.head&&_&&V.length<65536&&(V.head.comment+=String.fromCharCode(_)),_&&Xt<Vt;);if(512&V.flags&&(V.check=x(V.check,Nt,Xt,Lt)),Vt-=Xt,Lt+=Xt,_)break t}else V.head&&(V.head.comment=null);V.mode=9;case 9:if(512&V.flags){for(;It<16;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(Ct!==(65535&V.check)){X.msg="header crc mismatch",V.mode=30;break}It=Ct=0}V.head&&(V.head.hcrc=V.flags>>9&1,V.head.done=!0),X.adler=V.check=0,V.mode=12;break;case 10:for(;It<32;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}X.adler=V.check=$(Ct),It=Ct=0,V.mode=11;case 11:if(V.havedict===0)return X.next_out=qt,X.avail_out=$t,X.next_in=Lt,X.avail_in=Vt,V.hold=Ct,V.bits=It,2;X.adler=V.check=1,V.mode=12;case 12:if(Et===5||Et===6)break t;case 13:if(V.last){Ct>>>=7&It,It-=7&It,V.mode=27;break}for(;It<3;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}switch(V.last=1&Ct,It-=1,3&(Ct>>>=1)){case 0:V.mode=14;break;case 1:if(Mt(V),V.mode=20,Et!==6)break;Ct>>>=2,It-=2;break t;case 2:V.mode=17;break;case 3:X.msg="invalid block type",V.mode=30}Ct>>>=2,It-=2;break;case 14:for(Ct>>>=7&It,It-=7&It;It<32;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if((65535&Ct)!=(Ct>>>16^65535)){X.msg="invalid stored block lengths",V.mode=30;break}if(V.length=65535&Ct,It=Ct=0,V.mode=15,Et===6)break t;case 15:V.mode=16;case 16:if(Xt=V.length){if(Vt<Xt&&(Xt=Vt),$t<Xt&&(Xt=$t),Xt===0)break t;C.arraySet(jt,Nt,Lt,Xt,qt),Vt-=Xt,Lt+=Xt,$t-=Xt,qt+=Xt,V.length-=Xt;break}V.mode=12;break;case 17:for(;It<14;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(V.nlen=257+(31&Ct),Ct>>>=5,It-=5,V.ndist=1+(31&Ct),Ct>>>=5,It-=5,V.ncode=4+(15&Ct),Ct>>>=4,It-=4,286<V.nlen||30<V.ndist){X.msg="too many length or distance symbols",V.mode=30;break}V.have=0,V.mode=18;case 18:for(;V.have<V.ncode;){for(;It<3;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}V.lens[te[V.have++]]=7&Ct,Ct>>>=3,It-=3}for(;V.have<19;)V.lens[te[V.have++]]=0;if(V.lencode=V.lendyn,V.lenbits=7,J={bits:V.lenbits},bt=Q(0,V.lens,0,19,V.lencode,0,V.work,J),V.lenbits=J.bits,bt){X.msg="invalid code lengths set",V.mode=30;break}V.have=0,V.mode=19;case 19:for(;V.have<V.nlen+V.ndist;){for(;Me=(H=V.lencode[Ct&(1<<V.lenbits)-1])>>>16&255,ue=65535&H,!((Ie=H>>>24)<=It);){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(ue<16)Ct>>>=Ie,It-=Ie,V.lens[V.have++]=ue;else{if(ue===16){for(Y=Ie+2;It<Y;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(Ct>>>=Ie,It-=Ie,V.have===0){X.msg="invalid bit length repeat",V.mode=30;break}_=V.lens[V.have-1],Xt=3+(3&Ct),Ct>>>=2,It-=2}else if(ue===17){for(Y=Ie+3;It<Y;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}It-=Ie,_=0,Xt=3+(7&(Ct>>>=Ie)),Ct>>>=3,It-=3}else{for(Y=Ie+7;It<Y;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}It-=Ie,_=0,Xt=11+(127&(Ct>>>=Ie)),Ct>>>=7,It-=7}if(V.have+Xt>V.nlen+V.ndist){X.msg="invalid bit length repeat",V.mode=30;break}for(;Xt--;)V.lens[V.have++]=_}}if(V.mode===30)break;if(V.lens[256]===0){X.msg="invalid code -- missing end-of-block",V.mode=30;break}if(V.lenbits=9,J={bits:V.lenbits},bt=Q(st,V.lens,0,V.nlen,V.lencode,0,V.work,J),V.lenbits=J.bits,bt){X.msg="invalid literal/lengths set",V.mode=30;break}if(V.distbits=6,V.distcode=V.distdyn,J={bits:V.distbits},bt=Q(q,V.lens,V.nlen,V.ndist,V.distcode,0,V.work,J),V.distbits=J.bits,bt){X.msg="invalid distances set",V.mode=30;break}if(V.mode=20,Et===6)break t;case 20:V.mode=21;case 21:if(6<=Vt&&258<=$t){X.next_out=qt,X.avail_out=$t,X.next_in=Lt,X.avail_in=Vt,V.hold=Ct,V.bits=It,F(X,Yt),qt=X.next_out,jt=X.output,$t=X.avail_out,Lt=X.next_in,Nt=X.input,Vt=X.avail_in,Ct=V.hold,It=V.bits,V.mode===12&&(V.back=-1);break}for(V.back=0;Me=(H=V.lencode[Ct&(1<<V.lenbits)-1])>>>16&255,ue=65535&H,!((Ie=H>>>24)<=It);){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(Me&&!(240&Me)){for(R=Ie,at=Me,yt=ue;Me=(H=V.lencode[yt+((Ct&(1<<R+at)-1)>>R)])>>>16&255,ue=65535&H,!(R+(Ie=H>>>24)<=It);){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}Ct>>>=R,It-=R,V.back+=R}if(Ct>>>=Ie,It-=Ie,V.back+=Ie,V.length=ue,Me===0){V.mode=26;break}if(32&Me){V.back=-1,V.mode=12;break}if(64&Me){X.msg="invalid literal/length code",V.mode=30;break}V.extra=15&Me,V.mode=22;case 22:if(V.extra){for(Y=V.extra;It<Y;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}V.length+=Ct&(1<<V.extra)-1,Ct>>>=V.extra,It-=V.extra,V.back+=V.extra}V.was=V.length,V.mode=23;case 23:for(;Me=(H=V.distcode[Ct&(1<<V.distbits)-1])>>>16&255,ue=65535&H,!((Ie=H>>>24)<=It);){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(!(240&Me)){for(R=Ie,at=Me,yt=ue;Me=(H=V.distcode[yt+((Ct&(1<<R+at)-1)>>R)])>>>16&255,ue=65535&H,!(R+(Ie=H>>>24)<=It);){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}Ct>>>=R,It-=R,V.back+=R}if(Ct>>>=Ie,It-=Ie,V.back+=Ie,64&Me){X.msg="invalid distance code",V.mode=30;break}V.offset=ue,V.extra=15&Me,V.mode=24;case 24:if(V.extra){for(Y=V.extra;It<Y;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}V.offset+=Ct&(1<<V.extra)-1,Ct>>>=V.extra,It-=V.extra,V.back+=V.extra}if(V.offset>V.dmax){X.msg="invalid distance too far back",V.mode=30;break}V.mode=25;case 25:if($t===0)break t;if(Xt=Yt-$t,V.offset>Xt){if((Xt=V.offset-Xt)>V.whave&&V.sane){X.msg="invalid distance too far back",V.mode=30;break}De=Xt>V.wnext?(Xt-=V.wnext,V.wsize-Xt):V.wnext-Xt,Xt>V.length&&(Xt=V.length),Xe=V.window}else Xe=jt,De=qt-V.offset,Xt=V.length;for($t<Xt&&(Xt=$t),$t-=Xt,V.length-=Xt;jt[qt++]=Xe[De++],--Xt;);V.length===0&&(V.mode=21);break;case 26:if($t===0)break t;jt[qt++]=V.length,$t--,V.mode=21;break;case 27:if(V.wrap){for(;It<32;){if(Vt===0)break t;Vt--,Ct|=Nt[Lt++]<<It,It+=8}if(Yt-=$t,X.total_out+=Yt,V.total+=Yt,Yt&&(X.adler=V.check=V.flags?x(V.check,jt,Yt,qt-Yt):E(V.check,jt,Yt,qt-Yt)),Yt=$t,(V.flags?Ct:$(Ct))!==V.check){X.msg="incorrect data check",V.mode=30;break}It=Ct=0}V.mode=28;case 28:if(V.wrap&&V.flags){for(;It<32;){if(Vt===0)break t;Vt--,Ct+=Nt[Lt++]<<It,It+=8}if(Ct!==(4294967295&V.total)){X.msg="incorrect length check",V.mode=30;break}It=Ct=0}V.mode=29;case 29:bt=1;break t;case 30:bt=-3;break t;case 31:return-4;default:return T}return X.next_out=qt,X.avail_out=$t,X.next_in=Lt,X.avail_in=Vt,V.hold=Ct,V.bits=It,(V.wsize||Yt!==X.avail_out&&V.mode<30&&(V.mode<27||Et!==4))&&Dt(X,X.output,X.next_out,Yt-X.avail_out)?(V.mode=31,-4):(ae-=X.avail_in,Yt-=X.avail_out,X.total_in+=ae,X.total_out+=Yt,V.total+=Yt,V.wrap&&Yt&&(X.adler=V.check=V.flags?x(V.check,jt,Yt,X.next_out-Yt):E(V.check,jt,Yt,X.next_out-Yt)),X.data_type=V.bits+(V.last?64:0)+(V.mode===12?128:0)+(V.mode===20||V.mode===15?256:0),(ae==0&&Yt===0||Et===4)&&bt===W&&(bt=-5),bt)},b.inflateEnd=function(X){if(!X||!X.state)return T;var Et=X.state;return Et.window&&(Et.window=null),X.state=null,W},b.inflateGetHeader=function(X,Et){var V;return X&&X.state&&2&(V=X.state).wrap?((V.head=Et).done=!1,W):T},b.inflateSetDictionary=function(X,Et){var V,Nt=Et.length;return X&&X.state?(V=X.state).wrap!==0&&V.mode!==11?T:V.mode===11&&E(1,Et,Nt,0)!==V.check?-3:Dt(X,Et,Nt,Nt)?(V.mode=31,-4):(V.havedict=1,W):T},b.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(m,k,b){var C=m("../utils/common"),E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],x=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Q=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];k.exports=function(st,q,W,T,it,U,rt,$){var O,N,I,G,ut,B,mt,A,Mt,Dt=$.bits,X=0,Et=0,V=0,Nt=0,jt=0,Lt=0,qt=0,Vt=0,$t=0,Ct=0,It=null,ae=0,Yt=new C.Buf16(16),Xt=new C.Buf16(16),De=null,Xe=0;for(X=0;X<=15;X++)Yt[X]=0;for(Et=0;Et<T;Et++)Yt[q[W+Et]]++;for(jt=Dt,Nt=15;1<=Nt&&Yt[Nt]===0;Nt--);if(Nt<jt&&(jt=Nt),Nt===0)return it[U++]=20971520,it[U++]=20971520,$.bits=1,0;for(V=1;V<Nt&&Yt[V]===0;V++);for(jt<V&&(jt=V),X=Vt=1;X<=15;X++)if(Vt<<=1,(Vt-=Yt[X])<0)return-1;if(0<Vt&&(st===0||Nt!==1))return-1;for(Xt[1]=0,X=1;X<15;X++)Xt[X+1]=Xt[X]+Yt[X];for(Et=0;Et<T;Et++)q[W+Et]!==0&&(rt[Xt[q[W+Et]]++]=Et);if(B=st===0?(It=De=rt,19):st===1?(It=E,ae-=257,De=x,Xe-=257,256):(It=F,De=Q,-1),X=V,ut=U,qt=Et=Ct=0,I=-1,G=($t=1<<(Lt=jt))-1,st===1&&852<$t||st===2&&592<$t)return 1;for(;;){for(mt=X-qt,Mt=rt[Et]<B?(A=0,rt[Et]):rt[Et]>B?(A=De[Xe+rt[Et]],It[ae+rt[Et]]):(A=96,0),O=1<<X-qt,V=N=1<<Lt;it[ut+(Ct>>qt)+(N-=O)]=mt<<24|A<<16|Mt|0,N!==0;);for(O=1<<X-1;Ct&O;)O>>=1;if(O!==0?(Ct&=O-1,Ct+=O):Ct=0,Et++,--Yt[X]==0){if(X===Nt)break;X=q[W+rt[Et]]}if(jt<X&&(Ct&G)!==I){for(qt===0&&(qt=jt),ut+=V,Vt=1<<(Lt=X-qt);Lt+qt<Nt&&!((Vt-=Yt[Lt+qt])<=0);)Lt++,Vt<<=1;if($t+=1<<Lt,st===1&&852<$t||st===2&&592<$t)return 1;it[I=Ct&G]=jt<<24|Lt<<16|ut-U|0}}return Ct!==0&&(it[ut+Ct]=X-qt<<24|4194304|0),$.bits=jt,0}},{"../utils/common":41}],51:[function(m,k,b){k.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(m,k,b){var C=m("../utils/common"),E=0,x=1;function F(H){for(var Tt=H.length;0<=--Tt;)H[Tt]=0}var Q=0,st=29,q=256,W=q+1+st,T=30,it=19,U=2*W+1,rt=15,$=16,O=7,N=256,I=16,G=17,ut=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],mt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Dt=new Array(2*(W+2));F(Dt);var X=new Array(2*T);F(X);var Et=new Array(512);F(Et);var V=new Array(256);F(V);var Nt=new Array(st);F(Nt);var jt,Lt,qt,Vt=new Array(T);function $t(H,Tt,te,Qt,Ut){this.static_tree=H,this.extra_bits=Tt,this.extra_base=te,this.elems=Qt,this.max_length=Ut,this.has_stree=H&&H.length}function Ct(H,Tt){this.dyn_tree=H,this.max_code=0,this.stat_desc=Tt}function It(H){return H<256?Et[H]:Et[256+(H>>>7)]}function ae(H,Tt){H.pending_buf[H.pending++]=255&Tt,H.pending_buf[H.pending++]=Tt>>>8&255}function Yt(H,Tt,te){H.bi_valid>$-te?(H.bi_buf|=Tt<<H.bi_valid&65535,ae(H,H.bi_buf),H.bi_buf=Tt>>$-H.bi_valid,H.bi_valid+=te-$):(H.bi_buf|=Tt<<H.bi_valid&65535,H.bi_valid+=te)}function Xt(H,Tt,te){Yt(H,te[2*Tt],te[2*Tt+1])}function De(H,Tt){for(var te=0;te|=1&H,H>>>=1,te<<=1,0<--Tt;);return te>>>1}function Xe(H,Tt,te){var Qt,Ut,se=new Array(rt+1),ee=0;for(Qt=1;Qt<=rt;Qt++)se[Qt]=ee=ee+te[Qt-1]<<1;for(Ut=0;Ut<=Tt;Ut++){var ce=H[2*Ut+1];ce!==0&&(H[2*Ut]=De(se[ce]++,ce))}}function Ie(H){var Tt;for(Tt=0;Tt<W;Tt++)H.dyn_ltree[2*Tt]=0;for(Tt=0;Tt<T;Tt++)H.dyn_dtree[2*Tt]=0;for(Tt=0;Tt<it;Tt++)H.bl_tree[2*Tt]=0;H.dyn_ltree[2*N]=1,H.opt_len=H.static_len=0,H.last_lit=H.matches=0}function Me(H){8<H.bi_valid?ae(H,H.bi_buf):0<H.bi_valid&&(H.pending_buf[H.pending++]=H.bi_buf),H.bi_buf=0,H.bi_valid=0}function ue(H,Tt,te,Qt){var Ut=2*Tt,se=2*te;return H[Ut]<H[se]||H[Ut]===H[se]&&Qt[Tt]<=Qt[te]}function R(H,Tt,te){for(var Qt=H.heap[te],Ut=te<<1;Ut<=H.heap_len&&(Ut<H.heap_len&&ue(Tt,H.heap[Ut+1],H.heap[Ut],H.depth)&&Ut++,!ue(Tt,Qt,H.heap[Ut],H.depth));)H.heap[te]=H.heap[Ut],te=Ut,Ut<<=1;H.heap[te]=Qt}function at(H,Tt,te){var Qt,Ut,se,ee,ce=0;if(H.last_lit!==0)for(;Qt=H.pending_buf[H.d_buf+2*ce]<<8|H.pending_buf[H.d_buf+2*ce+1],Ut=H.pending_buf[H.l_buf+ce],ce++,Qt===0?Xt(H,Ut,Tt):(Xt(H,(se=V[Ut])+q+1,Tt),(ee=B[se])!==0&&Yt(H,Ut-=Nt[se],ee),Xt(H,se=It(--Qt),te),(ee=mt[se])!==0&&Yt(H,Qt-=Vt[se],ee)),ce<H.last_lit;);Xt(H,N,Tt)}function yt(H,Tt){var te,Qt,Ut,se=Tt.dyn_tree,ee=Tt.stat_desc.static_tree,ce=Tt.stat_desc.has_stree,xe=Tt.stat_desc.elems,Ae=-1;for(H.heap_len=0,H.heap_max=U,te=0;te<xe;te++)se[2*te]!==0?(H.heap[++H.heap_len]=Ae=te,H.depth[te]=0):se[2*te+1]=0;for(;H.heap_len<2;)se[2*(Ut=H.heap[++H.heap_len]=Ae<2?++Ae:0)]=1,H.depth[Ut]=0,H.opt_len--,ce&&(H.static_len-=ee[2*Ut+1]);for(Tt.max_code=Ae,te=H.heap_len>>1;1<=te;te--)R(H,se,te);for(Ut=xe;te=H.heap[1],H.heap[1]=H.heap[H.heap_len--],R(H,se,1),Qt=H.heap[1],H.heap[--H.heap_max]=te,H.heap[--H.heap_max]=Qt,se[2*Ut]=se[2*te]+se[2*Qt],H.depth[Ut]=(H.depth[te]>=H.depth[Qt]?H.depth[te]:H.depth[Qt])+1,se[2*te+1]=se[2*Qt+1]=Ut,H.heap[1]=Ut++,R(H,se,1),2<=H.heap_len;);H.heap[--H.heap_max]=H.heap[1],function(Ve,Se){var hr,Le,nr,ze,xr,mr,Sr=Se.dyn_tree,ot=Se.max_code,Pt=Se.stat_desc.static_tree,Ht=Se.stat_desc.has_stree,ne=Se.stat_desc.extra_bits,_e=Se.stat_desc.extra_base,Fe=Se.stat_desc.max_length,$e=0;for(ze=0;ze<=rt;ze++)Ve.bl_count[ze]=0;for(Sr[2*Ve.heap[Ve.heap_max]+1]=0,hr=Ve.heap_max+1;hr<U;hr++)Fe<(ze=Sr[2*Sr[2*(Le=Ve.heap[hr])+1]+1]+1)&&(ze=Fe,$e++),Sr[2*Le+1]=ze,ot<Le||(Ve.bl_count[ze]++,xr=0,_e<=Le&&(xr=ne[Le-_e]),mr=Sr[2*Le],Ve.opt_len+=mr*(ze+xr),Ht&&(Ve.static_len+=mr*(Pt[2*Le+1]+xr)));if($e!==0){do{for(ze=Fe-1;Ve.bl_count[ze]===0;)ze--;Ve.bl_count[ze]--,Ve.bl_count[ze+1]+=2,Ve.bl_count[Fe]--,$e-=2}while(0<$e);for(ze=Fe;ze!==0;ze--)for(Le=Ve.bl_count[ze];Le!==0;)ot<(nr=Ve.heap[--hr])||(Sr[2*nr+1]!==ze&&(Ve.opt_len+=(ze-Sr[2*nr+1])*Sr[2*nr],Sr[2*nr+1]=ze),Le--)}}(H,Tt),Xe(se,Ae,H.bl_count)}function _(H,Tt,te){var Qt,Ut,se=-1,ee=Tt[1],ce=0,xe=7,Ae=4;for(ee===0&&(xe=138,Ae=3),Tt[2*(te+1)+1]=65535,Qt=0;Qt<=te;Qt++)Ut=ee,ee=Tt[2*(Qt+1)+1],++ce<xe&&Ut===ee||(ce<Ae?H.bl_tree[2*Ut]+=ce:Ut!==0?(Ut!==se&&H.bl_tree[2*Ut]++,H.bl_tree[2*I]++):ce<=10?H.bl_tree[2*G]++:H.bl_tree[2*ut]++,se=Ut,Ae=(ce=0)===ee?(xe=138,3):Ut===ee?(xe=6,3):(xe=7,4))}function bt(H,Tt,te){var Qt,Ut,se=-1,ee=Tt[1],ce=0,xe=7,Ae=4;for(ee===0&&(xe=138,Ae=3),Qt=0;Qt<=te;Qt++)if(Ut=ee,ee=Tt[2*(Qt+1)+1],!(++ce<xe&&Ut===ee)){if(ce<Ae)for(;Xt(H,Ut,H.bl_tree),--ce!=0;);else Ut!==0?(Ut!==se&&(Xt(H,Ut,H.bl_tree),ce--),Xt(H,I,H.bl_tree),Yt(H,ce-3,2)):ce<=10?(Xt(H,G,H.bl_tree),Yt(H,ce-3,3)):(Xt(H,ut,H.bl_tree),Yt(H,ce-11,7));se=Ut,Ae=(ce=0)===ee?(xe=138,3):Ut===ee?(xe=6,3):(xe=7,4)}}F(Vt);var J=!1;function Y(H,Tt,te,Qt){Yt(H,(Q<<1)+(Qt?1:0),3),function(Ut,se,ee,ce){Me(Ut),ce&&(ae(Ut,ee),ae(Ut,~ee)),C.arraySet(Ut.pending_buf,Ut.window,se,ee,Ut.pending),Ut.pending+=ee}(H,Tt,te,!0)}b._tr_init=function(H){J||(function(){var Tt,te,Qt,Ut,se,ee=new Array(rt+1);for(Ut=Qt=0;Ut<st-1;Ut++)for(Nt[Ut]=Qt,Tt=0;Tt<1<<B[Ut];Tt++)V[Qt++]=Ut;for(V[Qt-1]=Ut,Ut=se=0;Ut<16;Ut++)for(Vt[Ut]=se,Tt=0;Tt<1<<mt[Ut];Tt++)Et[se++]=Ut;for(se>>=7;Ut<T;Ut++)for(Vt[Ut]=se<<7,Tt=0;Tt<1<<mt[Ut]-7;Tt++)Et[256+se++]=Ut;for(te=0;te<=rt;te++)ee[te]=0;for(Tt=0;Tt<=143;)Dt[2*Tt+1]=8,Tt++,ee[8]++;for(;Tt<=255;)Dt[2*Tt+1]=9,Tt++,ee[9]++;for(;Tt<=279;)Dt[2*Tt+1]=7,Tt++,ee[7]++;for(;Tt<=287;)Dt[2*Tt+1]=8,Tt++,ee[8]++;for(Xe(Dt,W+1,ee),Tt=0;Tt<T;Tt++)X[2*Tt+1]=5,X[2*Tt]=De(Tt,5);jt=new $t(Dt,B,q+1,W,rt),Lt=new $t(X,mt,0,T,rt),qt=new $t(new Array(0),A,0,it,O)}(),J=!0),H.l_desc=new Ct(H.dyn_ltree,jt),H.d_desc=new Ct(H.dyn_dtree,Lt),H.bl_desc=new Ct(H.bl_tree,qt),H.bi_buf=0,H.bi_valid=0,Ie(H)},b._tr_stored_block=Y,b._tr_flush_block=function(H,Tt,te,Qt){var Ut,se,ee=0;0<H.level?(H.strm.data_type===2&&(H.strm.data_type=function(ce){var xe,Ae=4093624447;for(xe=0;xe<=31;xe++,Ae>>>=1)if(1&Ae&&ce.dyn_ltree[2*xe]!==0)return E;if(ce.dyn_ltree[18]!==0||ce.dyn_ltree[20]!==0||ce.dyn_ltree[26]!==0)return x;for(xe=32;xe<q;xe++)if(ce.dyn_ltree[2*xe]!==0)return x;return E}(H)),yt(H,H.l_desc),yt(H,H.d_desc),ee=function(ce){var xe;for(_(ce,ce.dyn_ltree,ce.l_desc.max_code),_(ce,ce.dyn_dtree,ce.d_desc.max_code),yt(ce,ce.bl_desc),xe=it-1;3<=xe&&ce.bl_tree[2*Mt[xe]+1]===0;xe--);return ce.opt_len+=3*(xe+1)+5+5+4,xe}(H),Ut=H.opt_len+3+7>>>3,(se=H.static_len+3+7>>>3)<=Ut&&(Ut=se)):Ut=se=te+5,te+4<=Ut&&Tt!==-1?Y(H,Tt,te,Qt):H.strategy===4||se===Ut?(Yt(H,2+(Qt?1:0),3),at(H,Dt,X)):(Yt(H,4+(Qt?1:0),3),function(ce,xe,Ae,Ve){var Se;for(Yt(ce,xe-257,5),Yt(ce,Ae-1,5),Yt(ce,Ve-4,4),Se=0;Se<Ve;Se++)Yt(ce,ce.bl_tree[2*Mt[Se]+1],3);bt(ce,ce.dyn_ltree,xe-1),bt(ce,ce.dyn_dtree,Ae-1)}(H,H.l_desc.max_code+1,H.d_desc.max_code+1,ee+1),at(H,H.dyn_ltree,H.dyn_dtree)),Ie(H),Qt&&Me(H)},b._tr_tally=function(H,Tt,te){return H.pending_buf[H.d_buf+2*H.last_lit]=Tt>>>8&255,H.pending_buf[H.d_buf+2*H.last_lit+1]=255&Tt,H.pending_buf[H.l_buf+H.last_lit]=255&te,H.last_lit++,Tt===0?H.dyn_ltree[2*te]++:(H.matches++,Tt--,H.dyn_ltree[2*(V[te]+q+1)]++,H.dyn_dtree[2*It(Tt)]++),H.last_lit===H.lit_bufsize-1},b._tr_align=function(H){Yt(H,2,3),Xt(H,N,Dt),function(Tt){Tt.bi_valid===16?(ae(Tt,Tt.bi_buf),Tt.bi_buf=0,Tt.bi_valid=0):8<=Tt.bi_valid&&(Tt.pending_buf[Tt.pending++]=255&Tt.bi_buf,Tt.bi_buf>>=8,Tt.bi_valid-=8)}(H)}},{"../utils/common":41}],53:[function(m,k,b){k.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(m,k,b){(function(C){(function(E,x){if(!E.setImmediate){var F,Q,st,q,W=1,T={},it=!1,U=E.document,rt=Object.getPrototypeOf&&Object.getPrototypeOf(E);rt=rt&&rt.setTimeout?rt:E,F={}.toString.call(E.process)==="[object process]"?function(I){process.nextTick(function(){O(I)})}:function(){if(E.postMessage&&!E.importScripts){var I=!0,G=E.onmessage;return E.onmessage=function(){I=!1},E.postMessage("","*"),E.onmessage=G,I}}()?(q="setImmediate$"+Math.random()+"$",E.addEventListener?E.addEventListener("message",N,!1):E.attachEvent("onmessage",N),function(I){E.postMessage(q+I,"*")}):E.MessageChannel?((st=new MessageChannel).port1.onmessage=function(I){O(I.data)},function(I){st.port2.postMessage(I)}):U&&"onreadystatechange"in U.createElement("script")?(Q=U.documentElement,function(I){var G=U.createElement("script");G.onreadystatechange=function(){O(I),G.onreadystatechange=null,Q.removeChild(G),G=null},Q.appendChild(G)}):function(I){setTimeout(O,0,I)},rt.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var G=new Array(arguments.length-1),ut=0;ut<G.length;ut++)G[ut]=arguments[ut+1];var B={callback:I,args:G};return T[W]=B,F(W),W++},rt.clearImmediate=$}function $(I){delete T[I]}function O(I){if(it)setTimeout(O,0,I);else{var G=T[I];if(G){it=!0;try{(function(ut){var B=ut.callback,mt=ut.args;switch(mt.length){case 0:B();break;case 1:B(mt[0]);break;case 2:B(mt[0],mt[1]);break;case 3:B(mt[0],mt[1],mt[2]);break;default:B.apply(x,mt)}})(G)}finally{$(I),it=!1}}}}function N(I){I.source===E&&typeof I.data=="string"&&I.data.indexOf(q)===0&&O(+I.data.slice(q.length))}})(typeof self>"u"?C===void 0?this:C:self)}).call(this,et.g!==void 0?et.g:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}},St={};function Rt(lt){var K=St[lt];if(K!==void 0)return K.exports;var et=St[lt]={exports:{}};return kt[lt].call(et.exports,et,et.exports,Rt),et.exports}Rt.n=lt=>{var K=lt&&lt.__esModule?()=>lt.default:()=>lt;return Rt.d(K,{a:K}),K},Rt.d=(lt,K)=>{for(var et in K)Rt.o(K,et)&&!Rt.o(lt,et)&&Object.defineProperty(lt,et,{enumerable:!0,get:K[et]})},Rt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Rt.o=(lt,K)=>Object.prototype.hasOwnProperty.call(lt,K),Rt.r=lt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(lt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(lt,"__esModule",{value:!0})};var gt={};return(()=>{Rt.r(gt),Rt.d(gt,{default:()=>E});var lt=Rt(162),K=Rt.n(lt),et=Rt(733),m=Rt.n(et),k=function(){return k=Object.assign||function(x){for(var F,Q=1,st=arguments.length;Q<st;Q++)for(var q in F=arguments[Q])Object.prototype.hasOwnProperty.call(F,q)&&(x[q]=F[q]);return x},k.apply(this,arguments)},b=function(x,F,Q,st){return new(Q||(Q=Promise))(function(q,W){function T(rt){try{U(st.next(rt))}catch($){W($)}}function it(rt){try{U(st.throw(rt))}catch($){W($)}}function U(rt){var $;rt.done?q(rt.value):($=rt.value,$ instanceof Q?$:new Q(function(O){O($)})).then(T,it)}U((st=st.apply(x,F||[])).next())})},C=function(x,F){var Q,st,q,W,T={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]};return W={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function it(U){return function(rt){return function($){if(Q)throw new TypeError("Generator is already executing.");for(;W&&(W=0,$[0]&&(T=0)),T;)try{if(Q=1,st&&(q=2&$[0]?st.return:$[0]?st.throw||((q=st.return)&&q.call(st),0):st.next)&&!(q=q.call(st,$[1])).done)return q;switch(st=0,q&&($=[2&$[0],q.value]),$[0]){case 0:case 1:q=$;break;case 4:return T.label++,{value:$[1],done:!1};case 5:T.label++,st=$[1],$=[0];continue;case 7:$=T.ops.pop(),T.trys.pop();continue;default:if(q=T.trys,!((q=q.length>0&&q[q.length-1])||$[0]!==6&&$[0]!==2)){T=0;continue}if($[0]===3&&(!q||$[1]>q[0]&&$[1]<q[3])){T.label=$[1];break}if($[0]===6&&T.label<q[1]){T.label=q[1],q=$;break}if(q&&T.label<q[2]){T.label=q[2],T.ops.push($);break}q[2]&&T.ops.pop(),T.trys.pop();continue}$=F.call(x,T)}catch(O){$=[6,O],st=0}finally{Q=q=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([U,rt])}}};const E=function(x,F){F===void 0&&(F={});var Q=x.getConfig("stylePrefix"),st="gjs-export-zip",q=k({addExportBtn:!0,btnLabel:"Export to ZIP",filenamePfx:"grapesjs_template",filename:void 0,done:function(){},onError:console.error,root:{css:{"style.css":function(W){return W.getCss()}},"index.html":function(W){return`<!doctype html>
        <html lang="en">
          <head>
            <meta charset="utf-8">
            <link rel="stylesheet" href="./css/style.css">
          </head>
          <body>`.concat(W.getHtml(),`</body>
        </html>`)}},isBinary:void 0},F);x.Commands.add(st,{run:function(W,T,it){var U=this;it===void 0&&(it={});var rt=new(m()),$=it.onError||q.onError,O=it.root||q.root;this.createDirectory(rt,O).then(function(){return b(U,void 0,void 0,function(){var N,I,G,ut,B;return C(this,function(mt){switch(mt.label){case 0:return[4,rt.generateAsync({type:"blob"})];case 1:return N=mt.sent(),I=it.filename||q.filename,G=it.done||q.done,ut=it.filenamePfx||q.filenamePfx,B=I?I(W):"".concat(ut,"_").concat(Date.now(),".zip"),K().saveAs(N,B),G==null||G(),[2]}})})}).catch($)},createFile:function(W,T,it){var U={},rt=T.split(".")[1];(q.isBinary?q.isBinary(it,T):!(rt&&["html","css"].indexOf(rt)>=0||/^[\x00-\x7F]*$/.test(it)))&&(U.binary=!0),x.log("Create file",{ns:"plugin-export",name:T,content:it,opts:U}),W.file(T,it,U)},createDirectory:function(W,T){return b(this,void 0,void 0,function(){var it,U,rt,$,O,N,I,G,ut,B;return C(this,function(mt){switch(mt.label){case 0:return typeof T!="function"?[3,2]:[4,T(x)];case 1:return it=mt.sent(),[3,3];case 2:it=T,mt.label=3;case 3:for($ in rt=[],U=T=it)rt.push($);O=0,mt.label=4;case 4:return O<rt.length?($=rt[O])in U?(N=$,T.hasOwnProperty(N)?typeof(I=T[N])!="function"?[3,6]:[4,I(x)]:[3,10]):[3,10]:[3,11];case 5:return G=mt.sent(),[3,7];case 6:G=I,mt.label=7;case 7:return(ut=typeof(I=G))!="string"?[3,8]:(this.createFile(W,N,I),[3,10]);case 8:return ut!=="object"?[3,10]:(B=W.folder(N),[4,this.createDirectory(B,I)]);case 9:mt.sent(),mt.label=10;case 10:return O++,[3,4];case 11:return[2]}})})}}),x.onReady(function(){if(q.addExportBtn){var W=document.createElement("button");W.innerHTML=q.btnLabel,W.className="".concat(Q,"btn-prim"),W.type="button",x.on("run:export-template",function(){var T=x.Modal.getContentEl();T==null||T.appendChild(W),W.onclick=function(){return x.runCommand(st)}})}})}})(),gt})())})(Dh);var E_=Dh.exports;const P_=np(E_);function Ih(){const L=localStorage.getItem("pages");return L?JSON.parse(L):[]}function k_(L){const ct=Ih();return ct.push(L),localStorage.setItem("pages",JSON.stringify(ct)),ct}function Ph(L){document.getElementById(L).style.display="none"}function kh(L,ct="block"){document.getElementById(L).style.display=ct}function A_(L,ct,kt){const St=document.getElementById(L);L_(St),ct.forEach((Rt,gt)=>{const lt=document.createElement("option");lt.value=Rt,lt.innerHTML=Rt,(!kt&&gt===0||kt===Rt)&&lt.setAttribute("selected","true"),St.append(lt)})}function L_(L){var ct,kt=L.options.length-1;for(ct=kt;ct>=0;ct--)L.remove(ct)}let wf;M_();let Ol,ku=Ih();jh();ku.length>0&&ip(ku[0]);function jh(){ku.length===0?(["gjs","page-select"].forEach(L=>Ph(L)),["no-pages"].forEach(L=>kh(L))):(["gjs","page-select"].forEach(L=>kh(L)),["no-pages"].forEach(L=>Ph(L)),A_("page-select-input",ku,Ol))}async function ip(L){Ol=L;const ct=await wf.load();wf.loadProjectData(ct)}function M_(){const L=ct=>{ct.Storage.add("multiple-local",{async load(){const kt=localStorage.getItem(Ol);return JSON.parse(kt||`{"assets":[],"styles":[{"selectors":["#i2uh"],"style":{"padding":"10px"}}],"pages":[{"frames":[{"component":{"type":"wrapper","stylable":["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"],"components":[{"type":"text","attributes":{"id":"i2uh"},"components":[{"type":"textnode","content":"Page ${Ol}"}]}]},"id":"axPb4D38eV0fjesh"}],"type":"main","id":"11NzNDte1iwu5z9c"}]}`)},async store(kt){localStorage.setItem(Ol,JSON.stringify(kt))}})};document.getElementById("gjs").childNodes.forEach(ct=>ct.remove()),wf=x_.init({container:"#gjs",plugins:[ct=>T_(ct,{}),ct=>S_(ct,{}),ct=>P_(ct,{}),ct=>L(ct)],showOffsets:!0,noticeOnUnload:!1,storageManager:{type:"multiple-local",autosave:!0,autoload:!0,stepsBeforeSave:1,options:{}},fromElement:!0})}document.getElementById("download-btn").onclick=function(){D_()};function D_(){wf.runCommand("gjs-export-zip",{filename:()=>Ol})}document.getElementById("page-add-btn").onclick=function(){I_()};function I_(){const L=document.getElementById("page-add-input"),ct=L.value;ku=k_(ct),ip(ct),jh(),L.value=""}const j_=document.getElementById("page-select-input");j_.onchange=function(){R_()};function R_(){const ct=document.getElementById("page-select-input").value;ip(ct)}
